!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.Onairos=e(require("react")):t.Onairos=e(t.react)}(this,(t=>(()=>{var e,n,r,o,i={837:(t,e,n)=>{"use strict";var r=n(156),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(t,e,n){var r,i={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(u=e.ref),e)s.call(e,r)&&!c.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===i[r]&&(i[r]=e[r]);return{$$typeof:o,type:t,key:l,ref:u,props:i,_owner:a.current}}e.Fragment=i,e.jsx=l,e.jsxs=l},322:(t,e,n)=>{"use strict";t.exports=n(837)},317:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const r={}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(431);e.default=class{BigNum;constructor(){this.BigNum=(t,e)=>new(r.BigNumber.clone({DECIMAL_PLACES:e}))(t)}winstonToAr(t,{formatted:e=!1,decimals:n=12,trim:r=!0}={}){let o=this.stringToBigNum(t,n).shiftedBy(-12);return e?o.toFormat(n):o.toFixed(n)}arToWinston(t,{formatted:e=!1}={}){let n=this.stringToBigNum(t).shiftedBy(12);return e?n.toFormat():n.toFixed(0)}compare(t,e){let n=this.stringToBigNum(t),r=this.stringToBigNum(e);return n.comparedTo(r)}isEqual(t,e){return 0===this.compare(t,e)}isLessThan(t,e){let n=this.stringToBigNum(t),r=this.stringToBigNum(e);return n.isLessThan(r)}isGreaterThan(t,e){let n=this.stringToBigNum(t),r=this.stringToBigNum(e);return n.isGreaterThan(r)}add(t,e){let n=this.stringToBigNum(t);this.stringToBigNum(e);return n.plus(e).toFixed(0)}sub(t,e){let n=this.stringToBigNum(t);this.stringToBigNum(e);return n.minus(e).toFixed(0)}stringToBigNum(t,e=12){return this.BigNum(t,e)}}},759:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(498);n(317);class o{api;network;static HASH_ENDPOINT="block/hash/";static HEIGHT_ENDPOINT="block/height/";constructor(t,e){this.api=t,this.network=e}async get(t){const e=await this.api.get(`${o.HASH_ENDPOINT}${t}`);if(200===e.status)return e.data;throw 404===e.status?new r.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${e}`)}async getByHeight(t){const e=await this.api.get(`${o.HEIGHT_ENDPOINT}${t}`);if(200===e.status)return e.data;throw 404===e.status?new r.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${e}`)}async getCurrent(){const{current:t}=await this.network.getInfo();return await this.get(t)}}e.default=o},879:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(498),o=n(244);e.default=class{api;constructor(t){this.api=t}async getTransactionOffset(t){const e=await this.api.get(`tx/${t}/offset`);if(200===e.status)return e.data;throw new Error(`Unable to get transaction offset: ${(0,r.getError)(e)}`)}async getChunk(t){const e=await this.api.get(`chunk/${t}`);if(200===e.status)return e.data;throw new Error(`Unable to get chunk: ${(0,r.getError)(e)}`)}async getChunkData(t){const e=await this.getChunk(t);return o.b64UrlToBuffer(e.chunk)}firstChunkOffset(t){return parseInt(t.offset)-parseInt(t.size)+1}async downloadChunkedData(t){const e=await this.getTransactionOffset(t),n=parseInt(e.size),r=parseInt(e.offset)-n+1,o=new Uint8Array(n);let i=0;for(;i<n;){let t;this.api.config.logging&&console.log(`[chunk] ${i}/${n}`);try{t=await this.getChunkData(r+i)}catch(t){console.error(`[chunk] Failed to fetch chunk at offset ${r+i}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(!t)throw new Error(`Couldn't complete data download at ${i}/${n}`);o.set(t,i),i+=t.length}return o}}},536:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(586),o=n(874),i=n(363),s=n(248),a=n(935),c=n(927),l=n(825),u=n(244),h=n(243),d=n(879),f=n(759);class p{api;wallets;transactions;network;blocks;ar;silo;chunks;static init;static crypto=new i.default;static utils=u;constructor(t){this.api=new o.default(t),this.wallets=new c.default(this.api,p.crypto),this.chunks=new d.default(this.api),this.transactions=new a.default(this.api,p.crypto,this.chunks),this.silo=new h.default(this.api,this.crypto,this.transactions),this.network=new s.default(this.api),this.blocks=new f.default(this.api,this.network),this.ar=new r.default}get crypto(){return p.crypto}get utils(){return p.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(t,e){const n={};if(Object.assign(n,t),!(t.data||t.target&&t.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(null==t.owner&&e&&"use_wallet"!==e&&(n.owner=e.n),null==t.last_tx&&(n.last_tx=await this.transactions.getTransactionAnchor()),"string"==typeof t.data&&(t.data=u.stringToBuffer(t.data)),t.data instanceof ArrayBuffer&&(t.data=new Uint8Array(t.data)),t.data&&!(t.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(null==t.reward){const e=t.data?t.data.byteLength:0;n.reward=await this.transactions.getPrice(e,n.target)}n.data_root="",n.data_size=t.data?t.data.byteLength.toString():"0",n.data=t.data||new Uint8Array(0);const r=new l.default(n);return await r.getSignatureData(),r}async createSiloTransaction(t,e,n){const r={};if(Object.assign(r,t),!t.data)throw new Error("Silo transactions must have a 'data' value");if(!n)throw new Error("No Silo URI specified.");if(t.target||t.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(null==t.owner){if(!e||!e.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");r.owner=e.n}null==t.last_tx&&(r.last_tx=await this.transactions.getTransactionAnchor());const o=await this.silo.parseUri(n);if("string"==typeof t.data){const e=await this.crypto.encrypt(u.stringToBuffer(t.data),o.getEncryptionKey());r.reward=await this.transactions.getPrice(e.byteLength),r.data=u.bufferTob64Url(e)}if(t.data instanceof Uint8Array){const e=await this.crypto.encrypt(t.data,o.getEncryptionKey());r.reward=await this.transactions.getPrice(e.byteLength),r.data=u.bufferTob64Url(e)}const i=new l.default(r);return i.addTag("Silo-Name",o.getAccessKey()),i.addTag("Silo-Version","0.1.0"),i}arql(t){return this.api.post("/arql",t).then((t=>t.data||[]))}}e.default=p},386:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});const i=n(536),s=n(118);i.default.init=function(t={}){const e={host:"arweave.net",port:443,protocol:"https"};if("object"!=typeof location||!location.protocol||!location.hostname)return new i.default({...t,...e});const n=location.protocol.replace(":",""),r=location.hostname,o=location.port?parseInt(location.port):"https"==n?443:80,a=(0,s.getDefaultConfig)(n,r),c=t.protocol||a.protocol,l=t.host||a.host,u=t.port||a.port||o;return new i.default({...t,host:l,protocol:c,port:u})},"object"==typeof globalThis?globalThis.Arweave=i.default:"object"==typeof self&&(self.Arweave=i.default),o(n(536),e),e.default=i.default},874:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{METHOD_GET="GET";METHOD_POST="POST";config;constructor(t){this.applyConfig(t)}applyConfig(t){this.config=this.mergeDefaults(t)}getConfig(){return this.config}mergeDefaults(t){const e=t.protocol||"http",n=t.port||("https"===e?443:80);return{host:t.host||"127.0.0.1",protocol:e,port:n,timeout:t.timeout||2e4,logging:t.logging||!1,logger:t.logger||console.log,network:t.network}}async get(t,e){return await this.request(t,{...e,method:this.METHOD_GET})}async post(t,e,n){const r=new Headers(n?.headers||{});return r.get("content-type")?.includes("application/json")||r.append("content-type","application/json"),r.append("accept","application/json, text/plain, */*"),await this.request(t,{...n,method:this.METHOD_POST,body:"string"!=typeof e?JSON.stringify(e):e,headers:r})}async request(t,e){const r=new Headers(e?.headers||{}),o=`${this.config.protocol}://${this.config.host}:${this.config.port}`,i=e?.responseType;delete e?.responseType,t.startsWith("/")&&(t=t.slice(1)),this.config.network&&r.append("x-network",this.config.network),this.config.logging&&this.config.logger(`Requesting: ${o}/${t}`);let s=await fetch(`${o}/${t}`,{...e||{},headers:r});this.config.logging&&this.config.logger(`Response:   ${s.url} - ${s.status}`);const a=s.headers.get("content-type"),c=a?.match(/charset=([^()<>@,;:\"/[\]?.=\s]*)/i)?.[1],l=s,u=async()=>{if(c)try{l.data=new TextDecoder(c).decode(await s.arrayBuffer())}catch(t){l.data=await s.text()}else l.data=await s.text()};if("arraybuffer"===i)l.data=await s.arrayBuffer();else if("text"===i)await u();else if("webstream"===i)l.data=n(s.body);else try{let t=await s.clone().json();"object"!=typeof t?await u():l.data=await s.json(),t=null}catch{await u()}return l}};const n=t=>{const e=t;return void 0===e[Symbol.asyncIterator]?(e[Symbol.asyncIterator]=r(t),e):t},r=function(t){return async function*(){const e=t.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)return;yield n}}finally{e.releaseLock()}}}},363:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(244);e.default=class{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let t=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),e=await this.driver.exportKey("jwk",t.privateKey);return{kty:e.kty,e:e.e,n:e.n,d:e.d,p:e.p,q:e.q,dp:e.dp,dq:e.dq,qi:e.qi}}async sign(t,e,{saltLength:n}={}){let r=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(t),e);return new Uint8Array(r)}async hash(t,e="SHA-256"){let n=await this.driver.digest(e,t);return new Uint8Array(n)}async verify(t,e,n){const r={kty:"RSA",e:"AQAB",n:t},o=await this.jwkToPublicCryptoKey(r),i=await this.driver.digest("SHA-256",e),s=await this.driver.verify({name:"RSA-PSS",saltLength:0},o,n,e),a=await this.driver.verify({name:"RSA-PSS",saltLength:32},o,n,e),c=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((o.algorithm.modulusLength-1)/8)-i.byteLength-2},o,n,e);return s||a||c}async jwkToCryptoKey(t){return this.driver.importKey("jwk",t,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(t){return this.driver.importKey("jwk",t,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if("undefined"==typeof crypto)return!1;const t=crypto?.subtle;if(void 0===t)return!1;return["generateKey","importKey","exportKey","digest","sign"].every((e=>"function"==typeof t[e]))}async encrypt(t,e,n){const o=await this.driver.importKey("raw","string"==typeof e?r.stringToBuffer(e):e,{name:"PBKDF2",length:32},!1,["deriveKey"]),i=await this.driver.deriveKey({name:"PBKDF2",salt:n?r.stringToBuffer(n):r.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},o,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),s=new Uint8Array(16);crypto.getRandomValues(s);const a=await this.driver.encrypt({name:"AES-CBC",iv:s},i,t);return r.concatBuffers([s,a])}async decrypt(t,e,n){const o=await this.driver.importKey("raw","string"==typeof e?r.stringToBuffer(e):e,{name:"PBKDF2",length:32},!1,["deriveKey"]),i=await this.driver.deriveKey({name:"PBKDF2",salt:n?r.stringToBuffer(n):r.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},o,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),s=t.slice(0,16),a=await this.driver.decrypt({name:"AES-CBC",iv:s},i,t.slice(16));return r.concatBuffers([a])}}},921:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(536);async function o(t){if(Array.isArray(t)){const e=r.default.utils.concatBuffers([r.default.utils.stringToBuffer("list"),r.default.utils.stringToBuffer(t.length.toString())]);return await i(t,await r.default.crypto.hash(e,"SHA-384"))}const e=r.default.utils.concatBuffers([r.default.utils.stringToBuffer("blob"),r.default.utils.stringToBuffer(t.byteLength.toString())]),n=r.default.utils.concatBuffers([await r.default.crypto.hash(e,"SHA-384"),await r.default.crypto.hash(t,"SHA-384")]);return await r.default.crypto.hash(n,"SHA-384")}async function i(t,e){if(t.length<1)return e;const n=r.default.utils.concatBuffers([e,await o(t[0])]),s=await r.default.crypto.hash(n,"SHA-384");return await i(t.slice(1),s)}e.default=o},498:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getError=void 0;class n extends Error{type;response;constructor(t,e={}){e.message?super(e.message):super(),this.type=t,this.response=e.response}getType(){return this.type}}e.default=n,e.getError=function(t){let e=t.data;if("string"==typeof t.data)try{e=JSON.parse(t.data)}catch(t){}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch(t){}return e?e.error||e:t.statusText||"unknown"}},224:(t,e,n)=>{"use strict";var r=n(764).lW;Object.defineProperty(e,"__esModule",{value:!0}),e.debug=e.validatePath=e.arrayCompare=e.bufferToInt=e.intToBuffer=e.arrayFlatten=e.generateProofs=e.buildLayers=e.generateTransactionChunks=e.generateTree=e.computeRootHash=e.generateLeaves=e.chunkData=e.MIN_CHUNK_SIZE=e.MAX_CHUNK_SIZE=void 0;const o=n(536),i=n(244);e.MAX_CHUNK_SIZE=262144,e.MIN_CHUNK_SIZE=32768;const s=32,a=32;async function c(t){let n=[],r=t,i=0;for(;r.byteLength>=e.MAX_CHUNK_SIZE;){let t=e.MAX_CHUNK_SIZE,s=r.byteLength-e.MAX_CHUNK_SIZE;s>0&&s<e.MIN_CHUNK_SIZE&&(t=Math.ceil(r.byteLength/2));const a=r.slice(0,t),c=await o.default.crypto.hash(a);i+=a.byteLength,n.push({dataHash:c,minByteRange:i-a.byteLength,maxByteRange:i}),r=r.slice(t)}return n.push({dataHash:await o.default.crypto.hash(r),minByteRange:i,maxByteRange:i+r.byteLength}),n}async function l(t){return Promise.all(t.map((async({dataHash:t,minByteRange:e,maxByteRange:n})=>({type:"leaf",id:await g(await Promise.all([g(t),g(y(n))])),dataHash:t,minByteRange:e,maxByteRange:n}))))}async function u(t){return await h(await l(await c(t)))}async function h(t,e=0){if(t.length<2){return t[0]}const n=[];for(let e=0;e<t.length;e+=2)n.push(await m(t[e],t[e+1]));return h(n,e+1)}function d(t){const e=f(t);return Array.isArray(e)?p(e):[e]}function f(t,e=new Uint8Array,n=0){if("leaf"==t.type)return{offset:t.maxByteRange-1,proof:(0,i.concatBuffers)([e,t.dataHash,y(t.maxByteRange)])};if("branch"==t.type){const r=(0,i.concatBuffers)([e,t.leftChild.id,t.rightChild.id,y(t.byteRange)]);return[f(t.leftChild,r,n+1),f(t.rightChild,r,n+1)]}throw new Error("Unexpected node type")}function p(t){const e=[];return t.forEach((t=>{Array.isArray(t)?e.push(...p(t)):e.push(t)})),e}async function m(t,e){if(!e)return t;return{type:"branch",id:await g([await g(t.id),await g(e.id),await g(y(t.maxByteRange))]),byteRange:t.maxByteRange,maxByteRange:e.maxByteRange,leftChild:t,rightChild:e}}async function g(t){return Array.isArray(t)&&(t=o.default.utils.concatBuffers(t)),new Uint8Array(await o.default.crypto.hash(t))}function y(t){const e=new Uint8Array(s);for(var n=e.length-1;n>=0;n--){var r=t%256;e[n]=r,t=(t-r)/256}return e}function w(t){let e=0;for(var n=0;n<t.length;n++)e*=256,e+=t[n];return e}e.chunkData=c,e.generateLeaves=l,e.computeRootHash=async function(t){return(await u(t)).id},e.generateTree=u,e.generateTransactionChunks=async function(t){const e=await c(t),n=await l(e),r=await h(n),o=await d(r),i=e.slice(-1)[0];return i.maxByteRange-i.minByteRange==0&&(e.splice(e.length-1,1),o.splice(o.length-1,1)),{data_root:r.id,chunks:e,proofs:o}},e.buildLayers=h,e.generateProofs=d,e.arrayFlatten=p,e.intToBuffer=y,e.bufferToInt=w;e.arrayCompare=(t,e)=>t.every(((t,n)=>e[n]===t)),e.validatePath=async function t(n,r,o,i,c){if(i<=0)return!1;if(r>=i)return t(n,0,i-1,i,c);if(r<0)return t(n,0,0,i,c);if(c.length==a+s){const t=c.slice(0,a),r=c.slice(t.length,t.length+s),l=await g([await g(t),await g(r)]);return!!(0,e.arrayCompare)(n,l)&&{offset:i-1,leftBound:o,rightBound:i,chunkSize:i-o}}const l=c.slice(0,a),u=c.slice(l.length,l.length+a),h=c.slice(l.length+u.length,l.length+u.length+s),d=w(h),f=c.slice(l.length+u.length+h.length),p=await g([await g(l),await g(u),await g(h)]);return!!(0,e.arrayCompare)(n,p)&&(r<d?await t(l,r,o,Math.min(i,d),f):await t(u,r,Math.max(o,d),i,f))},e.debug=async function t(e,n=""){if(e.byteLength<1)return n;const o=e.slice(0,a),i=e.slice(o.length,o.length+a),c=e.slice(o.length+i.length,o.length+i.length+s),l=w(c),u=e.slice(o.length+i.length+c.length),h=await g([await g(o),await g(i),await g(c)]);return t(u,`${n}\n${JSON.stringify(r.from(o))},${JSON.stringify(r.from(i))},${l} => ${JSON.stringify(h)}`)}},246:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionUploader=void 0;const r=n(825),o=n(244),i=n(498),s=n(224),a=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"];class c{api;chunkIndex=0;txPosted=!1;transaction;lastRequestTimeEnd=0;totalErrors=0;data;lastResponseStatus=0;lastResponseError="";get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}constructor(t,e){if(this.api=t,!e.id)throw new Error("Transaction is not signed");if(!e.chunks)throw new Error("Transaction chunks not prepared");this.data=e.data,this.transaction=new r.default(Object.assign({},e,{data:new Uint8Array(0)}))}async uploadChunk(t){if(this.isComplete)throw new Error("Upload is already complete");if(""!==this.lastResponseError?this.totalErrors++:this.totalErrors=0,100===this.totalErrors)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let e=""===this.lastResponseError?0:Math.max(this.lastRequestTimeEnd+4e4-Date.now(),4e4);if(e>0&&(e-=e*Math.random()*.3,await new Promise((t=>setTimeout(t,e)))),this.lastResponseError="",!this.txPosted)return void await this.postTransaction();t&&(this.chunkIndex=t);const n=this.transaction.getChunk(t||this.chunkIndex,this.data);if(!await(0,s.validatePath)(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),o.b64UrlToBuffer(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const r=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch((t=>(console.error(t.message),{status:-1,data:{error:t.message}})));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=r.status,200==this.lastResponseStatus)this.chunkIndex++;else if(this.lastResponseError=(0,i.getError)(r),a.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(t,e,n){if(!e||"number"!=typeof e.chunkIndex||"object"!=typeof e.transaction)throw new Error("Serialized object does not match expected format.");var o=new r.default(e.transaction);o.chunks||await o.prepareChunks(n);const i=new c(t,o);if(i.chunkIndex=e.chunkIndex,i.lastRequestTimeEnd=e.lastRequestTimeEnd,i.lastResponseError=e.lastResponseError,i.lastResponseStatus=e.lastResponseStatus,i.txPosted=e.txPosted,i.data=n,i.transaction.data_root!==e.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return i}static async fromTransactionId(t,e){const n=await t.get(`tx/${e}`);if(200!==n.status)throw new Error(`Tx ${e} not found: ${n.status}`);const r=n.data;r.data=new Uint8Array(0);return{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:r}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=1){this.transaction.data=this.data;const t=await this.api.post("tx",this.transaction).catch((t=>(console.error(t),{status:-1,data:{error:t.message}})));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,this.transaction.data=new Uint8Array(0),t.status>=200&&t.status<300)return this.txPosted=!0,void(this.chunkIndex=1);throw this.lastResponseError=(0,i.getError)(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`)}const t=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,!(t.status>=200&&t.status<300))throw this.lastResponseError=(0,i.getError)(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`);this.txPosted=!0}}e.TransactionUploader=c},825:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=void 0;const r=n(244),o=n(921),i=n(224);class s{get(t,e){if(!Object.getOwnPropertyNames(this).includes(t))throw new Error(`Field "${t}" is not a property of the Arweave Transaction class.`);if(this[t]instanceof Uint8Array)return e&&e.decode&&e.string?r.bufferToString(this[t]):e&&e.decode&&!e.string?this[t]:r.bufferTob64Url(this[t]);if(this[t]instanceof Array){if(void 0!==e?.decode||void 0!==e?.string)throw"tags"===t&&console.warn("Did you mean to use 'transaction[\"tags\"]' ?"),new Error("Cannot decode or stringify an array.");return this[t]}return e&&1==e.decode?e&&e.string?r.b64UrlToString(this[t]):r.b64UrlToBuffer(this[t]):this[t]}}class a extends s{name;value;constructor(t,e,n=!1){super(),this.name=t,this.value=e}}e.Tag=a;e.default=class extends s{format=2;id="";last_tx="";owner="";tags=[];target="";quantity="0";data_size="0";data=new Uint8Array;data_root="";reward="0";signature="";chunks;constructor(t={}){super(),Object.assign(this,t),"string"==typeof this.data&&(this.data=r.b64UrlToBuffer(this.data)),t.tags&&(this.tags=t.tags.map((t=>new a(t.name,t.value))))}addTag(t,e){this.tags.push(new a(r.stringToB64Url(t),r.stringToB64Url(e)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:r.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(t){this.owner=t}setSignature({id:t,owner:e,reward:n,tags:r,signature:o}){this.id=t,this.owner=e,n&&(this.reward=n),r&&(this.tags=r),this.signature=o}async prepareChunks(t){!this.chunks&&t.byteLength>0&&(this.chunks=await(0,i.generateTransactionChunks)(t),this.data_root=r.bufferTob64Url(this.chunks.data_root)),this.chunks||0!==t.byteLength||(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(t,e){if(!this.chunks)throw new Error("Chunks have not been prepared");const n=this.chunks.proofs[t],o=this.chunks.chunks[t];return{data_root:this.data_root,data_size:this.data_size,data_path:r.bufferTob64Url(n.proof),offset:n.offset.toString(),chunk:r.bufferTob64Url(e.slice(o.minByteRange,o.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let t=this.tags.reduce(((t,e)=>r.concatBuffers([t,e.get("name",{decode:!0,string:!1}),e.get("value",{decode:!0,string:!1})])),new Uint8Array);return r.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),r.stringToBuffer(this.quantity),r.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),t]);case 2:this.data_root||await this.prepareChunks(this.data);const e=this.tags.map((t=>[t.get("name",{decode:!0,string:!1}),t.get("value",{decode:!0,string:!1})]));return await(0,o.default)([r.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),r.stringToBuffer(this.quantity),r.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),e,r.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}}},244:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.b64UrlDecode=e.b64UrlEncode=e.bufferTob64Url=e.bufferTob64=e.b64UrlToBuffer=e.stringToB64Url=e.stringToBuffer=e.bufferToString=e.b64UrlToString=e.concatBuffers=void 0;const r=n(742);function o(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}function i(t){return(new TextEncoder).encode(t)}function s(t){return new Uint8Array(r.toByteArray(u(t)))}function a(t){return r.fromByteArray(new Uint8Array(t))}function c(t){return l(a(t))}function l(t){try{return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}catch(t){throw new Error("Failed to encode string",{cause:t})}}function u(t){try{let e;return e=(t=t.replace(/\-/g,"+").replace(/\_/g,"/")).length%4==0?0:4-t.length%4,t.concat("=".repeat(e))}catch(t){throw new Error("Failed to decode string",{cause:t})}}e.concatBuffers=function(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n].byteLength;let n=new Uint8Array(e),r=0;n.set(new Uint8Array(t[0]),r),r+=t[0].byteLength;for(let e=1;e<t.length;e++)n.set(new Uint8Array(t[e]),r),r+=t[e].byteLength;return n},e.b64UrlToString=function(t){return o(s(t))},e.bufferToString=o,e.stringToBuffer=i,e.stringToB64Url=function(t){return c(i(t))},e.b64UrlToBuffer=s,e.bufferTob64=a,e.bufferTob64Url=c,e.b64UrlEncode=l,e.b64UrlDecode=u},118:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultConfig=void 0;e.getDefaultConfig=(t,e)=>{if(((t,e)=>{const n=/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,r=e.split("."),o=r[r.length-1],i=["localhost","[::1]"];return i.includes(e)||"file"==t||i.includes(o)||!!e.match(n)||!!o.match(n)})(t,e))return{protocol:"https",host:"arweave.net",port:443};if(!(t=>{const e="["===t.charAt(0);return!!t.match(/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/)||e})(e)){let n=e.split(".");if(n.length>=3){n.shift();return{protocol:t,host:n.join(".")}}}return{protocol:t,host:e}}},248:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{api;constructor(t){this.api=t}getInfo(){return this.api.get("info").then((t=>t.data))}getPeers(){return this.api.get("peers").then((t=>t.data))}}},243:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SiloResource=void 0;const r=n(244);e.default=class{api;crypto;transactions;constructor(t,e,n){this.api=t,this.crypto=e,this.transactions=n}async get(t){if(!t)throw new Error("No Silo URI specified");const e=await this.parseUri(t),n=await this.transactions.search("Silo-Name",e.getAccessKey());if(0==n.length)throw new Error(`No data could be found for the Silo URI: ${t}`);const r=await this.transactions.get(n[0]);if(!r)throw new Error(`No data could be found for the Silo URI: ${t}`);const o=r.get("data",{decode:!0,string:!1});return this.crypto.decrypt(o,e.getEncryptionKey())}async readTransactionData(t,e){if(!e)throw new Error("No Silo URI specified");const n=await this.parseUri(e),r=t.get("data",{decode:!0,string:!1});return this.crypto.decrypt(r,n.getEncryptionKey())}async parseUri(t){const e=t.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!e)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const n=e[1],i=Math.pow(2,parseInt(e[2])),s=await this.hash(r.stringToBuffer(n),i),a=r.bufferTob64(s.slice(0,15)),c=await this.hash(s.slice(16,31),1);return new o(t,a,c)}async hash(t,e){let n=await this.crypto.hash(t);for(let t=0;t<e-1;t++)n=await this.crypto.hash(n);return n}};class o{uri;accessKey;encryptionKey;constructor(t,e,n){this.uri=t,this.accessKey=e,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}e.SiloResource=o},935:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(498),o=n(825),i=n(244),s=n(246);n(317);e.default=class{api;crypto;chunks;constructor(t,e,n){this.api=t,this.crypto=e,this.chunks=n}async getTransactionAnchor(){const t=await this.api.get("tx_anchor");if(!t.data.match(/^[a-z0-9_-]{43,}/i)||!t.ok)throw new Error(`Could not getTransactionAnchor. Received: ${t.data}. Status: ${t.status}, ${t.statusText}`);return t.data}async getPrice(t,e){let n=e?`price/${t}/${e}`:`price/${t}`;const r=await this.api.get(n);if(!/^\d+$/.test(r.data)||!r.ok)throw new Error(`Could not getPrice. Received: ${r.data}. Status: ${r.status}, ${r.statusText}`);return r.data}async get(t){const e=await this.api.get(`tx/${t}`);if(200==e.status){const n=parseInt(e.data.data_size);if(e.data.format>=2&&n>0&&n<=12582912){const n=await this.getData(t);return new o.default({...e.data,data:n})}return new o.default({...e.data,format:e.data.format||1})}if(404==e.status)throw new r.default("TX_NOT_FOUND");if(410==e.status)throw new r.default("TX_FAILED");throw new r.default("TX_INVALID")}fromRaw(t){return new o.default(t)}async search(t,e){return this.api.post("arql",{op:"equals",expr1:t,expr2:e}).then((t=>t.data?t.data:[]))}getStatus(t){return this.api.get(`tx/${t}/status`).then((t=>200==t.status?{status:200,confirmed:t.data}:{status:t.status,confirmed:null}))}async getData(t,e){let n;try{n=await this.chunks.downloadChunkedData(t)}catch(e){console.error(`Error while trying to download chunked data for ${t}`),console.error(e)}if(!n){console.warn(`Falling back to gateway cache for ${t}`);try{const{data:e,ok:r,status:o,statusText:i}=await this.api.get(`/${t}`,{responseType:"arraybuffer"});if(!r)throw new Error("Bad http status code",{cause:{status:o,statusText:i}});n=e}catch(e){console.error(`Error while trying to download contiguous data from gateway cache for ${t}`),console.error(e)}}if(!n)throw new Error(`${t} data was not found!`);return e&&e.decode&&!e.string?n:e&&e.decode&&e.string?i.bufferToString(n):i.bufferTob64Url(n)}async sign(t,e,n){const r="object"==typeof e&&(t=>{let e=!0;return["n","e","d","p","q","dp","dq","qi"].map((n=>!(n in t)&&(e=!1))),e})(e),o="object"==typeof arweaveWallet;if(!r&&!o)throw new Error("No valid JWK or external wallet found to sign transaction.");if(r){t.setOwner(e.n);let r=await t.getSignatureData(),o=await this.crypto.sign(e,r,n),s=await this.crypto.hash(o);t.setSignature({id:i.bufferTob64Url(s),owner:e.n,signature:i.bufferTob64Url(o)})}else{if(!o)throw new Error("An error occurred while signing. Check wallet is valid");{try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}const e=await arweaveWallet.sign(t,n);t.setSignature({id:e.id,owner:e.owner,reward:e.reward,tags:e.tags,signature:e.signature})}}}async verify(t){const e=await t.getSignatureData(),n=t.get("signature",{decode:!0,string:!1}),r=i.bufferTob64Url(await this.crypto.hash(n));if(t.id!==r)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(t.owner,e,n)}async post(t){if("string"==typeof t?t=new o.default(JSON.parse(t)):"function"==typeof t.readInt32BE?t=new o.default(JSON.parse(t.toString())):"object"!=typeof t||t instanceof o.default||(t=new o.default(t)),!(t instanceof o.default))throw new Error("Must be Transaction object");t.chunks||await t.prepareChunks(t.data);const e=await this.getUploader(t,t.data);try{for(;!e.isComplete;)await e.uploadChunk()}catch(t){if(e.lastResponseStatus>0)return{status:e.lastResponseStatus,statusText:e.lastResponseError,data:{error:e.lastResponseError}};throw t}return{status:200,statusText:"OK",data:{}}}async getUploader(t,e){let n;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t instanceof o.default){if(e||(e=t.data),!(e instanceof Uint8Array))throw new Error("Data format is invalid");t.chunks||await t.prepareChunks(e),n=new s.TransactionUploader(this.api,t),n.data&&0!==n.data.length||(n.data=e)}else{if("string"==typeof t&&(t=await s.TransactionUploader.fromTransactionId(this.api,t)),!(e&&e instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await s.TransactionUploader.fromSerialized(this.api,t,e)}return n}async*upload(t,e){const n=await this.getUploader(t,e);for(;!n.isComplete;)await n.uploadChunk(),yield n;return n}}},927:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(244);n(317);e.default=class{api;crypto;constructor(t,e){this.api=t,this.crypto=e}getBalance(t){return this.api.get(`wallet/${t}/balance`).then((t=>t.data))}getLastTransactionID(t){return this.api.get(`wallet/${t}/last_tx`).then((t=>t.data))}generate(){return this.crypto.generateJWK()}async jwkToAddress(t){return t&&"use_wallet"!==t?this.getAddress(t):this.getAddress()}async getAddress(t){if(t&&"use_wallet"!==t)return this.ownerToAddress(t.n);try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}async ownerToAddress(t){return r.bufferTob64Url(await this.crypto.hash(r.b64UrlToBuffer(t)))}}},742:(t,e)=>{"use strict";e.byteLength=function(t){var e=a(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,i=a(t),s=i[0],c=i[1],l=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,c)),u=0,h=c>0?s-4:s;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;2===c&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[u++]=255&e);1===c&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e);return l},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],s=16383,a=0,l=r-o;a<l;a+=s)i.push(c(t,a,a+s>l?l:a+s));1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return i.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=i[s],r[i.charCodeAt(s)]=s;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,r){for(var o,i,s=[],a=e;a<r;a+=3)o=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},431:function(t,e,n){var r;!function(o){"use strict";var i,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,c=Math.floor,l="[BigNumber Error] ",u=l+"Number primitive has more than 15 significant digits: ",h=1e14,d=14,f=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],m=1e7,g=1e9;function y(t){var e=0|t;return t>0||t===e?e:e-1}function w(t){for(var e,n,r=1,o=t.length,i=t[0]+"";r<o;){for(e=t[r++]+"",n=d-e.length;n--;e="0"+e);i+=e}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function v(t,e){var n,r,o=t.c,i=e.c,s=t.s,a=e.s,c=t.e,l=e.e;if(!s||!a)return null;if(n=o&&!o[0],r=i&&!i[0],n||r)return n?r?0:-a:s;if(s!=a)return s;if(n=s<0,r=c==l,!o||!i)return r?0:!o^n?1:-1;if(!r)return c>l^n?1:-1;for(a=(c=o.length)<(l=i.length)?c:l,s=0;s<a;s++)if(o[s]!=i[s])return o[s]>i[s]^n?1:-1;return c==l?0:c>l^n?1:-1}function b(t,e,n,r){if(t<e||t>n||t!==c(t))throw Error(l+(r||"Argument")+("number"==typeof t?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function E(t){var e=t.c.length-1;return y(t.e/d)==e&&t.c[e]%2!=0}function S(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function x(t,e,n){var r,o;if(e<0){for(o=n+".";++e;o+=n);t=o+t}else if(++e>(r=t.length)){for(o=n,e-=r;--e;o+=n);t+=o}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}i=function t(e){var n,r,o,i,T,A,_,k,R,C,P=W.prototype={constructor:W,toString:null,valueOf:null},I=new W(1),O=20,N=4,B=-7,U=21,L=-1e7,j=1e7,D=!1,M=1,V=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},K="0123456789abcdefghijklmnopqrstuvwxyz",$=!0;function W(t,e){var n,i,a,l,h,p,m,g,y=this;if(!(y instanceof W))return new W(t,e);if(null==e){if(t&&!0===t._isBigNumber)return y.s=t.s,void(!t.c||t.e>j?y.c=y.e=null:t.e<L?y.c=[y.e=0]:(y.e=t.e,y.c=t.c.slice()));if((p="number"==typeof t)&&0*t==0){if(y.s=1/t<0?(t=-t,-1):1,t===~~t){for(l=0,h=t;h>=10;h/=10,l++);return void(l>j?y.c=y.e=null:(y.e=l,y.c=[t]))}g=String(t)}else{if(!s.test(g=String(t)))return o(y,g,p);y.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(l=g.indexOf("."))>-1&&(g=g.replace(".","")),(h=g.search(/e/i))>0?(l<0&&(l=h),l+=+g.slice(h+1),g=g.substring(0,h)):l<0&&(l=g.length)}else{if(b(e,2,K.length,"Base"),10==e&&$)return q(y=new W(t),O+y.e+1,N);if(g=String(t),p="number"==typeof t){if(0*t!=0)return o(y,g,p,e);if(y.s=1/t<0?(g=g.slice(1),-1):1,W.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(u+t)}else y.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(n=K.slice(0,e),l=h=0,m=g.length;h<m;h++)if(n.indexOf(i=g.charAt(h))<0){if("."==i){if(h>l){l=m;continue}}else if(!a&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){a=!0,h=-1,l=0;continue}return o(y,String(t),p,e)}p=!1,(l=(g=r(g,e,10,y.s)).indexOf("."))>-1?g=g.replace(".",""):l=g.length}for(h=0;48===g.charCodeAt(h);h++);for(m=g.length;48===g.charCodeAt(--m););if(g=g.slice(h,++m)){if(m-=h,p&&W.DEBUG&&m>15&&(t>f||t!==c(t)))throw Error(u+y.s*t);if((l=l-h-1)>j)y.c=y.e=null;else if(l<L)y.c=[y.e=0];else{if(y.e=l,y.c=[],h=(l+1)%d,l<0&&(h+=d),h<m){for(h&&y.c.push(+g.slice(0,h)),m-=d;h<m;)y.c.push(+g.slice(h,h+=d));h=d-(g=g.slice(h)).length}else h-=m;for(;h--;g+="0");y.c.push(+g)}}else y.c=[y.e=0]}function z(t,e,n,r){var o,i,s,a,c;if(null==n?n=N:b(n,0,8),!t.c)return t.toString();if(o=t.c[0],s=t.e,null==e)c=w(t.c),c=1==r||2==r&&(s<=B||s>=U)?S(c,s):x(c,s,"0");else if(i=(t=q(new W(t),e,n)).e,a=(c=w(t.c)).length,1==r||2==r&&(e<=i||i<=B)){for(;a<e;c+="0",a++);c=S(c,i)}else if(e-=s,c=x(c,i,"0"),i+1>a){if(--e>0)for(c+=".";e--;c+="0");}else if((e+=i-a)>0)for(i+1==a&&(c+=".");e--;c+="0");return t.s<0&&o?"-"+c:c}function H(t,e){for(var n,r,o=1,i=new W(t[0]);o<t.length;o++)(!(r=new W(t[o])).s||(n=v(i,r))===e||0===n&&i.s===e)&&(i=r);return i}function Z(t,e,n){for(var r=1,o=e.length;!e[--o];e.pop());for(o=e[0];o>=10;o/=10,r++);return(n=r+n*d-1)>j?t.c=t.e=null:n<L?t.c=[t.e=0]:(t.e=n,t.c=e),t}function q(t,e,n,r){var o,i,s,l,u,f,m,g=t.c,y=p;if(g){t:{for(o=1,l=g[0];l>=10;l/=10,o++);if((i=e-o)<0)i+=d,s=e,u=g[f=0],m=c(u/y[o-s-1]%10);else if((f=a((i+1)/d))>=g.length){if(!r)break t;for(;g.length<=f;g.push(0));u=m=0,o=1,s=(i%=d)-d+1}else{for(u=l=g[f],o=1;l>=10;l/=10,o++);m=(s=(i%=d)-d+o)<0?0:c(u/y[o-s-1]%10)}if(r=r||e<0||null!=g[f+1]||(s<0?u:u%y[o-s-1]),r=n<4?(m||r)&&(0==n||n==(t.s<0?3:2)):m>5||5==m&&(4==n||r||6==n&&(i>0?s>0?u/y[o-s]:0:g[f-1])%10&1||n==(t.s<0?8:7)),e<1||!g[0])return g.length=0,r?(e-=t.e+1,g[0]=y[(d-e%d)%d],t.e=-e||0):g[0]=t.e=0,t;if(0==i?(g.length=f,l=1,f--):(g.length=f+1,l=y[d-i],g[f]=s>0?c(u/y[o-s]%y[s])*l:0),r)for(;;){if(0==f){for(i=1,s=g[0];s>=10;s/=10,i++);for(s=g[0]+=l,l=1;s>=10;s/=10,l++);i!=l&&(t.e++,g[0]==h&&(g[0]=1));break}if(g[f]+=l,g[f]!=h)break;g[f--]=0,l=1}for(i=g.length;0===g[--i];g.pop());}t.e>j?t.c=t.e=null:t.e<L&&(t.c=[t.e=0])}return t}function G(t){var e,n=t.e;return null===n?t.toString():(e=w(t.c),e=n<=B||n>=U?S(e,n):x(e,n,"0"),t.s<0?"-"+e:e)}return W.clone=t,W.ROUND_UP=0,W.ROUND_DOWN=1,W.ROUND_CEIL=2,W.ROUND_FLOOR=3,W.ROUND_HALF_UP=4,W.ROUND_HALF_DOWN=5,W.ROUND_HALF_EVEN=6,W.ROUND_HALF_CEIL=7,W.ROUND_HALF_FLOOR=8,W.EUCLID=9,W.config=W.set=function(t){var e,n;if(null!=t){if("object"!=typeof t)throw Error(l+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(b(n=t[e],0,g,e),O=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(b(n=t[e],0,8,e),N=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(b(n[0],-g,0,e),b(n[1],0,g,e),B=n[0],U=n[1]):(b(n,-g,g,e),B=-(U=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if((n=t[e])&&n.pop)b(n[0],-g,-1,e),b(n[1],1,g,e),L=n[0],j=n[1];else{if(b(n,-g,g,e),!n)throw Error(l+e+" cannot be zero: "+n);L=-(j=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(l+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw D=!n,Error(l+"crypto unavailable");D=n}else D=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(b(n=t[e],0,9,e),M=n),t.hasOwnProperty(e="POW_PRECISION")&&(b(n=t[e],0,g,e),V=n),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(n=t[e]))throw Error(l+e+" not an object: "+n);F=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(l+e+" invalid: "+n);$="0123456789"==n.slice(0,10),K=n}}return{DECIMAL_PLACES:O,ROUNDING_MODE:N,EXPONENTIAL_AT:[B,U],RANGE:[L,j],CRYPTO:D,MODULO_MODE:M,POW_PRECISION:V,FORMAT:F,ALPHABET:K}},W.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!W.DEBUG)return!0;var e,n,r=t.c,o=t.e,i=t.s;t:if("[object Array]"=={}.toString.call(r)){if((1===i||-1===i)&&o>=-g&&o<=g&&o===c(o)){if(0===r[0]){if(0===o&&1===r.length)return!0;break t}if((e=(o+1)%d)<1&&(e+=d),String(r[0]).length==e){for(e=0;e<r.length;e++)if((n=r[e])<0||n>=h||n!==c(n))break t;if(0!==n)return!0}}}else if(null===r&&null===o&&(null===i||1===i||-1===i))return!0;throw Error(l+"Invalid BigNumber: "+t)},W.maximum=W.max=function(){return H(arguments,-1)},W.minimum=W.min=function(){return H(arguments,1)},W.random=(i=9007199254740992,T=Math.random()*i&2097151?function(){return c(Math.random()*i)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,r,o,i,s=0,u=[],h=new W(I);if(null==t?t=O:b(t,0,g),o=a(t/d),D)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(o*=2));s<o;)(i=131072*e[s]+(e[s+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[s]=n[0],e[s+1]=n[1]):(u.push(i%1e14),s+=2);s=o/2}else{if(!crypto.randomBytes)throw D=!1,Error(l+"crypto unavailable");for(e=crypto.randomBytes(o*=7);s<o;)(i=281474976710656*(31&e[s])+1099511627776*e[s+1]+4294967296*e[s+2]+16777216*e[s+3]+(e[s+4]<<16)+(e[s+5]<<8)+e[s+6])>=9e15?crypto.randomBytes(7).copy(e,s):(u.push(i%1e14),s+=7);s=o/7}if(!D)for(;s<o;)(i=T())<9e15&&(u[s++]=i%1e14);for(o=u[--s],t%=d,o&&t&&(i=p[d-t],u[s]=c(o/i)*i);0===u[s];u.pop(),s--);if(s<0)u=[r=0];else{for(r=-1;0===u[0];u.splice(0,1),r-=d);for(s=1,i=u[0];i>=10;i/=10,s++);s<d&&(r-=d-s)}return h.e=r,h.c=u,h}),W.sum=function(){for(var t=1,e=arguments,n=new W(e[0]);t<e.length;)n=n.plus(e[t++]);return n},r=function(){var t="0123456789";function e(t,e,n,r){for(var o,i,s=[0],a=0,c=t.length;a<c;){for(i=s.length;i--;s[i]*=e);for(s[0]+=r.indexOf(t.charAt(a++)),o=0;o<s.length;o++)s[o]>n-1&&(null==s[o+1]&&(s[o+1]=0),s[o+1]+=s[o]/n|0,s[o]%=n)}return s.reverse()}return function(r,o,i,s,a){var c,l,u,h,d,f,p,m,g=r.indexOf("."),y=O,v=N;for(g>=0&&(h=V,V=0,r=r.replace(".",""),f=(m=new W(o)).pow(r.length-g),V=h,m.c=e(x(w(f.c),f.e,"0"),10,i,t),m.e=m.c.length),u=h=(p=e(r,o,i,a?(c=K,t):(c=t,K))).length;0==p[--h];p.pop());if(!p[0])return c.charAt(0);if(g<0?--u:(f.c=p,f.e=u,f.s=s,p=(f=n(f,m,y,v,i)).c,d=f.r,u=f.e),g=p[l=u+y+1],h=i/2,d=d||l<0||null!=p[l+1],d=v<4?(null!=g||d)&&(0==v||v==(f.s<0?3:2)):g>h||g==h&&(4==v||d||6==v&&1&p[l-1]||v==(f.s<0?8:7)),l<1||!p[0])r=d?x(c.charAt(1),-y,c.charAt(0)):c.charAt(0);else{if(p.length=l,d)for(--i;++p[--l]>i;)p[l]=0,l||(++u,p=[1].concat(p));for(h=p.length;!p[--h];);for(g=0,r="";g<=h;r+=c.charAt(p[g++]));r=x(r,u,c.charAt(0))}return r}}(),n=function(){function t(t,e,n){var r,o,i,s,a=0,c=t.length,l=e%m,u=e/m|0;for(t=t.slice();c--;)a=((o=l*(i=t[c]%m)+(r=u*i+(s=t[c]/m|0)*l)%m*m+a)/n|0)+(r/m|0)+u*s,t[c]=o%n;return a&&(t=[a].concat(t)),t}function e(t,e,n,r){var o,i;if(n!=r)i=n>r?1:-1;else for(o=i=0;o<n;o++)if(t[o]!=e[o]){i=t[o]>e[o]?1:-1;break}return i}function n(t,e,n,r){for(var o=0;n--;)t[n]-=o,o=t[n]<e[n]?1:0,t[n]=o*r+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(r,o,i,s,a){var l,u,f,p,m,g,w,v,b,E,S,x,T,A,_,k,R,C=r.s==o.s?1:-1,P=r.c,I=o.c;if(!(P&&P[0]&&I&&I[0]))return new W(r.s&&o.s&&(P?!I||P[0]!=I[0]:I)?P&&0==P[0]||!I?0*C:C/0:NaN);for(b=(v=new W(C)).c=[],C=i+(u=r.e-o.e)+1,a||(a=h,u=y(r.e/d)-y(o.e/d),C=C/d|0),f=0;I[f]==(P[f]||0);f++);if(I[f]>(P[f]||0)&&u--,C<0)b.push(1),p=!0;else{for(A=P.length,k=I.length,f=0,C+=2,(m=c(a/(I[0]+1)))>1&&(I=t(I,m,a),P=t(P,m,a),k=I.length,A=P.length),T=k,S=(E=P.slice(0,k)).length;S<k;E[S++]=0);R=I.slice(),R=[0].concat(R),_=I[0],I[1]>=a/2&&_++;do{if(m=0,(l=e(I,E,k,S))<0){if(x=E[0],k!=S&&(x=x*a+(E[1]||0)),(m=c(x/_))>1)for(m>=a&&(m=a-1),w=(g=t(I,m,a)).length,S=E.length;1==e(g,E,w,S);)m--,n(g,k<w?R:I,w,a),w=g.length,l=1;else 0==m&&(l=m=1),w=(g=I.slice()).length;if(w<S&&(g=[0].concat(g)),n(E,g,S,a),S=E.length,-1==l)for(;e(I,E,k,S)<1;)m++,n(E,k<S?R:I,S,a),S=E.length}else 0===l&&(m++,E=[0]);b[f++]=m,E[0]?E[S++]=P[T]||0:(E=[P[T]],S=1)}while((T++<A||null!=E[0])&&C--);p=null!=E[0],b[0]||b.splice(0,1)}if(a==h){for(f=1,C=b[0];C>=10;C/=10,f++);q(v,i+(v.e=f+u*d-1)+1,s,p)}else v.e=u,v.r=+p;return v}}(),A=/^(-?)0([xbo])(?=\w[\w.]*$)/i,_=/^([^.]+)\.$/,k=/^\.([^.]+)$/,R=/^-?(Infinity|NaN)$/,C=/^\s*\+(?=[\w.])|^\s+|\s+$/g,o=function(t,e,n,r){var o,i=n?e:e.replace(C,"");if(R.test(i))t.s=isNaN(i)?null:i<0?-1:1;else{if(!n&&(i=i.replace(A,(function(t,e,n){return o="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=o?t:e})),r&&(o=r,i=i.replace(_,"$1").replace(k,"0.$1")),e!=i))return new W(i,o);if(W.DEBUG)throw Error(l+"Not a"+(r?" base "+r:"")+" number: "+e);t.s=null}t.c=t.e=null},P.absoluteValue=P.abs=function(){var t=new W(this);return t.s<0&&(t.s=1),t},P.comparedTo=function(t,e){return v(this,new W(t,e))},P.decimalPlaces=P.dp=function(t,e){var n,r,o,i=this;if(null!=t)return b(t,0,g),null==e?e=N:b(e,0,8),q(new W(i),t+i.e+1,e);if(!(n=i.c))return null;if(r=((o=n.length-1)-y(this.e/d))*d,o=n[o])for(;o%10==0;o/=10,r--);return r<0&&(r=0),r},P.dividedBy=P.div=function(t,e){return n(this,new W(t,e),O,N)},P.dividedToIntegerBy=P.idiv=function(t,e){return n(this,new W(t,e),0,1)},P.exponentiatedBy=P.pow=function(t,e){var n,r,o,i,s,u,h,f,p=this;if((t=new W(t)).c&&!t.isInteger())throw Error(l+"Exponent not an integer: "+G(t));if(null!=e&&(e=new W(e)),s=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return f=new W(Math.pow(+G(p),s?t.s*(2-E(t)):+G(t))),e?f.mod(e):f;if(u=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new W(NaN);(r=!u&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||s&&p.c[1]>=24e7:p.c[0]<8e13||s&&p.c[0]<=9999975e7)))return i=p.s<0&&E(t)?-0:0,p.e>-1&&(i=1/i),new W(u?1/i:i);V&&(i=a(V/d+2))}for(s?(n=new W(.5),u&&(t.s=1),h=E(t)):h=(o=Math.abs(+G(t)))%2,f=new W(I);;){if(h){if(!(f=f.times(p)).c)break;i?f.c.length>i&&(f.c.length=i):r&&(f=f.mod(e))}if(o){if(0===(o=c(o/2)))break;h=o%2}else if(q(t=t.times(n),t.e+1,1),t.e>14)h=E(t);else{if(0===(o=+G(t)))break;h=o%2}p=p.times(p),i?p.c&&p.c.length>i&&(p.c.length=i):r&&(p=p.mod(e))}return r?f:(u&&(f=I.div(f)),e?f.mod(e):i?q(f,V,N,undefined):f)},P.integerValue=function(t){var e=new W(this);return null==t?t=N:b(t,0,8),q(e,e.e+1,t)},P.isEqualTo=P.eq=function(t,e){return 0===v(this,new W(t,e))},P.isFinite=function(){return!!this.c},P.isGreaterThan=P.gt=function(t,e){return v(this,new W(t,e))>0},P.isGreaterThanOrEqualTo=P.gte=function(t,e){return 1===(e=v(this,new W(t,e)))||0===e},P.isInteger=function(){return!!this.c&&y(this.e/d)>this.c.length-2},P.isLessThan=P.lt=function(t,e){return v(this,new W(t,e))<0},P.isLessThanOrEqualTo=P.lte=function(t,e){return-1===(e=v(this,new W(t,e)))||0===e},P.isNaN=function(){return!this.s},P.isNegative=function(){return this.s<0},P.isPositive=function(){return this.s>0},P.isZero=function(){return!!this.c&&0==this.c[0]},P.minus=function(t,e){var n,r,o,i,s=this,a=s.s;if(e=(t=new W(t,e)).s,!a||!e)return new W(NaN);if(a!=e)return t.s=-e,s.plus(t);var c=s.e/d,l=t.e/d,u=s.c,f=t.c;if(!c||!l){if(!u||!f)return u?(t.s=-e,t):new W(f?s:NaN);if(!u[0]||!f[0])return f[0]?(t.s=-e,t):new W(u[0]?s:3==N?-0:0)}if(c=y(c),l=y(l),u=u.slice(),a=c-l){for((i=a<0)?(a=-a,o=u):(l=c,o=f),o.reverse(),e=a;e--;o.push(0));o.reverse()}else for(r=(i=(a=u.length)<(e=f.length))?a:e,a=e=0;e<r;e++)if(u[e]!=f[e]){i=u[e]<f[e];break}if(i&&(o=u,u=f,f=o,t.s=-t.s),(e=(r=f.length)-(n=u.length))>0)for(;e--;u[n++]=0);for(e=h-1;r>a;){if(u[--r]<f[r]){for(n=r;n&&!u[--n];u[n]=e);--u[n],u[r]+=h}u[r]-=f[r]}for(;0==u[0];u.splice(0,1),--l);return u[0]?Z(t,u,l):(t.s=3==N?-1:1,t.c=[t.e=0],t)},P.modulo=P.mod=function(t,e){var r,o,i=this;return t=new W(t,e),!i.c||!t.s||t.c&&!t.c[0]?new W(NaN):!t.c||i.c&&!i.c[0]?new W(i):(9==M?(o=t.s,t.s=1,r=n(i,t,0,3),t.s=o,r.s*=o):r=n(i,t,0,M),(t=i.minus(r.times(t))).c[0]||1!=M||(t.s=i.s),t)},P.multipliedBy=P.times=function(t,e){var n,r,o,i,s,a,c,l,u,f,p,g,w,v,b,E=this,S=E.c,x=(t=new W(t,e)).c;if(!(S&&x&&S[0]&&x[0]))return!E.s||!t.s||S&&!S[0]&&!x||x&&!x[0]&&!S?t.c=t.e=t.s=null:(t.s*=E.s,S&&x?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=y(E.e/d)+y(t.e/d),t.s*=E.s,(c=S.length)<(f=x.length)&&(w=S,S=x,x=w,o=c,c=f,f=o),o=c+f,w=[];o--;w.push(0));for(v=h,b=m,o=f;--o>=0;){for(n=0,p=x[o]%b,g=x[o]/b|0,i=o+(s=c);i>o;)n=((l=p*(l=S[--s]%b)+(a=g*l+(u=S[s]/b|0)*p)%b*b+w[i]+n)/v|0)+(a/b|0)+g*u,w[i--]=l%v;w[i]=n}return n?++r:w.splice(0,1),Z(t,w,r)},P.negated=function(){var t=new W(this);return t.s=-t.s||null,t},P.plus=function(t,e){var n,r=this,o=r.s;if(e=(t=new W(t,e)).s,!o||!e)return new W(NaN);if(o!=e)return t.s=-e,r.minus(t);var i=r.e/d,s=t.e/d,a=r.c,c=t.c;if(!i||!s){if(!a||!c)return new W(o/0);if(!a[0]||!c[0])return c[0]?t:new W(a[0]?r:0*o)}if(i=y(i),s=y(s),a=a.slice(),o=i-s){for(o>0?(s=i,n=c):(o=-o,n=a),n.reverse();o--;n.push(0));n.reverse()}for((o=a.length)-(e=c.length)<0&&(n=c,c=a,a=n,e=o),o=0;e;)o=(a[--e]=a[e]+c[e]+o)/h|0,a[e]=h===a[e]?0:a[e]%h;return o&&(a=[o].concat(a),++s),Z(t,a,s)},P.precision=P.sd=function(t,e){var n,r,o,i=this;if(null!=t&&t!==!!t)return b(t,1,g),null==e?e=N:b(e,0,8),q(new W(i),t,e);if(!(n=i.c))return null;if(r=(o=n.length-1)*d+1,o=n[o]){for(;o%10==0;o/=10,r--);for(o=n[0];o>=10;o/=10,r++);}return t&&i.e+1>r&&(r=i.e+1),r},P.shiftedBy=function(t){return b(t,-9007199254740991,f),this.times("1e"+t)},P.squareRoot=P.sqrt=function(){var t,e,r,o,i,s=this,a=s.c,c=s.s,l=s.e,u=O+4,h=new W("0.5");if(1!==c||!a||!a[0])return new W(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(c=Math.sqrt(+G(s)))||c==1/0?(((e=w(a)).length+l)%2==0&&(e+="0"),c=Math.sqrt(+e),l=y((l+1)/2)-(l<0||l%2),r=new W(e=c==1/0?"5e"+l:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+l)):r=new W(c+""),r.c[0])for((c=(l=r.e)+u)<3&&(c=0);;)if(i=r,r=h.times(i.plus(n(s,i,u,1))),w(i.c).slice(0,c)===(e=w(r.c)).slice(0,c)){if(r.e<l&&--c,"9999"!=(e=e.slice(c-3,c+1))&&(o||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(q(r,r.e+O+2,1),t=!r.times(r).eq(s));break}if(!o&&(q(i,i.e+O+2,0),i.times(i).eq(s))){r=i;break}u+=4,c+=4,o=1}return q(r,r.e+O+1,N,t)},P.toExponential=function(t,e){return null!=t&&(b(t,0,g),t++),z(this,t,e,1)},P.toFixed=function(t,e){return null!=t&&(b(t,0,g),t=t+this.e+1),z(this,t,e)},P.toFormat=function(t,e,n){var r,o=this;if(null==n)null!=t&&e&&"object"==typeof e?(n=e,e=null):t&&"object"==typeof t?(n=t,t=e=null):n=F;else if("object"!=typeof n)throw Error(l+"Argument not an object: "+n);if(r=o.toFixed(t,e),o.c){var i,s=r.split("."),a=+n.groupSize,c=+n.secondaryGroupSize,u=n.groupSeparator||"",h=s[0],d=s[1],f=o.s<0,p=f?h.slice(1):h,m=p.length;if(c&&(i=a,a=c,c=i,m-=i),a>0&&m>0){for(i=m%a||a,h=p.substr(0,i);i<m;i+=a)h+=u+p.substr(i,a);c>0&&(h+=u+p.slice(i)),f&&(h="-"+h)}r=d?h+(n.decimalSeparator||"")+((c=+n.fractionGroupSize)?d.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):d):h}return(n.prefix||"")+r+(n.suffix||"")},P.toFraction=function(t){var e,r,o,i,s,a,c,u,h,f,m,g,y=this,v=y.c;if(null!=t&&(!(c=new W(t)).isInteger()&&(c.c||1!==c.s)||c.lt(I)))throw Error(l+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+G(c));if(!v)return new W(y);for(e=new W(I),h=r=new W(I),o=u=new W(I),g=w(v),s=e.e=g.length-y.e-1,e.c[0]=p[(a=s%d)<0?d+a:a],t=!t||c.comparedTo(e)>0?s>0?e:h:c,a=j,j=1/0,c=new W(g),u.c[0]=0;f=n(c,e,0,1),1!=(i=r.plus(f.times(o))).comparedTo(t);)r=o,o=i,h=u.plus(f.times(i=h)),u=i,e=c.minus(f.times(i=e)),c=i;return i=n(t.minus(r),o,0,1),u=u.plus(i.times(h)),r=r.plus(i.times(o)),u.s=h.s=y.s,m=n(h,o,s*=2,N).minus(y).abs().comparedTo(n(u,r,s,N).minus(y).abs())<1?[h,o]:[u,r],j=a,m},P.toNumber=function(){return+G(this)},P.toPrecision=function(t,e){return null!=t&&b(t,1,g),z(this,t,e,2)},P.toString=function(t){var e,n=this,o=n.s,i=n.e;return null===i?o?(e="Infinity",o<0&&(e="-"+e)):e="NaN":(null==t?e=i<=B||i>=U?S(w(n.c),i):x(w(n.c),i,"0"):10===t&&$?e=x(w((n=q(new W(n),O+i+1,N)).c),n.e,"0"):(b(t,2,K.length,"Base"),e=r(x(w(n.c),i,"0"),10,t,o,!0)),o<0&&n.c[0]&&(e="-"+e)),e},P.valueOf=P.toJSON=function(){return G(this)},P._isBigNumber=!0,null!=e&&W.set(e),W}(),i.default=i.BigNumber=i,void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)}()},764:(t,e,n)=>{"use strict";const r=n(742),o=n(645),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=c,e.h2=50;const s=2147483647;function a(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return l(t,e,n)}function l(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|m(t,e);let r=a(n);const o=r.write(t,e);o!==n&&(r=r.slice(0,o));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(G(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return d(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(G(t,ArrayBuffer)||t&&G(t.buffer,ArrayBuffer))return f(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(G(t,SharedArrayBuffer)||t&&G(t.buffer,SharedArrayBuffer)))return f(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return c.from(r,e,n);const o=function(t){if(c.isBuffer(t)){const e=0|p(t.length),n=a(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||Y(t.length)?a(0):d(t);if("Buffer"===t.type&&Array.isArray(t.data))return d(t.data)}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return u(t),a(t<0?0:0|p(t))}function d(t){const e=t.length<0?0:0|p(t.length),n=a(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,c.prototype),r}function p(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function m(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||G(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(t).length;default:if(o)return r?-1:H(t).length;e=(""+e).toLowerCase(),o=!0}}function g(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return _(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function w(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Y(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,o){let i,s=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){let r=-1;for(i=n;i<a;i++)if(l(t,i)===l(e,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===c)return r*s}else-1!==r&&(i-=i-r),r=-1}else for(n+c>a&&(n=a-c),i=n;i>=0;i--){let n=!0;for(let r=0;r<c;r++)if(l(t,i+r)!==l(e,r)){n=!1;break}if(n)return i}return-1}function b(t,e,n,r){n=Number(n)||0;const o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;const i=e.length;let s;for(r>i/2&&(r=i/2),s=0;s<r;++s){const r=parseInt(e.substr(2*s,2),16);if(Y(r))return s;t[n+s]=r}return s}function E(t,e,n,r){return q(H(e,t.length-n),t,n,r)}function S(t,e,n,r){return q(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return q(Z(e),t,n,r)}function T(t,e,n,r){return q(function(t,e){let n,r,o;const i=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function A(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function _(t,e,n){n=Math.min(t.length,n);const r=[];let o=e;for(;o<n;){const e=t[o];let i=null,s=e>239?4:e>223?3:e>191?2:1;if(o+s<=n){let n,r,a,c;switch(s){case 1:e<128&&(i=e);break;case 2:n=t[o+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(i=c));break;case 3:n=t[o+1],r=t[o+2],128==(192&n)&&128==(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:n=t[o+1],r=t[o+2],a=t[o+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=s}return function(t){const e=t.length;if(e<=k)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=k));return n}(r)}c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,n){return l(t,e,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?a(t):void 0!==e?"string"==typeof n?a(t).fill(e,n):a(t).fill(e):a(t)}(t,e,n)},c.allocUnsafe=function(t){return h(t)},c.allocUnsafeSlow=function(t){return h(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(G(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),G(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=c.allocUnsafe(e);let o=0;for(n=0;n<t.length;++n){let e=t[n];if(G(e,Uint8Array))o+e.length>r.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(r,o)):Uint8Array.prototype.set.call(r,e,o);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,o)}o+=e.length}return r},c.byteLength=m,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)y(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?_(this,0,t):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const n=e.h2;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(t,e,n,r,o){if(G(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;let i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0);const a=Math.min(i,s),l=this.slice(r,o),u=t.slice(e,n);for(let t=0;t<a;++t)if(l[t]!==u[t]){i=l[t],s=u[t];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":case"latin1":case"binary":return S(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function R(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function C(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function P(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=e;r<n;++r)o+=X[t[r]];return o}function I(t,e,n){const r=t.slice(e,n);let o="";for(let t=0;t<r.length-1;t+=2)o+=String.fromCharCode(r[t]+256*r[t+1]);return o}function O(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,o,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function B(t,e,n,r,o){K(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function U(t,e,n,r,o){K(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n+7]=i,i>>=8,t[n+6]=i,i>>=8,t[n+5]=i,i>>=8,t[n+4]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function L(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,r,i){return e=+e,n>>>=0,i||L(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function D(t,e,n,r,i){return e=+e,n>>>=0,i||L(t,0,n,8),o.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=J((function(t){$(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),c.prototype.readBigUInt64BE=J((function(t){$(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),c.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);let r=e,o=1,i=this[t+--r];for(;r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||O(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){t>>>=0,e||O(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=J((function(t){$(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),c.prototype.readBigInt64BE=J((function(t){$(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||O(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||O(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||O(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||O(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){N(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){N(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=J((function(t,e=0){return B(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=J((function(t,e=0){return U(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}let o=0,i=1,s=0;for(this[e]=255&t;++o<n&&(i*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}let o=n-1,i=1,s=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=J((function(t,e=0){return B(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=J((function(t,e=0){return U(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const o=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),o},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{const i=c.isBuffer(t)?t:c.from(t,r),s=i.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=i[o%s]}return this};const M={};function V(t,e,n){M[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function F(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function K(t,e,n,r,o,i){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let o;throw o=i>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new M.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,n){$(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||W(e,t.length-(n+1))}(r,o,i)}function $(t,e){if("number"!=typeof t)throw new M.ERR_INVALID_ARG_TYPE(e,"number",t)}function W(t,e,n){if(Math.floor(t)!==t)throw $(t,n),new M.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new M.ERR_BUFFER_OUT_OF_BOUNDS;throw new M.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}V("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),V("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),V("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=F(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=F(o)),o+="n"),r+=` It must be ${e}. Received ${o}`,r}),RangeError);const z=/[^+/0-9A-Za-z-_]/g;function H(t,e){let n;e=e||1/0;const r=t.length;let o=null;const i=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Z(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function q(t,e,n,r){let o;for(o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function G(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Y(t){return t!=t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)e[r+o]=t[n]+t[o]}return e}();function J(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},470:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===n.call(t)},s=function(t){if(!t||"[object Object]"!==n.call(t))return!1;var r,o=e.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&e.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!o&&!i)return!1;for(r in t);return void 0===r||e.call(t,r)},a=function(t,e){r&&"__proto__"===e.name?r(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},c=function(t,n){if("__proto__"===n){if(!e.call(t,n))return;if(o)return o(t,n).value}return t[n]};t.exports=function t(){var e,n,r,o,l,u,h=arguments[0],d=1,f=arguments.length,p=!1;for("boolean"==typeof h&&(p=h,h=arguments[1]||{},d=2),(null==h||"object"!=typeof h&&"function"!=typeof h)&&(h={});d<f;++d)if(null!=(e=arguments[d]))for(n in e)r=c(h,n),h!==(o=c(e,n))&&(p&&o&&(s(o)||(l=i(o)))?(l?(l=!1,u=r&&i(r)?r:[]):u=r&&s(r)?r:{},a(h,{name:n,newValue:t(p,u,o)})):void 0!==o&&a(h,{name:n,newValue:o}));return h}},645:(t,e)=>{e.read=function(t,e,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,l=c>>1,u=-7,h=n?o-1:0,d=n?-1:1,f=t[e+h];for(h+=d,i=f&(1<<-u)-1,f>>=-u,u+=a;u>0;i=256*i+t[e+h],h+=d,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=256*s+t[e+h],h+=d,u-=8);if(0===i)i=1-l;else{if(i===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),i-=l}return(f?-1:1)*s*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var s,a,c,l=8*i-o-1,u=(1<<l)-1,h=u>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*c-1)*Math.pow(2,o),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;t[n+f]=255&a,f+=p,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;t[n+f]=255&s,f+=p,s/=256,l-=8);t[n+f-p]|=128*m}},703:(t,e,n)=>{"use strict";var r=n(414);function o(){}function i(){}i.resetWarningCache=o,t.exports=function(){function t(t,e,n,o,i,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},697:(t,e,n)=>{t.exports=n(703)()},414:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},156:e=>{"use strict";e.exports=t}},s={};function a(t){var e=s[t];if(void 0!==e)return e.exports;var n=s[t]={exports:{}};return i[t].call(n.exports,n,n.exports,a),n.exports}a.m=i,a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},n=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,a.t=function(t,r){if(1&r&&(t=this(t)),8&r)return t;if("object"==typeof t&&t){if(4&r&&t.__esModule)return t;if(16&r&&"function"==typeof t.then)return t}var o=Object.create(null);a.r(o);var i={};e=e||[null,n({}),n([]),n(n)];for(var s=2&r&&t;"object"==typeof s&&!~e.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>t[e]));return i.default=()=>t,a.d(o,i),o},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.f={},a.e=t=>Promise.all(Object.keys(a.f).reduce(((e,n)=>(a.f[n](t,e),e)),[])),a.u=t=>t+".onairos.native.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r={},o="Onairos:",a.l=(t,e,n,i)=>{if(r[t])r[t].push(e);else{var s,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var h=l[u];if(h.getAttribute("src")==t||h.getAttribute("data-webpack")==o+n){s=h;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",o+n),s.src=t),r[t]=[e];var d=(e,n)=>{s.onerror=s.onload=null,clearTimeout(f);var o=r[t];if(delete r[t],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((t=>t(n))),e)return e(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),c&&document.head.appendChild(s)}},a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!t;)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),(()=>{var t={179:0};a.f.j=(e,n)=>{var r=a.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>r=t[e]=[n,o]));n.push(r[2]=o);var i=a.p+a.u(e),s=new Error;a.l(i,(n=>{if(a.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,r[1](s)}}),"chunk-"+e,e)}};var e=(e,n)=>{var r,o,i=n[0],s=n[1],c=n[2],l=0;if(i.some((e=>0!==t[e]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)c(a)}for(e&&e(n);l<i.length;l++)o=i[l],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0},n=this.webpackChunkOnairos=this.webpackChunkOnairos||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var c={};return(()=>{"use strict";a.d(c,{default:()=>zv});var t={};a.r(t),a.d(t,{hasBrowserEnv:()=>ne,hasStandardBrowserEnv:()=>re,hasStandardBrowserWebWorkerEnv:()=>ie});var e=a(156),n=a.n(e),r=a(764);function o(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}"function"==typeof SuppressedError&&SuppressedError;var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==a.g?a.g:"undefined"!=typeof self?self:{};function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function l(t,e){return t(e={exports:{}},e.exports),e.exports}var u=l((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){var t=this;this.locked=new Map,this.addToLocked=function(e,n){var r=t.locked.get(e);void 0===r?void 0===n?t.locked.set(e,[]):t.locked.set(e,[n]):void 0!==n&&(r.unshift(n),t.locked.set(e,r))},this.isLocked=function(e){return t.locked.has(e)},this.lock=function(e){return new Promise((function(n,r){t.isLocked(e)?t.addToLocked(e,n):(t.addToLocked(e),n())}))},this.unlock=function(e){var n=t.locked.get(e);if(void 0!==n&&0!==n.length){var r=n.pop();t.locked.set(e,n),void 0!==r&&setTimeout(r,0)}else t.locked.delete(e)}}return t.getInstance=function(){return void 0===t.instance&&(t.instance=new t),t.instance},t}();e.default=function(){return n.getInstance()}}));s(u);var h=s(l((function(t,e){var n=i&&i.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}c((r=r.apply(t,e||[])).next())}))},r=i&&i.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},o=i;Object.defineProperty(e,"__esModule",{value:!0});var s="browser-tabs-lock-key",a={key:function(t){return n(o,void 0,void 0,(function(){return r(this,(function(t){throw new Error("Unsupported")}))}))},getItem:function(t){return n(o,void 0,void 0,(function(){return r(this,(function(t){throw new Error("Unsupported")}))}))},clear:function(){return n(o,void 0,void 0,(function(){return r(this,(function(t){return[2,window.localStorage.clear()]}))}))},removeItem:function(t){return n(o,void 0,void 0,(function(){return r(this,(function(t){throw new Error("Unsupported")}))}))},setItem:function(t,e){return n(o,void 0,void 0,(function(){return r(this,(function(t){throw new Error("Unsupported")}))}))},keySync:function(t){return window.localStorage.key(t)},getItemSync:function(t){return window.localStorage.getItem(t)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(t){return window.localStorage.removeItem(t)},setItemSync:function(t,e){return window.localStorage.setItem(t,e)}};function c(t){return new Promise((function(e){return setTimeout(e,t)}))}function l(t){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="",r=0;r<t;r++)n+=e[Math.floor(61*Math.random())];return n}var h=function(){function t(e){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+l(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=e,void 0===t.waiters&&(t.waiters=[])}return t.prototype.acquireLock=function(e,o){return void 0===o&&(o=5e3),n(this,void 0,void 0,(function(){var n,i,u,h,d,f,p;return r(this,(function(r){switch(r.label){case 0:n=Date.now()+l(4),i=Date.now()+o,u=s+"-"+e,h=void 0===this.storageHandler?a:this.storageHandler,r.label=1;case 1:return Date.now()<i?[4,c(30)]:[3,8];case 2:return r.sent(),null!==h.getItemSync(u)?[3,5]:(d=this.id+"-"+e+"-"+n,[4,c(Math.floor(25*Math.random()))]);case 3:return r.sent(),h.setItemSync(u,JSON.stringify({id:this.id,iat:n,timeoutKey:d,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,c(30)];case 4:return r.sent(),null!==(f=h.getItemSync(u))&&(p=JSON.parse(f)).id===this.id&&p.iat===n?(this.acquiredIatSet.add(n),this.refreshLockWhileAcquired(u,n),[2,!0]):[3,7];case 5:return t.lockCorrector(void 0===this.storageHandler?a:this.storageHandler),[4,this.waitForSomethingToChange(i)];case 6:r.sent(),r.label=7;case 7:return n=Date.now()+l(4),[3,1];case 8:return[2,!1]}}))}))},t.prototype.refreshLockWhileAcquired=function(t,e){return n(this,void 0,void 0,(function(){var o=this;return r(this,(function(i){return setTimeout((function(){return n(o,void 0,void 0,(function(){var n,o,i;return r(this,(function(r){switch(r.label){case 0:return[4,u.default().lock(e)];case 1:return r.sent(),this.acquiredIatSet.has(e)?(n=void 0===this.storageHandler?a:this.storageHandler,null===(o=n.getItemSync(t))?(u.default().unlock(e),[2]):((i=JSON.parse(o)).timeRefreshed=Date.now(),n.setItemSync(t,JSON.stringify(i)),u.default().unlock(e),this.refreshLockWhileAcquired(t,e),[2])):(u.default().unlock(e),[2])}}))}))}),1e3),[2]}))}))},t.prototype.waitForSomethingToChange=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){var r=!1,o=Date.now(),i=!1;function s(){if(i||(window.removeEventListener("storage",s),t.removeFromWaiting(s),clearTimeout(a),i=!0),!r){r=!0;var e=50-(Date.now()-o);e>0?setTimeout(n,e):n(null)}}window.addEventListener("storage",s),t.addToWaiting(s);var a=setTimeout(s,Math.max(0,e-Date.now()))}))];case 1:return n.sent(),[2]}}))}))},t.addToWaiting=function(e){this.removeFromWaiting(e),void 0!==t.waiters&&t.waiters.push(e)},t.removeFromWaiting=function(e){void 0!==t.waiters&&(t.waiters=t.waiters.filter((function(t){return t!==e})))},t.notifyWaiters=function(){void 0!==t.waiters&&t.waiters.slice().forEach((function(t){return t()}))},t.prototype.releaseLock=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.releaseLock__private__(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.releaseLock__private__=function(e){return n(this,void 0,void 0,(function(){var n,o,i,c;return r(this,(function(r){switch(r.label){case 0:return n=void 0===this.storageHandler?a:this.storageHandler,o=s+"-"+e,null===(i=n.getItemSync(o))?[2]:(c=JSON.parse(i)).id!==this.id?[3,2]:[4,u.default().lock(c.iat)];case 1:r.sent(),this.acquiredIatSet.delete(c.iat),n.removeItemSync(o),u.default().unlock(c.iat),t.notifyWaiters(),r.label=2;case 2:return[2]}}))}))},t.lockCorrector=function(e){for(var n=Date.now()-5e3,r=e,o=[],i=0;;){var a=r.keySync(i);if(null===a)break;o.push(a),i++}for(var c=!1,l=0;l<o.length;l++){var u=o[l];if(u.includes(s)){var h=r.getItemSync(u);if(null!==h){var d=JSON.parse(h);(void 0===d.timeRefreshed&&d.timeAcquired<n||void 0!==d.timeRefreshed&&d.timeRefreshed<n)&&(r.removeItemSync(u),c=!0)}}}c&&t.notifyWaiters()},t.waiters=void 0,t}();e.default=h})));const d={timeoutInSeconds:60},f={name:"auth0-spa-js",version:"2.1.3"},p=()=>Date.now();class m extends Error{constructor(t,e){super(e),this.error=t,this.error_description=e,Object.setPrototypeOf(this,m.prototype)}static fromPayload({error:t,error_description:e}){return new m(t,e)}}class g extends m{constructor(t,e,n,r=null){super(t,e),this.state=n,this.appState=r,Object.setPrototypeOf(this,g.prototype)}}class y extends m{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,y.prototype)}}class w extends y{constructor(t){super(),this.popup=t,Object.setPrototypeOf(this,w.prototype)}}class v extends m{constructor(t){super("cancelled","Popup closed"),this.popup=t,Object.setPrototypeOf(this,v.prototype)}}class b extends m{constructor(t,e,n){super(t,e),this.mfa_token=n,Object.setPrototypeOf(this,b.prototype)}}class E extends m{constructor(t,e){super("missing_refresh_token",`Missing Refresh Token (audience: '${S(t,["default"])}', scope: '${S(e)}')`),this.audience=t,this.scope=e,Object.setPrototypeOf(this,E.prototype)}}function S(t,e=[]){return t&&!e.includes(t)?t:""}const x=()=>window.crypto,T=()=>{const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.";let e="";return Array.from(x().getRandomValues(new Uint8Array(43))).forEach((n=>e+=t[n%66])),e},A=t=>btoa(t),_=t=>{var{clientId:e}=t,n=o(t,["clientId"]);return new URLSearchParams((t=>Object.keys(t).filter((e=>void 0!==t[e])).reduce(((e,n)=>Object.assign(Object.assign({},e),{[n]:t[n]})),{}))(Object.assign({client_id:e},n))).toString()},k=t=>(t=>decodeURIComponent(atob(t).split("").map((t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2))).join("")))(t.replace(/_/g,"/").replace(/-/g,"+")),R=async(t,e)=>{const n=await fetch(t,e);return{ok:n.ok,json:await n.json()}},C=async(t,e,n,r,o,i,s=1e4)=>o?(async(t,e,n,r,o,i,s)=>{return a={auth:{audience:e,scope:n},timeout:o,fetchUrl:t,fetchOptions:r,useFormData:s},c=i,new Promise((function(t,e){const n=new MessageChannel;n.port1.onmessage=function(r){r.data.error?e(new Error(r.data.error)):t(r.data),n.port1.close()},c.postMessage(a,[n.port2])}));var a,c})(t,e,n,r,s,o,i):(async(t,e,n)=>{const r=new AbortController;let o;return e.signal=r.signal,Promise.race([R(t,e),new Promise(((t,e)=>{o=setTimeout((()=>{r.abort(),e(new Error("Timeout when executing 'fetch'"))}),n)}))]).finally((()=>{clearTimeout(o)}))})(t,r,s);async function P(t,e){var{baseUrl:n,timeout:r,audience:i,scope:s,auth0Client:a,useFormData:c}=t,l=o(t,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);const u=c?_(l):JSON.stringify(l);return await async function(t,e,n,r,i,s,a){let c,l=null;for(let o=0;o<3;o++)try{c=await C(t,n,r,i,s,a,e),l=null;break}catch(t){l=t}if(l)throw l;const u=c.json,{error:h,error_description:d}=u,f=o(u,["error","error_description"]),{ok:p}=c;if(!p){const e=d||`HTTP error. Unable to fetch ${t}`;if("mfa_required"===h)throw new b(h,e,f.mfa_token);if("missing_refresh_token"===h)throw new E(n,r);throw new m(h||"request_error",e)}return f}(`${n}/oauth/token`,r,i||"default",s,{method:"POST",body:u,headers:{"Content-Type":c?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(a||f))}},e,c)}const I=(...t)=>{return(e=t.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(e))).join(" ");var e};class O{constructor(t,e="@@auth0spajs@@",n){this.prefix=e,this.suffix=n,this.clientId=t.clientId,this.scope=t.scope,this.audience=t.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(t){const[e,n,r,o]=t.split("::");return new O({clientId:n,scope:o,audience:r},e)}static fromCacheEntry(t){const{scope:e,audience:n,client_id:r}=t;return new O({scope:e,audience:n,clientId:r})}}class N{set(t,e){localStorage.setItem(t,JSON.stringify(e))}get(t){const e=window.localStorage.getItem(t);if(e)try{return JSON.parse(e)}catch(t){return}}remove(t){localStorage.removeItem(t)}allKeys(){return Object.keys(window.localStorage).filter((t=>t.startsWith("@@auth0spajs@@")))}}class B{constructor(){this.enclosedCache=function(){let t={};return{set(e,n){t[e]=n},get(e){const n=t[e];if(n)return n},remove(e){delete t[e]},allKeys:()=>Object.keys(t)}}()}}class U{constructor(t,e,n){this.cache=t,this.keyManifest=e,this.nowProvider=n||p}async setIdToken(t,e,n){var r;const o=this.getIdTokenCacheKey(t);await this.cache.set(o,{id_token:e,decodedToken:n}),await(null===(r=this.keyManifest)||void 0===r?void 0:r.add(o))}async getIdToken(t){const e=await this.cache.get(this.getIdTokenCacheKey(t.clientId));if(!e&&t.scope&&t.audience){const e=await this.get(t);if(!e)return;if(!e.id_token||!e.decodedToken)return;return{id_token:e.id_token,decodedToken:e.decodedToken}}if(e)return{id_token:e.id_token,decodedToken:e.decodedToken}}async get(t,e=0){var n;let r=await this.cache.get(t.toKey());if(!r){const e=await this.getCacheKeys();if(!e)return;const n=this.matchExistingCacheKey(t,e);n&&(r=await this.cache.get(n))}if(!r)return;const o=await this.nowProvider(),i=Math.floor(o/1e3);return r.expiresAt-e<i?r.body.refresh_token?(r.body={refresh_token:r.body.refresh_token},await this.cache.set(t.toKey(),r),r.body):(await this.cache.remove(t.toKey()),void await(null===(n=this.keyManifest)||void 0===n?void 0:n.remove(t.toKey()))):r.body}async set(t){var e;const n=new O({clientId:t.client_id,scope:t.scope,audience:t.audience}),r=await this.wrapCacheEntry(t);await this.cache.set(n.toKey(),r),await(null===(e=this.keyManifest)||void 0===e?void 0:e.add(n.toKey()))}async clear(t){var e;const n=await this.getCacheKeys();n&&(await n.filter((e=>!t||e.includes(t))).reduce((async(t,e)=>{await t,await this.cache.remove(e)}),Promise.resolve()),await(null===(e=this.keyManifest)||void 0===e?void 0:e.clear()))}async wrapCacheEntry(t){const e=await this.nowProvider();return{body:t,expiresAt:Math.floor(e/1e3)+t.expires_in}}async getCacheKeys(){var t;return this.keyManifest?null===(t=await this.keyManifest.get())||void 0===t?void 0:t.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(t){return new O({clientId:t},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(t,e){return e.filter((e=>{var n;const r=O.fromKey(e),o=new Set(r.scope&&r.scope.split(" ")),i=(null===(n=t.scope)||void 0===n?void 0:n.split(" "))||[],s=r.scope&&i.reduce(((t,e)=>t&&o.has(e)),!0);return"@@auth0spajs@@"===r.prefix&&r.clientId===t.clientId&&r.audience===t.audience&&s}))[0]}}class L{constructor(t,e,n){this.storage=t,this.clientId=e,this.cookieDomain=n,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(t){this.storage.save(this.storageKey,t,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}}const j=t=>"number"==typeof t,D=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"];var M=l((function(t,e){var n=i&&i.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)};function r(t,e){if(!e)return"";var n="; "+t;return!0===e?n:n+"="+e}function o(t,e,n){return encodeURIComponent(t).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(e).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(t){if("number"==typeof t.expires){var e=new Date;e.setMilliseconds(e.getMilliseconds()+864e5*t.expires),t.expires=e}return r("Expires",t.expires?t.expires.toUTCString():"")+r("Domain",t.domain)+r("Path",t.path)+r("Secure",t.secure)+r("SameSite",t.sameSite)}(n)}function s(t){for(var e={},n=t?t.split("; "):[],r=/(%[\dA-F]{2})+/gi,o=0;o<n.length;o++){var i=n[o].split("="),s=i.slice(1).join("=");'"'===s.charAt(0)&&(s=s.slice(1,-1));try{e[i[0].replace(r,decodeURIComponent)]=s.replace(r,decodeURIComponent)}catch(t){}}return e}function a(){return s(document.cookie)}function c(t,e,r){document.cookie=o(t,e,n({path:"/"},r))}e.__esModule=!0,e.encode=o,e.parse=s,e.getAll=a,e.get=function(t){return a()[t]},e.set=c,e.remove=function(t,e){c(t,"",n(n({},e),{expires:-1}))}}));s(M),M.encode,M.parse,M.getAll;var V=M.get,F=M.set,K=M.remove;const $={get(t){const e=V(t);if(void 0!==e)return JSON.parse(e)},save(t,e,n){let r={};"https:"===window.location.protocol&&(r={secure:!0,sameSite:"none"}),(null==n?void 0:n.daysUntilExpire)&&(r.expires=n.daysUntilExpire),(null==n?void 0:n.cookieDomain)&&(r.domain=n.cookieDomain),F(t,JSON.stringify(e),r)},remove(t,e){let n={};(null==e?void 0:e.cookieDomain)&&(n.domain=e.cookieDomain),K(t,n)}},W={get:t=>$.get(t)||$.get(`_legacy_${t}`),save(t,e,n){let r={};"https:"===window.location.protocol&&(r={secure:!0}),(null==n?void 0:n.daysUntilExpire)&&(r.expires=n.daysUntilExpire),(null==n?void 0:n.cookieDomain)&&(r.domain=n.cookieDomain),F(`_legacy_${t}`,JSON.stringify(e),r),$.save(t,e,n)},remove(t,e){let n={};(null==e?void 0:e.cookieDomain)&&(n.domain=e.cookieDomain),K(t,n),$.remove(t,e),$.remove(`_legacy_${t}`,e)}},z={get(t){if("undefined"==typeof sessionStorage)return;const e=sessionStorage.getItem(t);return null!=e?JSON.parse(e):void 0},save(t,e){sessionStorage.setItem(t,JSON.stringify(e))},remove(t){sessionStorage.removeItem(t)}};var H,Z=("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",null,!1,function(t){return H=H||function(t,e,n){var r=void 0===e?null:e,o=function(t,e){var n=atob(t);if(e){for(var r=new Uint8Array(n.length),o=0,i=n.length;o<i;++o)r[o]=n.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}(t,void 0!==n&&n),i=o.indexOf("\n",10)+1,s=o.substring(i)+(r?"//# sourceMappingURL="+r:""),a=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(a)}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",null,false),new Worker(H,t)});const q={};class G{constructor(t,e){this.cache=t,this.clientId=e,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(t){var e;const n=new Set((null===(e=await this.cache.get(this.manifestKey))||void 0===e?void 0:e.keys)||[]);n.add(t),await this.cache.set(this.manifestKey,{keys:[...n]})}async remove(t){const e=await this.cache.get(this.manifestKey);if(e){const n=new Set(e.keys);return n.delete(t),n.size>0?await this.cache.set(this.manifestKey,{keys:[...n]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(t){return`@@auth0spajs@@::${t}`}}const Y={memory:()=>(new B).enclosedCache,localstorage:()=>new N},X=t=>Y[t],J=t=>{const{openUrl:e,onRedirect:n}=t,r=o(t,["openUrl","onRedirect"]);return Object.assign(Object.assign({},r),{openUrl:!1===e||e?e:n})},Q=new h;class tt{constructor(t){let e,n;if(this.userCache=(new B).enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await Q.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),t),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),t.authorizationParams)}),"undefined"!=typeof window&&(()=>{if(!x())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(void 0===x().subtle)throw new Error("\n      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.\n    ")})(),t.cache&&t.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),t.cache)n=t.cache;else{if(e=t.cacheLocation||"memory",!X(e))throw new Error(`Invalid cache location "${e}"`);n=X(e)()}this.httpTimeoutMs=t.httpTimeoutInSeconds?1e3*t.httpTimeoutInSeconds:1e4,this.cookieStorage=!1===t.legacySameSiteCookie?$:W,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(t=>`auth0.${this.options.clientId}.is.authenticated`)(),this.sessionCheckExpiryDays=t.sessionCheckExpiryDays||1;const r=t.useCookiesForTransactions?this.cookieStorage:z;var o;this.scope=I("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new L(r,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||p,this.cacheManager=new U(n,n.allKeys?void 0:new G(n,this.options.clientId),this.nowProvider),this.domainUrl=(o=this.options.domain,/^https?:\/\//.test(o)?o:`https://${o}`),this.tokenIssuer=((t,e)=>t?t.startsWith("https://")?t:`https://${t}/`:`${e}/`)(this.options.issuer,this.domainUrl),"undefined"!=typeof window&&window.Worker&&this.options.useRefreshTokens&&"memory"===e&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new Z)}_url(t){const e=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||f)));return`${this.domainUrl}${t}&auth0Client=${e}`}_authorizeUrl(t){return this._url(`/authorize?${_(t)}`)}async _verifyIdToken(t,e,n){const r=await this.nowProvider();return(t=>{if(!t.id_token)throw new Error("ID token is required but missing");const e=(t=>{const e=t.split("."),[n,r,o]=e;if(3!==e.length||!n||!r||!o)throw new Error("ID token could not be decoded");const i=JSON.parse(k(r)),s={__raw:t},a={};return Object.keys(i).forEach((t=>{s[t]=i[t],D.includes(t)||(a[t]=i[t])})),{encoded:{header:n,payload:r,signature:o},header:JSON.parse(k(n)),claims:s,user:a}})(t.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==t.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${t.iss}", found "${e.claims.iss}"`);if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if("RS256"!==e.header.alg)throw new Error(`Signature algorithm of "${e.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!e.claims.aud||"string"!=typeof e.claims.aud&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(t.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${t.aud}" but was not one of "${e.claims.aud.join(", ")}"`);if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==t.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${t.aud}", found "${e.claims.azp}"`)}}else if(e.claims.aud!==t.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${t.aud}" but found "${e.claims.aud}"`);if(t.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==t.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${t.nonce}", found "${e.claims.nonce}"`)}if(t.max_age&&!j(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(null==e.claims.exp||!j(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!j(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");const n=t.leeway||60,r=new Date(t.now||Date.now()),o=new Date(0);if(o.setUTCSeconds(e.claims.exp+n),r>o)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${r}) is after expiration time (${o})`);if(null!=e.claims.nbf&&j(e.claims.nbf)){const t=new Date(0);if(t.setUTCSeconds(e.claims.nbf-n),r<t)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${r}) is before ${t}`)}if(null!=e.claims.auth_time&&j(e.claims.auth_time)){const o=new Date(0);if(o.setUTCSeconds(parseInt(e.claims.auth_time)+t.max_age+n),r>o)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${r}) is after last auth at ${o}`)}if(t.organization){const n=t.organization.trim();if(n.startsWith("org_")){const t=n;if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(t!==e.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${t}", found "${e.claims.org_id}"`)}else{const t=n.toLowerCase();if(!e.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(t!==e.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${t}", found "${e.claims.org_name}"`)}}return e})({iss:this.tokenIssuer,aud:this.options.clientId,id_token:t,nonce:e,organization:n,leeway:this.options.leeway,max_age:(o=this.options.authorizationParams.max_age,"string"!=typeof o?o:parseInt(o,10)||void 0),now:r});var o}_processOrgHint(t){t?this.cookieStorage.save(this.orgHintCookieName,t,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(t,e,n){const r=A(T()),o=A(T()),i=T(),s=(t=>{const e=new Uint8Array(t);return(t=>{const e={"+":"-","/":"_","=":""};return t.replace(/[+/=]/g,(t=>e[t]))})(window.btoa(String.fromCharCode(...Array.from(e))))})(await(async t=>{const e=x().subtle.digest({name:"SHA-256"},(new TextEncoder).encode(t));return await e})(i)),a=((t,e,n,r,o,i,s,a)=>Object.assign(Object.assign(Object.assign({client_id:t.clientId},t.authorizationParams),n),{scope:I(e,n.scope),response_type:"code",response_mode:a||"query",state:r,nonce:o,redirect_uri:s||t.authorizationParams.redirect_uri,code_challenge:i,code_challenge_method:"S256"}))(this.options,this.scope,t,r,o,s,t.redirect_uri||this.options.authorizationParams.redirect_uri||n,null==e?void 0:e.response_mode),c=this._authorizeUrl(a);return{nonce:o,code_verifier:i,scope:a.scope,audience:a.audience||"default",redirect_uri:a.redirect_uri,state:r,url:c}}async loginWithPopup(t,e){var n;if(t=t||{},!(e=e||{}).popup&&(e.popup=(t=>{const e=window.screenX+(window.innerWidth-400)/2,n=window.screenY+(window.innerHeight-600)/2;return window.open("","auth0:authorize:popup",`left=${e},top=${n},width=400,height=600,resizable,scrollbars=yes,status=1`)})(),!e.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");const r=await this._prepareAuthorizeUrl(t.authorizationParams||{},{response_mode:"web_message"},window.location.origin);e.popup.location.href=r.url;const o=await(t=>new Promise(((e,n)=>{let r;const o=setInterval((()=>{t.popup&&t.popup.closed&&(clearInterval(o),clearTimeout(i),window.removeEventListener("message",r,!1),n(new v(t.popup)))}),1e3),i=setTimeout((()=>{clearInterval(o),n(new w(t.popup)),window.removeEventListener("message",r,!1)}),1e3*(t.timeoutInSeconds||60));r=function(s){if(s.data&&"authorization_response"===s.data.type){if(clearTimeout(i),clearInterval(o),window.removeEventListener("message",r,!1),t.popup.close(),s.data.response.error)return n(m.fromPayload(s.data.response));e(s.data.response)}},window.addEventListener("message",r)})))(Object.assign(Object.assign({},e),{timeoutInSeconds:e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(r.state!==o.state)throw new m("state_mismatch","Invalid state");const i=(null===(n=t.authorizationParams)||void 0===n?void 0:n.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:r.audience,scope:r.scope,code_verifier:r.code_verifier,grant_type:"authorization_code",code:o.code,redirect_uri:r.redirect_uri},{nonceIn:r.nonce,organization:i})}async getUser(){var t;const e=await this._getIdTokenFromCache();return null===(t=null==e?void 0:e.decodedToken)||void 0===t?void 0:t.user}async getIdTokenClaims(){var t;const e=await this._getIdTokenFromCache();return null===(t=null==e?void 0:e.decodedToken)||void 0===t?void 0:t.claims}async loginWithRedirect(t={}){var e;const n=J(t),{openUrl:r,fragment:i,appState:s}=n,a=o(n,["openUrl","fragment","appState"]),c=(null===(e=a.authorizationParams)||void 0===e?void 0:e.organization)||this.options.authorizationParams.organization,l=await this._prepareAuthorizeUrl(a.authorizationParams||{}),{url:u}=l,h=o(l,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},h),{appState:s}),c&&{organization:c}));const d=i?`${u}#${i}`:u;r?await r(d):window.location.assign(d)}async handleRedirectCallback(t=window.location.href){const e=t.split("?").slice(1);if(0===e.length)throw new Error("There are no query params available for parsing.");const{state:n,code:r,error:o,error_description:i}=(t=>{t.indexOf("#")>-1&&(t=t.substring(0,t.indexOf("#")));const e=new URLSearchParams(t);return{state:e.get("state"),code:e.get("code")||void 0,error:e.get("error")||void 0,error_description:e.get("error_description")||void 0}})(e.join("")),s=this.transactionManager.get();if(!s)throw new m("missing_transaction","Invalid state");if(this.transactionManager.remove(),o)throw new g(o,i||o,n,s.appState);if(!s.code_verifier||s.state&&s.state!==n)throw new m("state_mismatch","Invalid state");const a=s.organization,c=s.nonce,l=s.redirect_uri;return await this._requestToken(Object.assign({audience:s.audience,scope:s.scope,code_verifier:s.code_verifier,grant_type:"authorization_code",code:r},l?{redirect_uri:l}:{}),{nonceIn:c,organization:a}),{appState:s.appState}}async checkSession(t){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(t)}catch(t){}}async getTokenSilently(t={}){var e;const n=Object.assign(Object.assign({cacheMode:"on"},t),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),t.authorizationParams),{scope:I(this.scope,null===(e=t.authorizationParams)||void 0===e?void 0:e.scope)})}),r=await((t,e)=>{let n=q[e];return n||(n=t().finally((()=>{delete q[e],n=null})),q[e]=n),n})((()=>this._getTokenSilently(n)),`${this.options.clientId}::${n.authorizationParams.audience}::${n.authorizationParams.scope}`);return t.detailedResponse?r:null==r?void 0:r.access_token}async _getTokenSilently(t){const{cacheMode:e}=t,n=o(t,["cacheMode"]);if("off"!==e){const t=await this._getEntryFromCache({scope:n.authorizationParams.scope,audience:n.authorizationParams.audience||"default",clientId:this.options.clientId});if(t)return t}if("cache-only"!==e){if(!await(async(t,e=3)=>{for(let n=0;n<e;n++)if(await t())return!0;return!1})((()=>Q.acquireLock("auth0.lock.getTokenSilently",5e3)),10))throw new y;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),"off"!==e){const t=await this._getEntryFromCache({scope:n.authorizationParams.scope,audience:n.authorizationParams.audience||"default",clientId:this.options.clientId});if(t)return t}const t=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(n):await this._getTokenFromIFrame(n),{id_token:r,access_token:o,oauthTokenScope:i,expires_in:s}=t;return Object.assign(Object.assign({id_token:r,access_token:o},i?{scope:i}:null),{expires_in:s})}finally{await Q.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}}async getTokenWithPopup(t={},e={}){var n;const r=Object.assign(Object.assign({},t),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),t.authorizationParams),{scope:I(this.scope,null===(n=t.authorizationParams)||void 0===n?void 0:n.scope)})});return e=Object.assign(Object.assign({},d),e),await this.loginWithPopup(r,e),(await this.cacheManager.get(new O({scope:r.authorizationParams.scope,audience:r.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(t){null!==t.clientId?t.clientId=t.clientId||this.options.clientId:delete t.clientId;const e=t.logoutParams||{},{federated:n}=e,r=o(e,["federated"]),i=n?"&federated":"";return this._url(`/v2/logout?${_(Object.assign({clientId:t.clientId},r))}`)+i}async logout(t={}){const e=J(t),{openUrl:n}=e,r=o(e,["openUrl"]);null===t.clientId?await this.cacheManager.clear():await this.cacheManager.clear(t.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@");const i=this._buildLogoutUrl(r);n?await n(i):!1!==n&&window.location.assign(i)}async _getTokenFromIFrame(t){const e=Object.assign(Object.assign({},t.authorizationParams),{prompt:"none"}),n=this.cookieStorage.get(this.orgHintCookieName);n&&!e.organization&&(e.organization=n);const{url:r,state:o,nonce:i,code_verifier:s,redirect_uri:a,scope:c,audience:l}=await this._prepareAuthorizeUrl(e,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new m("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");const n=t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,u=await((t,e,n=60)=>new Promise(((r,o)=>{const i=window.document.createElement("iframe");i.setAttribute("width","0"),i.setAttribute("height","0"),i.style.display="none";const s=()=>{window.document.body.contains(i)&&(window.document.body.removeChild(i),window.removeEventListener("message",a,!1))};let a;const c=setTimeout((()=>{o(new y),s()}),1e3*n);a=function(t){if(t.origin!=e)return;if(!t.data||"authorization_response"!==t.data.type)return;const n=t.source;n&&n.close(),t.data.response.error?o(m.fromPayload(t.data.response)):r(t.data.response),clearTimeout(c),window.removeEventListener("message",a,!1),setTimeout(s,2e3)},window.addEventListener("message",a,!1),window.document.body.appendChild(i),i.setAttribute("src",t)})))(r,this.domainUrl,n);if(o!==u.state)throw new m("state_mismatch","Invalid state");const h=await this._requestToken(Object.assign(Object.assign({},t.authorizationParams),{code_verifier:s,code:u.code,grant_type:"authorization_code",redirect_uri:a,timeout:t.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:i,organization:e.organization});return Object.assign(Object.assign({},h),{scope:c,oauthTokenScope:h.scope,audience:l})}catch(t){throw"login_required"===t.error&&this.logout({openUrl:!1}),t}}async _getTokenUsingRefreshToken(t){const e=await this.cacheManager.get(new O({scope:t.authorizationParams.scope,audience:t.authorizationParams.audience||"default",clientId:this.options.clientId}));if(!(e&&e.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(t);throw new E(t.authorizationParams.audience||"default",t.authorizationParams.scope)}const n=t.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,r="number"==typeof t.timeoutInSeconds?1e3*t.timeoutInSeconds:null;try{const o=await this._requestToken(Object.assign(Object.assign(Object.assign({},t.authorizationParams),{grant_type:"refresh_token",refresh_token:e&&e.refresh_token,redirect_uri:n}),r&&{timeout:r}));return Object.assign(Object.assign({},o),{scope:t.authorizationParams.scope,oauthTokenScope:o.scope,audience:t.authorizationParams.audience||"default"})}catch(e){if((e.message.indexOf("Missing Refresh Token")>-1||e.message&&e.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(t);throw e}}async _saveEntryInCache(t){const{id_token:e,decodedToken:n}=t,r=o(t,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:e,decodedToken:n}),await this.cacheManager.setIdToken(this.options.clientId,t.id_token,t.decodedToken),await this.cacheManager.set(r)}async _getIdTokenFromCache(){const t=this.options.authorizationParams.audience||"default",e=await this.cacheManager.getIdToken(new O({clientId:this.options.clientId,audience:t,scope:this.scope})),n=this.userCache.get("@@user@@");return e&&e.id_token===(null==n?void 0:n.id_token)?n:(this.userCache.set("@@user@@",e),e)}async _getEntryFromCache({scope:t,audience:e,clientId:n}){const r=await this.cacheManager.get(new O({scope:t,audience:e,clientId:n}),60);if(r&&r.access_token){const{access_token:t,oauthTokenScope:e,expires_in:n}=r,o=await this._getIdTokenFromCache();return o&&Object.assign(Object.assign({id_token:o.id_token,access_token:t},e?{scope:e}:null),{expires_in:n})}}async _requestToken(t,e){const{nonceIn:n,organization:r}=e||{},o=await P(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},t),this.worker),i=await this._verifyIdToken(o.id_token,n,r);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},o),{decodedToken:i,scope:t.scope,audience:t.audience||"default"}),o.scope?{oauthTokenScope:o.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(r||i.claims.org_id),Object.assign(Object.assign({},o),{decodedToken:i})}}var et=a(470);function nt(t,e){return function(){return t.apply(e,arguments)}}const{toString:rt}=Object.prototype,{getPrototypeOf:ot}=Object,it=(st=Object.create(null),t=>{const e=rt.call(t);return st[e]||(st[e]=e.slice(8,-1).toLowerCase())});var st;const at=t=>(t=t.toLowerCase(),e=>it(e)===t),ct=t=>e=>typeof e===t,{isArray:lt}=Array,ut=ct("undefined");const ht=at("ArrayBuffer");const dt=ct("string"),ft=ct("function"),pt=ct("number"),mt=t=>null!==t&&"object"==typeof t,gt=t=>{if("object"!==it(t))return!1;const e=ot(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},yt=at("Date"),wt=at("File"),vt=at("Blob"),bt=at("FileList"),Et=at("URLSearchParams");function St(t,e,{allOwnKeys:n=!1}={}){if(null==t)return;let r,o;if("object"!=typeof t&&(t=[t]),lt(t))for(r=0,o=t.length;r<o;r++)e.call(null,t[r],r,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let s;for(r=0;r<i;r++)s=o[r],e.call(null,t[s],s,t)}}function xt(t,e){e=e.toLowerCase();const n=Object.keys(t);let r,o=n.length;for(;o-- >0;)if(r=n[o],e===r.toLowerCase())return r;return null}const Tt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,At=t=>!ut(t)&&t!==Tt;const _t=(kt="undefined"!=typeof Uint8Array&&ot(Uint8Array),t=>kt&&t instanceof kt);var kt;const Rt=at("HTMLFormElement"),Ct=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Pt=at("RegExp"),It=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};St(n,((n,o)=>{let i;!1!==(i=e(n,o,t))&&(r[o]=i||n)})),Object.defineProperties(t,r)},Ot="abcdefghijklmnopqrstuvwxyz",Nt="0123456789",Bt={DIGIT:Nt,ALPHA:Ot,ALPHA_DIGIT:Ot+Ot.toUpperCase()+Nt};const Ut=at("AsyncFunction"),Lt={isArray:lt,isArrayBuffer:ht,isBuffer:function(t){return null!==t&&!ut(t)&&null!==t.constructor&&!ut(t.constructor)&&ft(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||ft(t.append)&&("formdata"===(e=it(t))||"object"===e&&ft(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&ht(t.buffer),e},isString:dt,isNumber:pt,isBoolean:t=>!0===t||!1===t,isObject:mt,isPlainObject:gt,isUndefined:ut,isDate:yt,isFile:wt,isBlob:vt,isRegExp:Pt,isFunction:ft,isStream:t=>mt(t)&&ft(t.pipe),isURLSearchParams:Et,isTypedArray:_t,isFileList:bt,forEach:St,merge:function t(){const{caseless:e}=At(this)&&this||{},n={},r=(r,o)=>{const i=e&&xt(n,o)||o;gt(n[i])&&gt(r)?n[i]=t(n[i],r):gt(r)?n[i]=t({},r):lt(r)?n[i]=r.slice():n[i]=r};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&St(arguments[t],r);return n},extend:(t,e,n,{allOwnKeys:r}={})=>(St(e,((e,r)=>{n&&ft(e)?t[r]=nt(e,n):t[r]=e}),{allOwnKeys:r}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,r)=>{let o,i,s;const a={};if(e=e||{},null==t)return e;do{for(o=Object.getOwnPropertyNames(t),i=o.length;i-- >0;)s=o[i],r&&!r(s,t,e)||a[s]||(e[s]=t[s],a[s]=!0);t=!1!==n&&ot(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:it,kindOfTest:at,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return-1!==r&&r===n},toArray:t=>{if(!t)return null;if(lt(t))return t;let e=t.length;if(!pt(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=n.next())&&!r.done;){const n=r.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const r=[];for(;null!==(n=t.exec(e));)r.push(n);return r},isHTMLForm:Rt,hasOwnProperty:Ct,hasOwnProp:Ct,reduceDescriptors:It,freezeMethods:t=>{It(t,((e,n)=>{if(ft(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=t[n];ft(r)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(t,e)=>{const n={},r=t=>{t.forEach((t=>{n[t]=!0}))};return lt(t)?r(t):r(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:xt,global:Tt,isContextDefined:At,ALPHABET:Bt,generateString:(t=16,e=Bt.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n},isSpecCompliantForm:function(t){return!!(t&&ft(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),n=(t,r)=>{if(mt(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const o=lt(t)?[]:{};return St(t,((t,e)=>{const i=n(t,r+1);!ut(i)&&(o[e]=i)})),e[r]=void 0,o}}return t};return n(t,0)},isAsyncFn:Ut,isThenable:t=>t&&(mt(t)||ft(t))&&ft(t.then)&&ft(t.catch)};function jt(t,e,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}Lt.inherits(jt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Lt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Dt=jt.prototype,Mt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{Mt[t]={value:t}})),Object.defineProperties(jt,Mt),Object.defineProperty(Dt,"isAxiosError",{value:!0}),jt.from=(t,e,n,r,o,i)=>{const s=Object.create(Dt);return Lt.toFlatObject(t,s,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),jt.call(s,t.message,e,n,r,o),s.cause=t,s.name=t.name,i&&Object.assign(s,i),s};const Vt=jt;var Ft=a(764).lW;function Kt(t){return Lt.isPlainObject(t)||Lt.isArray(t)}function $t(t){return Lt.endsWith(t,"[]")?t.slice(0,-2):t}function Wt(t,e,n){return t?t.concat(e).map((function(t,e){return t=$t(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}const zt=Lt.toFlatObject(Lt,{},null,(function(t){return/^is[A-Z]/.test(t)}));const Ht=function(t,e,n){if(!Lt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const r=(n=Lt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!Lt.isUndefined(e[t])}))).metaTokens,o=n.visitor||l,i=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Lt.isSpecCompliantForm(e);if(!Lt.isFunction(o))throw new TypeError("visitor must be a function");function c(t){if(null===t)return"";if(Lt.isDate(t))return t.toISOString();if(!a&&Lt.isBlob(t))throw new Vt("Blob is not supported. Use a Buffer instead.");return Lt.isArrayBuffer(t)||Lt.isTypedArray(t)?a&&"function"==typeof Blob?new Blob([t]):Ft.from(t):t}function l(t,n,o){let a=t;if(t&&!o&&"object"==typeof t)if(Lt.endsWith(n,"{}"))n=r?n:n.slice(0,-2),t=JSON.stringify(t);else if(Lt.isArray(t)&&function(t){return Lt.isArray(t)&&!t.some(Kt)}(t)||(Lt.isFileList(t)||Lt.endsWith(n,"[]"))&&(a=Lt.toArray(t)))return n=$t(n),a.forEach((function(t,r){!Lt.isUndefined(t)&&null!==t&&e.append(!0===s?Wt([n],r,i):null===s?n:n+"[]",c(t))})),!1;return!!Kt(t)||(e.append(Wt(o,n,i),c(t)),!1)}const u=[],h=Object.assign(zt,{defaultVisitor:l,convertValue:c,isVisitable:Kt});if(!Lt.isObject(t))throw new TypeError("data must be an object");return function t(n,r){if(!Lt.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Lt.forEach(n,(function(n,i){!0===(!(Lt.isUndefined(n)||null===n)&&o.call(e,n,Lt.isString(i)?i.trim():i,r,h))&&t(n,r?r.concat(i):[i])})),u.pop()}}(t),e};function Zt(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function qt(t,e){this._pairs=[],t&&Ht(t,this,e)}const Gt=qt.prototype;Gt.append=function(t,e){this._pairs.push([t,e])},Gt.toString=function(t){const e=t?function(e){return t.call(this,e,Zt)}:Zt;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};const Yt=qt;function Xt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Jt(t,e,n){if(!e)return t;const r=n&&n.encode||Xt,o=n&&n.serialize;let i;if(i=o?o(e,n):Lt.isURLSearchParams(e)?e.toString():new Yt(e,n).toString(r),i){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}const Qt=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Lt.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},te={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ee={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Yt,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ne="undefined"!=typeof window&&"undefined"!=typeof document,re=(oe="undefined"!=typeof navigator&&navigator.product,ne&&["ReactNative","NativeScript","NS"].indexOf(oe)<0);var oe;const ie="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,se={...t,...ee};const ae=function(t){function e(t,n,r,o){let i=t[o++];if("__proto__"===i)return!0;const s=Number.isFinite(+i),a=o>=t.length;if(i=!i&&Lt.isArray(r)?r.length:i,a)return Lt.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!s;r[i]&&Lt.isObject(r[i])||(r[i]=[]);return e(t,n,r[i],o)&&Lt.isArray(r[i])&&(r[i]=function(t){const e={},n=Object.keys(t);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],e[i]=t[i];return e}(r[i])),!s}if(Lt.isFormData(t)&&Lt.isFunction(t.entries)){const n={};return Lt.forEachEntry(t,((t,r)=>{e(function(t){return Lt.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),r,n,0)})),n}return null};const ce={transitional:te,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,o=Lt.isObject(t);o&&Lt.isHTMLForm(t)&&(t=new FormData(t));if(Lt.isFormData(t))return r&&r?JSON.stringify(ae(t)):t;if(Lt.isArrayBuffer(t)||Lt.isBuffer(t)||Lt.isStream(t)||Lt.isFile(t)||Lt.isBlob(t))return t;if(Lt.isArrayBufferView(t))return t.buffer;if(Lt.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return Ht(t,new se.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,r){return se.isNode&&Lt.isBuffer(t)?(this.append(e,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((i=Lt.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Ht(i?{"files[]":t}:t,e&&new e,this.formSerializer)}}return o||r?(e.setContentType("application/json",!1),function(t,e,n){if(Lt.isString(t))try{return(e||JSON.parse)(t),Lt.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||ce.transitional,n=e&&e.forcedJSONParsing,r="json"===this.responseType;if(t&&Lt.isString(t)&&(n&&!this.responseType||r)){const n=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(t){if(n){if("SyntaxError"===t.name)throw Vt.from(t,Vt.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:se.classes.FormData,Blob:se.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Lt.forEach(["delete","get","head","post","put","patch"],(t=>{ce.headers[t]={}}));const le=ce,ue=Lt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),he=Symbol("internals");function de(t){return t&&String(t).trim().toLowerCase()}function fe(t){return!1===t||null==t?t:Lt.isArray(t)?t.map(fe):String(t)}function pe(t,e,n,r,o){return Lt.isFunction(r)?r.call(this,e,n):(o&&(e=n),Lt.isString(e)?Lt.isString(r)?-1!==e.indexOf(r):Lt.isRegExp(r)?r.test(e):void 0:void 0)}class me{constructor(t){t&&this.set(t)}set(t,e,n){const r=this;function o(t,e,n){const o=de(e);if(!o)throw new Error("header name must be a non-empty string");const i=Lt.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||e]=fe(t))}const i=(t,e)=>Lt.forEach(t,((t,n)=>o(t,n,e)));return Lt.isPlainObject(t)||t instanceof this.constructor?i(t,e):Lt.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim())?i((t=>{const e={};let n,r,o;return t&&t.split("\n").forEach((function(t){o=t.indexOf(":"),n=t.substring(0,o).trim().toLowerCase(),r=t.substring(o+1).trim(),!n||e[n]&&ue[n]||("set-cookie"===n?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)})),e})(t),e):null!=t&&o(e,t,n),this}get(t,e){if(t=de(t)){const n=Lt.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}(t);if(Lt.isFunction(e))return e.call(this,t,n);if(Lt.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=de(t)){const n=Lt.findKey(this,t);return!(!n||void 0===this[n]||e&&!pe(0,this[n],n,e))}return!1}delete(t,e){const n=this;let r=!1;function o(t){if(t=de(t)){const o=Lt.findKey(n,t);!o||e&&!pe(0,n[o],o,e)||(delete n[o],r=!0)}}return Lt.isArray(t)?t.forEach(o):o(t),r}clear(t){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const o=e[n];t&&!pe(0,this[o],o,t,!0)||(delete this[o],r=!0)}return r}normalize(t){const e=this,n={};return Lt.forEach(this,((r,o)=>{const i=Lt.findKey(n,o);if(i)return e[i]=fe(r),void delete e[o];const s=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,n)=>e.toUpperCase()+n))}(o):String(o).trim();s!==o&&delete e[o],e[s]=fe(r),n[s]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return Lt.forEach(this,((n,r)=>{null!=n&&!1!==n&&(e[r]=t&&Lt.isArray(n)?n.join(", "):n)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach((t=>n.set(t))),n}static accessor(t){const e=(this[he]=this[he]={accessors:{}}).accessors,n=this.prototype;function r(t){const r=de(t);e[r]||(!function(t,e){const n=Lt.toCamelCase(" "+e);["get","set","has"].forEach((r=>{Object.defineProperty(t,r+n,{value:function(t,n,o){return this[r].call(this,e,t,n,o)},configurable:!0})}))}(n,t),e[r]=!0)}return Lt.isArray(t)?t.forEach(r):r(t),this}}me.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Lt.reduceDescriptors(me.prototype,(({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[n]=t}}})),Lt.freezeMethods(me);const ge=me;function ye(t,e){const n=this||le,r=e||n,o=ge.from(r.headers);let i=r.data;return Lt.forEach(t,(function(t){i=t.call(n,i,o.normalize(),e?e.status:void 0)})),o.normalize(),i}function we(t){return!(!t||!t.__CANCEL__)}function ve(t,e,n){Vt.call(this,null==t?"canceled":t,Vt.ERR_CANCELED,e,n),this.name="CanceledError"}Lt.inherits(ve,Vt,{__CANCEL__:!0});const be=ve;const Ee=se.hasStandardBrowserEnv?{write(t,e,n,r,o,i){const s=[t+"="+encodeURIComponent(e)];Lt.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Lt.isString(r)&&s.push("path="+r),Lt.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Se(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const xe=se.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function r(n){let r=n;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return n=r(window.location.href),function(t){const e=Lt.isString(t)?r(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return!0};const Te=function(t,e){t=t||10;const n=new Array(t),r=new Array(t);let o,i=0,s=0;return e=void 0!==e?e:1e3,function(a){const c=Date.now(),l=r[s];o||(o=c),n[i]=a,r[i]=c;let u=s,h=0;for(;u!==i;)h+=n[u++],u%=t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const d=l&&c-l;return d?Math.round(1e3*h/d):void 0}};function Ae(t,e){let n=0;const r=Te(50,250);return o=>{const i=o.loaded,s=o.lengthComputable?o.total:void 0,a=i-n,c=r(a);n=i;const l={loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&i<=s?(s-i)/c:void 0,event:o};l[e?"download":"upload"]=!0,t(l)}}const _e={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,n){let r=t.data;const o=ge.from(t.headers).normalize();let i,s,{responseType:a,withXSRFToken:c}=t;function l(){t.cancelToken&&t.cancelToken.unsubscribe(i),t.signal&&t.signal.removeEventListener("abort",i)}if(Lt.isFormData(r))if(se.hasStandardBrowserEnv||se.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if(!1!==(s=o.getContentType())){const[t,...e]=s?s.split(";").map((t=>t.trim())).filter(Boolean):[];o.setContentType([t||"multipart/form-data",...e].join("; "))}let u=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",n=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(e+":"+n))}const h=Se(t.baseURL,t.url);function d(){if(!u)return;const r=ge.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(t,e,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(new Vt("Request failed with status code "+n.status,[Vt.ERR_BAD_REQUEST,Vt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}((function(t){e(t),l()}),(function(t){n(t),l()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:t,request:u}),u=null}if(u.open(t.method.toUpperCase(),Jt(h,t.params,t.paramsSerializer),!0),u.timeout=t.timeout,"onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(d)},u.onabort=function(){u&&(n(new Vt("Request aborted",Vt.ECONNABORTED,t,u)),u=null)},u.onerror=function(){n(new Vt("Network Error",Vt.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const r=t.transitional||te;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new Vt(e,r.clarifyTimeoutError?Vt.ETIMEDOUT:Vt.ECONNABORTED,t,u)),u=null},se.hasStandardBrowserEnv&&(c&&Lt.isFunction(c)&&(c=c(t)),c||!1!==c&&xe(h))){const e=t.xsrfHeaderName&&t.xsrfCookieName&&Ee.read(t.xsrfCookieName);e&&o.set(t.xsrfHeaderName,e)}void 0===r&&o.setContentType(null),"setRequestHeader"in u&&Lt.forEach(o.toJSON(),(function(t,e){u.setRequestHeader(e,t)})),Lt.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),a&&"json"!==a&&(u.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&u.addEventListener("progress",Ae(t.onDownloadProgress,!0)),"function"==typeof t.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",Ae(t.onUploadProgress)),(t.cancelToken||t.signal)&&(i=e=>{u&&(n(!e||e.type?new be(null,t,u):e),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(i),t.signal&&(t.signal.aborted?i():t.signal.addEventListener("abort",i)));const f=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(h);f&&-1===se.protocols.indexOf(f)?n(new Vt("Unsupported protocol "+f+":",Vt.ERR_BAD_REQUEST,t)):u.send(r||null)}))}};Lt.forEach(_e,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}}));const ke=t=>`- ${t}`,Re=t=>Lt.isFunction(t)||null===t||!1===t,Ce=t=>{t=Lt.isArray(t)?t:[t];const{length:e}=t;let n,r;const o={};for(let i=0;i<e;i++){let e;if(n=t[i],r=n,!Re(n)&&(r=_e[(e=String(n)).toLowerCase()],void 0===r))throw new Vt(`Unknown adapter '${e}'`);if(r)break;o[e||"#"+i]=r}if(!r){const t=Object.entries(o).map((([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build")));let n=e?t.length>1?"since :\n"+t.map(ke).join("\n"):" "+ke(t[0]):"as no adapter specified";throw new Vt("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Pe(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new be(null,t)}function Ie(t){Pe(t),t.headers=ge.from(t.headers),t.data=ye.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return Ce(t.adapter||le.adapter)(t).then((function(e){return Pe(t),e.data=ye.call(t,t.transformResponse,e),e.headers=ge.from(e.headers),e}),(function(e){return we(e)||(Pe(t),e&&e.response&&(e.response.data=ye.call(t,t.transformResponse,e.response),e.response.headers=ge.from(e.response.headers))),Promise.reject(e)}))}const Oe=t=>t instanceof ge?t.toJSON():t;function Ne(t,e){e=e||{};const n={};function r(t,e,n){return Lt.isPlainObject(t)&&Lt.isPlainObject(e)?Lt.merge.call({caseless:n},t,e):Lt.isPlainObject(e)?Lt.merge({},e):Lt.isArray(e)?e.slice():e}function o(t,e,n){return Lt.isUndefined(e)?Lt.isUndefined(t)?void 0:r(void 0,t,n):r(t,e,n)}function i(t,e){if(!Lt.isUndefined(e))return r(void 0,e)}function s(t,e){return Lt.isUndefined(e)?Lt.isUndefined(t)?void 0:r(void 0,t):r(void 0,e)}function a(n,o,i){return i in e?r(n,o):i in t?r(void 0,n):void 0}const c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(t,e)=>o(Oe(t),Oe(e),!0)};return Lt.forEach(Object.keys(Object.assign({},t,e)),(function(r){const i=c[r]||o,s=i(t[r],e[r],r);Lt.isUndefined(s)&&i!==a||(n[r]=s)})),n}const Be="1.6.5",Ue={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{Ue[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));const Le={};Ue.transitional=function(t,e,n){function r(t,e){return"[Axios v1.6.5] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,o,i)=>{if(!1===t)throw new Vt(r(o," has been removed"+(e?" in "+e:"")),Vt.ERR_DEPRECATED);return e&&!Le[o]&&(Le[o]=!0,console.warn(r(o," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,o,i)}};const je={assertOptions:function(t,e,n){if("object"!=typeof t)throw new Vt("options must be an object",Vt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const i=r[o],s=e[i];if(s){const e=t[i],n=void 0===e||s(e,i,t);if(!0!==n)throw new Vt("option "+i+" must be "+n,Vt.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Vt("Unknown option "+i,Vt.ERR_BAD_OPTION)}},validators:Ue},De=je.validators;class Me{constructor(t){this.defaults=t,this.interceptors={request:new Qt,response:new Qt}}request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=Ne(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:o}=e;void 0!==n&&je.assertOptions(n,{silentJSONParsing:De.transitional(De.boolean),forcedJSONParsing:De.transitional(De.boolean),clarifyTimeoutError:De.transitional(De.boolean)},!1),null!=r&&(Lt.isFunction(r)?e.paramsSerializer={serialize:r}:je.assertOptions(r,{encode:De.function,serialize:De.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let i=o&&Lt.merge(o.common,o[e.method]);o&&Lt.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete o[t]})),e.headers=ge.concat(i,o);const s=[];let a=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,s.unshift(t.fulfilled,t.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(t){c.push(t.fulfilled,t.rejected)}));let u,h=0;if(!a){const t=[Ie.bind(this),void 0];for(t.unshift.apply(t,s),t.push.apply(t,c),u=t.length,l=Promise.resolve(e);h<u;)l=l.then(t[h++],t[h++]);return l}u=s.length;let d=e;for(h=0;h<u;){const t=s[h++],e=s[h++];try{d=t(d)}catch(t){e.call(this,t);break}}try{l=Ie.call(this,d)}catch(t){return Promise.reject(t)}for(h=0,u=c.length;h<u;)l=l.then(c[h++],c[h++]);return l}getUri(t){return Jt(Se((t=Ne(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}Lt.forEach(["delete","get","head","options"],(function(t){Me.prototype[t]=function(e,n){return this.request(Ne(n||{},{method:t,url:e,data:(n||{}).data}))}})),Lt.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,o){return this.request(Ne(o||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Me.prototype[t]=e(),Me.prototype[t+"Form"]=e(!0)}));const Ve=Me;class Fe{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then((t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null})),this.promise.then=t=>{let e;const r=new Promise((t=>{n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t,r,o){n.reason||(n.reason=new be(t,r,o),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;const e=new Fe((function(e){t=e}));return{token:e,cancel:t}}}const Ke=Fe;const $e={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($e).forEach((([t,e])=>{$e[e]=t}));const We=$e;const ze=function t(e){const n=new Ve(e),r=nt(Ve.prototype.request,n);return Lt.extend(r,Ve.prototype,n,{allOwnKeys:!0}),Lt.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return t(Ne(e,n))},r}(le);ze.Axios=Ve,ze.CanceledError=be,ze.CancelToken=Ke,ze.isCancel=we,ze.VERSION=Be,ze.toFormData=Ht,ze.AxiosError=Vt,ze.Cancel=ze.CanceledError,ze.all=function(t){return Promise.all(t)},ze.spread=function(t){return function(e){return t.apply(null,e)}},ze.isAxiosError=function(t){return Lt.isObject(t)&&!0===t.isAxiosError},ze.mergeConfig=Ne,ze.AxiosHeaders=ge,ze.formToJSON=t=>ae(Lt.isHTMLForm(t)?new FormData(t):t),ze.getAdapter=Ce,ze.HttpStatusCode=We,ze.default=ze;const He=ze;var Ze=a(742),qe=a(764).lW,Ge=Object.create,Ye=Object.defineProperty,Xe=Object.getOwnPropertyDescriptor,Je=Object.getOwnPropertyNames,Qe=Object.getPrototypeOf,tn=Object.prototype.hasOwnProperty,en=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),nn=(t,e,n)=>(n=null!=t?Ge(Qe(t)):{},((t,e,n,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let o of Je(e))!tn.call(t,o)&&o!==n&&Ye(t,o,{get:()=>e[o],enumerable:!(r=Xe(e,o))||r.enumerable});return t})(!e&&t&&t.__esModule?n:Ye(n,"default",{value:t,enumerable:!0}),t)),rn=en((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){var e=t.length,n=e%4;if(!n)return t;var r=e,o=4-n,i=e+o,s=qe.alloc(i);for(s.write(t);o--;)s.write("=",r++);return s.toString()}})),on=en((t=>{Object.defineProperty(t,"__esModule",{value:!0});var e=rn();function n(t,e){return void 0===e&&(e="utf8"),qe.isBuffer(t)?o(t.toString("base64")):o(qe.from(t,e).toString("base64"))}function r(t){return t=t.toString(),e.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function o(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var i=n;i.encode=n,i.decode=function(t,e){return void 0===e&&(e="utf8"),qe.from(r(t),"base64").toString(e)},i.toBase64=r,i.fromBase64=o,i.toBuffer=function(t){return qe.from(r(t),"base64")},t.default=i})),sn=en(((t,e)=>{e.exports=on().default,e.exports.default=e.exports})),an=en((t=>{t.byteLength=function(t){var e=s(t),n=e[0],r=e[1];return 3*(n+r)/4-r},t.toByteArray=function(t){var e,n,i=s(t),a=i[0],c=i[1],l=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,c)),u=0,h=c>0?a-4:a;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;return 2===c&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[u++]=255&e),1===c&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e),l},t.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],s=16383,a=0,l=r-o;a<l;a+=s)i.push(c(t,a,a+s>l?l:a+s));return 1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),i.join("")};var e,n=[],r=[],o=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(e=0,64;e<64;++e)n[e]=i[e],r[i.charCodeAt(e)]=e;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function a(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function c(t,e,n){for(var r,o=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),o.push(a(r));return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63})),cn=en((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.b64UrlDecode=t.b64UrlEncode=t.bufferTob64Url=t.bufferTob64=t.b64UrlToBuffer=t.stringToB64Url=t.stringToBuffer=t.bufferToString=t.b64UrlToString=t.concatBuffers=void 0;var e=an();function n(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}function r(t){return(new TextEncoder).encode(t)}function o(t){return new Uint8Array(e.toByteArray(c(t)))}function i(t){return e.fromByteArray(new Uint8Array(t))}function s(t){return a(i(t))}function a(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function c(t){let e;return e=(t=t.replace(/\-/g,"+").replace(/\_/g,"/")).length%4==0?0:4-t.length%4,t.concat("=".repeat(e))}t.concatBuffers=function(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n].byteLength;let n=new Uint8Array(e),r=0;n.set(new Uint8Array(t[0]),r),r+=t[0].byteLength;for(let e=1;e<t.length;e++)n.set(new Uint8Array(t[e]),r),r+=t[e].byteLength;return n},t.b64UrlToString=function(t){return n(o(t))},t.bufferToString=n,t.stringToBuffer=r,t.stringToB64Url=function(t){return s(r(t))},t.b64UrlToBuffer=o,t.bufferTob64=i,t.bufferTob64Url=s,t.b64UrlEncode=a,t.b64UrlDecode=c})),ln=en((t=>{Object.defineProperty(t,"__esModule",{value:!0});var e=cn();t.default=class{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let t=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),e=await this.driver.exportKey("jwk",t.privateKey);return{kty:e.kty,e:e.e,n:e.n,d:e.d,p:e.p,q:e.q,dp:e.dp,dq:e.dq,qi:e.qi}}async sign(t,e,{saltLength:n}={}){let r=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(t),e);return new Uint8Array(r)}async hash(t,e="SHA-256"){let n=await this.driver.digest(e,t);return new Uint8Array(n)}async verify(t,e,n){let r={kty:"RSA",e:"AQAB",n:t},o=await this.jwkToPublicCryptoKey(r),i=await this.driver.digest("SHA-256",e),s=await this.driver.verify({name:"RSA-PSS",saltLength:0},o,n,e),a=await this.driver.verify({name:"RSA-PSS",saltLength:32},o,n,e),c=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((o.algorithm.modulusLength-1)/8)-i.byteLength-2},o,n,e);return s||a||c}async jwkToCryptoKey(t){return this.driver.importKey("jwk",t,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(t){return this.driver.importKey("jwk",t,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;let t=crypto?.subtle;return void 0!==t&&["generateKey","importKey","exportKey","digest","sign"].every((e=>"function"==typeof t[e]))}async encrypt(t,n,r){let o=await this.driver.importKey("raw","string"==typeof n?e.stringToBuffer(n):n,{name:"PBKDF2",length:32},!1,["deriveKey"]),i=await this.driver.deriveKey({name:"PBKDF2",salt:r?e.stringToBuffer(r):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},o,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),s=new Uint8Array(16);crypto.getRandomValues(s);let a=await this.driver.encrypt({name:"AES-CBC",iv:s},i,t);return e.concatBuffers([s,a])}async decrypt(t,n,r){let o=await this.driver.importKey("raw","string"==typeof n?e.stringToBuffer(n):n,{name:"PBKDF2",length:32},!1,["deriveKey"]),i=await this.driver.deriveKey({name:"PBKDF2",salt:r?e.stringToBuffer(r):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},o,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),s=t.slice(0,16),a=await this.driver.decrypt({name:"AES-CBC",iv:s},i,t.slice(16));return e.concatBuffers([a])}}})),un=en((t=>{t.read=function(t,e,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,l=c>>1,u=-7,h=n?o-1:0,d=n?-1:1,f=t[e+h];for(h+=d,i=f&(1<<-u)-1,f>>=-u,u+=a;u>0;i=256*i+t[e+h],h+=d,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=256*s+t[e+h],h+=d,u-=8);if(0===i)i=1-l;else{if(i===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),i-=l}return(f?-1:1)*s*Math.pow(2,i-r)},t.write=function(t,e,n,r,o,i){var s,a,c,l=8*i-o-1,u=(1<<l)-1,h=u>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*c-1)*Math.pow(2,o),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;t[n+f]=255&a,f+=p,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;t[n+f]=255&s,f+=p,s/=256,l-=8);t[n+f-p]|=128*m}})),hn=en((t=>{var e=an(),n=un(),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=function(t){return+t!=t&&(t=0),s.alloc(+t)},t.INSPECT_MAX_BYTES=50;var o=2147483647;function i(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,s.prototype),e}function s(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return a(t,e,n)}function a(t,e,n){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let n=0|f(t,e),r=i(n),o=r.write(t,e);return o!==n&&(r=r.slice(0,o)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Z(t,Uint8Array)){let e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return u(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Z(t,ArrayBuffer)||t&&Z(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Z(t,SharedArrayBuffer)||t&&Z(t.buffer,SharedArrayBuffer)))return h(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');let r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return s.from(r,e,n);let o=function(t){if(s.isBuffer(t)){let e=0|d(t.length),n=i(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||q(t.length)?i(0):u(t);if("Buffer"===t.type&&Array.isArray(t.data))return u(t.data)}(t);if(o)return o;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return c(t),i(t<0?0:0|d(t))}function u(t){let e=t.length<0?0:0|d(t.length),n=i(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function h(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,s.prototype),r}function d(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function f(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Z(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(o)return r?-1:W(t).length;e=(""+e).toLowerCase(),o=!0}}function p(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return _(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return x(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){let r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),q(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,o){let i,s=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){let r=-1;for(i=n;i<a;i++)if(l(t,i)===l(e,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===c)return r*s}else-1!==r&&(i-=i-r),r=-1}else for(n+c>a&&(n=a-c),i=n;i>=0;i--){let n=!0;for(let r=0;r<c;r++)if(l(t,i+r)!==l(e,r)){n=!1;break}if(n)return i}return-1}function w(t,e,n,r){n=Number(n)||0;let o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;let i,s=e.length;for(r>s/2&&(r=s/2),i=0;i<r;++i){let r=parseInt(e.substr(2*i,2),16);if(q(r))return i;t[n+i]=r}return i}function v(t,e,n,r){return H(W(e,t.length-n),t,n,r)}function b(t,e,n,r){return H(function(t){let e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function E(t,e,n,r){return H(z(e),t,n,r)}function S(t,e,n,r){return H(function(t,e){let n,r,o,i=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function x(t,n,r){return 0===n&&r===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(n,r))}function T(t,e,n){n=Math.min(t.length,n);let r=[],o=e;for(;o<n;){let e=t[o],i=null,s=e>239?4:e>223?3:e>191?2:1;if(o+s<=n){let n,r,a,c;switch(s){case 1:e<128&&(i=e);break;case 2:n=t[o+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(i=c));break;case 3:n=t[o+1],r=t[o+2],128==(192&n)&&128==(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:n=t[o+1],r=t[o+2],a=t[o+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=s}return function(t){let e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}t.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=function(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch{return!1}}(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(t,e,n){return a(t,e,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(t,e,n){return function(t,e,n){return c(t),t<=0?i(t):void 0!==e?"string"==typeof n?i(t).fill(e,n):i(t).fill(e):i(t)}(t,e,n)},s.allocUnsafe=function(t){return l(t)},s.allocUnsafeSlow=function(t){return l(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(Z(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),Z(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;let r=s.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){let e=t[n];if(Z(e,Uint8Array))o+e.length>r.length?(s.isBuffer(e)||(e=s.from(e)),e.copy(r,o)):Uint8Array.prototype.set.call(r,e,o);else{if(!s.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,o)}o+=e.length}return r},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){let t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},s.prototype.swap32=function(){let t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},s.prototype.swap64=function(){let t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},s.prototype.toString=function(){let t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){let e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(t,e,n,r,o){if(Z(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;let i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),c=Math.min(i,a),l=this.slice(r,o),u=t.slice(e,n);for(let t=0;t<c;++t)if(l[t]!==u[t]){i=l[t],a=u[t];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}let o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return v(this,t,e,n);case"ascii":case"latin1":case"binary":return b(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function _(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function k(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function R(t,e,n){let r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=e;r<n;++r)o+=G[t[r]];return o}function C(t,e,n){let r=t.slice(e,n),o="";for(let t=0;t<r.length-1;t+=2)o+=String.fromCharCode(r[t]+256*r[t+1]);return o}function P(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,n,r,o,i){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function O(t,e,n,r,o){V(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function N(t,e,n,r,o){V(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n+7]=i,i>>=8,t[n+6]=i,i>>=8,t[n+5]=i,i>>=8,t[n+4]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function B(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,r,o,i){return e=+e,r>>>=0,i||B(t,0,r,4),n.write(t,e,r,o,23,4),r+4}function L(t,e,r,o,i){return e=+e,r>>>=0,i||B(t,0,r,8),n.write(t,e,r,o,52,8),r+8}s.prototype.slice=function(t,e){let n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);let r=this.subarray(t,e);return Object.setPrototypeOf(r,s.prototype),r},s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||P(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return r},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||P(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=Y((function(t){F(t>>>=0,"offset");let e=this[t],n=this[t+7];(void 0===e||void 0===n)&&K(t,this.length-8);let r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),s.prototype.readBigUInt64BE=Y((function(t){F(t>>>=0,"offset");let e=this[t],n=this[t+7];(void 0===e||void 0===n)&&K(t,this.length-8);let r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),s.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||P(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||P(t,e,this.length);let r=e,o=1,i=this[t+--r];for(;r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},s.prototype.readInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||P(t,2,this.length);let n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){t>>>=0,e||P(t,2,this.length);let n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=Y((function(t){F(t>>>=0,"offset");let e=this[t],n=this[t+7];(void 0===e||void 0===n)&&K(t,this.length-8);let r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),s.prototype.readBigInt64BE=Y((function(t){F(t>>>=0,"offset");let e=this[t],n=this[t+7];(void 0===e||void 0===n)&&K(t,this.length-8);let r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),s.prototype.readFloatLE=function(t,e){return t>>>=0,e||P(t,4,this.length),n.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||P(t,4,this.length),n.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||P(t,8,this.length),n.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||P(t,8,this.length),n.read(this,t,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){I(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){I(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigUInt64LE=Y((function(t,e=0){return O(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeBigUInt64BE=Y((function(t,e=0){return N(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){let r=Math.pow(2,8*n-1);I(this,t,e,n,r-1,-r)}let o=0,i=1,s=0;for(this[e]=255&t;++o<n&&(i*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){let r=Math.pow(2,8*n-1);I(this,t,e,n,r-1,-r)}let o=n-1,i=1,s=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigInt64LE=Y((function(t,e=0){return O(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeBigInt64BE=Y((function(t,e=0){return N(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!r&&0!==r&&(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);let o=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),o},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){let e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{let i=s.isBuffer(t)?t:s.from(t,r),a=i.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=i[o%a]}return this};var j={};function D(t,e,n){j[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function M(t){let e="",n=t.length,r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function V(t,e,n,r,o,i){if(t>n||t<e){let r,o="bigint"==typeof e?"n":"";throw r=i>3?0===e||e===BigInt(0)?`>= 0${o} and < 2${o} ** ${8*(i+1)}${o}`:`>= -(2${o} ** ${8*(i+1)-1}${o}) and < 2 ** ${8*(i+1)-1}${o}`:`>= ${e}${o} and <= ${n}${o}`,new j.ERR_OUT_OF_RANGE("value",r,t)}!function(t,e,n){F(e,"offset"),(void 0===t[e]||void 0===t[e+n])&&K(e,t.length-(n+1))}(r,o,i)}function F(t,e){if("number"!=typeof t)throw new j.ERR_INVALID_ARG_TYPE(e,"number",t)}function K(t,e,n){throw Math.floor(t)!==t?(F(t,n),new j.ERR_OUT_OF_RANGE(n||"offset","an integer",t)):e<0?new j.ERR_BUFFER_OUT_OF_BOUNDS:new j.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}D("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),D("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),D("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=M(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=M(o)),o+="n"),r+=` It must be ${e}. Received ${o}`,r}),RangeError);var $=/[^+/0-9A-Za-z-_]/g;function W(t,e){e=e||1/0;let n,r=t.length,o=null,i=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function z(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace($,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,r){let o;for(o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function Z(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function q(t){return t!=t}var G=function(){let t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){let r=16*n;for(let o=0;o<16;++o)e[r+o]=t[n]+t[o]}return e}();function Y(t){return typeof BigInt>"u"?X:t}function X(){throw new Error("BigInt not supported")}})),dn=en(((t,e)=>{typeof window<"u"?(window.global=window,global.fetch=window.fetch,e.exports={Buffer:hn().Buffer,Crypto:window.crypto}):e.exports={Buffer:hn().Buffer,Crypto:crypto}})),fn={};((t,e)=>{for(var n in e)Ye(t,n,{get:e[n],enumerable:!0})})(fn,{AVSCTap:()=>In,ArweaveSigner:()=>_n,DataItem:()=>Fn,MAX_TAG_BYTES:()=>Mn,MIN_BINARY_SIZE:()=>Vn,SIG_CONFIG:()=>An,SignatureConfig:()=>bn,Signer:()=>pn,createData:()=>$n,deserializeTags:()=>Bn,indexToType:()=>kn,serializeTags:()=>On,tagsExceedLimit:()=>Nn});var pn=class{signer;publicKey;signatureType;signatureLength;ownerLength;pem;static verify(t,e,n,r){throw new Error("You must implement verify method on child")}},mn=nn(sn(),1),gn=nn(cn(),1);async function yn(t){if(Array.isArray(t)){let e=(0,gn.concatBuffers)([(0,gn.stringToBuffer)("list"),(0,gn.stringToBuffer)(t.length.toString())]);return await wn(t,await Tn().hash(e,"SHA-384"))}let e=t,n=(0,gn.concatBuffers)([(0,gn.stringToBuffer)("blob"),(0,gn.stringToBuffer)(e.byteLength.toString())]),r=(0,gn.concatBuffers)([await Tn().hash(n,"SHA-384"),await Tn().hash(e,"SHA-384")]);return await Tn().hash(r,"SHA-384")}async function wn(t,e){if(t.length<1)return e;let n=(0,gn.concatBuffers)([e,await yn(t[0])]),r=await Tn().hash(n,"SHA-384");return await wn(t.slice(1),r)}var vn,bn,En=nn(ln(),1),Sn=En.default.default?En.default.default:En.default,xn=class extends Sn{getPublicKey(t){throw new Error("Unimplemented")}};function Tn(){return vn??=new xn}!function(t){t[t.ARWEAVE=1]="ARWEAVE",t[t.ED25519=2]="ED25519",t[t.ETHEREUM=3]="ETHEREUM",t[t.SOLANA=4]="SOLANA",t[t.INJECTEDAPTOS=5]="INJECTEDAPTOS",t[t.MULTIAPTOS=6]="MULTIAPTOS",t[t.TYPEDETHEREUM=7]="TYPEDETHEREUM"}(bn||(bn={}));var An={[bn.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[bn.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[bn.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[bn.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"},[bn.INJECTEDAPTOS]:{sigLength:64,pubLength:32,sigName:"injectedAptos"},[bn.MULTIAPTOS]:{sigLength:2052,pubLength:1025,sigName:"multiAptos"},[bn.TYPEDETHEREUM]:{sigLength:65,pubLength:42,sigName:"typedEthereum"}},_n=class{signatureType=1;ownerLength=An[1].pubLength;signatureLength=An[1].sigLength;jwk;pk;constructor(t){this.pk=t.n,this.jwk=t}get publicKey(){return mn.default.toBuffer(this.pk)}sign(t){return Tn().sign(this.jwk,t)}static async verify(t,e,n){return await Tn().verify(t,e,n)}},kn={1:_n},Rn=nn(sn(),1);async function Cn(t){return yn([(0,gn.stringToBuffer)("dataitem"),(0,gn.stringToBuffer)("1"),(0,gn.stringToBuffer)(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData])}async function Pn(t,e){let{signature:n,id:r}=await async function(t,e){let n=await Cn(t),r=await e.sign(n),o=await Tn().hash(r);return{signature:qe.from(r),id:qe.from(o)}}(t,e);return t.getRaw().set(n,2),r}var In=class{buf;pos;constructor(t=qe.alloc(Mn),e=0){this.buf=t,this.pos=e}writeTags(t){if(!Array.isArray(t))throw new Error("input must be array");let e,n=t.length;if(n)for(this.writeLong(n),e=0;e<n;e++){let n=t[e];if(void 0===n?.name||void 0===n?.value)throw new Error(`Invalid tag format for ${n}, expected {name:string, value: string}`);this.writeString(n.name),this.writeString(n.value)}this.writeLong(0)}toBuffer(){let t=qe.alloc(this.pos);if(this.pos>this.buf.length)throw new Error(`Too many tag bytes (${this.pos} > ${this.buf.length})`);return this.buf.copy(t,0,0,this.pos),t}tagsExceedLimit(){return this.pos>this.buf.length}writeLong(t){let e,n,r=this.buf;if(t>=-1073741824&&t<1073741824){n=t>=0?t<<1:~t<<1|1;do{r[this.pos]=127&n,n>>=7}while(n&&(r[this.pos++]|=128))}else{e=t>=0?2*t:2*-t-1;do{r[this.pos]=127&e,e/=128}while(e>=1&&(r[this.pos++]|=128))}this.pos++,this.buf=r}writeString(t){let e=qe.byteLength(t),n=this.buf;this.writeLong(e);let r=this.pos;if(this.pos+=e,!(this.pos>n.length)){if(e>64)this.buf.write(t,this.pos-e,e,"utf8");else{let o,i,s,a;for(o=0,i=e;o<i;o++)s=t.charCodeAt(o),s<128?n[r++]=s:s<2048?(n[r++]=s>>6|192,n[r++]=63&s|128):55296==(64512&s)&&56320==(64512&(a=t.charCodeAt(o+1)))?(s=65536+((1023&s)<<10)+(1023&a),o++,n[r++]=s>>18|240,n[r++]=s>>12&63|128,n[r++]=s>>6&63|128,n[r++]=63&s|128):(n[r++]=s>>12|224,n[r++]=s>>6&63|128,n[r++]=63&s|128)}this.buf=n}}readLong(){let t,e,n,r,o=0,i=0,s=this.buf;do{t=s[this.pos++],e=128&t,o|=(127&t)<<i,i+=7}while(e&&i<28);if(e){n=o,r=268435456;do{t=s[this.pos++],n+=(127&t)*r,r*=128}while(128&t);return(n%2?-(n+1):n)/2}return o>>1^-(1&o)}skipLong(){let t=this.buf;for(;128&t[this.pos++];);}readTags(){let t,e=[];for(;t=this.readLong();)for(t<0&&(t=-t,this.skipLong());t--;){let t=this.readString(),n=this.readString();e.push({name:t,value:n})}return e}readString(){let t=this.readLong(),e=this.pos,n=this.buf;if(this.pos+=t,!(this.pos>n.length))return this.buf.slice(e,e+t).toString()}};function On(t){let e=new In;return e.writeTags(t),e.toBuffer()}function Nn(t){let e=new In;return e.writeTags(t),e.tagsExceedLimit()}function Bn(t){return new In(t).readTags()}function Un(t){let e=0;for(let n=t.length-1;n>=0;n--)e=256*e+t[n];return e}function Ln(t){let e=[0,0,0,0,0,0,0,0];for(let n=0;n<e.length;n++){let r=255&t;e[n]=r,t=(t-r)/256}return Uint8Array.from(e)}var jn=nn(dn(),1),Dn=nn(hn(),1),Mn=4096,Vn=80,Fn=class{binary;_id;constructor(t){this.binary=t}static isDataItem(t){return void 0!==t.binary}get signatureType(){let t=Un(this.binary.subarray(0,2));if(void 0!==bn?.[t])return t;throw new Error("Unknown signature type: "+t)}async isValid(){return Fn.verify(this.binary)}get id(){return(async()=>Rn.default.encode(await this.rawId))()}set id(t){this._id=Rn.default.toBuffer(t)}get rawId(){return(async()=>Dn.Buffer.from(await jn.Crypto.subtle.digest("SHA-256",this.rawSignature)))()}set rawId(t){this._id=t}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return Rn.default.encode(this.rawSignature)}set rawOwner(t){if(t.byteLength!=this.ownerLength)throw new Error(`Expected raw owner (pubkey) to be ${this.ownerLength} bytes, got ${t.byteLength} bytes.`);this.binary.set(t,2+this.signatureLength)}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get signatureLength(){return An[this.signatureType].sigLength}get owner(){return Rn.default.encode(this.rawOwner)}get ownerLength(){return An[this.signatureType].pubLength}get rawTarget(){let t=this.getTargetStart();return 1==this.binary[t]?this.binary.subarray(t+1,t+33):Dn.Buffer.alloc(0)}get target(){return Rn.default.encode(this.rawTarget)}get rawAnchor(){let t=this.getAnchorStart();return 1==this.binary[t]?this.binary.subarray(t+1,t+33):Dn.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){let t=this.getTagsStart(),e=Un(this.binary.subarray(t+8,t+16));return this.binary.subarray(t+16,t+16+e)}get tags(){let t=this.getTagsStart();if(0==Un(this.binary.subarray(t,t+8)))return[];let e=Un(this.binary.subarray(t+8,t+16));return Bn(Dn.Buffer.from(this.binary.subarray(t+16,t+16+e)))}get tagsB64Url(){return this.tags.map((t=>({name:Rn.default.encode(t.name),value:Rn.default.encode(t.value)})))}getStartOfData(){let t=this.getTagsStart();return t+16+Un(this.binary.subarray(t+8,t+16))}get rawData(){let t=this.getTagsStart(),e=t+16+Un(this.binary.subarray(t+8,t+16));return this.binary.subarray(e,this.binary.length)}get data(){return Rn.default.encode(this.rawData)}getRaw(){return this.binary}async sign(t){return this._id=await Pn(this,t),this.rawId}async setSignature(t){this.binary.set(t,2),this._id=Dn.Buffer.from(await Tn().hash(t))}isSigned(){return(this._id?.length??0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map((t=>({name:Rn.default.encode(t.name),value:Rn.default.encode(t.value)}))),data:this.data}}static async verify(t){if(t.byteLength<Vn)return!1;let e=new Fn(t),n=e.signatureType,r=e.getTagsStart(),o=Un(t.subarray(r,r+8)),i=Un(t.subarray(r+8,r+16));if(i>Mn)return!1;if(o>0)try{if(Bn(Dn.Buffer.from(t.subarray(r+16,r+16+i))).length!==o)return!1}catch{return!1}let s=kn[n],a=await Cn(e);return await s.verify(e.rawOwner,a,e.rawSignature)}async getSignatureData(){return Cn(this)}getTagsStart(){let t=this.getTargetStart(),e=t+(1==this.binary[t]?33:1);return e+=1==this.binary[e]?33:1,e}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let t=this.getTargetStart()+1;return t+=1==this.binary[this.getTargetStart()]?32:0,t}},Kn=nn(sn(),1);function $n(t,e,n){let r=e.publicKey,o=n?.target?Kn.default.toBuffer(n.target):null,i=1+(o?.byteLength??0),s=n?.anchor?qe.from(n.anchor):null,a=1+(s?.byteLength??0),c=(n?.tags?.length??0)>0?On(n.tags):null,l=16+(c?c.byteLength:0),u=qe.from(t),h=u.byteLength,d=2+e.signatureLength+e.ownerLength+i+a+l+h,f=qe.alloc(d);if(f.set(function(t){if(t>29)throw new Error("Short too long");let e=[0,0];for(let n=0;n<e.length;n++){let r=255&t;e[n]=r,t=(t-r)/256}return Uint8Array.from(e)}(e.signatureType),0),f.set(new Uint8Array(e.signatureLength).fill(0),2),r.byteLength!==e.ownerLength)throw new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${r.byteLength}`);f.set(r,2+e.signatureLength);let p=2+e.signatureLength+e.ownerLength;if(f[p]=o?1:0,o){if(32!==o.byteLength)throw new Error(`Target must be 32 bytes but was incorrectly ${o.byteLength}`);f.set(o,p+1)}let m=p+i,g=m+1;if(f[m]=s?1:0,s){if(g+=s.byteLength,32!==s.byteLength)throw new Error("Anchor must be 32 bytes");f.set(s,m+1)}f.set(Ln(n?.tags?.length??0),g);let y=Ln(c?.byteLength??0);f.set(y,g+8),c&&f.set(c,g+16);let w=g+l;return f.set(u,w),new Fn(f)}var Wn={...fn};globalThis.arbundles??=Wn;const{Axios:zn,AxiosError:Hn,CanceledError:Zn,isCancel:qn,CancelToken:Gn,VERSION:Yn,all:Xn,Cancel:Jn,isAxiosError:Qn,spread:tr,toFormData:er,AxiosHeaders:nr,HttpStatusCode:rr,formToJSON:or,getAdapter:ir,mergeConfig:sr}=He;var ar=a(386),cr=a(764).lW,lr={debug:!1,inject:!1,auth0Domain:"auth.othent.io",auth0ClientId:"uXkRmJoIa0NfzYgYEDAgj6Rss4wR1tIc",auth0Strategy:"refresh-tokens",auth0Cache:"memory",auth0RefreshTokenExpirationMs:1296e6,auth0LogInMethod:"popup",auth0RedirectURI:null,auth0ReturnToURI:null,serverBaseURL:"https://kms-server.othent.io",autoConnect:"lazy",cookieKey:null,localStorageKey:null,throwErrors:!0,tags:[]},ur={...lr,appName:"",appVersion:"",persistCookie:!1,persistLocalStorage:!1,auth0Cache:"memory"},hr={host:"arweave.net",protocol:"https",port:443},dr="othentUserDetails",fr="Othent KMS",pr="2.0.0-beta.10",mr=[{name:"Client",value:fr},{name:"Client-Version",value:pr}],gr=class{constructor(t){this.listeners=new Set,this.initializedListeners=new Set,this.lastEmittedUpdateId="",this.lastEmittedParams=null,this.options={diffParams:!1,replyOnListen:!1},this.options={...this.options,...t}}getUpdateId(t){const{getUpdateIdTransform:e}=this.options,n=e?e(t):t;return JSON.stringify(n,((t,e)=>e&&"oject"===e&&!Array.isArray(e)?Object.entries(e).sort(((t,e)=>t[0].localeCompare(e[0]))):e))}get hasListeners(){return this.listeners.size>0}add(t){this.listeners.add(t),this.options.replyOnListen&&this.lastEmittedParams&&this.emit(...this.lastEmittedParams)}delete(t){this.listeners.add(t)}emit(...t){const{initializedListeners:e,lastEmittedUpdateId:n}=this,r=this.getUpdateId(t),o=n===r;return this.lastEmittedUpdateId=r,this.lastEmittedParams=t,this.listeners.forEach((n=>{if(!o||!e.has(n)){e.add(n);try{n(...t)}catch(t){}}})),o}};function yr(t,e){return et(!0,{},e,t)}var wr={secure:!0,domain:!0,ttlHours:360},vr=class t{constructor(e=wr){this.secureParam=null,this.domainParam=null,this.ttlMs=1296e6;const{secureParam:n,domainParam:r,ttlMs:o}=this.parseCookieOptions(yr(e,wr));return this.secureParam=n,this.domainParam=r,this.ttlMs=o,new Proxy(this,{get:(t,e)=>e in t||"string"!=typeof e?t[e]:t.getItem(e),ownKeys:e=>document.cookie.split(t.COOKIE_SEPARATOR).map((e=>e.split(t.COOKIE_VALUE_SEPARATOR)[0])),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0})})}parseCookieOptions({secure:t,domain:e,ttlHours:n}={}){return{secureParam:t?"secure":void 0===t?this.secureParam:null,domainParam:e?`domain=${!0===e?location.host:e}`:void 0===e?this.domainParam:null,ttlMs:n?36e5*n:void 0===n?this.ttlMs:0}}getCookieParams(t){const{secureParam:e,domainParam:n,ttlMs:r}=this.parseCookieOptions(t),o=[`expires=${new Date(Date.now()+r).toUTCString()}`,e,n,"path=/"].filter(Boolean).join("; ");return o?` ${o};`:""}get length(){return document.cookie?document.cookie.split(t.COOKIE_SEPARATOR).length:0}key(e){return(document.cookie.split(t.COOKIE_SEPARATOR)[e]||"").split(t.COOKIE_VALUE_SEPARATOR)[0]||null}getItem(e){const n=document.cookie.split(t.COOKIE_SEPARATOR).find((n=>n.split(t.COOKIE_VALUE_SEPARATOR)[0]===e));return n&&n.split(t.COOKIE_VALUE_SEPARATOR)[1]||null}setItem(t,e,n){const r=`${t}=${"string"==typeof e?e:JSON.stringify(e)};${this.getCookieParams(n)}`;return document.cookie=r,r}removeItem(t,e){return this.setItem(t,"",{...e,ttlHours:-1})}clear(){document.cookie.split(t.COOKIE_SEPARATOR).forEach((e=>{this.removeItem(e.split(t.COOKIE_VALUE_SEPARATOR)[0])}))}};vr.COOKIE_SEPARATOR=/\s*;\s*/,vr.COOKIE_VALUE_SEPARATOR=/\s*=\s*/;var br=vr,Er=null;var Sr=class t{constructor({debug:t,domain:e,clientId:n,strategy:r,cache:o,refreshTokenExpirationMs:i,loginMethod:s,redirectURI:a,returnToURI:c,appInfo:l,initialUserDetails:u,cookieKey:h,localStorageKey:d}){this.debug=!1,this.auth0ClientPromise=Promise.resolve(null),this.authEventListenerHandler=new gr({diffParams:!0,replyOnListen:!0}),this.userDetails=null,this.userDetailsExpirationTimeoutID=0,this.cookieKey=null,this.localStorageKey=null,this.refreshTokenExpirationMs=+lr.auth0RefreshTokenExpirationMs,this.appInfo={name:"",version:""},this.isReady=!1,this.isAuthenticated=!1,this.debug=t,this.loginMethod=s,this.redirectURI=a,this.returnToURI=c,this.auth0ClientPromise=async function(t){const e=new tt(t);return await e.checkSession(),e}({domain:e,clientId:n,useRefreshTokens:"refresh-tokens"===r,cacheLocation:"string"==typeof o?o:void 0,cache:"object"==typeof o?o:void 0,authorizationParams:{redirect_uri:this.redirectURI}}).then((t=>(this.isReady=!0,t))),this.cookieKey=h,this.localStorageKey=d,this.refreshTokenExpirationMs=i,this.appInfo=l,this.restoreUserDetails(u||null),this.handleStorage=this.handleStorage.bind(this)}static isIdTokenValidUser(t){return!!(t&&t.sub&&t.owner&&t.walletAddress&&"KMS"===t.authSystem)}static async getUserDetails(e){const{email:n="",walletAddress:r}=e,o=e.sub||"",i=o.split("|")[0];let s=await async function(t){try{const e=(await He.get("https://api.mem.tech/api/state/Tih8T1uESATJNzdwBIY3rpe25kWTzjw8uNiMRYe9I5M",{timeout:2e3})).data.balances.find((e=>e.address===t)),n=e&&(e.primary_domain||e.ownedDomains[0].domain)||null;return n?`${n}.ar`:null}catch(e){return console.warn(`Error resolving ANS domain for ${t} =\n`,e),null}}(r);if(!s){s=`${t.PROVIDER_LABELS[i]||"Unknown Provider"} (${n})`}return{sub:o,name:e.name||"",givenName:e.given_name||"",middleName:e.middle_name||"",familyName:e.family_name||"",nickname:e.nickname||"",preferredUsername:e.preferred_username||"",profile:e.profile||"",picture:e.picture||"",website:e.website||"",locale:e.locale||"",updatedAt:e.updated_at||"",email:n,emailVerified:!!e.email_verified,owner:e.owner,walletAddress:e.walletAddress,walletAddressLabel:s,authSystem:e.authSystem,authProvider:i}}getAuthEventListenerHandler(){return this.authEventListenerHandler}setAppInfo(t){this.appInfo=t}initStorageSyncing(){this.localStorageKey&&window.addEventListener("storage",this.handleStorage)}stopStorageSyncing(){window.removeEventListener("storage",this.handleStorage)}handleStorage(t){t.key===this.localStorageKey&&(t.newValue?this.restoreUserDetails():this.logOut())}persistUserDetails(t){const{cookieKey:e,localStorageKey:n}=this;if(e){const n=function(){if(!Er){const t=!1;Er=new br({secure:!t&&void 0,domain:!t&&void 0})}return Er}();t?n.setItem(e,JSON.stringify(t)):null!==n.getItem(e)&&n.removeItem(e)}if(n)if(t){const e=new Date,r=JSON.stringify({userDetails:t,createdAt:e.toUTCString(),expiredBy:new Date(e.getTime()+this.refreshTokenExpirationMs).toUTCString()});localStorage.setItem(n,r)}else this.clearStoredUserDetails()}setUserDetails(t,e=!0){window.clearTimeout(this.userDetailsExpirationTimeoutID),t&&(this.userDetailsExpirationTimeoutID=window.setTimeout(this.logOut,this.refreshTokenExpirationMs));return this.authEventListenerHandler.emit(t,e?!!t:this.isAuthenticated)||(this.userDetails=t),e&&(this.isAuthenticated=!!t,this.persistUserDetails(t)),t}restoreUserDetails(t){let e=t||null;if(!e&&this.localStorageKey)try{const t=JSON.parse(localStorage.getItem(this.localStorageKey)||"null");if(t){const n=new Date(t.expiredBy).getTime();!isNaN(n)&&n>Date.now()?e=t.userDetails:this.clearStoredUserDetails()}}catch(t){}this.setUserDetails(e,!1)}clearStoredUserDetails(){Object.keys(localStorage).forEach((t=>{t.startsWith("othent")&&localStorage.removeItem(t)}))}async updateUserDetails(e){const n=e&&t.isIdTokenValidUser(e)?await t.getUserDetails(e):null;return this.setUserDetails(n)}getAuthorizationParams(t={}){const{authorizationParams:e,data:n}=t.hasOwnProperty("keyName")?{authorizationParams:null,data:t}:{authorizationParams:t,data:null},r={othentFunction:"KMS",othentSDKVersion:fr,othentAPIVersion:pr,appName:this.appInfo.name,appVersion:this.appInfo.version};return n&&(r.data=n),{...e,transaction_input:JSON.stringify(r,((t,e)=>{let n=[];if(e instanceof cr||e instanceof DataView||ArrayBuffer.isView(e))n=Array.from(new Uint8Array(e.buffer));else{if(!(e instanceof ArrayBuffer))return e;n=Array.from(new Uint8Array(e))}return"data"===t?Object.fromEntries(Object.entries(n)):{type:"Buffer",data:n}}))}}async getTokenSilently(t){const e=await this.auth0ClientPromise;if(!e)throw new Error("Missing Auth0 Client");const n=this.getAuthorizationParams(t);if(this.debug)try{console.log("getTokenSilently() =",{...n,transaction_input:JSON.parse(n.transaction_input)})}catch(t){console.error("Error logging/parsing `authorizationParams`:",t)}try{const t=await e.getTokenSilently({detailedResponse:!0,authorizationParams:n,cacheMode:"off"}),r=await e.getUser();if(!r)throw new Error("Could not get the user's details");const o=await this.updateUserDetails(r);return{...t,idToken:r,userDetails:o}}catch(t){throw t}}async logIn(){const t=await this.auth0ClientPromise;if(!t)throw new Error("Missing Auth0 Client");this.debug&&console.log("logIn()");if(await t.isAuthenticated())throw new Error("Already logged in");const e=this.getAuthorizationParams({redirect_uri:this.redirectURI});if("popup"!==this.loginMethod)throw t.loginWithRedirect({authorizationParams:e}),new Error("Redirecting...");return await t.loginWithPopup({authorizationParams:e},{}),this.getTokenSilently()}async handleRedirectCallback(t){this.debug&&console.log(`handleRedirectCallback(${t})`);const e=await this.auth0ClientPromise;if(!e)throw new Error("Missing Auth0 Client");await e.handleRedirectCallback(t);const n=await e.getUser();if(!n)throw new Error("Could not get the user's details");return this.updateUserDetails(n)}async logOut(){this.setUserDetails(null);const t=await this.auth0ClientPromise;if(!t)throw new Error("Missing Auth0 Client");return t.logout({logoutParams:{returnTo:this.returnToURI}}).catch((t=>{console.warn(t instanceof Error?t.message:t),"undefined"!=typeof location&&location.reload()}))}async encodeToken(t){return(await this.getTokenSilently(t)).id_token}getCachedUserDetails(){return this.userDetails}getCachedUserPublicKey(){var t;return(null==(t=this.userDetails)?void 0:t.owner)||null}getCachedUserSub(){var t;return(null==(t=this.userDetails)?void 0:t.sub)||null}getCachedUserAddress(){var t;return(null==(t=this.userDetails)?void 0:t.walletAddress)||null}getCachedUserAddressLabel(){var t;return(null==(t=this.userDetails)?void 0:t.walletAddressLabel)||null}getCachedUserEmail(){var t;return(null==(t=this.userDetails)?void 0:t.email)||null}};Sr.PROVIDER_LABELS={apple:"Apple",auth0:"E-Mail","google-oauth2":"Google","<LinkedIn>":"LinkedIn","<X>":"X","<Meta>":"Meta","<Twitch>":"Twitch",github:"GitHub"};var xr=Sr;function Tr(t){return"string"==typeof t?Ar(t):t}function Ar(t){return(new TextEncoder).encode(t)}function _r(t){return e=function(t){return Ze.fromByteArray(new Uint8Array(t))}(t),e.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");var e}async function kr(t,e="SHA-256"){let n=await crypto.subtle.digest(e,t);return new Uint8Array(n)}var Rr=(t=>(t.Unexpected="Unexpected",t.Validation="Validation",t.UserCreation="UserCreation",t.Encryption="Encryption",t.Decryption="Decryption",t.Signing="Signing",t.PublicKey="PublicKey",t))(Rr||{}),Cr=class extends Error{constructor(t,e,n,r=!1){super(),this.name=t,this.message=e||"",r?this.stack=`${t} (from server): ${e}\n`:Error.captureStackTrace(this),this.id=t,this.developerMessage=e,n instanceof Error?this.cause=n:"string"!=typeof n&&"number"!=typeof n||(this.cause=new Error(`${n}`))}};function Pr(t){var e;if(Qn(t)){const n=null==(e=t.response)?void 0:e.data;if(!function(t){return"object"==typeof t&&!0===t.error&&!!t.id&&!!Rr[t.id]}(n))return t;const{id:r,developerMessage:o,cause:i}=n;let s;return i&&(s=new Error(i.message),s.name=i.name,s.stack=i.stack),new Cr(r,o||"",s,!0)}return t instanceof Error?t:new Error("Unknown error")}async function Ir(t,e,n,r){var o;const i=await e.encodeToken({ciphertext:n,keyName:r});let s=null;try{s=null!=(o=(await t.post("/decrypt",{encodedData:i})).data.data)?o:null}catch(t){throw Pr(t)}if(null===s)throw new Error("Error decrypting on server.");return"string"==typeof s?s:(a=new Uint8Array(s.data),(new TextDecoder).decode(a));var a}var Or=class{constructor(t,e){this.api=He.create({baseURL:t}),this.auth0=e}async createUser(t){return async function(t,e){let n=!1;try{n=(await t.post("/create-user",{encodedData:e})).data.data}catch(t){throw Pr(t)}if(!n)throw new Error("Error creating user on server.");return!0}(this.api,t)}async decrypt(t,e){return Ir(this.api,this.auth0,t,e)}async encrypt(t,e){return async function(t,e,n,r){var o;const i=await e.encodeToken({plaintext:n,keyName:r});let s=null;try{s=null!=(o=(await t.post("/encrypt",{encodedData:i})).data.data)?o:null}catch(t){throw Pr(t)}if(null===s)throw new Error("Error encrypting on server.");return"string"==typeof s?Ar(s):new Uint8Array(s.data)}(this.api,this.auth0,t,e)}async sign(t,e){return async function(t,e,n,r){const o=await e.encodeToken({data:n,keyName:r});let i=null;try{i=(await t.post("/sign",{encodedData:o})).data.data}catch(t){throw Pr(t)}if(null===i)throw new Error("Error signing data on server.");return"string"==typeof i?Ar(i):new Uint8Array(i.data)}(this.api,this.auth0,t,e)}getSignerSignFn(t){return async e=>await this.sign(e,t)}};function Nr(t,e="utf8"){return r.lW.isBuffer(t)?Ur(t.toString("base64")):Ur(r.lW.from(t,e).toString("base64"))}function Br(t){return function(t){let e=t.length,n=e%4;if(!n)return t;let o=e,i=4-n,s=e+i,a=r.lW.alloc(s);for(a.write(t);i--;)a.write("=",o++);return a.toString()}(t=t.toString()).replace(/\-/g,"+").replace(/_/g,"/")}function Ur(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Lr(t){return r.lW.from(Br(t),"base64")}var jr=Nr;function Dr(t){return ar.default.init(t)}jr.encode=Nr,jr.decode=function(t,e="utf8"){return r.lW.from(Br(t),"base64").toString(e)},jr.toBase64=Br,jr.fromBase64=Ur,jr.toBuffer=Lr;var Mr=class t{constructor(t=ur){this.errorEventListenerHandler=new gr,this.tokens=new Set,this.walletName=fr,this.walletVersion=pr,this.config=lr,this.appInfo={name:"",version:""},this.gatewayConfig=hr;let{appName:e,appVersion:n,persistCookie:r,persistLocalStorage:o,auth0Cache:i=lr.auth0Cache,auth0RedirectURI:s,auth0ReturnToURI:a,gatewayConfig:c,initialUserDetails:l,...u}=t;const h="undefined"==typeof location?null:location.origin;this.config={...yr(u,lr),cookieKey:"string"==typeof r?r:r?dr:null,localStorageKey:"string"==typeof o?o:o?dr:null,auth0Cache:"object"==typeof i?"custom":i,auth0RedirectURI:s||h,auth0ReturnToURI:a||h};const{config:d}=this,{cookieKey:f,localStorageKey:p}=d;if("string"==typeof f&&!f.startsWith("othent"))throw new Error('`persistCookie` / `cookieKey` must start with "othent".');if("string"==typeof p&&!p.startsWith("othent"))throw new Error('`persistLocalStorage` / `localStorageKey` must start with "othent".');if(!d.auth0RedirectURI)throw new Error("`auth0RedirectURI` is required.");if(!d.auth0ReturnToURI)throw new Error("`auth0ReturnToURI` is required.");this.appInfo={name:e,version:n},this.gatewayConfig=c||hr;let m=null;if("undefined"!=typeof window)m=window.crypto;else{if("undefined"==typeof global)throw new Error("A Crypto module is needed for Othent to work. If your environment doesn't natively provide one, you should polyfill it.");m=global.crypto}if(this.crypto=m,"eager"===d.autoConnect&&"popup"===d.auth0LogInMethod&&"refresh-tokens"===d.auth0Strategy&&"memory"===i)throw new Error('The browser cannot open the authentication modal automatically before an user interaction. Use `autoConnect = "lazy"` or change any of these other options: `auth0LogInMethod`, `auth0Strategy` or `auth0Cache`.');if(this.auth0=new xr({debug:d.debug,domain:d.auth0Domain,clientId:d.auth0ClientId,strategy:d.auth0Strategy,cache:i,refreshTokenExpirationMs:d.auth0RefreshTokenExpirationMs,redirectURI:d.auth0RedirectURI,returnToURI:d.auth0ReturnToURI,loginMethod:d.auth0LogInMethod,appInfo:this.appInfo,initialUserDetails:l,cookieKey:d.cookieKey,localStorageKey:d.localStorageKey}),"eager"===this.config.autoConnect){let t="undefined"==typeof location;if(!t){const e=new URL(location.href),{searchParams:n}=e;n.has("code")||n.has("state")||(t=!0)}t&&this.connect()}if(d.inject&&(window.arweaveWallet=this),!d.throwErrors){["connect","disconnect","getActiveAddress","getActivePublicKey","getAllAddresses","getWalletNames","getUserDetails","getSyncActiveAddress","getSyncActivePublicKey","getSyncAllAddresses","getSyncWalletNames","getSyncUserDetails","sign","dispatch","encrypt","decrypt","signature","signDataItem","signMessage","verifyMessage","privateHash","getArweaveConfig","getPermissions"].forEach((t=>{let e=this[t];"function"==typeof e&&(e=e.bind(this),this[t]=(...t)=>{try{let r=e(...t);return!(n=r)||"object"!=typeof n&&"function"!=typeof n||"function"!=typeof n.then||(r=r.catch((t=>(this.onError(t),null)))),r}catch(t){this.onError(t)}var n;return null})}))}this.api=new Or(this.config.serverBaseURL,this.auth0)}startTabSynching(){return this.config.localStorageKey||console.warn("Calling `Othent.startTabSynching()` is a NOOP unless the `persistLocalStorage` option is used."),this.auth0.initStorageSyncing(),()=>{this.auth0.stopStorageSyncing()}}async completeConnectionAfterRedirect(t){"redirect"!==this.config.auth0LogInMethod&&console.warn('Calling `Othent.completeConnectionAfterRedirect()` is a NOOP unless the `auth0LogInMethod` options is `"redirect"`.');const e=t||("undefined"==typeof location?"":location.href),n=new URL(e.replace(/.+\.auth0:\/\//,"https://")),{searchParams:r}=n;if(!r.has("code")||!r.has("state")||!e)return null;let o=null;try{o=await this.auth0.handleRedirectCallback(e)}finally{"undefined"!=typeof location&&"undefined"!=typeof history&&(r.delete("code"),r.delete("state"),history.replaceState(null,"",n))}return o}get isReady(){return this.auth0.isReady}onError(t){t instanceof Error?this.errorEventListenerHandler.hasListeners?this.errorEventListenerHandler.emit(t):console.warn("Unhandled unthrown error:\n",t,'\nWhen using `throwErrors = false`, you must add at least one error event listener with `othent.addEventListener("error", () => { ... })`'):console.warn("Unknown error type",t)}addEventListener(t,e){let n=null;if("auth"===t)n=this.auth0.getAuthEventListenerHandler();else if("error"===t){if(this.config.throwErrors)throw new Error("You can only listen for `error` events if `throwErrors = false`.");n=this.errorEventListenerHandler}if(!n)throw new Error("Unknown event type");return n.add(e),()=>{n.delete(e)}}removeEventListener(t,e){let n=null;if("auth"===t?n=this.auth0.getAuthEventListenerHandler():"error"===t&&(n=this.errorEventListenerHandler),!n)throw new Error("Unknown event type");n.delete(e)}get isAuthenticated(){return this.auth0.isAuthenticated}requireAuth(){return this.requireUserDataOrThrow().then((()=>{}))}async requireUserDataOrThrow(){"off"===this.config.autoConnect||this.auth0.isAuthenticated||await this.connect(void 0,void 0,this.gatewayConfig);const{sub:t,owner:e}=this.auth0.getCachedUserDetails()||{};if(!t||!e)throw new Error("Missing cached user.");return{sub:t,publicKey:e}}async connect(e,n,r){if(e&&e.toSorted().join("-")!==t.ALL_PERMISSIONS.join("-"))throw new Error("Othent implicitly has access to all available permissions. You should pass `permissions = undefined` or include all of them.");n&&(this.appInfo=n,this.auth0.setAppInfo(n)),this.gatewayConfig=r||hr;let o="",i=null;try{const t=await this.auth0.getTokenSilently();o=t.id_token,i=t.userDetails}catch(t){if(!(t instanceof Error))throw t;if("Login required"!==t.message&&!(t instanceof E))throw t;console.warn(t.message)}if(!o)try{const t=await this.auth0.logIn();o=t.id_token,i=t.userDetails}catch(t){if(!(t instanceof Error))throw t;if("Redirecting..."===t.message&&await new Promise((()=>{})),t.message.startsWith("Unable to open a popup")||t instanceof v||t instanceof w)return t instanceof w&&t.popup.close(),console.warn(t.message),null;throw t}if(o&&!i){await this.api.createUser(o);const t=await this.auth0.getTokenSilently();o=t.id_token,i=t.userDetails}if(o&&i)return i;throw this.auth0.logOut(),new Error("Unexpected authentication error")}async disconnect(){return this.auth0.logOut()}getActiveAddress(){return Promise.resolve(this.getSyncActiveAddress())}getActivePublicKey(){return Promise.resolve(this.getSyncActivePublicKey())}getAllAddresses(){return Promise.resolve(this.getSyncAllAddresses())}getWalletNames(){return Promise.resolve(this.getSyncWalletNames())}getUserDetails(){return Promise.resolve(this.getSyncUserDetails())}getSyncActiveAddress(){return this.auth0.getCachedUserAddress()||""}getSyncActivePublicKey(){return this.auth0.getCachedUserPublicKey()||""}getSyncAllAddresses(){const t=this.auth0.getCachedUserAddress();return t?[t]:[]}getSyncWalletNames(){const t=this.auth0.getCachedUserAddress(),e=this.auth0.getCachedUserAddressLabel();return Promise.resolve(t&&e?{[t]:e}:{})}getSyncUserDetails(){return this.auth0.getCachedUserDetails()}addCommonTags(t=[]){if(Array.isArray(t)){const e=[{name:"App-Name",value:this.appInfo.name},{name:"App-Version",value:this.appInfo.version}];return[...t,...this.config.tags,...e,...mr]}for(const{name:e,value:n}of this.config.tags)t.addTag(e,n);t.addTag("App-Name",this.appInfo.name),t.addTag("App-Version",this.appInfo.version);for(const{name:e,value:n}of mr)t.addTag(e,n)}async sign(t){const{sub:e,publicKey:n}=await this.requireUserDataOrThrow(),r=Dr(this.gatewayConfig),o=t.get("tags").map((t=>({name:t.get("name",{decode:!0,string:!0}),value:t.get("value",{decode:!0,string:!0})}))),i=this.addCommonTags(o),s=await r.createTransaction({data:t.data,owner:n,reward:t.reward});i.forEach((t=>{s.addTag(t.name,t.value)}));const a=await s.getSignatureData(),c=await this.api.sign(a,e),l=await kr(c);return s.setSignature({id:_r(l),owner:n,signature:_r(c),tags:s.tags,reward:s.reward}),s}async dispatch(t,e){var n;const r=t.get("tags").map((t=>({name:t.get("name",{decode:!0,string:!0}),value:t.get("value",{decode:!0,string:!0})}))),o=await this.signDataItem({data:t.data,tags:r,target:t.target}),i=`${(null==e?void 0:e.node)||"https://turbo.ardrive.io"}/tx`;try{const t=await He.post(i,o,{headers:{"Content-Type":"application/octet-stream"},maxBodyLength:1/0,maxContentLength:1/0,responseType:"json"});if(t.status>=400)throw new Error(`${t.status} - ${JSON.stringify(t.data)}`);return{...t.data,type:"BUNDLED"}}catch(r){console.warn(`Error dispatching transaction to ${i} =\n`,r);const o=await this.sign(t),s=null!=(n=null==e?void 0:e.arweave)?n:Dr(this.gatewayConfig),a=await s.transactions.getUploader(o);for(;!a.isComplete;)await a.uploadChunk();return{id:o.id,signature:o.signature,owner:o.owner,type:"BASE"}}}async encrypt(t){const{sub:e}=await this.requireUserDataOrThrow();return await this.api.encrypt(t,e)}async decrypt(t){const{sub:e}=await this.requireUserDataOrThrow();return await this.api.decrypt(t,e)}async signature(t){const{sub:e}=await this.requireUserDataOrThrow();return await this.api.sign(t,e)}async signDataItem(t){const{sub:e,publicKey:n}=await this.requireUserDataOrThrow(),{data:r,tags:o,...i}=t,s={publicKey:Lr(n),signatureType:1,signatureLength:512,ownerLength:512,sign:this.api.getSignerSignFn(e)},a=$n(r,s,{...i,tags:this.addCommonTags(o)});return await a.sign(s),a.getRaw().buffer}async signMessage(t,e){const{sub:n}=await this.requireUserDataOrThrow(),r=(null==e?void 0:e.hashAlgorithm)||"SHA-256",o=await this.crypto.subtle.digest(r,Tr(t));return await this.api.sign(o,n)}async verifyMessage(t,e,n,r={hashAlgorithm:"SHA-256"}){if(!n){const t=await this.requireUserDataOrThrow();n||(n=t.publicKey)}const o=(null==r?void 0:r.hashAlgorithm)||"SHA-256",i=await this.crypto.subtle.digest(o,Tr(t)),s={e:"AQAB",ext:!0,kty:"RSA",n},a=await this.crypto.subtle.importKey("jwk",s,{name:"RSA-PSS",hash:r.hashAlgorithm},!1,["verify"]);return await this.crypto.subtle.verify({name:"RSA-PSS",saltLength:32},a,Tr(e),i)}async privateHash(t,e){return kr(Tr(t),null==e?void 0:e.hashAlgorithm)}getArweaveConfig(){return Promise.resolve(this.gatewayConfig)}getPermissions(){return Promise.resolve(t.ALL_PERMISSIONS)}addToken(t,e,n){return console.warn("Othent doesn't currently support this feature and only tracks added tokens temporarily in memory."),this.tokens.add(t),Promise.resolve()}isTokenAdded(t){return console.warn("Othent doesn't currently support this feature and only tracks added tokens temporarily in memory."),Promise.resolve(this.tokens.has(t))}};Mr.walletName=fr,Mr.walletVersion=pr,Mr.ALL_PERMISSIONS=["ACCESS_ADDRESS","ACCESS_ALL_ADDRESSES","ACCESS_ARWEAVE_CONFIG","ACCESS_PUBLIC_KEY","DECRYPT","DISPATCH","ENCRYPT","SIGN_TRANSACTION","SIGNATURE"];var Vr=Mr;async function Fr(t,e){try{const n=function(t){const e=t.replace(/-----BEGIN PUBLIC KEY-----/,"").replace(/-----END PUBLIC KEY-----/,"").replace(/\s/g,""),n=window.atob(e),r=new Uint8Array(n.length);for(let t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return r.buffer}(t),r=await window.crypto.subtle.importKey("spki",n,{name:"RSA-OAEP",hash:{name:"SHA-256"}},!0,["encrypt"]);return function(t){try{let e="";const n=new Uint8Array(t),r=n.byteLength;for(let t=0;t<r;t++)e+=String.fromCharCode(n[t]);return window.btoa(e)}catch(t){console.error("Eror in buffertoBase64 : ",t)}}(await window.crypto.subtle.encrypt({name:"RSA-OAEP"},r,(new TextEncoder).encode(e)))}catch(t){return console.error("rsaEncrypt error:",t),null}}async function Kr(t){const e={Info:{hashedOthentSub:t},request:"PIN"};return await fetch("https://api2.onairos.uk/getAccountInfoFromOthentSub",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((t=>t)).catch((t=>console.error(t)))}window.Buffer=r.lW;const $r=async()=>{if(!window.PublicKeyCredential)throw new Error("WebAuthn not supported");try{if(!await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable())throw new Error("Biometric authentication not available");return!!await navigator.credentials.get({publicKey:{challenge:new Uint8Array(32),rpId:window.location.hostname,userVerification:"required"}})}catch(t){return console.error("Biometric authentication failed:",t),!1}};function Wr(t){let{onLoginSuccess:n}=t;const[r,o]=(0,e.useState)(!1);return React.createElement("div",{className:"flex flex-col items-center"},React.createElement("button",{onClick:async()=>{o(!0);try{const t=await(async()=>{const t=localStorage.getItem("onairosCredentials");if(!t)return null;try{const e=JSON.parse(t);return(await fetch("https://api2.onairos.uk/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,token:e.token})})).ok?e:(localStorage.removeItem("onairosCredentials"),null)}catch(t){return console.error("Verification failed:",t),null}})();if(t){if(await $r())return void await n(t.username)}const e=Date.now(),r=encodeURIComponent(window.location.origin+"/auth/callback"),o="onairos://authenticate?nonce=".concat(e,"&callback=").concat(r,"&appName=google");window.location.href=o,setTimeout((()=>{window.location.href="https://apps.apple.com/app/onairos/id123456789"}),2500)}catch(t){console.error("App login failed:",t)}finally{o(!1)}},disabled:r,className:"w-12 h-12 rounded-full shadow-md hover:shadow-lg transition-shadow duration-200 flex items-center justify-center bg-white"},React.createElement("img",{src:"https://onairos.sirv.com/Images/OnairosBlack.png",alt:"Onairos",className:"w-10 h-6"})),React.createElement("span",{className:"text-xs mt-2 text-gray-600"},"Login with App"))}function zr(){const[t,r]=(0,e.useState)(null),[o,i]=(0,e.useState)([]),s=t=>{i((e=>[...e,t]))};return n().createElement("div",{className:"flex flex-col items-center p-4"},n().createElement("button",{onClick:()=>{try{s("Opening external browser...");const t=new URLSearchParams({key:"value"}).toString(),e="https://internship.onairos.uk/auth?".concat(t);window.open(e,"_blank")}catch(t){console.error("Failed to open link:",t),s("Failed to open link: ".concat(t.message)),r("Failed to open link: ".concat(t.message))}},className:"flex flex-col items-center justify-center px-4 py-2 border border-gray-300 rounded-full shadow-sm bg-white hover:bg-gray-50"},n().createElement("div",{className:"relative"},n().createElement("img",{src:"google-icon.png",alt:"Google",className:"w-10 h-10 rounded-full"}),n().createElement("svg",{className:"absolute bottom-0 right-0 w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},n().createElement("path",{d:"M10 3a1 1 0 011 1v6h6a1 1 0 110 2h-6v6a1 1 0 11-2 0v-6H3a1 1 0 110-2h6V4a1 1 0 011-1z"}))),n().createElement("span",{className:"text-gray-700 mt-2"},"Google")))}function Hr(t){let{onLoginSuccess:n,setOthent:r,setHashedOthentSub:o,setEncryptedPin:i}=t;const[s,a]=(0,e.useState)(!1);(0,e.useEffect)((()=>{c()}),[]);const c=async()=>{const t=localStorage.getItem("onairosCredentials");a(!!t)};return React.createElement("div",{className:"flex flex-row justify-center items-center space-x-4"},React.createElement(zr,null),React.createElement(Wr,{hasSavedCredentials:s,onSuccess:n}))}var Zr=a(697),qr=a.n(Zr);function Gr(t){let{active:e,title:r,id:o,number:i,descriptions:s,rewards:a,size:c,isChecked:l,onCheckboxChange:u}=t;return n().createElement("div",{className:"bg-white rounded-lg p-4 shadow border border-gray-200"},n().createElement("div",{className:"flex items-center justify-between"},n().createElement("div",{className:"flex items-center space-x-4"},n().createElement("div",{className:"group"},n().createElement("div",null,n().createElement("input",{disabled:!e,type:"checkbox",checked:l,onChange:t=>u(t.target.checked)})))),n().createElement("div",{className:"flex items-center"}),s&&"Avatar"!==r&&n().createElement("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-300"},"Intent: ",s),a&&n().createElement("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-300"},"Rewards: ",a)))}function Yr(t){if("undefined"==typeof Proxy)return t;const e=new Map;return new Proxy(((...e)=>t(...e)),{get:(n,r)=>"create"===r?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}function Xr(t){return null!==t&&"object"==typeof t&&"function"==typeof t.start}Gr.propTypes={active:qr().bool.isRequired,title:qr().string.isRequired,id:qr().any.isRequired,number:qr().number.isRequired,descriptions:qr().string,rewards:qr().string,size:qr().string.isRequired,isChecked:qr().bool.isRequired,onCheckboxChange:qr().func.isRequired};const Jr=t=>Array.isArray(t);function Qr(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function to(t){return"string"==typeof t||Array.isArray(t)}function eo(t){const e=[{},{}];return null==t||t.values.forEach(((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()})),e}function no(t,e,n,r){if("function"==typeof e){const[o,i]=eo(r);e=e(void 0!==n?n:t.custom,o,i)}if("string"==typeof e&&(e=t.variants&&t.variants[e]),"function"==typeof e){const[o,i]=eo(r);e=e(void 0!==n?n:t.custom,o,i)}return e}function ro(t,e,n){const r=t.getProps();return no(r,e,void 0!==n?n:r.custom,t)}const oo=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],io=["initial",...oo],so=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ao=new Set(so),co=t=>1e3*t,lo=t=>t/1e3,uo={type:"spring",stiffness:500,damping:25,restSpeed:10},ho={type:"keyframes",duration:.8},fo={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},po=(t,{keyframes:e})=>e.length>2?ho:ao.has(t)?t.startsWith("scale")?{type:"spring",stiffness:550,damping:0===e[1]?2*Math.sqrt(550):30,restSpeed:10}:uo:fo;function mo(t,e){return t?t[e]||t.default||t:void 0}const go=!1,yo=!1,wo=!1,vo=t=>null!==t;function bo(t,{repeat:e,repeatType:n="loop"},r){const o=t.filter(vo),i=e&&"loop"!==n&&e%2==1?0:o.length-1;return i&&void 0!==r?r:o[i]}const Eo=t=>t;const So=["read","resolveKeyframes","update","preRender","render","postRender"];function xo(t,e){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,s=So.reduce(((t,e)=>(t[e]=function(t){let e=new Set,n=new Set,r=!1,o=!1;const i=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function a(e){i.has(e)&&(c.schedule(e),t()),e(s)}const c={schedule:(t,o=!1,s=!1)=>{const a=s&&r?e:n;return o&&i.add(t),a.has(t)||a.add(t),t},cancel:t=>{n.delete(t),i.delete(t)},process:t=>{s=t,r?o=!0:(r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,o&&(o=!1,c.process(t)))}};return c}(i),t)),{}),{read:a,resolveKeyframes:c,update:l,preRender:u,render:h,postRender:d}=s,f=()=>{const i=yo?o.timestamp:performance.now();n=!1,o.delta=r?1e3/60:Math.max(Math.min(i-o.timestamp,40),1),o.timestamp=i,o.isProcessing=!0,a.process(o),c.process(o),l.process(o),u.process(o),h.process(o),d.process(o),o.isProcessing=!1,n&&e&&(r=!1,t(f))};return{schedule:So.reduce(((e,i)=>{const a=s[i];return e[i]=(e,i=!1,s=!1)=>(n||(n=!0,r=!0,o.isProcessing||t(f)),a.schedule(e,i,s)),e}),{}),cancel:t=>{for(let e=0;e<So.length;e++)s[So[e]].cancel(t)},state:o,steps:s}}const{schedule:To,cancel:Ao,state:_o,steps:ko}=xo("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Eo,!0),Ro=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Co=1e-7,Po=12;function Io(t,e,n,r){if(t===e&&n===r)return Eo;const o=e=>function(t,e,n,r,o){let i,s,a=0;do{s=e+(n-e)/2,i=Ro(s,r,o)-t,i>0?n=s:e=s}while(Math.abs(i)>Co&&++a<Po);return s}(e,0,1,t,n);return t=>0===t||1===t?t:Ro(o(t),e,r)}const Oo=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,No=t=>e=>1-t(1-e),Bo=Io(.33,1.53,.69,.99),Uo=No(Bo),Lo=Oo(Uo),jo=t=>(t*=2)<1?.5*Uo(t):.5*(2-Math.pow(2,-10*(t-1))),Do=t=>1-Math.sin(Math.acos(t)),Mo=No(Do),Vo=Oo(Do),Fo=t=>/^0[^.\s]+$/u.test(t);let Ko=Eo,$o=Eo;const Wo=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),zo=t=>e=>"string"==typeof e&&e.startsWith(t),Ho=zo("--"),Zo=zo("var(--"),qo=t=>!!Zo(t)&&Go.test(t.split("/*")[0].trim()),Go=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Yo=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Xo(t,e,n=1){$o(n<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`);const[r,o]=function(t){const e=Yo.exec(t);if(!e)return[,];const[,n,r,o]=e;return[`--${null!=n?n:r}`,o]}(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const t=i.trim();return Wo(t)?parseFloat(t):t}return qo(o)?Xo(o,e,n+1):o}const Jo=(t,e,n)=>n>e?e:n<t?t:n,Qo={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},ti={...Qo,transform:t=>Jo(0,1,t)},ei={...Qo,default:1},ni=t=>({test:e=>"string"==typeof e&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>`${e}${t}`}),ri=ni("deg"),oi=ni("%"),ii=ni("px"),si=ni("vh"),ai=ni("vw"),ci={...oi,parse:t=>oi.parse(t)/100,transform:t=>oi.transform(100*t)},li=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),ui=t=>t===Qo||t===ii,hi=(t,e)=>parseFloat(t.split(", ")[e]),di=(t,e)=>(n,{transform:r})=>{if("none"===r||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/u);if(o)return hi(o[1],e);{const e=r.match(/^matrix\((.+)\)$/u);return e?hi(e[1],t):0}},fi=new Set(["x","y","z"]),pi=so.filter((t=>!fi.has(t)));const mi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:di(4,13),y:di(5,14)};mi.translateX=mi.x,mi.translateY=mi.y;const gi=t=>e=>e.test(t),yi=[Qo,ii,oi,ri,ai,si,{test:t=>"auto"===t,parse:t=>t}],wi=t=>yi.find(gi(t)),vi=new Set;let bi=!1,Ei=!1;function Si(){if(Ei){const t=Array.from(vi).filter((t=>t.needsMeasurement)),e=new Set(t.map((t=>t.element))),n=new Map;e.forEach((t=>{const e=function(t){const e=[];return pi.forEach((n=>{const r=t.getValue(n);void 0!==r&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),e}(t);e.length&&(n.set(t,e),t.render())})),t.forEach((t=>t.measureInitialState())),e.forEach((t=>{t.render();const e=n.get(t);e&&e.forEach((([e,n])=>{var r;null===(r=t.getValue(e))||void 0===r||r.set(n)}))})),t.forEach((t=>t.measureEndState())),t.forEach((t=>{void 0!==t.suspendedScrollY&&window.scrollTo(0,t.suspendedScrollY)}))}Ei=!1,bi=!1,vi.forEach((t=>t.complete())),vi.clear()}function xi(){vi.forEach((t=>{t.readKeyframes(),t.needsMeasurement&&(Ei=!0)}))}class Ti{constructor(t,e,n,r,o,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=r,this.element=o,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(vi.add(this),bi||(bi=!0,To.read(xi),To.resolveKeyframes(Si))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:r}=this;for(let o=0;o<t.length;o++)if(null===t[o])if(0===o){const o=null==r?void 0:r.get(),i=t[t.length-1];if(void 0!==o)t[0]=o;else if(n&&e){const r=n.readValue(e,i);null!=r&&(t[0]=r)}void 0===t[0]&&(t[0]=i),r&&void 0===o&&r.set(t[0])}else t[o]=t[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),vi.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,vi.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ai=t=>Math.round(1e5*t)/1e5,_i=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const ki=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ri=(t,e)=>n=>Boolean("string"==typeof n&&ki.test(n)&&n.startsWith(t)||e&&!function(t){return null==t}(n)&&Object.prototype.hasOwnProperty.call(n,e)),Ci=(t,e,n)=>r=>{if("string"!=typeof r)return r;const[o,i,s,a]=r.match(_i);return{[t]:parseFloat(o),[e]:parseFloat(i),[n]:parseFloat(s),alpha:void 0!==a?parseFloat(a):1}},Pi={...Qo,transform:t=>Math.round((t=>Jo(0,255,t))(t))},Ii={test:Ri("rgb","red"),parse:Ci("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Pi.transform(t)+", "+Pi.transform(e)+", "+Pi.transform(n)+", "+Ai(ti.transform(r))+")"};const Oi={test:Ri("#"),parse:function(t){let e="",n="",r="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}},transform:Ii.transform},Ni={test:Ri("hsl","hue"),parse:Ci("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+oi.transform(Ai(e))+", "+oi.transform(Ai(n))+", "+Ai(ti.transform(r))+")"},Bi={test:t=>Ii.test(t)||Oi.test(t)||Ni.test(t),parse:t=>Ii.test(t)?Ii.parse(t):Ni.test(t)?Ni.parse(t):Oi.parse(t),transform:t=>"string"==typeof t?t:t.hasOwnProperty("red")?Ii.transform(t):Ni.transform(t)},Ui=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const Li="number",ji="color",Di="var",Mi="var(",Vi="${}",Fi=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ki(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},o=[];let i=0;const s=e.replace(Fi,(t=>(Bi.test(t)?(r.color.push(i),o.push(ji),n.push(Bi.parse(t))):t.startsWith(Mi)?(r.var.push(i),o.push(Di),n.push(t)):(r.number.push(i),o.push(Li),n.push(parseFloat(t))),++i,Vi))).split(Vi);return{values:n,split:s,indexes:r,types:o}}function $i(t){return Ki(t).values}function Wi(t){const{split:e,types:n}=Ki(t),r=e.length;return t=>{let o="";for(let i=0;i<r;i++)if(o+=e[i],void 0!==t[i]){const e=n[i];o+=e===Li?Ai(t[i]):e===ji?Bi.transform(t[i]):t[i]}return o}}const zi=t=>"number"==typeof t?0:t;const Hi={test:function(t){var e,n;return isNaN(t)&&"string"==typeof t&&((null===(e=t.match(_i))||void 0===e?void 0:e.length)||0)+((null===(n=t.match(Ui))||void 0===n?void 0:n.length)||0)>0},parse:$i,createTransformer:Wi,getAnimatableNone:function(t){const e=$i(t);return Wi(t)(e.map(zi))}},Zi=new Set(["brightness","contrast","saturate","opacity"]);function qi(t){const[e,n]=t.slice(0,-1).split("(");if("drop-shadow"===e)return t;const[r]=n.match(_i)||[];if(!r)return t;const o=n.replace(r,"");let i=Zi.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+o+")"}const Gi=/\b([a-z-]*)\(.*?\)/gu,Yi={...Hi,getAnimatableNone:t=>{const e=t.match(Gi);return e?e.map(qi).join(" "):t}},Xi={borderWidth:ii,borderTopWidth:ii,borderRightWidth:ii,borderBottomWidth:ii,borderLeftWidth:ii,borderRadius:ii,radius:ii,borderTopLeftRadius:ii,borderTopRightRadius:ii,borderBottomRightRadius:ii,borderBottomLeftRadius:ii,width:ii,maxWidth:ii,height:ii,maxHeight:ii,top:ii,right:ii,bottom:ii,left:ii,padding:ii,paddingTop:ii,paddingRight:ii,paddingBottom:ii,paddingLeft:ii,margin:ii,marginTop:ii,marginRight:ii,marginBottom:ii,marginLeft:ii,backgroundPositionX:ii,backgroundPositionY:ii},Ji={rotate:ri,rotateX:ri,rotateY:ri,rotateZ:ri,scale:ei,scaleX:ei,scaleY:ei,scaleZ:ei,skew:ri,skewX:ri,skewY:ri,distance:ii,translateX:ii,translateY:ii,translateZ:ii,x:ii,y:ii,z:ii,perspective:ii,transformPerspective:ii,opacity:ti,originX:ci,originY:ci,originZ:ii},Qi={...Qo,transform:Math.round},ts={...Xi,...Ji,zIndex:Qi,size:ii,fillOpacity:ti,strokeOpacity:ti,numOctaves:Qi},es={...ts,color:Bi,backgroundColor:Bi,outlineColor:Bi,fill:Bi,stroke:Bi,borderColor:Bi,borderTopColor:Bi,borderRightColor:Bi,borderBottomColor:Bi,borderLeftColor:Bi,filter:Yi,WebkitFilter:Yi},ns=t=>es[t];function rs(t,e){let n=ns(t);return n!==Yi&&(n=Hi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const os=new Set(["auto","none","0"]);class is extends Ti{constructor(t,e,n,r,o){super(t,e,n,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let n=0;n<t.length;n++){let r=t[n];if("string"==typeof r&&(r=r.trim(),qo(r))){const o=Xo(r,e.current);void 0!==o&&(t[n]=o),n===t.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!li.has(n)||2!==t.length)return;const[r,o]=t,i=wi(r),s=wi(o);if(i!==s)if(ui(i)&&ui(s))for(let e=0;e<t.length;e++){const n=t[e];"string"==typeof n&&(t[e]=parseFloat(n))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let e=0;e<t.length;e++)("number"==typeof(r=t[e])?0===r:null===r||"none"===r||"0"===r||Fo(r))&&n.push(e);var r;n.length&&function(t,e,n){let r,o=0;for(;o<t.length&&!r;){const e=t[o];"string"==typeof e&&!os.has(e)&&Ki(e).values.length&&(r=t[o]),o++}if(r&&n)for(const o of e)t[o]=rs(n,r)}(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=mi[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const r=e[e.length-1];void 0!==r&&t.getValue(n,r).jump(r,!1)}measureEndState(){var t;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const i=r.length-1,s=r[i];r[i]=mi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),(null===(t=this.removedTransforms)||void 0===t?void 0:t.length)&&this.removedTransforms.forEach((([t,n])=>{e.getValue(t).set(n)})),this.resolveNoneKeyframes()}}function ss(t){return"function"==typeof t}let as;function cs(){as=void 0}const ls={now:()=>(void 0===as&&ls.set(_o.isProcessing||yo?_o.timestamp:performance.now()),as),set:t=>{as=t,queueMicrotask(cs)}},us=(t,e)=>"zIndex"!==e&&(!("number"!=typeof t&&!Array.isArray(t))||!("string"!=typeof t||!Hi.test(t)&&"0"!==t||t.startsWith("url(")));function hs(t,e,n,r){const o=t[0];if(null===o)return!1;if("display"===e||"visibility"===e)return!0;const i=t[t.length-1],s=us(o,e),a=us(i,e);return Ko(s===a,`You are trying to animate ${e} from "${o}" to "${i}". ${o} is not an animatable value - to enable this animation set ${o} to a value animatable to ${i} via the \`style\` property.`),!(!s||!a)&&(function(t){const e=t[0];if(1===t.length)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}(t)||("spring"===n||ss(n))&&r)}class ds{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:i="loop",...s}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ls.now(),this.options={autoplay:t,delay:e,type:n,repeat:r,repeatDelay:o,repeatType:i,...s},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(xi(),Si()),this._resolved}onKeyframesResolved(t,e){this.resolvedAt=ls.now(),this.hasAttemptedResolve=!0;const{name:n,type:r,velocity:o,delay:i,onComplete:s,onUpdate:a,isGenerator:c}=this.options;if(!c&&!hs(t,n,r,o)){if(wo||!i)return null==a||a(bo(t,this.options,e)),null==s||s(),void this.resolveFinishedPromise();this.options.duration=0}const l=this.initPlayback(t,e);!1!==l&&(this._resolved={keyframes:t,finalKeyframe:e,...l},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise((t=>{this.resolveFinishedPromise=t}))}}const fs=(t,e,n)=>{const r=e-t;return 0===r?1:(n-t)/r},ps=(t,e,n=10)=>{let r="";const o=Math.max(Math.round(e/n),2);for(let e=0;e<o;e++)r+=t(fs(0,o-1,e))+", ";return`linear(${r.substring(0,r.length-2)})`};function ms(t,e){return e?t*(1e3/e):0}const gs=5;function ys(t,e,n){const r=Math.max(e-gs,0);return ms(n-t(r),e-r)}const ws={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vs=.001;function bs({duration:t=ws.duration,bounce:e=ws.bounce,velocity:n=ws.velocity,mass:r=ws.mass}){let o,i;Ko(t<=co(ws.maxDuration),"Spring duration must be 10 seconds or less");let s=1-e;s=Jo(ws.minDamping,ws.maxDamping,s),t=Jo(ws.minDuration,ws.maxDuration,lo(t)),s<1?(o=e=>{const r=e*s,o=r*t,i=r-n,a=Ss(e,s),c=Math.exp(-o);return vs-i/a*c},i=e=>{const r=e*s*t,i=r*n+n,a=Math.pow(s,2)*Math.pow(e,2)*t,c=Math.exp(-r),l=Ss(Math.pow(e,2),s);return(-o(e)+vs>0?-1:1)*((i-a)*c)/l}):(o=e=>Math.exp(-e*t)*((e-n)*t+1)-vs,i=e=>Math.exp(-e*t)*(t*t*(n-e)));const a=function(t,e,n){let r=n;for(let n=1;n<Es;n++)r-=t(r)/e(r);return r}(o,i,5/t);if(t=co(t),isNaN(a))return{stiffness:ws.stiffness,damping:ws.damping,duration:t};{const e=Math.pow(a,2)*r;return{stiffness:e,damping:2*s*Math.sqrt(r*e),duration:t}}}const Es=12;function Ss(t,e){return t*Math.sqrt(1-e*e)}const xs=2e4;function Ts(t){let e=0;let n=t.next(e);for(;!n.done&&e<xs;)e+=50,n=t.next(e);return e>=xs?1/0:e}const As=["duration","bounce"],_s=["stiffness","damping","mass"];function ks(t,e){return e.some((e=>void 0!==t[e]))}function Rs(t=ws.visualDuration,e=ws.bounce){const n="object"!=typeof t?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:o}=n;const i=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:c,damping:l,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=function(t){let e={velocity:ws.velocity,stiffness:ws.stiffness,damping:ws.damping,mass:ws.mass,isResolvedFromDuration:!1,...t};if(!ks(t,_s)&&ks(t,As))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(1.2*n),o=r*r,i=2*Jo(.05,1,1-t.bounce)*Math.sqrt(o);e={...e,mass:ws.mass,stiffness:o,damping:i}}else{const n=bs(t);e={...e,...n,mass:ws.mass},e.isResolvedFromDuration=!0}return e}({...n,velocity:-lo(n.velocity||0)}),p=d||0,m=l/(2*Math.sqrt(c*u)),g=s-i,y=lo(Math.sqrt(c/u)),w=Math.abs(g)<5;let v;if(r||(r=w?ws.restSpeed.granular:ws.restSpeed.default),o||(o=w?ws.restDelta.granular:ws.restDelta.default),m<1){const t=Ss(y,m);v=e=>{const n=Math.exp(-m*y*e);return s-n*((p+m*y*g)/t*Math.sin(t*e)+g*Math.cos(t*e))}}else if(1===m)v=t=>s-Math.exp(-y*t)*(g+(p+y*g)*t);else{const t=y*Math.sqrt(m*m-1);v=e=>{const n=Math.exp(-m*y*e),r=Math.min(t*e,300);return s-n*((p+m*y*g)*Math.sinh(r)+t*g*Math.cosh(r))/t}}const b={calculatedDuration:f&&h||null,next:t=>{const e=v(t);if(f)a.done=t>=h;else{let n=0;m<1&&(n=0===t?co(p):ys(v,t,e));const i=Math.abs(n)<=r,c=Math.abs(s-e)<=o;a.done=i&&c}return a.value=a.done?s:e,a},toString:()=>{const t=Math.min(Ts(b),xs),e=ps((e=>b.next(t*e).value),t,30);return t+"ms "+e}};return b}function Cs({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:i=500,modifyTarget:s,min:a,max:c,restDelta:l=.5,restSpeed:u}){const h=t[0],d={done:!1,value:h},f=t=>void 0===a?c:void 0===c||Math.abs(a-t)<Math.abs(c-t)?a:c;let p=n*e;const m=h+p,g=void 0===s?m:s(m);g!==m&&(p=g-h);const y=t=>-p*Math.exp(-t/r),w=t=>g+y(t),v=t=>{const e=y(t),n=w(t);d.done=Math.abs(e)<=l,d.value=d.done?g:n};let b,E;const S=t=>{(t=>void 0!==a&&t<a||void 0!==c&&t>c)(d.value)&&(b=t,E=Rs({keyframes:[d.value,f(d.value)],velocity:ys(w,t,d.value),damping:o,stiffness:i,restDelta:l,restSpeed:u}))};return S(0),{calculatedDuration:null,next:t=>{let e=!1;return E||void 0!==b||(e=!0,v(t),S(t)),void 0!==b&&t>=b?E.next(t-b):(!e&&v(t),d)}}}const Ps=Io(.42,0,1,1),Is=Io(0,0,.58,1),Os=Io(.42,0,.58,1),Ns=t=>Array.isArray(t)&&"number"==typeof t[0],Bs={linear:Eo,easeIn:Ps,easeInOut:Os,easeOut:Is,circIn:Do,circInOut:Vo,circOut:Mo,backIn:Uo,backInOut:Lo,backOut:Bo,anticipate:jo},Us=t=>{if(Ns(t)){$o(4===t.length,"Cubic bezier arrays must contain four numerical values.");const[e,n,r,o]=t;return Io(e,n,r,o)}return"string"==typeof t?($o(void 0!==Bs[t],`Invalid easing type '${t}'`),Bs[t]):t},Ls=(t,e)=>n=>e(t(n)),js=(...t)=>t.reduce(Ls),Ds=(t,e,n)=>t+(e-t)*n;function Ms(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Vs(t,e){return n=>n>0?e:t}const Fs=(t,e,n)=>{const r=t*t,o=n*(e*e-r)+r;return o<0?0:Math.sqrt(o)},Ks=[Oi,Ii,Ni];function $s(t){const e=(t=>Ks.find((e=>e.test(t))))(t);if(Ko(Boolean(e),`'${t}' is not an animatable color. Use the equivalent color code instead.`),!Boolean(e))return!1;let n=e.parse(t);return e===Ni&&(n=function({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,n/=100;let o=0,i=0,s=0;if(e/=100){const r=n<.5?n*(1+e):n+e-n*e,a=2*n-r;o=Ms(a,r,t+1/3),i=Ms(a,r,t),s=Ms(a,r,t-1/3)}else o=i=s=n;return{red:Math.round(255*o),green:Math.round(255*i),blue:Math.round(255*s),alpha:r}}(n)),n}const Ws=(t,e)=>{const n=$s(t),r=$s(e);if(!n||!r)return Vs(t,e);const o={...n};return t=>(o.red=Fs(n.red,r.red,t),o.green=Fs(n.green,r.green,t),o.blue=Fs(n.blue,r.blue,t),o.alpha=Ds(n.alpha,r.alpha,t),Ii.transform(o))},zs=new Set(["none","hidden"]);function Hs(t,e){return n=>Ds(t,e,n)}function Zs(t){return"number"==typeof t?Hs:"string"==typeof t?qo(t)?Vs:Bi.test(t)?Ws:Ys:Array.isArray(t)?qs:"object"==typeof t?Bi.test(t)?Ws:Gs:Vs}function qs(t,e){const n=[...t],r=n.length,o=t.map(((t,n)=>Zs(t)(t,e[n])));return t=>{for(let e=0;e<r;e++)n[e]=o[e](t);return n}}function Gs(t,e){const n={...t,...e},r={};for(const o in n)void 0!==t[o]&&void 0!==e[o]&&(r[o]=Zs(t[o])(t[o],e[o]));return t=>{for(const e in r)n[e]=r[e](t);return n}}const Ys=(t,e)=>{const n=Hi.createTransformer(e),r=Ki(t),o=Ki(e);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?zs.has(t)&&!o.values.length||zs.has(e)&&!r.values.length?function(t,e){return zs.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}(t,e):js(qs(function(t,e){var n;const r=[],o={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=t.indexes[s][o[s]],c=null!==(n=t.values[a])&&void 0!==n?n:0;r[i]=c,o[s]++}return r}(r,o),o.values),n):(Ko(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),Vs(t,e))};function Xs(t,e,n){if("number"==typeof t&&"number"==typeof e&&"number"==typeof n)return Ds(t,e,n);return Zs(t)(t,e)}function Js(t,e,{clamp:n=!0,ease:r,mixer:o}={}){const i=t.length;if($o(i===e.length,"Both input and output ranges must be the same length"),1===i)return()=>e[0];if(2===i&&t[0]===t[1])return()=>e[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const s=function(t,e,n){const r=[],o=n||Xs,i=t.length-1;for(let n=0;n<i;n++){let i=o(t[n],t[n+1]);if(e){const t=Array.isArray(e)?e[n]||Eo:e;i=js(t,i)}r.push(i)}return r}(e,r,o),a=s.length,c=e=>{let n=0;if(a>1)for(;n<t.length-2&&!(e<t[n+1]);n++);const r=fs(t[n],t[n+1],e);return s[n](r)};return n?e=>c(Jo(t[0],t[i-1],e)):c}function Qs(t){const e=[0];return function(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const o=fs(0,e,r);t.push(Ds(n,1,o))}}(e,t.length-1),e}function ta({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const o=(t=>Array.isArray(t)&&"number"!=typeof t[0])(r)?r.map(Us):Us(r),i={done:!1,value:e[0]},s=function(t,e){return t.map((t=>t*e))}(n&&n.length===e.length?n:Qs(e),t),a=Js(s,e,{ease:Array.isArray(o)?o:(c=e,l=o,c.map((()=>l||Os)).splice(0,c.length-1))});var c,l;return{calculatedDuration:t,next:e=>(i.value=a(e),i.done=e>=t,i)}}const ea=t=>{const e=({timestamp:e})=>t(e);return{start:()=>To.update(e,!0),stop:()=>Ao(e),now:()=>_o.isProcessing?_o.timestamp:ls.now()}},na={decay:Cs,inertia:Cs,tween:ta,keyframes:ta,spring:Rs},ra=t=>t/100;class oa extends ds{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:t}=this.options;t&&t()};const{name:e,motionValue:n,element:r,keyframes:o}=this.options,i=(null==r?void 0:r.KeyframeResolver)||Ti;this.resolver=new i(o,((t,e)=>this.onKeyframesResolved(t,e)),e,n,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:e="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:o,velocity:i=0}=this.options,s=ss(e)?e:na[e]||ta;let a,c;s!==ta&&"number"!=typeof t[0]&&(a=js(ra,Xs(t[0],t[1])),t=[0,100]);const l=s({...this.options,keyframes:t});"mirror"===o&&(c=s({...this.options,keyframes:[...t].reverse(),velocity:-i})),null===l.calculatedDuration&&(l.calculatedDuration=Ts(l));const{calculatedDuration:u}=l,h=u+r;return{generator:l,mirroredGenerator:c,mapPercentToKeyframes:a,calculatedDuration:u,resolvedDuration:h,totalDuration:h*(n+1)-r}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&t?this.state=this.pendingPlayState:this.pause()}tick(t,e=!1){const{resolved:n}=this;if(!n){const{keyframes:t}=this.options;return{done:!0,value:t[t.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:i,mapPercentToKeyframes:s,keyframes:a,calculatedDuration:c,totalDuration:l,resolvedDuration:u}=n;if(null===this.startTime)return o.next(0);const{delay:h,repeat:d,repeatType:f,repeatDelay:p,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-l/this.speed,this.startTime)),e?this.currentTime=t:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const g=this.currentTime-h*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>l;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=l);let w=this.currentTime,v=o;if(d){const t=Math.min(this.currentTime,l)/u;let e=Math.floor(t),n=t%1;!n&&t>=1&&(n=1),1===n&&e--,e=Math.min(e,d+1);Boolean(e%2)&&("reverse"===f?(n=1-n,p&&(n-=p/u)):"mirror"===f&&(v=i)),w=Jo(0,1,n)*u}const b=y?{done:!1,value:a[0]}:v.next(w);s&&(b.value=s(b.value));let{done:E}=b;y||null===c||(E=this.speed>=0?this.currentTime>=l:this.currentTime<=0);const S=null===this.holdTime&&("finished"===this.state||"running"===this.state&&E);return S&&void 0!==r&&(b.value=bo(a,this.options,r)),m&&m(b.value),S&&this.finish(),b}get duration(){const{resolved:t}=this;return t?lo(t.calculatedDuration):0}get time(){return lo(this.currentTime)}set time(t){t=co(t),this.currentTime=t,null!==this.holdTime||0===this.speed?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=lo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:t=ea,onPlay:e,startTime:n}=this.options;this.driver||(this.driver=t((t=>this.tick(t)))),e&&e();const r=this.driver.now();null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=r):this.startTime=null!=n?n:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;this._resolved?(this.state="paused",this.holdTime=null!==(t=this.currentTime)&&void 0!==t?t:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const ia=new Set(["opacity","clipPath","filter","transform"]);function sa(t){let e;return()=>(void 0===e&&(e=t()),e)}const aa={linearEasing:void 0};function ca(t,e){const n=sa(t);return()=>{var t;return null!==(t=aa[e])&&void 0!==t?t:n()}}const la=ca((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0}),"linearEasing");function ua(t){return Boolean("function"==typeof t&&la()||!t||"string"==typeof t&&(t in da||la())||Ns(t)||Array.isArray(t)&&t.every(ua))}const ha=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,da={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ha([0,.65,.55,1]),circOut:ha([.55,0,1,.45]),backIn:ha([.31,.01,.66,-.59]),backOut:ha([.33,1.53,.69,.99])};function fa(t,e){return t?"function"==typeof t&&la()?ps(t,e):Ns(t)?ha(t):Array.isArray(t)?t.map((t=>fa(t,e)||da.easeOut)):da[t]:void 0}function pa(t,e,n,{delay:r=0,duration:o=300,repeat:i=0,repeatType:s="loop",ease:a="easeInOut",times:c}={}){const l={[e]:n};c&&(l.offset=c);const u=fa(a,o);return Array.isArray(u)&&(l.easing=u),t.animate(l,{delay:r,duration:o,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:"reverse"===s?"alternate":"normal"})}function ma(t,e){t.timeline=e,t.onfinish=null}const ga=sa((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));const ya={anticipate:jo,backInOut:Lo,circInOut:Vo};class wa extends ds{constructor(t){super(t);const{name:e,motionValue:n,element:r,keyframes:o}=this.options;this.resolver=new is(o,((t,e)=>this.onKeyframesResolved(t,e)),e,n,r),this.resolver.scheduleResolve()}initPlayback(t,e){var n;let{duration:r=300,times:o,ease:i,type:s,motionValue:a,name:c,startTime:l}=this.options;if(!(null===(n=a.owner)||void 0===n?void 0:n.current))return!1;var u;if("string"==typeof i&&la()&&i in ya&&(i=ya[i]),ss((u=this.options).type)||"spring"===u.type||!ua(u.ease)){const{onComplete:e,onUpdate:n,motionValue:a,element:c,...l}=this.options,u=function(t,e){const n=new oa({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const o=[];let i=0;for(;!r.done&&i<2e4;)r=n.sample(i),o.push(r.value),i+=10;return{times:void 0,keyframes:o,duration:i-10,ease:"linear"}}(t,l);1===(t=u.keyframes).length&&(t[1]=t[0]),r=u.duration,o=u.times,i=u.ease,s="keyframes"}const h=pa(a.owner.current,c,t,{...this.options,duration:r,times:o,ease:i});return h.startTime=null!=l?l:this.calcStartTime(),this.pendingTimeline?(ma(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:n}=this.options;a.set(bo(t,this.options,e)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:o,type:s,ease:i,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return lo(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return lo(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.currentTime=co(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:e}=t;return e.startTime}attachTimeline(t){if(this._resolved){const{resolved:e}=this;if(!e)return Eo;const{animation:n}=e;ma(n,t)}else this.pendingTimeline=t;return Eo}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;"finished"===e.playState&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:n,duration:r,type:o,ease:i,times:s}=t;if("idle"===e.playState||"finished"===e.playState)return;if(this.time){const{motionValue:t,onUpdate:e,onComplete:a,element:c,...l}=this.options,u=new oa({...l,keyframes:n,duration:r,type:o,ease:i,times:s,isGenerator:!0}),h=co(this.time);t.setWithVelocity(u.sample(h-10).value,u.sample(h).value,10)}const{onStop:a}=this.options;a&&a(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:o,damping:i,type:s}=t;return ga()&&n&&ia.has(n)&&e&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate&&!r&&"mirror"!==o&&0!==i&&"inertia"!==s}}const va=sa((()=>void 0!==window.ScrollTimeline));class ba{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,e){return Promise.all(this.animations).then(t).catch(e)}getAll(t){return this.animations[0][t]}setAll(t,e){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=e}attachTimeline(t,e){const n=this.animations.map((n=>va()&&n.attachTimeline?n.attachTimeline(t):e(n)));return()=>{n.forEach(((t,e)=>{t&&t(),this.animations[e].stop()}))}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach((e=>e[t]()))}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const Ea=(t,e,n,r={},o,i)=>s=>{const a=mo(r,t)||{},c=a.delay||r.delay||0;let{elapsed:l=0}=r;l-=co(c);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-l,onUpdate:t=>{e.set(t),a.onUpdate&&a.onUpdate(t)},onComplete:()=>{s(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:o};(function({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:i,repeatType:s,repeatDelay:a,from:c,elapsed:l,...u}){return!!Object.keys(u).length})(a)||(u={...u,...po(t,u)}),u.duration&&(u.duration=co(u.duration)),u.repeatDelay&&(u.repeatDelay=co(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let h=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(u.duration=0,0===u.delay&&(h=!0)),(wo||go)&&(h=!0,u.duration=0,u.delay=0),h&&!i&&void 0!==e.get()){const t=bo(u.keyframes,a);if(void 0!==t)return To.update((()=>{u.onUpdate(t),u.onComplete()})),new ba([])}return!i&&wa.supports(u)?new wa(u):new oa(u)},Sa=t=>Boolean(t&&"object"==typeof t&&t.mix&&t.toValue),xa=t=>Jr(t)?t[t.length-1]||0:t;function Ta(t,e){-1===t.indexOf(e)&&t.push(e)}function Aa(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class _a{constructor(){this.subscriptions=[]}add(t){return Ta(this.subscriptions,t),()=>Aa(this.subscriptions,t)}notify(t,e,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](t,e,n);else for(let o=0;o<r;o++){const r=this.subscriptions[o];r&&r(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ka={current:void 0};class Ra{constructor(t,e={}){this.version="11.15.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(t,e=!0)=>{const n=ls.now();this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(t),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),e&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){var e;this.current=t,this.updatedAt=ls.now(),null===this.canTrackVelocity&&void 0!==t&&(this.canTrackVelocity=(e=this.current,!isNaN(parseFloat(e))))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new _a);const n=this.events[t].add(e);return"change"===t?()=>{n(),To.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return ka.current&&ka.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=ls.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,30);return ms(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise((e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ca(t,e){return new Ra(t,e)}function Pa(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ca(n))}const Ia=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Oa="data-"+Ia("framerAppearId");function Na(t){return t.props[Oa]}const Ba=t=>Boolean(t&&t.getVelocity);function Ua(t,e){const n=t.getValue("willChange");if(r=n,Boolean(Ba(r)&&r.add))return n.add(e);var r}function La({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&!0!==e[n];return e[n]=!1,r}function ja(t,e,{delay:n=0,transitionOverride:r,type:o}={}){var i;let{transition:s=t.getDefaultTransition(),transitionEnd:a,...c}=e;r&&(s=r);const l=[],u=o&&t.animationState&&t.animationState.getState()[o];for(const e in c){const r=t.getValue(e,null!==(i=t.latestValues[e])&&void 0!==i?i:null),o=c[e];if(void 0===o||u&&La(u,e))continue;const a={delay:n,...mo(s||{},e)};let h=!1;if(window.MotionHandoffAnimation){const n=Na(t);if(n){const t=window.MotionHandoffAnimation(n,e,To);null!==t&&(a.startTime=t,h=!0)}}Ua(t,e),r.start(Ea(e,r,o,t.shouldReduceMotion&&ao.has(e)?{type:!1}:a,t,h));const d=r.animation;d&&l.push(d)}return a&&Promise.all(l).then((()=>{To.update((()=>{a&&function(t,e){const n=ro(t,e);let{transitionEnd:r={},transition:o={},...i}=n||{};i={...i,...r};for(const e in i)Pa(t,e,xa(i[e]))}(t,a)}))})),l}function Da(t,e,n={}){var r;const o=ro(t,e,"exit"===n.type?null===(r=t.presenceContext)||void 0===r?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(i=n.transitionOverride);const s=o?()=>Promise.all(ja(t,o,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(r=0)=>{const{delayChildren:o=0,staggerChildren:s,staggerDirection:a}=i;return function(t,e,n=0,r=0,o=1,i){const s=[],a=(t.variantChildren.size-1)*r,c=1===o?(t=0)=>t*r:(t=0)=>a-t*r;return Array.from(t.variantChildren).sort(Ma).forEach(((t,r)=>{t.notify("AnimationStart",e),s.push(Da(t,e,{...i,delay:n+c(r)}).then((()=>t.notify("AnimationComplete",e))))})),Promise.all(s)}(t,e,o+r,s,a,n)}:()=>Promise.resolve(),{when:c}=i;if(c){const[t,e]="beforeChildren"===c?[s,a]:[a,s];return t().then((()=>e()))}return Promise.all([s(),a(n.delay)])}function Ma(t,e){return t.sortNodePosition(e)}const Va=io.length;function Fa(t){if(!t)return;if(!t.isControllingVariants){const e=t.parent&&Fa(t.parent)||{};return void 0!==t.props.initial&&(e.initial=t.props.initial),e}const e={};for(let n=0;n<Va;n++){const r=io[n],o=t.props[r];(to(o)||!1===o)&&(e[r]=o)}return e}const Ka=[...oo].reverse(),$a=oo.length;function Wa(t){return e=>Promise.all(e.map((({animation:e,options:n})=>function(t,e,n={}){let r;if(t.notify("AnimationStart",e),Array.isArray(e)){const o=e.map((e=>Da(t,e,n)));r=Promise.all(o)}else if("string"==typeof e)r=Da(t,e,n);else{const o="function"==typeof e?ro(t,e,n.custom):e;r=Promise.all(ja(t,o,n))}return r.then((()=>{t.notify("AnimationComplete",e)}))}(t,e,n))))}function za(t){let e=Wa(t),n=qa(),r=!0;const o=e=>(n,r)=>{var o;const i=ro(t,r,"exit"===e?null===(o=t.presenceContext)||void 0===o?void 0:o.custom:void 0);if(i){const{transition:t,transitionEnd:e,...r}=i;n={...n,...r,...e}}return n};function i(i){const{props:s}=t,a=Fa(t.parent)||{},c=[],l=new Set;let u={},h=1/0;for(let e=0;e<$a;e++){const d=Ka[e],f=n[d],p=void 0!==s[d]?s[d]:a[d],m=to(p),g=d===i?f.isActive:null;!1===g&&(h=e);let y=p===a[d]&&p!==s[d]&&m;if(y&&r&&t.manuallyAnimateOnMount&&(y=!1),f.protectedKeys={...u},!f.isActive&&null===g||!p&&!f.prevProp||Xr(p)||"boolean"==typeof p)continue;const w=Ha(f.prevProp,p);let v=w||d===i&&f.isActive&&!y&&m||e>h&&m,b=!1;const E=Array.isArray(p)?p:[p];let S=E.reduce(o(d),{});!1===g&&(S={});const{prevResolvedValues:x={}}=f,T={...x,...S},A=e=>{v=!0,l.has(e)&&(b=!0,l.delete(e)),f.needsAnimating[e]=!0;const n=t.getValue(e);n&&(n.liveStyle=!1)};for(const t in T){const e=S[t],n=x[t];if(u.hasOwnProperty(t))continue;let r=!1;r=Jr(e)&&Jr(n)?!Qr(e,n):e!==n,r?null!=e?A(t):l.add(t):void 0!==e&&l.has(t)?A(t):f.protectedKeys[t]=!0}f.prevProp=p,f.prevResolvedValues=S,f.isActive&&(u={...u,...S}),r&&t.blockInitialAnimation&&(v=!1);v&&(!(y&&w)||b)&&c.push(...E.map((t=>({animation:t,options:{type:d}}))))}if(l.size){const e={};l.forEach((n=>{const r=t.getBaseTarget(n),o=t.getValue(n);o&&(o.liveStyle=!0),e[n]=null!=r?r:null})),c.push({animation:e})}let d=Boolean(c.length);return!r||!1!==s.initial&&s.initial!==s.animate||t.manuallyAnimateOnMount||(d=!1),r=!1,d?e(c):Promise.resolve()}return{animateChanges:i,setActive:function(e,r){var o;if(n[e].isActive===r)return Promise.resolve();null===(o=t.variantChildren)||void 0===o||o.forEach((t=>{var n;return null===(n=t.animationState)||void 0===n?void 0:n.setActive(e,r)})),n[e].isActive=r;const s=i(e);for(const t in n)n[t].protectedKeys={};return s},setAnimateFunction:function(n){e=n(t)},getState:()=>n,reset:()=>{n=qa(),r=!0}}}function Ha(t,e){return"string"==typeof e?e!==t:!!Array.isArray(e)&&!Qr(e,t)}function Za(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function qa(){return{animate:Za(!0),whileInView:Za(),whileHover:Za(),whileTap:Za(),whileDrag:Za(),whileFocus:Za(),exit:Za()}}class Ga{constructor(t){this.isMounted=!1,this.node=t}update(){}}let Ya=0;const Xa={animation:{Feature:class extends Ga{constructor(t){super(t),t.animationState||(t.animationState=za(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Xr(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),null===(t=this.unmountControls)||void 0===t||t.call(this)}}},exit:{Feature:class extends Ga{constructor(){super(...arguments),this.id=Ya++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const r=this.node.animationState.setActive("exit",!t);e&&!t&&r.then((()=>e(this.id)))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}}},Ja={x:!1,y:!1};function Qa(){return Ja.x||Ja.y}function tc(t,e){const n=function(t,e,n){var r;if(t instanceof Element)return[t];if("string"==typeof t){let o=document;e&&(o=e.current);const i=null!==(r=null==n?void 0:n[t])&&void 0!==r?r:o.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}(t),r=new AbortController;return[n,{passive:!0,...e,signal:r.signal},()=>r.abort()]}function ec(t){return e=>{"touch"===e.pointerType||Qa()||t(e)}}const nc=t=>"mouse"===t.pointerType?"number"!=typeof t.button||t.button<=0:!1!==t.isPrimary,rc=new WeakSet;function oc(t){return e=>{"Enter"===e.key&&t(e)}}function ic(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const sc=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const ac=(t,e)=>!!e&&(t===e||ac(t,e.parentElement));function cc(t){return nc(t)&&!Qa()}function lc(t,e,n={}){const[r,o,i]=tc(t,n),s=t=>{const r=t.currentTarget;if(!cc(t)||rc.has(r))return;rc.add(r);const i=e(t),s=(t,e)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",c),cc(t)&&rc.has(r)&&(rc.delete(r),i&&i(t,{success:e}))},a=t=>{s(t,n.useGlobalTarget||ac(r,t.target))},c=t=>{s(t,!1)};window.addEventListener("pointerup",a,o),window.addEventListener("pointercancel",c,o)};return r.forEach((t=>{(function(t){return sc.has(t.tagName)||-1!==t.tabIndex})(t)||(t.tabIndex=0);(n.useGlobalTarget?window:t).addEventListener("pointerdown",s,o),t.addEventListener("focus",(t=>((t,e)=>{const n=t.currentTarget;if(!n)return;const r=oc((()=>{if(rc.has(n))return;ic(n,"down");const t=oc((()=>{ic(n,"up")}));n.addEventListener("keyup",t,e),n.addEventListener("blur",(()=>ic(n,"cancel")),e)}));n.addEventListener("keydown",r,e),n.addEventListener("blur",(()=>n.removeEventListener("keydown",r)),e)})(t,o)),o)})),i}function uc(t){return{point:{x:t.pageX,y:t.pageY}}}function hc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function dc(t,e,n,r){return hc(t,e,(t=>e=>nc(e)&&t(e,uc(e)))(n),r)}const fc=(t,e)=>Math.abs(t-e);class pc{constructor(t,e,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const t=yc(this.lastMoveEventInfo,this.history),e=null!==this.startEvent,n=function(t,e){const n=fc(t.x,e.x),r=fc(t.y,e.y);return Math.sqrt(n**2+r**2)}(t.offset,{x:0,y:0})>=3;if(!e&&!n)return;const{point:r}=t,{timestamp:o}=_o;this.history.push({...r,timestamp:o});const{onStart:i,onMove:s}=this.handlers;e||(i&&i(this.lastMoveEvent,t),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,t)},this.handlePointerMove=(t,e)=>{this.lastMoveEvent=t,this.lastMoveEventInfo=mc(e,this.transformPagePoint),To.update(this.updatePoint,!0)},this.handlePointerUp=(t,e)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:o}=this.handlers;if(this.dragSnapToOrigin&&o&&o(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=yc("pointercancel"===t.type?this.lastMoveEventInfo:mc(e,this.transformPagePoint),this.history);this.startEvent&&n&&n(t,i),r&&r(t,i)},!nc(t))return;this.dragSnapToOrigin=o,this.handlers=e,this.transformPagePoint=n,this.contextWindow=r||window;const i=mc(uc(t),this.transformPagePoint),{point:s}=i,{timestamp:a}=_o;this.history=[{...s,timestamp:a}];const{onSessionStart:c}=e;c&&c(t,yc(i,this.history)),this.removeListeners=js(dc(this.contextWindow,"pointermove",this.handlePointerMove),dc(this.contextWindow,"pointerup",this.handlePointerUp),dc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ao(this.updatePoint)}}function mc(t,e){return e?{point:e(t.point)}:t}function gc(t,e){return{x:t.x-e.x,y:t.y-e.y}}function yc({point:t},e){return{point:t,delta:gc(t,vc(e)),offset:gc(t,wc(e)),velocity:bc(e,.1)}}function wc(t){return t[0]}function vc(t){return t[t.length-1]}function bc(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const o=vc(t);for(;n>=0&&(r=t[n],!(o.timestamp-r.timestamp>co(e)));)n--;if(!r)return{x:0,y:0};const i=lo(o.timestamp-r.timestamp);if(0===i)return{x:0,y:0};const s={x:(o.x-r.x)/i,y:(o.y-r.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Ec(t){return t&&"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}const Sc=.9999,xc=1.0001,Tc=-.01,Ac=.01;function _c(t){return t.max-t.min}function kc(t,e,n,r=.5){t.origin=r,t.originPoint=Ds(e.min,e.max,t.origin),t.scale=_c(n)/_c(e),t.translate=Ds(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Sc&&t.scale<=xc||isNaN(t.scale))&&(t.scale=1),(t.translate>=Tc&&t.translate<=Ac||isNaN(t.translate))&&(t.translate=0)}function Rc(t,e,n,r){kc(t.x,e.x,n.x,r?r.originX:void 0),kc(t.y,e.y,n.y,r?r.originY:void 0)}function Cc(t,e,n){t.min=n.min+e.min,t.max=t.min+_c(e)}function Pc(t,e,n){t.min=e.min-n.min,t.max=t.min+_c(e)}function Ic(t,e,n){Pc(t.x,e.x,n.x),Pc(t.y,e.y,n.y)}function Oc(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function Nc(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}const Bc=.35;function Uc(t,e,n){return{min:Lc(t,e),max:Lc(t,n)}}function Lc(t,e){return"number"==typeof t?t:t[e]||0}const jc=()=>({x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}),Dc=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Mc(t){return[t("x"),t("y")]}function Vc({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Fc(t){return void 0===t||1===t}function Kc({scale:t,scaleX:e,scaleY:n}){return!Fc(t)||!Fc(e)||!Fc(n)}function $c(t){return Kc(t)||Wc(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Wc(t){return zc(t.x)||zc(t.y)}function zc(t){return t&&"0%"!==t}function Hc(t,e,n){return n+e*(t-n)}function Zc(t,e,n,r,o){return void 0!==o&&(t=Hc(t,o,r)),Hc(t,n,r)+e}function qc(t,e=0,n=1,r,o){t.min=Zc(t.min,e,n,r,o),t.max=Zc(t.max,e,n,r,o)}function Gc(t,{x:e,y:n}){qc(t.x,e.translate,e.scale,e.originPoint),qc(t.y,n.translate,n.scale,n.originPoint)}const Yc=.999999999999,Xc=1.0000000000001;function Jc(t,e){t.min=t.min+e,t.max=t.max+e}function Qc(t,e,n,r,o=.5){qc(t,e,n,Ds(t.min,t.max,o),r)}function tl(t,e){Qc(t.x,e.x,e.scaleX,e.scale,e.originX),Qc(t.y,e.y,e.scaleY,e.scale,e.originY)}function el(t,e){return Vc(function(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(t.getBoundingClientRect(),e))}const nl=({current:t})=>t?t.ownerDocument.defaultView:null,rl=new WeakMap;class ol{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dc(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new pc(t,{onSessionStart:t=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(uc(t).point)},onStart:(t,e)=>{const{drag:n,dragPropagation:r,onDragStart:o}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(i=n)||"y"===i?Ja[i]?null:(Ja[i]=!0,()=>{Ja[i]=!1}):Ja.x||Ja.y?null:(Ja.x=Ja.y=!0,()=>{Ja.x=Ja.y=!1}),!this.openDragLock))return;var i;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Mc((t=>{let e=this.getAxisMotionValue(t).get()||0;if(oi.test(e)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[t];if(r){e=_c(r)*(parseFloat(e)/100)}}}this.originPoint[t]=e})),o&&To.postRender((()=>o(t,e))),Ua(this.visualElement,"transform");const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(t,e)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:o,onDrag:i}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:s}=e;if(r&&null===this.currentDirection)return this.currentDirection=function(t,e=10){let n=null;Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x");return n}(s),void(null!==this.currentDirection&&o&&o(this.currentDirection));this.updateAxis("x",e.point,s),this.updateAxis("y",e.point,s),this.visualElement.render(),i&&i(t,e)},onSessionEnd:(t,e)=>this.stop(t,e),resumeAnimation:()=>Mc((t=>{var e;return"paused"===this.getAnimationState(t)&&(null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:nl(this.visualElement)})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=e;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&To.postRender((()=>o(t,e)))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:r}=this.getProps();if(!n||!il(t,r,this.currentDirection))return;const o=this.getAxisMotionValue(t);let i=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(i=function(t,{min:e,max:n},r){return void 0!==e&&t<e?t=r?Ds(e,t,r.min):Math.max(t,e):void 0!==n&&t>n&&(t=r?Ds(n,t,r.max):Math.min(t,n)),t}(i,this.constraints[t],this.elastic[t])),o.set(i)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(t=this.visualElement.projection)||void 0===t?void 0:t.layout,o=this.constraints;e&&Ec(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!r)&&function(t,{top:e,left:n,bottom:r,right:o}){return{x:Oc(t.x,n,o),y:Oc(t.y,e,r)}}(r.layoutBox,e),this.elastic=function(t=Bc){return!1===t?t=0:!0===t&&(t=Bc),{x:Uc(t,"left","right"),y:Uc(t,"top","bottom")}}(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Mc((t=>{!1!==this.constraints&&this.getAxisMotionValue(t)&&(this.constraints[t]=function(t,e){const n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(r.layoutBox[t],this.constraints[t]))}))}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Ec(t))return!1;const n=t.current;$o(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=function(t,e,n){const r=el(t,n),{scroll:o}=e;return o&&(Jc(r.x,o.offset.x),Jc(r.y,o.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let i=function(t,e){return{x:Nc(t.x,e.x),y:Nc(t.y,e.y)}}(r.layout.layoutBox,o);if(e){const t=e(function({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}(i));this.hasMutatedConstraints=!!t,t&&(i=Vc(t))}return i}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:r,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:s}=this.getProps(),a=this.constraints||{},c=Mc((s=>{if(!il(s,e,this.currentDirection))return;let c=a&&a[s]||{};i&&(c={min:0,max:0});const l=r?200:1e6,u=r?40:1e7,h={type:"inertia",velocity:n?t[s]:0,bounceStiffness:l,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...o,...c};return this.startAxisValueAnimation(s,h)}));return Promise.all(c).then(s)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return Ua(this.visualElement,t),n.start(Ea(t,n,0,e,this.visualElement,!1))}stopAnimation(){Mc((t=>this.getAxisMotionValue(t).stop()))}pauseAnimation(){Mc((t=>{var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.pause()}))}getAnimationState(t){var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),r=n[e];return r||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Mc((e=>{const{drag:n}=this.getProps();if(!il(e,n,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(e);if(r&&r.layout){const{min:n,max:i}=r.layout.layoutBox[e];o.set(t[e]-Ds(n,i,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Ec(e)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Mc((t=>{const e=this.getAxisMotionValue(t);if(e&&!1!==this.constraints){const n=e.get();r[t]=function(t,e){let n=.5;const r=_c(t),o=_c(e);return o>r?n=fs(e.min,e.max-r,t.min):r>o&&(n=fs(t.min,t.max-o,e.min)),Jo(0,1,n)}({min:n,max:n},this.constraints[t])}}));const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Mc((e=>{if(!il(e,t,null))return;const n=this.getAxisMotionValue(e),{min:o,max:i}=this.constraints[e];n.set(Ds(o,i,r[e]))}))}addListeners(){if(!this.visualElement.current)return;rl.set(this.visualElement,this);const t=dc(this.visualElement.current,"pointerdown",(t=>{const{drag:e,dragListener:n=!0}=this.getProps();e&&n&&this.start(t)})),e=()=>{const{dragConstraints:t}=this.getProps();Ec(t)&&t.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",e);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),To.read(e);const o=hc(window,"resize",(()=>this.scalePositionWithinConstraints())),i=n.addEventListener("didUpdate",(({delta:t,hasLayoutChanged:e})=>{this.isDragging&&e&&(Mc((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{o(),t(),r(),i&&i()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:i=Bc,dragMomentum:s=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:r,dragConstraints:o,dragElastic:i,dragMomentum:s}}}function il(t,e,n){return!(!0!==e&&e!==t||null!==n&&n!==t)}const sl=t=>(e,n)=>{t&&To.postRender((()=>t(e,n)))};var al=a(322);const cl=(0,e.createContext)(null);const ll=(0,e.createContext)({}),ul=(0,e.createContext)({}),hl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function dl(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const fl={correct:(t,e)=>{if(!e.target)return t;if("string"==typeof t){if(!ii.test(t))return t;t=parseFloat(t)}return`${dl(t,e.target.x)}% ${dl(t,e.target.y)}%`}},pl={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,o=Hi.parse(t);if(o.length>5)return r;const i=Hi.createTransformer(t),s="number"!=typeof o[0]?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;o[0+s]/=a,o[1+s]/=c;const l=Ds(a,c,.5);return"number"==typeof o[2+s]&&(o[2+s]/=l),"number"==typeof o[3+s]&&(o[3+s]/=l),i(o)}},ml={};const{schedule:gl,cancel:yl}=xo(queueMicrotask,!1);class wl extends e.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:r}=this.props,{projection:o}=t;var i;i=bl,Object.assign(ml,i),o&&(e.group&&e.group.add(o),n&&n.register&&r&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",(()=>{this.safeToRemove()})),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),hl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:r,isPresent:o}=this.props,i=n.projection;return i?(i.isPresent=o,r||t.layoutDependency!==e||void 0===e?i.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?i.promote():i.relegate()||To.postRender((()=>{const t=i.getStack();t&&t.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),gl.postRender((()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function vl(t){const[n,r]=function(){const t=(0,e.useContext)(cl);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:o}=t,i=(0,e.useId)();(0,e.useEffect)((()=>o(i)),[]);const s=(0,e.useCallback)((()=>r&&r(i)),[i,r]);return!n&&r?[!1,s]:[!0]}(),o=(0,e.useContext)(ll);return(0,al.jsx)(wl,{...t,layoutGroup:o,switchLayoutGroup:(0,e.useContext)(ul),isPresent:n,safeToRemove:r})}const bl={borderRadius:{...fl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:fl,borderTopRightRadius:fl,borderBottomLeftRadius:fl,borderBottomRightRadius:fl,boxShadow:pl},El=["TopLeft","TopRight","BottomLeft","BottomRight"],Sl=El.length,xl=t=>"string"==typeof t?parseFloat(t):t,Tl=t=>"number"==typeof t||ii.test(t);function Al(t,e){return void 0!==t[e]?t[e]:t.borderRadius}const _l=Rl(0,.5,Mo),kl=Rl(.5,.95,Eo);function Rl(t,e,n){return r=>r<t?0:r>e?1:n(fs(t,e,r))}function Cl(t,e){t.min=e.min,t.max=e.max}function Pl(t,e){Cl(t.x,e.x),Cl(t.y,e.y)}function Il(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Ol(t,e,n,r,o){return t=Hc(t-=e,1/n,r),void 0!==o&&(t=Hc(t,1/o,r)),t}function Nl(t,e,[n,r,o],i,s){!function(t,e=0,n=1,r=.5,o,i=t,s=t){oi.test(e)&&(e=parseFloat(e),e=Ds(s.min,s.max,e/100)-s.min);if("number"!=typeof e)return;let a=Ds(i.min,i.max,r);t===i&&(a-=e),t.min=Ol(t.min,e,n,a,o),t.max=Ol(t.max,e,n,a,o)}(t,e[n],e[r],e[o],e.scale,i,s)}const Bl=["x","scaleX","originX"],Ul=["y","scaleY","originY"];function Ll(t,e,n,r){Nl(t.x,e,Bl,n?n.x:void 0,r?r.x:void 0),Nl(t.y,e,Ul,n?n.y:void 0,r?r.y:void 0)}function jl(t){return 0===t.translate&&1===t.scale}function Dl(t){return jl(t.x)&&jl(t.y)}function Ml(t,e){return t.min===e.min&&t.max===e.max}function Vl(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Fl(t,e){return Vl(t.x,e.x)&&Vl(t.y,e.y)}function Kl(t){return _c(t.x)/_c(t.y)}function $l(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Wl{constructor(){this.members=[]}add(t){Ta(this.members,t),t.scheduleRender()}remove(t){if(Aa(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(t){const e=this.members.findIndex((e=>t===e));if(0===e)return!1;let n;for(let t=e;t>=0;t--){const e=this.members[t];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((t=>{t.instance&&t.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const zl=(t,e)=>t.depth-e.depth;class Hl{constructor(){this.children=[],this.isDirty=!1}add(t){Ta(this.children,t),this.isDirty=!0}remove(t){Aa(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(zl),this.isDirty=!1,this.children.forEach(t)}}function Zl(t){const e=Ba(t)?t.get():t;return Sa(e)?e.toValue():e}function ql(t,e){const n=ls.now(),r=({timestamp:o})=>{const i=o-n;i>=e&&(Ao(r),t(i-e))};return To.read(r,!0),()=>Ao(r)}const Gl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Yl="undefined"!=typeof window&&void 0!==window.MotionDebug,Xl=["","X","Y","Z"],Jl={visibility:"hidden"};let Ql=0;function tu(t,e,n,r){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),r&&(r[t]=0))}function eu(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Na(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:e,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",To,!(e||r))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&eu(r)}function nu({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(t={},n=(null==e?void 0:e())){this.id=Ql++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Yl&&(Gl.totalNodes=Gl.resolvedTargetDeltas=Gl.recalculatedProjection=0),this.nodes.forEach(iu),this.nodes.forEach(du),this.nodes.forEach(fu),this.nodes.forEach(su),Yl&&window.MotionDebug.record(Gl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=t,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new Hl)}addEventListener(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new _a),this.eventHandlers.get(t).add(e)}notifyListeners(t,...e){const n=this.eventHandlers.get(t);n&&n.notify(...e)}hasListeners(t){return this.eventHandlers.has(t)}mount(e,n=this.root.hasTreeAnimated){if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:o,layout:i,visualElement:s}=this.options;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(i||o)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=ql(r,250),hl.hasAnimatedSinceResize&&(hl.hasAnimatedSinceResize=!1,this.nodes.forEach(hu))}))}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&s&&(o||i)&&this.addEventListener("didUpdate",(({delta:t,hasLayoutChanged:e,hasRelativeTargetChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const o=this.options.transition||s.getDefaultTransition()||vu,{onLayoutAnimationStart:i,onLayoutAnimationComplete:a}=s.getProps(),c=!this.targetLayout||!Fl(this.targetLayout,r)||n,l=!e&&n;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||l||e&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,l);const e={...mo(o,"layout"),onPlay:i,onComplete:a};(s.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else e||hu(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const t=this.getStack();t&&t.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ao(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(pu),this.animationId++)}getTransformTemplate(){const{visualElement:t}=this.options;return t&&t.getProps().transformTemplate}willUpdate(t=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&eu(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let t=0;t<this.path.length;t++){const e=this.path[t];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:e,layout:n}=this.options;if(void 0===e&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(cu);this.isUpdating||this.nodes.forEach(lu),this.isUpdating=!1,this.nodes.forEach(uu),this.nodes.forEach(ru),this.nodes.forEach(ou),this.clearAllSnapshots();const t=ls.now();_o.delta=Jo(0,1e3/60,t-_o.timestamp),_o.timestamp=t,_o.isProcessing=!0,ko.update.process(_o),ko.preRender.process(_o),ko.render.process(_o),_o.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,gl.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(au),this.sharedNodes.forEach(mu)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,To.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){To.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let t=0;t<this.path.length;t++){this.path[t].updateScroll()}const t=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dc(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:e}=this.options;e&&e.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}updateScroll(t="measure"){let e=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===t&&(e=!1),e){const e=r(this.instance);this.scroll={animationId:this.root.animationId,phase:t,isRoot:e,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:e}}}resetTransform(){if(!o)return;const t=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,e=this.projectionDelta&&!Dl(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;t&&(e||$c(this.latestValues)||i)&&(o(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(t=!0){const e=this.measurePageBox();let n=this.removeElementScroll(e);var r;return t&&(n=this.removeTransform(n)),Su((r=n).x),Su(r.y),{animationId:this.root.animationId,measuredBox:e,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var t;const{visualElement:e}=this.options;if(!e)return Dc();const n=e.measureViewportBox();if(!((null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)||this.path.some(Tu))){const{scroll:t}=this.root;t&&(Jc(n.x,t.offset.x),Jc(n.y,t.offset.y))}return n}removeElementScroll(t){var e;const n=Dc();if(Pl(n,t),null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)return n;for(let e=0;e<this.path.length;e++){const r=this.path[e],{scroll:o,options:i}=r;r!==this.root&&o&&i.layoutScroll&&(o.wasRoot&&Pl(n,t),Jc(n.x,o.offset.x),Jc(n.y,o.offset.y))}return n}applyTransform(t,e=!1){const n=Dc();Pl(n,t);for(let t=0;t<this.path.length;t++){const r=this.path[t];!e&&r.options.layoutScroll&&r.scroll&&r!==r.root&&tl(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),$c(r.latestValues)&&tl(n,r.latestValues)}return $c(this.latestValues)&&tl(n,this.latestValues),n}removeTransform(t){const e=Dc();Pl(e,t);for(let t=0;t<this.path.length;t++){const n=this.path[t];if(!n.instance)continue;if(!$c(n.latestValues))continue;Kc(n.latestValues)&&n.updateSnapshot();const r=Dc();Pl(r,n.measurePageBox()),Ll(e,n.latestValues,n.snapshot?n.snapshot.layoutBox:void 0,r)}return $c(this.latestValues)&&Ll(e,this.latestValues),e}setTargetDelta(t){this.targetDelta=t,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(t){this.options={...this.options,...t,crossfade:void 0===t.crossfade||t.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_o.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(t=!1){var e;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:o,layoutId:i}=this.options;if(this.layout&&(o||i)){if(this.resolvedRelativeTargetAt=_o.timestamp,!this.targetDelta&&!this.relativeTarget){const t=this.getClosestProjectingParent();t&&t.layout&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dc(),this.relativeTargetOrigin=Dc(),Ic(this.relativeTargetOrigin,this.layout.layoutBox,t.layout.layoutBox),Pl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var s,a,c;if(this.target||(this.target=Dc(),this.targetWithTransforms=Dc()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,a=this.relativeTarget,c=this.relativeParent.target,Cc(s.x,a.x,c.x),Cc(s.y,a.y,c.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Pl(this.target,this.layout.layoutBox),Gc(this.target,this.targetDelta)):Pl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const t=this.getClosestProjectingParent();t&&Boolean(t.resumingFrom)===Boolean(this.resumingFrom)&&!t.options.layoutScroll&&t.target&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dc(),this.relativeTargetOrigin=Dc(),Ic(this.relativeTargetOrigin,this.target,t.target),Pl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Yl&&Gl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Kc(this.parent.latestValues)&&!Wc(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var t;const e=this.getLead(),n=Boolean(this.resumingFrom)||this!==e;let r=!0;if((this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===_o.timestamp&&(r=!1),r)return;const{layout:o,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!o&&!i)return;Pl(this.layoutCorrected,this.layout.layoutBox);const s=this.treeScale.x,a=this.treeScale.y;!function(t,e,n,r=!1){const o=n.length;if(!o)return;let i,s;e.x=e.y=1;for(let a=0;a<o;a++){i=n[a],s=i.projectionDelta;const{visualElement:o}=i.options;o&&o.props.style&&"contents"===o.props.style.display||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&tl(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,Gc(t,s)),r&&$c(i.latestValues)&&tl(t,i.latestValues))}e.x<Xc&&e.x>Yc&&(e.x=1),e.y<Xc&&e.y>Yc&&(e.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox,e.targetWithTransforms=Dc());const{target:c}=e;c?(this.projectionDelta&&this.prevProjectionDelta?(Il(this.prevProjectionDelta.x,this.projectionDelta.x),Il(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Rc(this.projectionDelta,this.layoutCorrected,c,this.latestValues),this.treeScale.x===s&&this.treeScale.y===a&&$l(this.projectionDelta.x,this.prevProjectionDelta.x)&&$l(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",c)),Yl&&Gl.recalculatedProjection++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(t=!0){var e;if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=jc(),this.projectionDelta=jc(),this.projectionDeltaWithTransform=jc()}setAnimationOrigin(t,e=!1){const n=this.snapshot,r=n?n.latestValues:{},o={...this.latestValues},i=jc();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!e;const s=Dc(),a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),l=!c||c.members.length<=1,u=Boolean(a&&!l&&!0===this.options.crossfade&&!this.path.some(wu));let h;this.animationProgress=0,this.mixTargetDelta=e=>{const n=e/1e3;gu(i.x,t.x,n),gu(i.y,t.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ic(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(t,e,n,r){yu(t.x,e.x,n.x,r),yu(t.y,e.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,s,n),h&&function(t,e){return Ml(t.x,e.x)&&Ml(t.y,e.y)}(this.relativeTarget,h)&&(this.isProjectionDirty=!1),h||(h=Dc()),Pl(h,this.relativeTarget)),a&&(this.animationValues=o,function(t,e,n,r,o,i){o?(t.opacity=Ds(0,void 0!==n.opacity?n.opacity:1,_l(r)),t.opacityExit=Ds(void 0!==e.opacity?e.opacity:1,0,kl(r))):i&&(t.opacity=Ds(void 0!==e.opacity?e.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let o=0;o<Sl;o++){const i=`border${El[o]}Radius`;let s=Al(e,i),a=Al(n,i);void 0===s&&void 0===a||(s||(s=0),a||(a=0),0===s||0===a||Tl(s)===Tl(a)?(t[i]=Math.max(Ds(xl(s),xl(a),r),0),(oi.test(a)||oi.test(s))&&(t[i]+="%")):t[i]=a)}(e.rotate||n.rotate)&&(t.rotate=Ds(e.rotate||0,n.rotate||0,r))}(o,r,this.latestValues,n,u,l)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(t){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ao(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=To.update((()=>{hl.hasAnimatedSinceResize=!0,this.currentAnimation=function(t,e,n){const r=Ba(t)?t:Ca(t);return r.start(Ea("",r,e,n)),r.animation}(0,1e3,{...t,onUpdate:e=>{this.mixTargetDelta(e),t.onUpdate&&t.onUpdate(e)},onComplete:()=>{t.onComplete&&t.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const t=this.getStack();t&&t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const t=this.getLead();let{targetWithTransforms:e,target:n,layout:r,latestValues:o}=t;if(e&&n&&r){if(this!==t&&this.layout&&r&&xu(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||Dc();const e=_c(this.layout.layoutBox.x);n.x.min=t.target.x.min,n.x.max=n.x.min+e;const r=_c(this.layout.layoutBox.y);n.y.min=t.target.y.min,n.y.max=n.y.min+r}Pl(e,n),tl(e,o),Rc(this.projectionDeltaWithTransform,this.layoutCorrected,e,o)}}registerSharedNode(t,e){this.sharedNodes.has(t)||this.sharedNodes.set(t,new Wl);this.sharedNodes.get(t).add(e);const n=e.options.initialPromotionConfig;e.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(e):void 0})}isLead(){const t=this.getStack();return!t||t.lead===this}getLead(){var t;const{layoutId:e}=this.options;return e&&(null===(t=this.getStack())||void 0===t?void 0:t.lead)||this}getPrevLead(){var t;const{layoutId:e}=this.options;return e?null===(t=this.getStack())||void 0===t?void 0:t.prevLead:void 0}getStack(){const{layoutId:t}=this.options;if(t)return this.root.sharedNodes.get(t)}promote({needsReset:t,transition:e,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),t&&(this.projectionDelta=void 0,this.needsReset=!0),e&&this.setOptions({transition:e})}relegate(){const t=this.getStack();return!!t&&t.relegate(this)}resetSkewAndRotation(){const{visualElement:t}=this.options;if(!t)return;let e=!1;const{latestValues:n}=t;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(e=!0),!e)return;const r={};n.z&&tu("z",t,r,this.animationValues);for(let e=0;e<Xl.length;e++)tu(`rotate${Xl[e]}`,t,r,this.animationValues),tu(`skew${Xl[e]}`,t,r,this.animationValues);t.render();for(const e in r)t.setStaticValue(e,r[e]),this.animationValues&&(this.animationValues[e]=r[e]);t.scheduleRender()}getProjectionStyles(t){var e,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Jl;const r={visibility:""},o=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=Zl(null==t?void 0:t.pointerEvents)||"",r.transform=o?o(this.latestValues,""):"none",r;const i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target){const e={};return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=Zl(null==t?void 0:t.pointerEvents)||""),this.hasProjected&&!$c(this.latestValues)&&(e.transform=o?o({},""):"none",this.hasProjected=!1),e}const s=i.animationValues||i.latestValues;this.applyTransformsToTarget(),r.transform=function(t,e,n){let r="";const o=t.x.translate/e.x,i=t.y.translate/e.y,s=(null==n?void 0:n.z)||0;if((o||i||s)&&(r=`translate3d(${o}px, ${i}px, ${s}px) `),1===e.x&&1===e.y||(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:t,rotate:e,rotateX:o,rotateY:i,skewX:s,skewY:a}=n;t&&(r=`perspective(${t}px) ${r}`),e&&(r+=`rotate(${e}deg) `),o&&(r+=`rotateX(${o}deg) `),i&&(r+=`rotateY(${i}deg) `),s&&(r+=`skewX(${s}deg) `),a&&(r+=`skewY(${a}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return 1===a&&1===c||(r+=`scale(${a}, ${c})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,s),o&&(r.transform=o(s,r.transform));const{x:a,y:c}=this.projectionDelta;r.transformOrigin=`${100*a.origin}% ${100*c.origin}% 0`,i.animationValues?r.opacity=i===this?null!==(n=null!==(e=s.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:r.opacity=i===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const t in ml){if(void 0===s[t])continue;const{correct:e,applyTo:n}=ml[t],o="none"===r.transform?s[t]:e(s[t],i);if(n){const t=n.length;for(let e=0;e<t;e++)r[n[e]]=o}else r[t]=o}return this.options.layoutId&&(r.pointerEvents=i===this?Zl(null==t?void 0:t.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((t=>{var e;return null===(e=t.currentAnimation)||void 0===e?void 0:e.stop()})),this.root.nodes.forEach(cu),this.root.sharedNodes.clear()}}}function ru(t){t.updateLayout()}function ou(t){var e;const n=(null===(e=t.resumeFrom)||void 0===e?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:r}=t.layout,{animationType:o}=t.options,i=n.source!==t.layout.source;"size"===o?Mc((t=>{const r=i?n.measuredBox[t]:n.layoutBox[t],o=_c(r);r.min=e[t].min,r.max=r.min+o})):xu(o,n.layoutBox,e)&&Mc((r=>{const o=i?n.measuredBox[r]:n.layoutBox[r],s=_c(e[r]);o.max=o.min+s,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[r].max=t.relativeTarget[r].min+s)}));const s=jc();Rc(s,e,n.layoutBox);const a=jc();i?Rc(a,t.applyTransform(r,!0),n.measuredBox):Rc(a,e,n.layoutBox);const c=!Dl(s);let l=!1;if(!t.resumeFrom){const r=t.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:o,layout:i}=r;if(o&&i){const s=Dc();Ic(s,n.layoutBox,o.layoutBox);const a=Dc();Ic(a,e,i.layoutBox),Fl(s,a)||(l=!0),r.options.layoutRoot&&(t.relativeTarget=a,t.relativeTargetOrigin=s,t.relativeParent=r)}}}t.notifyListeners("didUpdate",{layout:e,snapshot:n,delta:a,layoutDelta:s,hasLayoutChanged:c,hasRelativeTargetChanged:l})}else if(t.isLead()){const{onExitComplete:e}=t.options;e&&e()}t.options.transition=void 0}function iu(t){Yl&&Gl.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=Boolean(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function su(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function au(t){t.clearSnapshot()}function cu(t){t.clearMeasurements()}function lu(t){t.isLayoutDirty=!1}function uu(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function hu(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function du(t){t.resolveTargetDelta()}function fu(t){t.calcProjection()}function pu(t){t.resetSkewAndRotation()}function mu(t){t.removeLeadSnapshot()}function gu(t,e,n){t.translate=Ds(e.translate,0,n),t.scale=Ds(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function yu(t,e,n,r){t.min=Ds(e.min,n.min,r),t.max=Ds(e.max,n.max,r)}function wu(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}const vu={duration:.45,ease:[.4,0,.1,1]},bu=t=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Eu=bu("applewebkit/")&&!bu("chrome/")?Math.round:Eo;function Su(t){t.min=Eu(t.min),t.max=Eu(t.max)}function xu(t,e,n){return"position"===t||"preserve-aspect"===t&&(r=Kl(e),o=Kl(n),i=.2,!(Math.abs(r-o)<=i));var r,o,i}function Tu(t){var e;return t!==t.root&&(null===(e=t.scroll)||void 0===e?void 0:e.wasRoot)}const Au=nu({attachResizeListener:(t,e)=>hc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_u={current:void 0},ku=nu({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!_u.current){const t=new Au({});t.mount(window),t.setOptions({layoutScroll:!0}),_u.current=t}return _u.current},resetTransform:(t,e)=>{t.style.transform=void 0!==e?e:"none"},checkIsScrollRoot:t=>Boolean("fixed"===window.getComputedStyle(t).position)}),Ru={pan:{Feature:class extends Ga{constructor(){super(...arguments),this.removePointerDownListener=Eo}onPointerDown(t){this.session=new pc(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nl(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:sl(t),onStart:sl(e),onMove:n,onEnd:(t,e)=>{delete this.session,r&&To.postRender((()=>r(t,e)))}}}mount(){this.removePointerDownListener=dc(this.node.current,"pointerdown",(t=>this.onPointerDown(t)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Ga{constructor(t){super(t),this.removeGroupControls=Eo,this.removeListeners=Eo,this.controls=new ol(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Eo}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:ku,MeasureLayout:vl}};function Cu(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover","Start"===n);const o=r["onHover"+n];o&&To.postRender((()=>o(e,uc(e))))}function Pu(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap","Start"===n);const o=r["onTap"+("End"===n?"":n)];o&&To.postRender((()=>o(e,uc(e))))}const Iu=new WeakMap,Ou=new WeakMap,Nu=t=>{const e=Iu.get(t.target);e&&e(t)},Bu=t=>{t.forEach(Nu)};function Uu(t,e,n){const r=function({root:t,...e}){const n=t||document;Ou.has(n)||Ou.set(n,{});const r=Ou.get(n),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(Bu,{root:t,...e})),r[o]}(e);return Iu.set(t,n),r.observe(t),()=>{Iu.delete(t),r.unobserve(t)}}const Lu={some:0,all:1};const ju={inView:{Feature:class extends Ga{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:r="some",once:o}=t,i={root:e?e.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:Lu[r]};return Uu(this.node.current,i,(t=>{const{isIntersecting:e}=t;if(this.isInView===e)return;if(this.isInView=e,o&&!e&&this.hasEnteredView)return;e&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",e);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),i=e?n:r;i&&i(t)}))}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(function({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}(t,e))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Ga{mount(){const{current:t}=this.node;t&&(this.unmount=lc(t,(t=>(Pu(this.node,t,"Start"),(t,{success:e})=>Pu(this.node,t,e?"End":"Cancel"))),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Ga{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(e){t=!0}t&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=js(hc(this.node.current,"focus",(()=>this.onFocus())),hc(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends Ga{mount(){const{current:t}=this.node;t&&(this.unmount=function(t,e,n={}){const[r,o,i]=tc(t,n),s=ec((t=>{const{target:n}=t,r=e(t);if(!r||!n)return;const i=ec((t=>{r(t),n.removeEventListener("pointerleave",i)}));n.addEventListener("pointerleave",i,o)}));return r.forEach((t=>{t.addEventListener("pointerenter",s,o)})),i}(t,(t=>(Cu(this.node,t,"Start"),t=>Cu(this.node,t,"End")))))}unmount(){}}}},Du={layout:{ProjectionNode:ku,MeasureLayout:vl}},Mu=(0,e.createContext)({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Vu=(0,e.createContext)({}),Fu="undefined"!=typeof window,Ku=Fu?e.useLayoutEffect:e.useEffect,$u=(0,e.createContext)({strict:!1});function Wu(t,n,r,o,i){var s,a;const{visualElement:c}=(0,e.useContext)(Vu),l=(0,e.useContext)($u),u=(0,e.useContext)(cl),h=(0,e.useContext)(Mu).reducedMotion,d=(0,e.useRef)(null);o=o||l.renderer,!d.current&&o&&(d.current=o(t,{visualState:n,parent:c,props:r,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:h}));const f=d.current,p=(0,e.useContext)(ul);!f||f.projection||!i||"html"!==f.type&&"svg"!==f.type||function(t,e,n,r){const{layoutId:o,layout:i,drag:s,dragConstraints:a,layoutScroll:c,layoutRoot:l}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:zu(t.parent)),t.projection.setOptions({layoutId:o,layout:i,alwaysMeasureLayout:Boolean(s)||a&&Ec(a),visualElement:t,animationType:"string"==typeof i?i:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:l})}(d.current,r,i,p);const m=(0,e.useRef)(!1);(0,e.useInsertionEffect)((()=>{f&&m.current&&f.update(r,u)}));const g=r[Oa],y=(0,e.useRef)(Boolean(g)&&!(null===(s=window.MotionHandoffIsComplete)||void 0===s?void 0:s.call(window,g))&&(null===(a=window.MotionHasOptimisedAnimation)||void 0===a?void 0:a.call(window,g)));return Ku((()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),gl.render(f.render),y.current&&f.animationState&&f.animationState.animateChanges())})),(0,e.useEffect)((()=>{f&&(!y.current&&f.animationState&&f.animationState.animateChanges(),y.current&&(queueMicrotask((()=>{var t;null===(t=window.MotionHandoffMarkAsComplete)||void 0===t||t.call(window,g)})),y.current=!1))})),f}function zu(t){if(t)return!1!==t.options.allowProjection?t.projection:zu(t.parent)}function Hu(t,n,r){return(0,e.useCallback)((e=>{e&&t.mount&&t.mount(e),n&&(e?n.mount(e):n.unmount()),r&&("function"==typeof r?r(e):Ec(r)&&(r.current=e))}),[n])}function Zu(t){return Xr(t.animate)||io.some((e=>to(t[e])))}function qu(t){return Boolean(Zu(t)||t.variants)}function Gu(t){const{initial:n,animate:r}=function(t,e){if(Zu(t)){const{initial:e,animate:n}=t;return{initial:!1===e||to(e)?e:void 0,animate:to(n)?n:void 0}}return!1!==t.inherit?e:{}}(t,(0,e.useContext)(Vu));return(0,e.useMemo)((()=>({initial:n,animate:r})),[Yu(n),Yu(r)])}function Yu(t){return Array.isArray(t)?t.join(" "):t}const Xu={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ju={};for(const t in Xu)Ju[t]={isEnabled:e=>Xu[t].some((t=>!!e[t]))};const Qu=Symbol.for("motionComponentSymbol");function th({preloadedFeatures:t,createVisualElement:n,useRender:r,useVisualState:o,Component:i}){t&&function(t){for(const e in t)Ju[e]={...Ju[e],...t[e]}}(t);const s=(0,e.forwardRef)((function(t,s){let a;const c={...(0,e.useContext)(Mu),...t,layoutId:eh(t)},{isStatic:l}=c,u=Gu(t),h=o(t,l);if(!l&&Fu){!function(t,n){(0,e.useContext)($u).strict;0}();const t=function(t){const{drag:e,layout:n}=Ju;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:(null==e?void 0:e.isEnabled(t))||(null==n?void 0:n.isEnabled(t))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(c);a=t.MeasureLayout,u.visualElement=Wu(i,h,c,n,t.ProjectionNode)}return(0,al.jsxs)(Vu.Provider,{value:u,children:[a&&u.visualElement?(0,al.jsx)(a,{visualElement:u.visualElement,...c}):null,r(i,t,Hu(h,u.visualElement,s),h,l,u.visualElement)]})}));return s[Qu]=i,s}function eh({layoutId:t}){const n=(0,e.useContext)(ll).id;return n&&void 0!==t?n+"-"+t:t}const nh=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rh(t){return"string"==typeof t&&!t.includes("-")&&!!(nh.indexOf(t)>-1||/[A-Z]/u.test(t))}function oh(t,{style:e,vars:n},r,o){Object.assign(t.style,e,o&&o.getProjectionStyles(r));for(const e in n)t.style.setProperty(e,n[e])}const ih=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sh(t,e,n,r){oh(t,e,void 0,r);for(const n in e.attrs)t.setAttribute(ih.has(n)?n:Ia(n),e.attrs[n])}function ah(t,{layout:e,layoutId:n}){return ao.has(t)||t.startsWith("origin")||(e||void 0!==n)&&(!!ml[t]||"opacity"===t)}function ch(t,e,n){var r;const{style:o}=t,i={};for(const s in o)(Ba(o[s])||e.style&&Ba(e.style[s])||ah(s,t)||void 0!==(null===(r=null==n?void 0:n.getValue(s))||void 0===r?void 0:r.liveStyle))&&(i[s]=o[s]);return i}function lh(t,e,n){const r=ch(t,e,n);for(const n in t)if(Ba(t[n])||Ba(e[n])){r[-1!==so.indexOf(n)?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n]=t[n]}return r}function uh(t){const n=(0,e.useRef)(null);return null===n.current&&(n.current=t()),n.current}const hh=t=>(n,r)=>{const o=(0,e.useContext)(Vu),i=(0,e.useContext)(cl),s=()=>function({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,o,i){const s={latestValues:dh(r,o,i,t),renderState:e()};return n&&(s.mount=t=>n(r,t,s)),s}(t,n,o,i);return r?s():uh(s)};function dh(t,e,n,r){const o={},i=r(t,{});for(const t in i)o[t]=Zl(i[t]);let{initial:s,animate:a}=t;const c=Zu(t),l=qu(t);e&&l&&!c&&!1!==t.inherit&&(void 0===s&&(s=e.initial),void 0===a&&(a=e.animate));let u=!!n&&!1===n.initial;u=u||!1===s;const h=u?a:s;if(h&&"boolean"!=typeof h&&!Xr(h)){const e=Array.isArray(h)?h:[h];for(let n=0;n<e.length;n++){const r=no(t,e[n]);if(r){const{transitionEnd:t,transition:e,...n}=r;for(const t in n){let e=n[t];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(o[t]=e)}for(const e in t)o[e]=t[e]}}}return o}const fh=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),ph=()=>({...fh(),attrs:{}}),mh=(t,e)=>e&&"number"==typeof t?e.transform(t):t,gh={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yh=so.length;function wh(t,e,n){const{style:r,vars:o,transformOrigin:i}=t;let s=!1,a=!1;for(const t in e){const n=e[t];if(ao.has(t))s=!0;else if(Ho(t))o[t]=n;else{const e=mh(n,ts[t]);t.startsWith("origin")?(a=!0,i[t]=e):r[t]=e}}if(e.transform||(s||n?r.transform=function(t,e,n){let r="",o=!0;for(let i=0;i<yh;i++){const s=so[i],a=t[s];if(void 0===a)continue;let c=!0;if(c="number"==typeof a?a===(s.startsWith("scale")?1:0):0===parseFloat(a),!c||n){const t=mh(a,ts[s]);c||(o=!1,r+=`${gh[s]||s}(${t}) `),n&&(e[s]=t)}}return r=r.trim(),n?r=n(e,o?"":r):o&&(r="none"),r}(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:t="50%",originY:e="50%",originZ:n=0}=i;r.transformOrigin=`${t} ${e} ${n}`}}function vh(t,e,n){return"string"==typeof t?t:ii.transform(e+n*t)}const bh={offset:"stroke-dashoffset",array:"stroke-dasharray"},Eh={offset:"strokeDashoffset",array:"strokeDasharray"};function Sh(t,{attrX:e,attrY:n,attrScale:r,originX:o,originY:i,pathLength:s,pathSpacing:a=1,pathOffset:c=0,...l},u,h){if(wh(t,l,h),u)return void(t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox));t.attrs=t.style,t.style={};const{attrs:d,style:f,dimensions:p}=t;d.transform&&(p&&(f.transform=d.transform),delete d.transform),p&&(void 0!==o||void 0!==i||f.transform)&&(f.transformOrigin=function(t,e,n){return`${vh(e,t.x,t.width)} ${vh(n,t.y,t.height)}`}(p,void 0!==o?o:.5,void 0!==i?i:.5)),void 0!==e&&(d.x=e),void 0!==n&&(d.y=n),void 0!==r&&(d.scale=r),void 0!==s&&function(t,e,n=1,r=0,o=!0){t.pathLength=1;const i=o?bh:Eh;t[i.offset]=ii.transform(-r);const s=ii.transform(e),a=ii.transform(n);t[i.array]=`${s} ${a}`}(d,s,a,c,!1)}const xh=t=>"string"==typeof t&&"svg"===t.toLowerCase(),Th={useVisualState:hh({scrapeMotionValuesFromProps:lh,createRenderState:ph,onMount:(t,e,{renderState:n,latestValues:r})=>{To.read((()=>{try{n.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(t){n.dimensions={x:0,y:0,width:0,height:0}}})),To.render((()=>{Sh(n,r,xh(e.tagName),t.transformTemplate),sh(e,n)}))}})},Ah={useVisualState:hh({scrapeMotionValuesFromProps:ch,createRenderState:fh})};function _h(t,e,n){for(const r in e)Ba(e[r])||ah(r,n)||(t[r]=e[r])}function kh(t,n){const r={};return _h(r,t.style||{},t),Object.assign(r,function({transformTemplate:t},n){return(0,e.useMemo)((()=>{const e=fh();return wh(e,n,t),Object.assign({},e.vars,e.style)}),[n])}(t,n)),r}function Rh(t,e){const n={},r=kh(t,e);return t.drag&&!1!==t.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Ch=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ph(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Ch.has(t)}let Ih=t=>!Ph(t);try{(Oh=require("@emotion/is-prop-valid").default)&&(Ih=t=>t.startsWith("on")?!Ph(t):Oh(t))}catch(vm){}var Oh;function Nh(t,n,r,o){const i=(0,e.useMemo)((()=>{const e=ph();return Sh(e,n,xh(o),t.transformTemplate),{...e.attrs,style:{...e.style}}}),[n]);if(t.style){const e={};_h(e,t.style,t),i.style={...e,...i.style}}return i}function Bh(t=!1){return(n,r,o,{latestValues:i},s)=>{const a=(rh(n)?Nh:Rh)(r,i,s,n),c=function(t,e,n){const r={};for(const o in t)"values"===o&&"object"==typeof t.values||(Ih(o)||!0===n&&Ph(o)||!e&&!Ph(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}(r,"string"==typeof n,t),l=n!==e.Fragment?{...c,...a,ref:o}:{},{children:u}=r,h=(0,e.useMemo)((()=>Ba(u)?u.get():u),[u]);return(0,e.createElement)(n,{...l,children:h})}}function Uh(t,e){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){return th({...rh(n)?Th:Ah,preloadedFeatures:t,useRender:Bh(r),createVisualElement:e,Component:n})}}const Lh={current:null},jh={current:!1};const Dh=new WeakMap,Mh=[...yi,Bi,Hi],Vh=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Fh{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:o,visualState:i},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ti,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const t=ls.now();this.renderScheduledAt<t&&(this.renderScheduledAt=t,To.render(this.render,!1,!0))};const{latestValues:a,renderState:c}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=e.initial?{...a}:{},this.renderState=c,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=s,this.blockInitialAnimation=Boolean(o),this.isControllingVariants=Zu(e),this.isVariantNode=qu(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:l,...u}=this.scrapeMotionValuesFromProps(e,{},this);for(const t in u){const e=u[t];void 0!==a[t]&&Ba(e)&&e.set(a[t],!1)}}mount(t){this.current=t,Dh.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((t,e)=>this.bindToMotionValue(e,t))),jh.current||function(){if(jh.current=!0,Fu)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Lh.current=t.matches;t.addListener(e),e()}else Lh.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Lh.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Dh.delete(this.current),this.projection&&this.projection.unmount(),Ao(this.notifyUpdate),Ao(this.render),this.valueSubscriptions.forEach((t=>t())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=ao.has(t),r=e.on("change",(e=>{this.latestValues[t]=e,this.props.onUpdate&&To.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),o=e.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,(()=>{r(),o(),i&&i(),e.owner&&e.stop()}))}sortNodePosition(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}updateFeatures(){let t="animation";for(t in Ju){const e=Ju[t];if(!e)continue;const{isEnabled:n,Feature:r}=e;if(!this.features[t]&&r&&n(this.props)&&(this.features[t]=new r(this)),this.features[t]){const e=this.features[t];e.isMounted?e.update():(e.mount(),e.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dc()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let e=0;e<Vh.length;e++){const n=Vh[e];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const r=t["on"+n];r&&(this.propEventSubscriptions[n]=this.on(n,r))}this.prevMotionValues=function(t,e,n){for(const r in e){const o=e[r],i=n[r];if(Ba(o))t.addValue(r,o);else if(Ba(i))t.addValue(r,Ca(o,{owner:t}));else if(i!==o)if(t.hasValue(r)){const e=t.getValue(r);!0===e.liveStyle?e.jump(o):e.hasAnimated||e.set(o)}else{const e=t.getStaticValue(r);t.addValue(r,Ca(void 0!==e?e:o,{owner:t}))}}for(const r in n)void 0===e[r]&&t.removeValue(r);return e}(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return void 0===n&&void 0!==e&&(n=Ca(null===e?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){var n;let r=void 0===this.latestValues[t]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,t))&&void 0!==n?n:this.readValueFromInstance(this.current,t,this.options):this.latestValues[t];return null!=r&&("string"==typeof r&&(Wo(r)||Fo(r))?r=parseFloat(r):!(t=>Mh.find(gi(t)))(r)&&Hi.test(e)&&(r=rs(t,e)),this.setBaseTarget(t,Ba(r)?r.get():r)),Ba(r)?r.get():r}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:n}=this.props;let r;if("string"==typeof n||"object"==typeof n){const o=no(this.props,n,null===(e=this.presenceContext)||void 0===e?void 0:e.custom);o&&(r=o[t])}if(n&&void 0!==r)return r;const o=this.getBaseTargetFromProps(this.props,t);return void 0===o||Ba(o)?void 0!==this.initialValues[t]&&void 0===r?void 0:this.baseTarget[t]:o}on(t,e){return this.events[t]||(this.events[t]=new _a),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class Kh extends Fh{constructor(){super(...arguments),this.KeyframeResolver=is}sortInstanceNodePosition(t,e){return 2&t.compareDocumentPosition(e)?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ba(t)&&(this.childSubscription=t.on("change",(t=>{this.current&&(this.current.textContent=`${t}`)})))}}class $h extends Kh{constructor(){super(...arguments),this.type="html",this.renderInstance=oh}readValueFromInstance(t,e){if(ao.has(e)){const t=ns(e);return t&&t.default||0}{const r=(n=t,window.getComputedStyle(n)),o=(Ho(e)?r.getPropertyValue(e):r[e])||0;return"string"==typeof o?o.trim():o}var n}measureInstanceViewportBox(t,{transformPagePoint:e}){return el(t,e)}build(t,e,n){wh(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return ch(t,e,n)}}class Wh extends Kh{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dc}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(ao.has(e)){const t=ns(e);return t&&t.default||0}return e=ih.has(e)?e:Ia(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return lh(t,e,n)}build(t,e,n){Sh(t,e,this.isSVGTag,n.transformTemplate)}renderInstance(t,e,n,r){sh(t,e,0,r)}mount(t){this.isSVGTag=xh(t.tagName),super.mount(t)}}const zh=Yr(Uh({...Xa,...ju,...Ru,...Du},((t,n)=>rh(t)?new Wh(n):new $h(n,{allowProjection:t!==e.Fragment}))));function Hh(t){let{onComplete:r}=t;const[o,i]=(0,e.useState)(""),[s,a]=(0,e.useState)(null),[c,l]=(0,e.useState)({length:!1,capital:!1,number:!1,symbol:!1});(0,e.useEffect)((()=>{l({length:o.length>=8,capital:/[A-Z]/.test(o),number:/[0-9]/.test(o),symbol:/[!@#$%^&*(),.?":{}|<>]/.test(o)})}),[o]);const u=Object.values(c).every((t=>t));return n().createElement(zh.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center space-y-6 p-6"},n().createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Secure Your Account"),n().createElement("p",{className:"text-gray-600 text-center"},"Choose how you want to secure your data"),s?"pin"===s?n().createElement(zh.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-md space-y-4"},n().createElement("input",{type:"password",value:o,onChange:t=>i(t.target.value),placeholder:"Enter your PIN",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),n().createElement("div",{className:"space-y-2"},Object.entries(c).map((t=>{let[e,r]=t;return n().createElement("div",{key:e,className:"flex items-center"},n().createElement("span",{className:"material-icons text-sm ".concat(r?"text-green-500":"text-gray-400")},r?"check_circle":"radio_button_unchecked"),n().createElement("span",{className:"ml-2 text-sm ".concat(r?"text-green-600":"text-gray-600")},"length"===e?"At least 8 characters":"capital"===e?"One capital letter":"number"===e?"One number":"One special character"))}))),n().createElement("button",{onClick:async()=>{u&&r({method:"pin",value:o})},disabled:!u,className:"w-full py-3 px-4 rounded-lg font-semibold ".concat(u?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed")},"Set PIN")):n().createElement(zh.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-md"},n().createElement("button",{onClick:()=>{r({method:"othent"})},className:"w-full py-3 px-4 rounded-lg font-semibold bg-blue-500 text-white hover:bg-blue-600"},"Continue with Othent")):n().createElement("div",{className:"grid grid-cols-1 gap-4 w-full max-w-md"},n().createElement(zh.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a("othent"),className:"flex items-center justify-center p-6 rounded-lg border border-gray-300 hover:border-blue-500 bg-white"},n().createElement("img",{src:"https://onairos.sirv.com/Images/othent-icon.png",alt:"Othent",className:"w-8 h-8 mr-3"}),n().createElement("span",{className:"text-gray-700"},"Secure with Google (Othent)")),n().createElement(zh.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a("pin"),className:"flex items-center justify-center p-6 rounded-lg border border-gray-300 hover:border-blue-500 bg-white"},n().createElement("span",{className:"material-icons mr-3"},"lock"),n().createElement("span",{className:"text-gray-700"},"Set up PIN"))))}class Zh extends e.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const t=this.props.sizeRef.current;t.height=e.offsetHeight||0,t.width=e.offsetWidth||0,t.top=e.offsetTop,t.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function qh({children:t,isPresent:n}){const r=(0,e.useId)(),o=(0,e.useRef)(null),i=(0,e.useRef)({width:0,height:0,top:0,left:0}),{nonce:s}=(0,e.useContext)(Mu);return(0,e.useInsertionEffect)((()=>{const{width:t,height:e,top:a,left:c}=i.current;if(n||!o.current||!t||!e)return;o.current.dataset.motionPopId=r;const l=document.createElement("style");return s&&(l.nonce=s),document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${r}"] {\n            position: absolute !important;\n            width: ${t}px !important;\n            height: ${e}px !important;\n            top: ${a}px !important;\n            left: ${c}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[n]),(0,al.jsx)(Zh,{isPresent:n,childRef:o,sizeRef:i,children:e.cloneElement(t,{ref:o})})}const Gh=({children:t,initial:n,isPresent:r,onExitComplete:o,custom:i,presenceAffectsLayout:s,mode:a})=>{const c=uh(Yh),l=(0,e.useId)(),u=(0,e.useCallback)((t=>{c.set(t,!0);for(const t of c.values())if(!t)return;o&&o()}),[c,o]),h=(0,e.useMemo)((()=>({id:l,initial:n,isPresent:r,custom:i,onExitComplete:u,register:t=>(c.set(t,!1),()=>c.delete(t))})),s?[Math.random(),u]:[r,u]);return(0,e.useMemo)((()=>{c.forEach(((t,e)=>c.set(e,!1)))}),[r]),e.useEffect((()=>{!r&&!c.size&&o&&o()}),[r]),"popLayout"===a&&(t=(0,al.jsx)(qh,{isPresent:r,children:t})),(0,al.jsx)(cl.Provider,{value:h,children:t})};function Yh(){return new Map}const Xh=t=>t.key||"";function Jh(t){const n=[];return e.Children.forEach(t,(t=>{(0,e.isValidElement)(t)&&n.push(t)})),n}const Qh=({children:t,exitBeforeEnter:n,custom:r,initial:o=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:a="sync"})=>{$o(!n,"Replace exitBeforeEnter with mode='wait'");const c=(0,e.useMemo)((()=>Jh(t)),[t]),l=c.map(Xh),u=(0,e.useRef)(!0),h=(0,e.useRef)(c),d=uh((()=>new Map)),[f,p]=(0,e.useState)(c),[m,g]=(0,e.useState)(c);Ku((()=>{u.current=!1,h.current=c;for(let t=0;t<m.length;t++){const e=Xh(m[t]);l.includes(e)?d.delete(e):!0!==d.get(e)&&d.set(e,!1)}}),[m,l.length,l.join("-")]);const y=[];if(c!==f){let t=[...c];for(let e=0;e<m.length;e++){const n=m[e],r=Xh(n);l.includes(r)||(t.splice(e,0,n),y.push(n))}return"wait"===a&&y.length&&(t=y),g(Jh(t)),void p(c)}const{forceRender:w}=(0,e.useContext)(ll);return(0,al.jsx)(al.Fragment,{children:m.map((t=>{const e=Xh(t),n=c===m||l.includes(e);return(0,al.jsx)(Gh,{isPresent:n,initial:!(u.current&&!o)&&void 0,custom:n?void 0:r,presenceAffectsLayout:s,mode:a,onExitComplete:n?void 0:()=>{if(!d.has(e))return;d.set(e,!0);let t=!0;d.forEach((e=>{e||(t=!1)})),t&&(null==w||w(),g(h.current),i&&i())},children:t},e)}))})},td=t=>{let{size:e=24,color:r="currentColor",children:o,...i}=t;return n().createElement("div",{style:{width:e,height:e,display:"flex",alignItems:"center",justifyContent:"center",color:r,...i.style},...i},o||"□")},ed=t=>n().createElement(td,t,"✓"),nd=t=>n().createElement(td,t,"🔒"),rd=t=>n().createElement(td,t,"🛡️"),od=t=>n().createElement(td,t,"⚠️"),id=t=>n().createElement(td,t,"📤"),sd=t=>n().createElement(td,t,"🔗"),ad=()=>void 0!==a.g&&void 0!==a.g.nativeModuleProxy||"undefined"!=typeof navigator&&"ReactNative"===navigator.product,cd=function(t){return ld(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},ld=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((n,r)=>{if(ad())console.log("OAuth in React Native environment would open:",t),setTimeout((()=>{n({success:!0,token:"mock-oauth-token-for-react-native"})}),1e3);else{const o=e.width||600,i=e.height||700,s=window.screen.width/2-o/2,a=window.screen.height/2-i/2;window.open(t,"Auth Window","width=".concat(o,",height=").concat(i,",top=").concat(a,",left=").concat(s))||r(new Error("Could not open auth window")),setTimeout((()=>{n({success:!0,token:"mock-oauth-token-for-web"})}),1e3)}}))},ud=[{name:"YouTube",icon:"https://onairos.sirv.com/Images/youtube-icon.png",connected:!1,color:"#FF0000"},{name:"Reddit",icon:"https://onairos.sirv.com/Images/reddit-icon.png",connected:!1,color:"#FF4500"},{name:"Instagram",icon:"https://onairos.sirv.com/Images/instagram-icon.png",connected:!1,color:"#E1306C"},{name:"Pinterest",icon:"https://onairos.sirv.com/Images/pinterest-icon.png",connected:!1,color:"#E60023"},{name:"TikTok",icon:"https://onairos.sirv.com/Images/tiktok-icon.png",connected:!1,color:"#000000"}],hd={CONNECT:"connect",PASSPHRASE:"passphrase",CONFIRM:"confirm",UNIFYING:"unifying"};function dd(t){let{onComplete:r,appIcon:o}=t;const[i,s]=(0,e.useState)(ud),[a,c]=(0,e.useState)(hd.CONNECT),[l,u]=(0,e.useState)(0),[h,d]=(0,e.useState)(""),[f,p]=(0,e.useState)(""),[m,g]=(0,e.useState)(!1);(0,e.useEffect)((()=>{const t=t=>{t.data&&t.data.platform&&"success"===t.data.status&&s(i.map((e=>e.name.toLowerCase()===t.data.platform.toLowerCase()?{...e,connected:!0}:e)))};return window.addEventListener("message",t),()=>window.removeEventListener("message",t)}),[i]),(0,e.useEffect)((()=>{if(a===hd.UNIFYING){const t=setInterval((()=>{u((e=>e>=100?(clearInterval(t),r(),100):e+2))}),100);return()=>clearInterval(t)}}),[a,r]);const y=()=>{i.some((t=>t.connected))&&c(hd.PASSPHRASE)},w=()=>{(!h||h.length<8?(p("Passphrase must be at least 8 characters"),0):(p(""),1))&&c(hd.CONFIRM)},v=async()=>{c(hd.UNIFYING);try{const t=await fetch("https://api2.onairos.uk/unify",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("onairosToken")),"Content-Type":"application/json"},body:JSON.stringify({platforms:i.filter((t=>t.connected)).map((t=>t.name.toLowerCase())),passphrase:h})});if(!t.ok)throw new Error("Failed to unify data")}catch(t){console.error("Failed to unify data:",t)}};return n().createElement("div",{className:"flex flex-col items-center space-y-6 p-6 w-full"},n().createElement(Qh,{mode:"wait"},a===hd.CONNECT&&n().createElement(zh.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center space-y-6 w-full"},n().createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Connect Your Accounts"),n().createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 w-full max-w-md"},n().createElement("div",{className:"flex items-start"},n().createElement(rd,{className:"text-blue-500 mr-2 flex-shrink-0 mt-0.5",size:20}),n().createElement("p",{className:"text-sm text-blue-700"},"Your data is never shared with anyone. It's only used to train your personal model and is stored securely."))),n().createElement("div",{className:"grid grid-cols-2 gap-4 w-full max-w-md"},i.map((t=>n().createElement(zh.button,{key:t.name,onClick:()=>(async t=>{try{g(!0),cd("https://api2.onairos.uk/auth/".concat(t.toLowerCase()),t),g(!1)}catch(e){console.error("Failed to connect to ".concat(t,":"),e),g(!1)}})(t.name),disabled:m||t.connected,whileHover:{scale:t.connected?1:1.03},whileTap:{scale:t.connected?1:.98},className:"flex flex-col items-center justify-center p-4 rounded-lg border ".concat(t.connected?"bg-green-50 border-green-500":"border-gray-300 hover:border-blue-500 hover:shadow-sm")},n().createElement("div",{className:"relative"},n().createElement("img",{src:t.icon,alt:t.name,className:"w-10 h-10 mb-2"}),t.connected&&n().createElement("div",{className:"absolute -top-1 -right-1 bg-green-500 rounded-full p-0.5"},n().createElement(ed,{size:14,className:"text-white"}))),n().createElement("span",{className:"text-sm ".concat(t.connected?"text-green-600":"text-gray-700")},t.connected?"Connected":"Connect"))))),n().createElement("button",{onClick:y,disabled:!i.some((t=>t.connected)),className:"w-full max-w-md py-3 px-4 rounded-lg font-semibold transition-all ".concat(i.some((t=>t.connected))?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed")},"Continue"),n().createElement("p",{className:"text-xs text-gray-500 max-w-md text-center"},"Connect at least one account to create your personalized AI model")),a===hd.PASSPHRASE&&n().createElement(zh.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center space-y-6 w-full"},n().createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Create Your Secure Passphrase"),n().createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 w-full max-w-md"},n().createElement("div",{className:"flex items-start"},n().createElement(nd,{className:"text-blue-500 mr-2 flex-shrink-0 mt-0.5",size:20}),n().createElement("p",{className:"text-sm text-blue-700"},"Your passphrase is used to secure your model. We don't store it, so please remember it for future access."))),n().createElement("div",{className:"w-full max-w-md"},n().createElement("label",{htmlFor:"passphrase",className:"block text-sm font-medium text-gray-700 mb-1"},"8+ Character Passphrase"),n().createElement("input",{type:"password",id:"passphrase",value:h,onChange:t=>d(t.target.value),placeholder:"Enter your secure passphrase",className:"w-full p-3 border ".concat(f?"border-red-500":"border-gray-300"," rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none")}),f&&n().createElement("p",{className:"mt-1 text-sm text-red-600 flex items-center"},n().createElement(od,{size:14,className:"mr-1"})," ",f)),n().createElement("div",{className:"flex space-x-3 w-full max-w-md"},n().createElement("button",{onClick:()=>c(hd.CONNECT),className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg font-semibold text-gray-700 hover:bg-gray-50"},"Back"),n().createElement("button",{onClick:w,className:"flex-1 py-3 px-4 bg-blue-500 rounded-lg font-semibold text-white hover:bg-blue-600"},"Continue"))),a===hd.CONFIRM&&n().createElement(zh.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center space-y-6 w-full"},n().createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Confirm Data Transfer"),n().createElement("div",{className:"flex justify-center items-center w-full max-w-md py-8"},n().createElement("div",{className:"relative flex items-center"},n().createElement("div",{className:"p-3 bg-gray-100 rounded-full"},n().createElement("img",{src:o||"https://onairos.sirv.com/Images/onairos-icon.png",alt:"App",className:"w-16 h-16 rounded-full"})),n().createElement(zh.div,{animate:{x:[0,10,0]},transition:{repeat:1/0,duration:1.5},className:"mx-4"},n().createElement(id,{size:24,className:"text-blue-500"})),n().createElement("div",{className:"p-3 bg-blue-100 rounded-full"},n().createElement("img",{src:"https://onairos.sirv.com/Images/onairos-icon.png",alt:"Onairos",className:"w-16 h-16 rounded-full"})))),n().createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 w-full max-w-md"},n().createElement("p",{className:"text-sm text-blue-700"},"You're about to securely send your data to Onairos to train your personal AI model. Your data is end-to-end encrypted with your passphrase and never shared with anyone.")),n().createElement("div",{className:"w-full max-w-md"},n().createElement("h3",{className:"font-medium text-gray-700 mb-2"},"Connected platforms:"),n().createElement("div",{className:"flex flex-wrap gap-2"},i.filter((t=>t.connected)).map((t=>n().createElement("div",{key:t.name,className:"flex items-center bg-green-50 border border-green-200 rounded-full px-3 py-1"},n().createElement("img",{src:t.icon,alt:t.name,className:"w-4 h-4 mr-1"}),n().createElement("span",{className:"text-sm text-green-700"},t.name)))))),n().createElement("div",{className:"flex space-x-3 w-full max-w-md"},n().createElement("button",{onClick:()=>c(hd.PASSPHRASE),className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg font-semibold text-gray-700 hover:bg-gray-50"},"Back"),n().createElement("button",{onClick:v,className:"flex-1 py-3 px-4 bg-blue-500 rounded-lg font-semibold text-white hover:bg-blue-600"},"Confirm & Create Model")),n().createElement("p",{className:"text-xs text-gray-500 max-w-md text-center"},"By proceeding, you agree to Onairos' ",n().createElement("a",{href:"https://onairos.uk/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline flex items-center inline-flex"},"Privacy Policy ",n().createElement(sd,{size:12,className:"ml-0.5"})))),a===hd.UNIFYING&&n().createElement(zh.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center space-y-6 p-6"},n().createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Creating Your Personal AI Model"),n().createElement("p",{className:"text-gray-600 text-center"},"Please wait while we securely process your information"),n().createElement("div",{className:"w-full max-w-md"},n().createElement("div",{className:"relative pt-1"},n().createElement("div",{className:"flex mb-2 items-center justify-between"},n().createElement("div",null,n().createElement("span",{className:"text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-blue-200"},"Progress")),n().createElement("div",{className:"text-right"},n().createElement("span",{className:"text-xs font-semibold inline-block text-blue-600"},l,"%"))),n().createElement(zh.div,{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-blue-200"},n().createElement(zh.div,{initial:{width:0},animate:{width:"".concat(l,"%")},transition:{duration:.5},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500"})))),n().createElement(zh.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-12 h-12"},n().createElement("svg",{className:"w-full h-full text-blue-500",viewBox:"0 0 24 24"},n().createElement("path",{fill:"currentColor",d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"}))),n().createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 w-full max-w-md"},n().createElement("p",{className:"text-sm text-blue-700"},"Your data is being encrypted with your passphrase and securely processed. This may take a few minutes.")))))}function fd(t){let{onSignUpSuccess:r,setOthent:o,setHashedOthentSub:i,setEncryptedPin:s}=t;const[a,c]=(0,e.useState)({email:"",username:"",password:"",confirmPassword:""}),[l,u]=(0,e.useState)(null),h=t=>{c({...a,[t.target.name]:t.target.value})};return n().createElement("div",{className:"flex flex-col items-center justify-start max-w-sm mx-auto space-y-6 pt-4"},l&&n().createElement("div",{className:"w-full bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg"},l),n().createElement(Hr,{onLoginSuccess:r,setOthent:o,setHashedOthentSub:i,setEncryptedPin:s}),n().createElement("div",{className:"w-full flex items-center justify-center space-x-4"},n().createElement("hr",{className:"flex-grow border-gray-300"}),n().createElement("span",{className:"text-gray-500"},"or"),n().createElement("hr",{className:"flex-grow border-gray-300"})),n().createElement("form",{onSubmit:async t=>{if(t.preventDefault(),a.password===a.confirmPassword)try{const t=await fetch("https://api2.onairos.uk/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,username:a.username,password:a.password})}),e=await t.json();t.ok?(localStorage.setItem("onairosToken",e.token),localStorage.setItem("username",a.username),r(a.username)):u(e.message||"Sign up failed")}catch(t){u("Sign up failed. Please try again.")}else u("Passwords don't match")},className:"w-full space-y-4"},n().createElement("input",{type:"email",name:"email",value:a.email,onChange:h,placeholder:"Email",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),n().createElement("input",{type:"text",name:"username",value:a.username,onChange:h,placeholder:"Username",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),n().createElement("input",{type:"password",name:"password",value:a.password,onChange:h,placeholder:"Password",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),n().createElement("input",{type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:h,placeholder:"Confirm Password",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),n().createElement("button",{type:"submit",className:"w-full bg-blue-500 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-600 transition-colors"},"Sign Up")))}function pd(t){let{setOthentConnected:n,dataRequester:r,NoAccount:o,NoModel:i,activeModels:s,avatar:a,setAvatar:c,traits:l,setTraits:u,requestData:h,handleConnectionSelection:d,changeGranted:f,granted:p,allowSubmit:m,rejectDataRequest:g,sendDataRequest:y,isAuthenticated:w,onClose:v,onLoginSuccess:b,setOthentUser:E,setHashedOthentSub:S,setEncryptedPin:x,accountInfo:T}=t;const[A,_]=(0,e.useState)(null),[k,R]=(0,e.useState)(!1),C=(0,e.useRef)(null),[P,I]=(0,e.useState)({}),O=(t,e)=>{console.log(t," is being changed check to:",e),I((n=>({...n,[t]:e}))),f(e?1:-1);const n=h[t];d(r,t,n.index,n.type,n.reward,e),console.log(n," Selection registered"),d(r,t,n.index,n.type,n.reward,!0)},[N,B]=(0,e.useState)((()=>{var t;return w?T&&(null===(t=T.models)||void 0===t?void 0:t.length)>0?"datarequests":"onboarding":"login"})),[U,L]=(0,e.useState)({username:"",password:""}),[j,D]=(0,e.useState)(!1);(0,e.useEffect)((()=>{const t=()=>{const t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"))};return t(),window.addEventListener("resize",t),window.addEventListener("orientationchange",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}}),[]);const M=()=>{v()};(0,e.useEffect)((()=>{const t=t=>{C.current&&!C.current.contains(t.target)&&(null==M||M())};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[M]);const V=t=>{L({...U,[t.target.name]:t.target.value})},F=async t=>{t.preventDefault();try{_(null);const t={details:{username:U.username,password:U.password}},e=await fetch("".concat("https://api2.onairos.uk","/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await e.json();if("Accepted"!==n.authentication)throw new Error("Invalid credentials");localStorage.setItem("onairosToken",n.token),localStorage.setItem("username",U.username),await K(U.username)}catch(t){console.error("Login failed:",t),_("Invalid username or password")}},K=async function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];R(!0);try{await b(t,e);_(null)}catch(t){console.error("Login process failed:",t),_("Failed to complete login process")}finally{R(!1)}},$=()=>{B("security")},W=t=>{"othent"===t.method?E(!0):"pin"===t.method&&x(t.value),B("datarequests")},z=t=>{let{dataRequester:e,granted:n,allowSubmit:r,rejectDataRequest:o,sendDataRequest:i,activeModels:s,requestData:a,handleConnectionSelection:c,changeGranted:l,avatar:u,traits:h}=t;return React.createElement("div",{className:"flex flex-col h-full"},React.createElement("div",{className:"px-6"},React.createElement("h1",{className:"text-lg font-semibold text-gray-900 mb-6"},"Data Requests from ",e),React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("button",{className:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-8 rounded-full",onClick:o},"Reject All"),React.createElement("button",{disabled:!r||0===n,className:"".concat(r&&n>0?"bg-blue-500 hover:bg-blue-600":"bg-gray-300 cursor-not-allowed"," text-white font-bold py-2 px-8 rounded-full"),onClick:i},"Confirm (",n,")"))),React.createElement("div",{className:"flex-1 overflow-y-auto px-6"},0===s.length?React.createElement("div",{className:"flex flex-col items-center justify-center py-8"},React.createElement("img",{src:"https://onairos.sirv.com/Images/OnairosWhite.png",alt:"Onairos Logo",className:"w-24 h-24 mb-4"}),React.createElement("p",{className:"text-center text-gray-800 font-medium"},"Please connect ",React.createElement("a",{href:"https://onairos.uk/connections",className:"text-blue-500 hover:underline"},"Onairos")," Personality to send ",e," your data")):React.createElement("div",{className:"space-y-4"},Object.keys(a).sort(((t,e)=>{const n=s.includes(a[t].type),r=s.includes(a[e].type);return"Avatar"===a[t].type?1:"Avatar"===a[e].type?-1:"Traits"===a[e].type?1:"Traits"===a[t].type||n&&!r?-1:r&&!n?1:0})).map(((t,e)=>{const n=a[t],r="Personality"===n.type?s.includes(n.type):"Avatar"===n.type?u:"Traits"===n.type&&h;return React.createElement(Gr,{key:t,active:r,title:n.type,id:n,number:e,descriptions:n.descriptions,rewards:n.reward,size:t,isChecked:!!P[t],onCheckboxChange:e=>O(t,e)})})))))};return(0,e.useEffect)((()=>{var t;w&&T&&((null===(t=T.models)||void 0===t?void 0:t.length)>0?B("datarequests"):B("onboarding"))}),[w,T]),(0,e.useEffect)((()=>()=>{D(!1)}),[]),(0,e.useEffect)((()=>{}),[w,T]),React.createElement(React.Fragment,null,React.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:M,style:{touchAction:"none"}}),React.createElement("div",{ref:C,className:"fixed bottom-0 left-0 right-0 w-full bg-white rounded-t-3xl shadow-2xl transform transition-transform duration-300 ease-out flex flex-col",style:{maxHeight:"60vh",minHeight:"45vh",height:"auto",touchAction:"none"}},React.createElement("div",{className:"sticky top-0 bg-white z-10 px-6 pt-3 pb-2"},React.createElement("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full mx-auto"})),React.createElement("div",{className:"flex-1 overflow-y-auto px-6 pb-8",style:{touchAction:"pan-y"}},(()=>{switch(N){case"signup":return React.createElement(fd,{onSignUpSuccess:K,setOthentUser:E,setHashedOthentSub:S,setEncryptedPin:x});case"onboarding":return React.createElement(dd,{onComplete:$});case"security":return React.createElement(Hh,{onComplete:W});case"datarequests":return React.createElement(z,{dataRequester:r,granted:p,allowSubmit:m,rejectDataRequest:g,sendDataRequest:y,activeModels:s,requestData:h,handleConnectionSelection:d,changeGranted:f,avatar:a,traits:l});default:return React.createElement("div",{className:"flex flex-col items-center justify-start max-w-sm mx-auto space-y-6 pt-4"},A&&React.createElement("div",{className:"w-full bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg"},A),React.createElement(Hr,{onLoginSuccess:K,setOthentUser:E,setHashedOthentSub:S,setEncryptedPin:x}),React.createElement("div",{className:"w-full flex items-center justify-center space-x-4"},React.createElement("hr",{className:"flex-grow border-gray-300"}),React.createElement("span",{className:"text-gray-500"},"or"),React.createElement("hr",{className:"flex-grow border-gray-300"})),React.createElement("form",{onSubmit:F,className:"w-full space-y-4"},React.createElement("input",{type:"text",name:"username",value:U.username,onChange:V,placeholder:"Username",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),React.createElement("input",{type:"password",name:"password",value:U.password,onChange:V,placeholder:"Password",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),React.createElement("button",{type:"submit",className:"w-full bg-blue-500 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-600 transition-colors"},"Sign In")),React.createElement("button",{onClick:()=>B("signup"),className:"w-full text-center text-blue-500 hover:text-blue-600"},"Don't have an account? Sign up"))}})())))}class md extends Error{constructor(t,e,n){super("object"==typeof e?e.message:e||t,{cause:"object"==typeof e?e.cause:n}),this.type=t,this.name="TypedError",Object.setPrototypeOf(this,md.prototype)}}const gd="ERR_INVALID_VALUE",yd="ERR_UNEXPECTED_VALUE",wd="ERR_UNEXPECTED_TYPE",vd="ERR_PARSE";function bd(t,e){const n={};for(const r in t){const o=t[r];if(!o)continue;let i,s;"function"==typeof o?(i=r,s=o):[i,s]=o;try{const t=s(e(i));void 0!==t&&(n[r]=t)}catch(t){throw new md(vd,`Parser for "${r}" property failed${i===r?"":`. Source field: "${i}"`}`,t)}}return n}function Ed(t){let e=t;if("string"==typeof e)try{e=JSON.parse(e)}catch(t){throw new md(gd,{cause:t})}if("object"!=typeof e||!e||Array.isArray(e))throw new md(yd);return e}function Sd(t,e){return n=>{const r=r=>{if(!n||void 0!==r)try{return e(r)}catch(e){throw new md(vd,{message:`"${t}" transformer failed to parse the value`,cause:e})}};return Object.assign(r,{isValid(t){try{return r(t),!0}catch{return!1}}})}}function xd(t,e){return Sd(e||"object",(e=>{const n=Ed(e);return bd(t,(t=>n[t]))}))}function Td(t){throw new md(wd,`Unexpected value received: ${JSON.stringify(t)}`)}Sd("boolean",(t=>{if("boolean"==typeof t)return t;const e=String(t);return"1"===e||"true"===e||"0"!==e&&"false"!==e&&void Td(t)}));const Ad=Sd("string",(t=>{if("string"==typeof t||"number"==typeof t)return t.toString();Td(t)})),_d=Sd("number",(t=>{if("number"==typeof t)return t;if("string"==typeof t){const e=Number(t);if(!Number.isNaN(e))return e}Td(t)}));Sd("date",(t=>t instanceof Date?t:new Date(1e3*_d()(t))));function kd(t){return/^#[\da-f]{6}$/i.test(t)}function Rd(t){const e=t.replace(/\s/g,"").toLowerCase();if(kd(e))return e;if(function(t){return/^#[\da-f]{3}$/i.test(t)}(e)){let t="#";for(let n=0;n<3;n+=1)t+=e[1+n].repeat(2);return t}const n=e.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||e.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!n)throw new Error(`Value "${t}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce(((t,e)=>{const n=parseInt(e,10).toString(16);return t+(1===n.length?"0":"")+n}),"#")}const Cd=Sd("rgb",(t=>Rd(Ad()(t)))),Pd=Sd("themeParams",(t=>{const e=Cd(!0);return Object.entries(Ed(t)).reduce(((t,[n,r])=>(t[function(t){return t.replace(/_[a-z]/g,(t=>t[1].toUpperCase()))}(n)]=e(r),t)),{})}));class Id extends Error{constructor(t,e,n){super("object"==typeof e?e.message:e||t,{cause:"object"==typeof e?e.cause:n}),this.type=t,this.name="TypedError",Object.setPrototypeOf(this,Id.prototype)}}function Od(t){return t.replace(/[A-Z]/g,(t=>`_${t.toLowerCase()}`))}const Nd="ERR_INVALID_VALUE",Bd="ERR_UNEXPECTED_VALUE",Ud="ERR_UNEXPECTED_TYPE",Ld="ERR_PARSE";function jd(t,e){const n={};for(const r in t){const o=t[r];if(!o)continue;let i,s;"function"==typeof o?(i=r,s=o):[i,s]=o;try{const t=s(e(i));void 0!==t&&(n[r]=t)}catch(t){throw new Id(Ld,`Parser for "${r}" property failed${i===r?"":`. Source field: "${i}"`}`,t)}}return n}function Dd(t){let e=t;if("string"==typeof e)try{e=JSON.parse(e)}catch(t){throw new Id(Nd,{cause:t})}if("object"!=typeof e||!e||Array.isArray(e))throw new Id(Bd);return e}function Md(t,e){return n=>{const r=r=>{if(!n||void 0!==r)try{return e(r)}catch(e){throw new Id(Ld,{message:`"${t}" transformer failed to parse the value`,cause:e})}};return Object.assign(r,{isValid(t){try{return r(t),!0}catch{return!1}}})}}function Vd(t,e){return Md(e||"object",(e=>{const n=Dd(e);return jd(t,(t=>n[t]))}))}function Fd(t){throw new Id(Ud,`Unexpected value received: ${JSON.stringify(t)}`)}const Kd=Md("boolean",(t=>{if("boolean"==typeof t)return t;const e=String(t);return"1"===e||"true"===e||"0"!==e&&"false"!==e&&void Fd(t)})),$d=Md("string",(t=>{if("string"==typeof t||"number"==typeof t)return t.toString();Fd(t)})),Wd=Md("number",(t=>{if("number"==typeof t)return t;if("string"==typeof t){const e=Number(t);if(!Number.isNaN(e))return e}Fd(t)})),zd=Md("date",(t=>t instanceof Date?t:new Date(1e3*Wd()(t))));function Hd(t,e){return Md(e||"searchParams",(e=>{"string"!=typeof e&&!(e instanceof URLSearchParams)&&Fd(e);const n="string"==typeof e?new URLSearchParams(e):e;return jd(t,(t=>{const e=n.get(t);return null===e?void 0:e}))}))}function Zd(t){for(const e in t)t[e]=[Od(e),t[e]];return t}const qd=t=>{const e=Wd(),n=Wd(!0),r=$d(),o=$d(!0),i=Kd(!0),s=Vd(Zd({addedToAttachmentMenu:i,allowsWriteToPm:i,firstName:r,id:e,isBot:i,isPremium:i,languageCode:o,lastName:o,photoUrl:o,username:o}),"User")(!0);return Hd(Zd({authDate:zd(),canSendAfter:n,chat:Vd(Zd({id:e,type:r,title:r,photoUrl:o,username:o}),"Chat")(!0),chatInstance:o,chatType:o,hash:r,queryId:o,receiver:s,startParam:o,signature:r,user:s}),"initData")(t)};const Gd=Md("rgb",(t=>function(t){const e=t.replace(/\s/g,"").toLowerCase();if(function(t){return/^#[\da-f]{6}$/i.test(t)}(e))return e;if(function(t){return/^#[\da-f]{3}$/i.test(t)}(e)){let t="#";for(let n=0;n<3;n+=1)t+=e[1+n].repeat(2);return t}const n=e.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||e.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!n)throw new Error(`Value "${t}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce(((t,e)=>{const n=parseInt(e,10).toString(16);return t+(1===n.length?"0":"")+n}),"#")}($d()(t)))),Yd=Md("themeParams",(t=>{const e=Gd(!0);return Object.entries(Dd(t)).reduce(((t,[n,r])=>(t[function(t){return t.replace(/_[a-z]/g,(t=>t[1].toUpperCase()))}(n)]=e(r),t)),{})}));function Xd(t){return JSON.stringify(Object.fromEntries(Object.entries(t).map((([t,e])=>[Od(t),e]))))}const Jd=t=>{const e=$d(),n=$d(!0),r=Kd(!0);return Hd({botInline:["tgWebAppBotInline",r],defaultColors:["tgWebAppDefaultColors",Yd(!0)],fullscreen:["tgWebAppFullscreen",r],initData:["tgWebAppData",qd(!0)],initDataRaw:["tgWebAppData",n],platform:["tgWebAppPlatform",e],showSettings:["tgWebAppShowSettings",r],startParam:["tgWebAppStartParam",n],themeParams:["tgWebAppThemeParams",Yd()],version:["tgWebAppVersion",e]},"launchParams")(t)};function Qd(t){const{initDataRaw:e,startParam:n,showSettings:r,botInline:o,fullscreen:i,defaultColors:s}=t,a=new URLSearchParams;return a.set("tgWebAppPlatform",t.platform),a.set("tgWebAppThemeParams",Xd(t.themeParams)),a.set("tgWebAppVersion",t.version),e&&a.set("tgWebAppData",e),n&&a.set("tgWebAppStartParam",n),"boolean"==typeof r&&a.set("tgWebAppShowSettings",r?"1":"0"),"boolean"==typeof o&&a.set("tgWebAppBotInline",o?"1":"0"),"boolean"==typeof i&&a.set("tgWebAppFullscreen",i?"1":"0"),s&&a.set("tgWebAppDefaultColors",Xd(s)),a.toString()}const tf=Vd({eventType:$d(),eventData:t=>t},"miniAppsMessage"),ef=Md("fn",(t=>{if("function"==typeof t)return t;Fd(t)}));const nf=Vd({TelegramWebviewProxy:Vd({postEvent:ef()})()});function rf(t){return nf().isValid(t)}var of=Object.defineProperty,sf=(t,e,n)=>((t,e,n)=>e in t?of(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n)(t,"symbol"!=typeof e?e+"":e,n);let af=class t extends Error{constructor(e,n,r){super("object"==typeof n?n.message:n||e,{cause:"object"==typeof n?n.cause:r}),this.type=e,this.name="TypedError",Object.setPrototypeOf(this,t.prototype)}};function cf(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function lf(...t){const e=t.flat(1);return[e.push.bind(e),()=>{e.forEach((t=>{t()}))}]}function uf(t){return e=>function(t,e){return t instanceof af&&t.type===e}(e,t)}const hf="ERR_ABORTED",df="ERR_CANCELED",ff="ERR_TIMED_OUT";function pf(t){return new af(hf,{cause:t})}uf(ff),uf(hf),uf(df);function mf(t,e){return t.reject=e.reject,t}class gf extends Promise{constructor(t,e){let n,r,o,i;"function"==typeof t?(n=t,r=e):r=t,super(((t,e)=>{r||(r={});const{abortSignal:s}=r;if(s&&s.aborted)return e(pf(s.reason));const[a,c]=lf(),l=t=>(...e)=>(c(),t(...e)),u=new AbortController,{signal:h}=u;i=l((t=>{u.abort(t),e(t)})),o=l(t),s&&a(cf(s,"abort",(()=>{i(pf(s.reason))})));const{timeout:d}=r;if(d){const t=setTimeout((()=>{i(new af(ff,`Timeout reached: ${d}ms`))}),d);a((()=>{clearTimeout(t)}))}n&&n(o,i,h)})),sf(this,"reject"),this.reject=i}static withFn(t,e){return new gf(((e,n,r)=>{try{const o=t(r);return o instanceof Promise?o.then(e,n):e(o)}catch(t){n(t)}}),e)}static resolve(t){return new gf((e=>{e(t)}))}static reject(t){return new gf(((e,n)=>{n(t)}))}cancel(){this.reject(new af(df))}catch(t){return this.then(void 0,t)}finally(t){return mf(super.finally(t),this)}then(t,e){return mf(super.then(t,e),this)}}function yf(t,e){return t.resolve=e.resolve,t}let wf=class t extends gf{constructor(t,e){let n,r,o;"function"==typeof t?(n=t,r=e):r=t,super(((t,e,r)=>{o=t,n&&n(t,e,r)}),r),sf(this,"resolve"),this.resolve=o}static withFn(e,n){return new t(((t,n,r)=>gf.withFn(e,{abortSignal:r}).then(t,n)),n)}static resolve(e){return new t((t=>{t(e)}))}static reject(e){return new t(((t,n)=>{n(e)}))}catch(t){return this.then(void 0,t)}finally(t){return yf(super.finally(t),this)}then(t,e){return yf(super.then(t,e),this)}};function vf(t){return`tapps/${t}`}function bf(t,e){sessionStorage.setItem(vf(t),JSON.stringify(e))}function Ef(t){const e=sessionStorage.getItem(vf(t));try{return e?JSON.parse(e):void 0}catch{}}function Sf(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}function xf(t,e){e||(e={});const{textColor:n,bgColor:r,shouldLog:o=!0}=e;function i(e,...i){if(!o||"function"==typeof o&&!o())return;const s="font-weight:bold;padding:0 5px;border-radius:5px";console[e](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${t}`,`${s};background-color: lightblue;color:black`,"",`${s};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...i)}return[function(...t){i("log",...t)},function(...t){i("error",...t)}]}function Tf(t,e){document.documentElement.style.setProperty(t,e)}function Af(t){document.documentElement.style.removeProperty(t)}function _f(t,e){e||(e={});const n=e.equals||Object.is;let r=[],o=t;const i=t=>{if(!n(o,t)){const e=o;o=t,function(t,e){e()}(0,(()=>{[...r].forEach((([n,r])=>{n(t,e),r&&a(n,!0)}))}))}};function s(t){const e="object"!=typeof t?{once:t}:t;return{once:e.once||!1,signal:e.signal||!1}}const a=(t,e)=>{const n=s(e),o=r.findIndex((([e,r])=>e===t&&r.once===n.once&&r.signal===n.signal));o>=0&&r.splice(o,1)},c=Object.assign((function(){return function(t){kf.length&&kf[kf.length-1].add(t)}(c),o}),{destroy(){r=[]},set:i,reset(){i(t)},sub:(t,e)=>(r.push([t,s(e)]),()=>a(t,e)),unsub:a,unsubAll(){r=r.filter((t=>t[1].signal))}});return c}const kf=[];const Rf=_f(!1),[Cf,Pf]=xf("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog:Rf}),If={clipboard_text_received:Vd({req_id:$d(),data:t=>null===t?t:$d(!0)(t)},"clipboard_text_received"),custom_method_invoked:Vd({req_id:$d(),result:t=>t,error:$d(!0)},"custom_method_invoked"),popup_closed:Md("popup_closed",(t=>t?Vd({button_id:t=>null==t?void 0:$d()(t)})()(t):{})),viewport_changed:Vd({height:Wd(),width:t=>null==t?window.innerWidth:Wd()(t),is_state_stable:Kd(),is_expanded:Kd()},"viewport_changed")};const Of=_f(),Nf=_f();function Bf(){return Nf()||Nf.set(function(t){const e=window,[,n]=lf(cf(e,"message",(n=>{if(n.source!==e.parent)return;let r;try{r=tf()(n.data)}catch{return}const{eventType:o,eventData:i}=r,s=If[o];try{const e=s?s()(i):i;Cf("Event received:",e?{eventType:o,eventData:e}:{eventType:o}),t([o,e])}catch(t){Pf([`An error occurred processing the "${o}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose"].join("\n"),r,t)}})));return n}(Of.set)),Of}const Uf=_f({});function Lf(t){let e=Uf()[t];return e||(e=_f(void 0,{equals:()=>!1}),Bf().sub((n=>{n&&n[0]===t&&e.set(n[1])})),Uf.set({...Uf(),[t]:e})),e}function jf(t,e,n){return Lf(t).sub(e,n)}const Df="ERR_RETRIEVE_LP_FAILED",Mf="ERR_UNKNOWN_ENV",Vf="ERR_INVOKE_CUSTOM_METHOD_RESPONSE",Ff=_f("https://web.telegram.org");function Kf(t,e){Cf("Posting event:",e?{eventType:t,eventData:e}:{eventType:t});const n=window;if(rf(n))return void n.TelegramWebviewProxy.postEvent(t,JSON.stringify(e));const r=JSON.stringify({eventType:t,eventData:e});if(function(){try{return window.self!==window.top}catch{return!0}}())return n.parent.postMessage(r,Ff());const{external:o}=n;if(!Vd({notify:ef()})().isValid(o))throw new af(Mf);o.notify(r)}function $f(t,e,n){n||(n={});const{capture:r}=n,[o,i]=lf();return new gf((i=>{(Array.isArray(e)?e:[e]).forEach((t=>{o(jf(t,(n=>{(!r||(Array.isArray(e)?r({event:t,payload:n}):r(n)))&&i(n)})))})),(n.postEvent||Kf)(t,n.params)}),n).finally(i)}function Wf(t){return Jd()(t)}function zf(t){return Wf(t.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&"))}function Hf(){return zf(window.location.href)}function Zf(){const t=performance.getEntriesByType("navigation")[0];if(!t)throw new Error("Unable to get first navigation entry.");return zf(t.name)}const qf="launchParams";function Gf(){return Wf(Ef(qf)||"")}function Yf(t){bf("launchParams",Qd(t))}function Xf(t){return t instanceof Error?t.message+(t.cause?`\n  ${Xf(t.cause)}`:""):JSON.stringify(t)}function Jf(){const t=[];for(const e of[Hf,Zf,Gf])try{const t=e();return Yf(t),t}catch(e){t.push(e)}throw new af(Df,["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","📖 Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment","Collected errors:",...t.map((t=>`— ${Xf(t)}`))].join("\n"))}function Qf(t){if("simple"===t)try{return Jf(),!0}catch{return!1}return gf.withFn((async()=>{if(rf(window))return!0;try{return await $f("web_app_request_theme","theme_changed",{timeout:100}),!0}catch{return!1}}),t)}function tp(t,e,n){Lf(t).unsub(e,n)}function ep(t){return({req_id:e})=>e===t}function np(t){return t.split(".").map(Number)}function rp(t,e){return function(t,e){const n=np(t),r=np(e),o=Math.max(n.length,r.length);for(let t=0;t<o;t+=1){const e=n[t]||0,o=r[t]||0;if(e!==o)return e>o?1:-1}return 0}(t,e)<=0}function op(t,e,n){if("string"==typeof n){if("web_app_open_link"===t){if("try_instant_view"===e)return rp("6.4",n);if("try_browser"===e)return rp("7.6",n)}if("web_app_set_header_color"===t&&"color"===e)return rp("6.9",n);if("web_app_close"===t&&"return_back"===e)return rp("7.6",n);if("web_app_setup_main_button"===t&&"has_shine_effect"===e)return rp("7.10",n)}switch(t){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return rp("6.1",e);case"web_app_open_popup":return rp("6.2",e);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return rp("6.4",e);case"web_app_switch_inline_query":return rp("6.7",e);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return rp("6.9",e);case"web_app_setup_settings_button":return rp("6.10",e);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return rp("7.2",e);case"web_app_setup_swipe_behavior":return rp("7.7",e);case"web_app_share_to_story":return rp("7.8",e);case"web_app_setup_secondary_button":case"web_app_set_bottom_bar_color":return rp("7.10",e);case"web_app_request_safe_area":case"web_app_request_content_safe_area":case"web_app_request_fullscreen":case"web_app_exit_fullscreen":case"web_app_set_emoji_status":case"web_app_add_to_home_screen":case"web_app_check_home_screen":case"web_app_request_emoji_status_access":return rp("8.0",e);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(t)}}function ip(){const t=performance.getEntriesByType("navigation")[0];return!!t&&"reload"===t.type}let sp;function ap(t){if(sp)return t();sp=new Map;try{t()}finally{sp.forEach((t=>t())),sp=void 0}}function cp(t,e){e||(e={});const n=e.equals||Object.is;let r=[],o=t;const i=t=>{if(!n(o,t)){const e=o;o=t,function(t,e){sp&&sp.set(t,e)||e()}(c,(()=>{[...r].forEach((([n,r])=>{n(t,e),r&&a(n,!0)}))}))}};function s(t){const e="object"!=typeof t?{once:t}:t;return{once:e.once||!1,signal:e.signal||!1}}const a=(t,e)=>{const n=s(e),o=r.findIndex((([e,r])=>e===t&&r.once===n.once&&r.signal===n.signal));o>=0&&r.splice(o,1)},c=Object.assign((function(){return function(t){lp.length&&lp[lp.length-1].add(t)}(c),o}),{destroy(){r=[]},set:i,reset(){i(t)},sub:(t,e)=>(r.push([t,s(e)]),()=>a(t,e)),unsub:a,unsubAll(){r=r.filter((t=>t[1].signal))}});return c}const lp=[];function up(t,e){let n,r=new Set;function o(){return n||(n=cp(s(),e))}function i(){o().set(s())}function s(){r.forEach((t=>{t.unsub(i,{signal:!0})}));const e=new Set;let n;lp.push(e);try{n=t()}finally{lp.pop()}return e.forEach((t=>{t.sub(i,{signal:!0})})),r=e,n}return Object.assign((function(){return o()()}),{destroy(){o().destroy()},sub:(...t)=>o().sub(...t),unsub(...t){o().unsub(...t)},unsubAll(...t){o().unsubAll(...t)}})}const hp=cp((()=>{let t=0;return()=>(t+=1).toString()})()),dp=cp(Kf),fp=cp("0.0");function pp(){return hp()()}function mp(t,e,n){return function(t,e,n,r){return $f("web_app_invoke_custom_method","custom_method_invoked",{...r||{},params:{method:t,params:e,req_id:n},capture:ep(n)}).then((({result:t,error:e})=>{if(e)throw new af(Vf,e);return t}))}(t,e,pp(),{...n||{},postEvent:yp})}const gp=(t,e,n)=>(n||(n={}),n.postEvent||(n.postEvent=yp),$f(t,e,n)),yp=(t,e)=>dp()(t,e);function wp(t){return up((()=>op(t,fp())))}const vp="ERR_POPUP_INVALID_PARAMS",bp="ERR_INVALID_URL",Ep="ERR_ALREADY_REQUESTING",Sp="ERR_ALREADY_OPENED",xp="ERR_NOT_INITIALIZED",Tp="ERR_NOT_SUPPORTED",Ap="ERR_NOT_MOUNTED";function _p(){return typeof window>"u"}function kp(t,e,{isSupported:n,isMounted:r,component:o,supports:i}={}){const s=`${o?`${o}.`:""}${t}()`;function a(t){if(i){const e=i[t];return op(e[0],e[1],fp())}return!0}n=n?Array.isArray(n)||"object"==typeof n&&"any"in n?n:[n]:void 0;const c=()=>{if(!n)return;const t=`it is unsupported in Mini Apps version ${fp()}`;function e(e){return"string"==typeof e?op(e,fp())?void 0:t:e.fn()?void 0:e.error}if(Array.isArray(n)){for(const t of n){const n=e(t);if(n)return n}return}let r;for(const t of n.any)if(r=e(t),!r)return;return t},l=up((()=>!c())),u=up((()=>"0.0"!==fp())),h=up((()=>!r||r())),d=up((()=>Qf("simple")&&!_p()&&u()&&l()&&h()));let f;if(i){f={};for(const t in i)f[t]=up((()=>a(t)))}return Object.assign(((...t)=>{const n=`Unable to call the ${s} ${o?"method":"function"}:`;if(_p()||!Qf("simple"))throw new af(Mf,`${n} it can't be called outside Mini Apps`);if(!u())throw new af(xp,`${n} the SDK was not initialized. Use the SDK init() function`);const r=c();if(r)throw new af(Tp,`${n} ${r}`);const l=((...t)=>{if(i)for(const e in i)if(i[e][2](...t)&&!a(e))return`option ${e} is not supported in Mini Apps version ${fp()}`})(...t);if(l)throw new af(Tp,`${n} ${l}`);if(!h())throw new af(Ap,`${n} the component is not mounted. Use the ${o}.mount() method`);return e(...t)}),e,{isAvailable:d,ifAvailable:(...t)=>d()?e(...t):void 0},n?{isSupported:l}:{},f?{supports:f}:{})}function Rp(t,e){return e||(e={}),(n,r,o,i)=>kp(n,r,{...e,isSupported:o||e.isSupported,supports:i,component:t})}function Cp(t,e,n){return Rp(t,{isSupported:n,isMounted:e})}function Pp(t,e){return Rp(t,{isSupported:e})}const Ip="web_app_setup_back_button",Op="back_button_pressed",Np="backButton",Bp=cp(!1),Up=cp(!1),Lp=wp(Ip),jp=Cp(Np,Up,Ip),Dp=Pp(Np,Ip),Mp=jp("hide",(()=>{Fp(!1)})),Vp=Dp("mount",(()=>{Up()||(Fp(ip()&&Ef(Np)||!1),Up.set(!0))}));function Fp(t){t!==Bp()&&(yp(Ip,{is_visible:t}),bf(Np,t),Bp.set(t))}const Kp=Dp("onClick",(t=>jf(Op,t))),$p=Dp("offClick",(t=>{tp(Op,t)})),Wp=jp("show",(()=>{Fp(!0)}));Symbol.toStringTag;function zp(t,e,n,r,o){const i=void 0===o||o?gf:Promise;return Object.assign(((...o)=>i.resolve().then((async()=>{if(n()){const t=e();throw r.set(t),t}let s;ap((()=>{n.set(i.resolve(t(...o))),r.set(void 0)}));try{s=[!0,await n()]}catch(t){s=[!1,t]}if(ap((()=>{n.set(void 0),r.set(s[0]?void 0:s[1])})),!s[0])throw s[1];return s[1]}))),t)}function Hp(t,e,n,r,o,i){const s=zp(e,(()=>new af("ERR_ALREADY_MOUNTING",`The ${t} component is already mounting`)),o,i);return t=>gf.resolve().then((async()=>{if(!r()){const e=await s(t);ap((()=>{r.set(!0),n(e)}))}}))}const Zp=Rp,qp=cp({available:!1}),Gp=cp(!1),Yp=cp(!1),Xp=cp(!1),Jp=up((()=>!!tm())),Qp=cp(),tm=cp(),em=up((()=>{const t=qp();return t&&t.available}));function nm(t){return t.available?{available:!0,tokenSaved:t.token_saved,deviceId:t.device_id,accessRequested:t.access_requested,type:t.type,accessGranted:t.access_granted}:{available:!1}}const rm="web_app_biometry_get_info",om=kp("requestBiometry",(t=>gp(rm,"biometry_info_received",t).then(nm)),{isSupported:rm}),im="web_app_biometry_request_auth",sm="biometry_info_received",am="biometry",cm=wp(im),lm=Zp(am),um=Pp(am,im),hm=Cp(am,Xp,im);function dm(){throw new af("ERR_NOT_AVAILABLE","Biometry is not available")}const fm=hm("authenticate",(t=>gf.withFn((async e=>{if(Gp())throw new af(Ep,"Authentication is already in progress");const n=qp();(!n||!n.available)&&dm(),Gp.set(!0);try{const r=await gp(im,"biometry_auth_requested",{abortSignal:e,params:{reason:((t||{}).reason||"").trim()}}),{token:o}=r;return"string"==typeof o&&wm({...n,token:o}),r}finally{Gp.set(!1)}}),t))),pm=um("openSettings",(()=>{yp("web_app_biometry_open_settings")})),mm=hm("requestAccess",(t=>gf.withFn((async e=>{if(Yp())throw new af(Ep,"Access request is already in progress");Yp.set(!0);try{const n=await gp("web_app_biometry_request_access",sm,{abortSignal:e,params:{reason:(t||{}).reason||""}}).then(nm);return n.available||dm(),wm(n),n.accessGranted}finally{Yp.set(!1)}}),t))),gm=lm("mount",Hp(am,(t=>ip()&&Ef(am)||om(t)),(t=>{jf(sm,ym),wm(t)}),Xp,tm,Qp)),ym=t=>{wm(nm(t))};function wm(t){qp.set(t),bf(am,t)}const vm=hm("updateToken",(t=>(t||(t={}),gp("web_app_biometry_update_token","biometry_token_updated",{...t,params:{token:t.token||"",reason:t.reason}}).then((t=>t.status)))));Symbol.toStringTag;function bm(t,e){return Rp(t,{isMounted:e})}const Em="closingBehavior",Sm=cp(!1),xm=cp(!1),Tm=bm(Em,xm),Am=Zp(Em),_m=Tm("disableConfirmation",(()=>{Cm(!1)})),km=Tm("enableConfirmation",(()=>{Cm(!0)})),Rm=Am("mount",(()=>{xm()||(Cm(ip()&&Ef(Em)||!1),xm.set(!0))}));function Cm(t){t!==Sm()&&(yp("web_app_setup_closing_behavior",{need_confirmation:t}),bf(Em,t),Sm.set(t))}Symbol.toStringTag;const Pm="web_app_invoke_custom_method",Im=Pp("cloudStorage",Pm),Om=wp(Pm),Nm=Im("deleteItem",((t,e)=>{const n=Array.isArray(t)?t:[t];return n.length?mp("deleteStorageValues",{keys:n},e).then():gf.resolve()}));const Bm=Im("getItem",(function(t,e){const n=Array.isArray(t)?t:[t];return n.length?mp("getStorageValues",{keys:n},e).then((e=>{const r=xd(Object.fromEntries(n.map((t=>[t,Ad()]))))()(e);return Array.isArray(t)?r:r[t]})):gf.resolve("string"==typeof t?"":{})})),Um=Im("getKeys",(t=>mp("getStorageKeys",{},t).then(function(t,e){return Sd("array",(e=>{let n;if(Array.isArray(e))n=e;else if("string"==typeof e)try{const t=JSON.parse(e);Array.isArray(t)&&(n=t)}catch{}return n||Td(e),n.map(t)}))}(Ad())()))),Lm=Im("setItem",((t,e,n)=>mp("saveStorageValue",{key:t,value:e},n).then())),jm=(Symbol.toStringTag,"web_app_trigger_haptic_feedback"),Dm=Pp("hapticFeedback",jm),Mm=wp(jm),Vm=Dm("impactOccurred",(t=>{yp(jm,{type:"impact",impact_style:t})})),Fm=Dm("notificationOccurred",(t=>{yp(jm,{type:"notification",notification_type:t})})),Km=Dm("selectionChanged",(()=>{yp(jm,{type:"selection_change"})})),$m=(Symbol.toStringTag,cp(void 0));function Wm(t){return up((()=>{const e=$m();return e?e[t]:void 0}))}const zm=Wm("authDate"),Hm=Wm("canSendAfter"),Zm=up((()=>{const t=zm(),e=Hm();return e&&t?new Date(t.getTime()+1e3*e):void 0})),qm=Wm("chat"),Gm=Wm("chatType"),Ym=Wm("chatInstance"),Xm=Wm("hash"),Jm=Wm("queryId"),Qm=cp(),tg=Wm("receiver");const eg=Wm("startParam"),ng=Wm("user");Symbol.toStringTag;const rg="web_app_open_invoice",og=Pp("invoice",rg),ig=cp(!1),sg=wp(rg);async function ag(t,e,n){if(ig())throw new af(Sp,"An invoice is already opened");let r;if("url"===e){const{hostname:e,pathname:n}=new URL(t,window.location.href);if("t.me"!==e)throw new af(bp,`Link has unexpected hostname: ${e}`);const o=n.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);if(!o)throw new af("ERR_INVALID_SLUG",'Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"');[,,r]=o}else r=t,n=e;return ig.set(!0),gp(rg,"invoice_closed",{...n,params:{slug:r},capture:t=>r===t.slug}).then((t=>t.status)).finally((()=>{ig.set(!1)}))}const cg=og("open",ag);Symbol.toStringTag;function lg(t){return Object.fromEntries(Object.entries(t).filter((t=>void 0!==t[1])))}function ug(t){const e=Rd(t);return Math.sqrt([.299,.587,.114].reduce(((t,n,r)=>{const o=parseInt(e.slice(1+2*r,1+2*(r+1)),16);return t+o*o*n}),0))<120}const hg=cp(!1),dg=cp(!1),fg=cp({});function pg(t){return up((()=>fg()[t]))}const mg=pg("accentTextColor"),gg=pg("bgColor"),yg=pg("buttonColor"),wg=pg("buttonTextColor"),vg=pg("bottomBarBgColor"),bg=pg("destructiveTextColor"),Eg=pg("headerBgColor"),Sg=pg("hintColor"),xg=up((()=>{const{bgColor:t}=fg();return!t||ug(t)})),Tg=pg("linkColor"),Ag=pg("secondaryBgColor"),_g=pg("sectionBgColor"),kg=pg("sectionHeaderTextColor"),Rg=pg("sectionSeparatorColor"),Cg=pg("subtitleTextColor"),Pg=pg("textColor");function Ig(t){return up((()=>Ng()[t]))}const Og=cp({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"}),Ng=up((()=>{const t=Og();return{...t,backgroundColor:t.backgroundColor||yg()||"#2481cc",textColor:t.textColor||wg()||"#ffffff"}})),Bg=cp(!1),Ug=Ig("backgroundColor"),Lg=Ig("hasShineEffect"),jg=Ig("isEnabled"),Dg=Ig("isLoaderVisible"),Mg=Ig("isVisible"),Vg=Ig("text"),Fg=Ig("textColor"),Kg="main_button_pressed",$g="mainButton",Wg=Zp($g),zg=bm($g,Bg),Hg=Wg("mount",(()=>{if(!Bg()){const t=ip()&&Ef($g);t&&Og.set(t),Bg.set(!0)}})),Zg=Wg("onClick",(t=>jf(Kg,t))),qg=Wg("offClick",(t=>{tp(Kg,t)})),Gg=zg("setParams",(t=>{Og.set({...Og(),...lg(t)}),bf($g,Og());const e=Ng();e.text&&yp("web_app_setup_main_button",{color:e.backgroundColor,has_shine_effect:e.hasShineEffect,is_active:e.isEnabled,is_progress_visible:e.isLoaderVisible,is_visible:e.isVisible,text:e.text,text_color:e.textColor})}));Symbol.toStringTag;function Yg(){throw new af("ERR_VARS_ALREADY_BOUND","CSS variables are already bound")}const Xg="themeParams",Jg="theme_changed",Qg=Zp(Xg),ty=bm(Xg,hg)("bindCssVars",(t=>{function e(t){Object.entries(fg()).forEach((([e,n])=>{n&&t(e,n)}))}function n(){e(((e,n)=>{Tf(t(e),n)}))}return dg()&&Yg(),t||(t=t=>`--tg-theme-${Sf(t)}`),n(),fg.sub(n),dg.set(!0),()=>{e(Af),fg.unsub(n),dg.set(!1)}})),ey=Qg("mount",(()=>{hg()||(jf(Jg,ny),fg.set(ip()&&Ef(Xg)||Jf().themeParams),hg.set(!0))})),ny=t=>{const e=function(t){return Pd()(t)}(t.theme_params);fg.set(e),bf(Xg,e)};function ry(t){return up((()=>{const e=t();return kd(e)?e:"bg_color"===e?gg():Ag()}))}const oy=cp("bg_color"),iy=ry(oy),sy=cp("bottom_bar_bg_color"),ay=up((()=>{const t=sy();return kd(t)?t:"bottom_bar_bg_color"===t?vg()||Ag():"secondary_bg_color"===t?Ag():gg()})),cy=cp("bg_color"),ly=ry(cy),uy=cp(!1),hy=cp(!1),dy=up((()=>{const t=iy();return!!t&&ug(t)})),fy=cp(!0),py=up((()=>({backgroundColor:oy(),bottomBarColor:sy(),headerColor:cy(),isActive:fy()}))),my="web_app_set_background_color",gy="web_app_set_bottom_bar_color",yy="web_app_set_header_color",wy="visibility_changed",vy="miniApp",by={any:[my,gy,yy]},Ey=up((()=>by.any.some((t=>op(t,fp()))))),Sy=Zp(vy),xy=Pp(vy,by),Ty=Cp(vy,uy,by),Ay=Ty("bindCssVars",(t=>{hy()&&Yg();const[e,n]=lf();function r(t,n){function r(){Tf(t,n()||null)}r(),e(n.sub(r),Af.bind(null,t))}return t||(t=t=>`--tg-${Sf(t)}`),r(t("bgColor"),iy),r(t("bottomBarColor"),ay),r(t("headerColor"),ly),e((()=>{hy.set(!1)})),hy.set(!0),n})),_y=Sy("close",(t=>{yp("web_app_close",{return_back:t})})),ky=t=>{fy.set(t.is_visible),Py()},Ry=xy("mount",(()=>{if(!uy()){const t=ip()&&Ef(vy);ey(),Iy.ifAvailable(t?t.backgroundColor:"bg_color"),Oy.ifAvailable(t?t.bottomBarColor:"bottom_bar_bg_color"),Ny.ifAvailable(t?t.headerColor:"bg_color"),fy.set(!t||t.isActive),jf(wy,ky),uy.set(!0)}})),Cy=Sy("ready",(()=>{yp("web_app_ready")}));function Py(){bf(vy,py())}const Iy=Ty("setBackgroundColor",(t=>{t!==oy()&&(yp(my,{color:t}),oy.set(t),Py())}),my),Oy=Ty("setBottomBarColor",(t=>{t!==sy()&&(yp(gy,{color:t}),sy.set(t),Py())}),gy),Ny=Ty("setHeaderColor",(t=>{t!==cy()&&(yp(yy,kd(t)?{color:t}:{color_key:t}),cy.set(t),Py())}),yy,{rgb:[yy,"color",kd]});Symbol.toStringTag;function By(t){const e=t.message.trim(),n=(t.title||"").trim(),r=t.buttons||[];if(n.length>64)throw new af(vp,`Invalid title: ${n}`);if(!e||e.length>256)throw new af(vp,`Invalid message: ${e}`);if(r.length>3)throw new af(vp,`Invalid buttons count: ${r.length}`);return{title:n,message:e,buttons:r.length?r.map(((t,e)=>{const n=t.id||"";if(n.length>64)throw new af(vp,`Button with index ${e} has invalid id: ${n}`);if(!t.type||"default"===t.type||"destructive"===t.type){const r=t.text.trim();if(!r||r.length>64)throw new af(vp,`Button with index ${e} has invalid text: ${r}`);return{type:t.type,text:r,id:n}}return{type:t.type,id:n}})):[{type:"close",id:""}]}}const Uy="web_app_open_popup",Ly=Pp("popup",Uy),jy=cp(!1),Dy=wp(Uy),My=Ly("open",(async t=>{if(jy())throw new af(Sp,"A popup is already opened");jy.set(!0);try{const{button_id:e=null}=await gp(Uy,"popup_closed",{...t,params:By(t)});return e}finally{jy.set(!1)}})),Vy=(Symbol.toStringTag,"web_app_open_scan_qr_popup"),Fy=Pp("qrScanner",Vy),Ky=Fy("close",(()=>{$y.set(!1),yp("web_app_close_scan_qr_popup")})),$y=cp(!1),Wy=wp(Vy);const zy=Fy("open",(function(t){return gf.withFn((e=>{if($y())throw new af(Sp,"The QR Scanner is already opened");$y.set(!0),t||(t={});const{onCaptured:n,text:r,capture:o}=t,[,i]=lf($y.sub((()=>{s.resolve()})),jf("scan_qr_popup_closed",(()=>{$y.set(!1)})),jf("qr_text_received",(t=>{n?n(t.data):(!o||o(t.data))&&(s.resolve(t.data),Ky())}))),s=new wf({abortSignal:e}).catch(Ky).finally(i);return(t.postEvent||yp)(Vy,{text:r}),s}),t)}));Symbol.toStringTag;function Hy(t){return up((()=>qy()[t]))}const Zy=cp({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,position:"left",text:"Cancel"}),qy=up((()=>{const t=Zy();return{...t,backgroundColor:t.backgroundColor||ay()||"#000000",textColor:t.textColor||yg()||"#2481cc"}})),Gy=cp(!1),Yy=Hy("backgroundColor"),Xy=Hy("hasShineEffect"),Jy=Hy("isEnabled"),Qy=Hy("isLoaderVisible"),tw=Hy("isVisible"),ew=Hy("position"),nw=Hy("text"),rw=Hy("textColor"),ow="web_app_setup_secondary_button",iw="secondary_button_pressed",sw="secondaryButton",aw=Pp(sw,ow),cw=Cp(sw,Gy,ow),lw=wp(ow),uw=aw("mount",(()=>{if(!Gy()){const t=ip()&&Ef(sw);t&&Zy.set(t),Gy.set(!0)}})),hw=aw("onClick",(t=>jf(iw,t))),dw=aw("offClick",(t=>{tp(iw,t)})),fw=cw("setParams",(t=>{Zy.set({...Zy(),...Object.fromEntries(Object.entries(t).filter((([,t])=>void 0!==t)))}),bf(sw,Zy());const e=qy();e.text&&yp(ow,{color:e.backgroundColor,has_shine_effect:e.hasShineEffect,is_active:e.isEnabled,is_progress_visible:e.isLoaderVisible,is_visible:e.isVisible,position:e.position,text:e.text,text_color:e.textColor})}));Symbol.toStringTag;const pw="web_app_setup_settings_button",mw="settings_button_pressed",gw="settingsButton",yw=cp(!1),ww=cp(!1),vw=wp(pw),bw=Pp(gw,pw),Ew=Cp(gw,ww,pw),Sw=Ew("hide",(()=>{Tw(!1)})),xw=bw("mount",(()=>{ww()||(Tw(ip()&&Ef(gw)||!1),ww.set(!0))}));function Tw(t){t!==yw()&&(yp(pw,{is_visible:t}),bf(gw,t),yw.set(t))}const Aw=bw("onClick",(t=>jf(mw,t))),_w=bw("offClick",(t=>{tp(mw,t)})),kw=Ew("show",(()=>{Tw(!0)}));Symbol.toStringTag;const Rw="web_app_setup_swipe_behavior",Cw="swipeBehavior",Pw=cp(!1),Iw=wp(Rw),Ow=cp(!0),Nw=Pp(Cw,Rw),Bw=Cp(Cw,Pw,Rw),Uw=Bw("disableVertical",(()=>{Dw(!1)})),Lw=Bw("enableVertical",(()=>{Dw(!0)})),jw=Nw("mount",(()=>{Pw()||(Dw(ip()&&Ef(Cw)||!1,!0),Pw.set(!0))}));function Dw(t,e){(t!==Ow()||e)&&(yp(Rw,{allow_vertical_swipe:t}),bf(Cw,t),Ow.set(t))}Symbol.toStringTag,Symbol.toStringTag;const Mw="viewport",Vw="web_app_request_fullscreen",Fw="fullscreen_changed",Kw="safe_area_changed",$w="content_safe_area_changed",Ww="viewport_changed",zw="web_app_request_safe_area",Hw="web_app_request_content_safe_area",Zw={left:0,top:0,bottom:0,right:0};function qw(t){return Math.max(t,0)}const Gw=cp({contentSafeAreaInsets:Zw,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:Zw,stableHeight:0,width:0});function Yw(t){return up((()=>Gw()[t]))}function Xw(t){const{height:e,stableHeight:n,width:r}=t;Gw.set({...Gw(),...lg({...t,height:e?qw(e):void 0,width:r?qw(r):void 0,stableHeight:n?qw(n):void 0})}),bf(Mw,Gw())}const Jw=Yw("isFullscreen"),Qw=cp(),tv=up((()=>!!Qw())),ev=cp(),nv=cp(!1),rv=up((()=>!!iv())),ov=cp(void 0),iv=cp(),sv=Cp(Mw,nv,Vw);function av(t,e){return sv(t,zp((t=>gp(e,[Fw,"fullscreen_failed"],t).then((t=>{if("error"in t){if("ALREADY_FULLSCREEN"===t.error)return!0;throw new af("ERR_FULLSCREEN_FAILED","Fullscreen request failed",t.error)}return t.is_fullscreen})).then((t=>{t!==Jw()&&Xw({isFullscreen:t})}))),(()=>new af(Ep,"Fullscreen mode change is already being requested")),Qw,ev))}const cv=av("requestFullscreen",Vw),lv=av("exitFullscreen","web_app_exit_fullscreen"),uv=Zp(Mw),hv=bm(Mw,nv);function dv(t){return up((()=>fv()[t]))}const fv=Yw("safeAreaInsets"),pv=dv("bottom"),mv=dv("left"),gv=dv("right"),yv=dv("top");function wv(t){return up((()=>vv()[t]))}const vv=Yw("contentSafeAreaInsets"),bv=wv("bottom"),Ev=wv("left"),Sv=wv("right"),xv=wv("top"),Tv=kp("requestContentSafeAreaInsets",(t=>gp(Hw,"content_safe_area_changed",t)),{isSupported:Hw}),Av=kp("requestSafeAreaInsets",(t=>gp(zw,"safe_area_changed",t)),{isSupported:zw});const _v=t=>{const{height:e}=t;Xw({isExpanded:t.is_expanded,height:e,width:t.width,stableHeight:t.is_state_stable?e:void 0})},kv=t=>{Xw({isFullscreen:t.is_fullscreen})},Rv=t=>{Xw({safeAreaInsets:t})},Cv=t=>{Xw({contentSafeAreaInsets:t})},Pv=uv("mount",Hp(Mw,(t=>gf.resolve().then((async()=>{const e=ip()&&Ef(Mw);if(e)return e;const[n,r]=await gf.all([Av.ifAvailable(t)||fv(),Tv.ifAvailable(t)||vv()]),o=Jf(),i={contentSafeAreaInsets:r,isFullscreen:!!o.fullscreen,safeAreaInsets:n};if(["macos","tdesktop","unigram","webk","weba","web"].includes(o.platform)){const t=window;return{...i,height:t.innerHeight,isExpanded:!0,stableHeight:t.innerHeight,width:t.innerWidth}}return function(t){return gp("web_app_request_viewport","viewport_changed",t).then((t=>({height:t.height,width:t.width,isExpanded:t.is_expanded,isStable:t.is_state_stable})))}(t).then((t=>({...i,height:t.height,isExpanded:t.isExpanded,stableHeight:t.isStable?t.height:0,width:t.width})))}))),(t=>{jf(Ww,_v),jf(Fw,kv),jf(Kw,Rv),jf($w,Cv),Xw(t)}),nv,iv,ov));const Iv=cp(!1),Ov=Yw("height"),Nv=Yw("stableHeight"),Bv=Yw("width"),Uv=hv("bindCssVars",(t=>{Iv()&&Yg(),t||(t=t=>`--tg-viewport-${Sf(t)}`);const e=[["height",Ov],["stableHeight",Nv],["width",Bv],["safeAreaInsetTop",yv],["safeAreaInsetBottom",pv],["safeAreaInsetLeft",mv],["safeAreaInsetRight",gv],["contentSafeAreaInsetTop",xv],["contentSafeAreaInsetBottom",bv],["contentSafeAreaInsetLeft",Ev],["contentSafeAreaInsetRight",Sv]].reduce(((e,[n,r])=>{const o=t(n);if(o){const t=()=>{Tf(o,`${r()}px`)};e.push([t,r.sub(t),o])}return e}),[]);return e.forEach((t=>{t[0]()})),Iv.set(!0),()=>{e.forEach((t=>{t[1](),Af(t[2])})),Iv.set(!1)}})),Lv=uv("expand",(()=>{yp("web_app_expand")})),jv=Yw("isExpanded"),Dv=up((()=>Ov()===Nv())),Mv=(Symbol.toStringTag,Zp()("openLink",((t,e)=>{if("string"==typeof t)try{t=new URL(t)}catch(e){throw new af(bp,`"${t.toString()}" is invalid URL`,e)}e||(e={}),yp("web_app_open_link",{url:t.toString(),try_browser:e.tryBrowser,try_instant_view:e.tryInstantView})})),"web_app_open_tg_link"),Vv=Zp()("openTelegramLink",(t=>{const e=t.toString();if(!e.match(/^https:\/\/t.me\/.+/))throw new af(bp,`"${e}" is invalid URL`);op(Mv,fp())?(t=new URL(t),yp(Mv,{path_full:t.pathname+t.search})):window.location.href=e}));Zp()("shareURL",((t,e)=>{Vv("https://t.me/share/url?"+new URLSearchParams({url:t,text:e||""}).toString().replace(/\+/g,"%20"))}));function Fv(t){let{active:e,title:r,id:o,number:i,descriptions:s,rewards:a,size:c,changeGranted:l,onSelectionChange:u}=t;return n().createElement("div",{className:"mobile-connection-container"},n().createElement("div",{className:"mobile-connection-header"},n().createElement("div",{className:"mobile-connection-checkbox-area"},n().createElement("input",{type:"checkbox",disabled:!e,className:"mobile-connection-checkbox",onChange:t=>{return e=t.target.checked,void u(e);var e}}),n().createElement("span",{className:"mobile-connection-title"},r)),a&&n().createElement("div",{className:"mobile-connection-rewards"},"Rewards: ",a)),s&&"Avatar"!==r&&n().createElement("div",{className:"mobile-connection-description"},"Intent: ",s))}const Kv=t=>{let{requestData:r={},dataRequester:o="App",proofMode:i=!1,domain:s="",onComplete:a,onCancel:c}=t;const[l,u]=(0,e.useState)(!0),[h,d]=(0,e.useState)([]),[f,p]=(0,e.useState)(0),[m,g]=(0,e.useState)(!1),y=(0,e.useRef)([]);function w(){c&&"function"==typeof c&&c()}function v(t){p((e=>e+t))}return(0,e.useEffect)((()=>{g(f>0)}),[f]),(0,e.useEffect)((()=>{(async()=>{try{await new Promise((t=>setTimeout(t,1e3))),d((null==r?void 0:r.activeModels)||["Personality","Demographics"]),u(!1)}catch(t){console.error("Error loading data:",t),u(!1)}})()}),[r]),l?n().createElement("div",{className:"mobile-loading-container"},n().createElement("div",{className:"mobile-loading-spinner"}),n().createElement("p",{className:"mobile-loading-text"},"Loading...")):n().createElement("div",{className:"mobile-data-request-container",style:{height:"60vh"}},n().createElement("div",{className:"mobile-data-request-header"},n().createElement("h2",{className:"mobile-data-request-title"},"Data Requests from ",o),n().createElement("div",{className:"mobile-data-request-button-row"},n().createElement("button",{className:"mobile-reject-button",onClick:w},"Reject All"),n().createElement("button",{className:"mobile-confirm-button",disabled:!m,onClick:function(){if(0===f)return void w();const t={success:!0,apiUrl:"https://api2.onairos.uk/inferenceTest",approvedRequests:y.current};a&&"function"==typeof a&&a(t)}},"Confirm (",f,")"))),n().createElement("div",{className:"mobile-data-request-content"},0===h.length?n().createElement("div",{className:"mobile-no-models-message"},n().createElement("p",null,"Please connect Onairos Personality to send ",o," your data")):n().createElement("div",{className:"mobile-connections-list"},Object.keys(r).filter((t=>r[t])).map(((t,e)=>{const i=r[t],s=h.includes(i.type);return n().createElement(Fv,{key:t,active:s,title:i.type,id:i,number:e,descriptions:i.descriptions,rewards:i.reward,size:t,changeGranted:v,onSelectionChange:e=>function(t,e,n,r,o,i){const s=new Date,a={requester:t,date:s.toISOString(),name:r,reward:o,data:e};i?y.current.find((n=>n.requester===t&&n.data===e))||(y.current=[...y.current,a]):y.current=y.current.filter((n=>!(n.requester===t&&n.data===e)))}(o,t,0,i.type,i.reward,e)})})))))},$v=async()=>(await a.e(423).then(a.t.bind(a,153,23))).default;function Wv(t){var r,o;let{requestData:i,webpageName:s,inferenceData:c=null,onComplete:l=null,autoFetch:u=!0,proofMode:h=!1,textLayout:d="below",textColor:f="white",login:p=!1,buttonType:m="pill",loginReturn:g=null,loginType:y="signIn",visualType:w="full"}=t;const v=()=>{const t=navigator.userAgent||navigator.vendor||window.opera;return void 0!==window.Telegram&&/telegram/i.test(t)&&/mobile/i.test(navigator.userAgent)},b=()=>void 0!==a.g&&void 0!==a.g.nativeModuleProxy||"undefined"!=typeof navigator&&"ReactNative"===navigator.product,[E,S]=(0,e.useState)(null);(0,e.useEffect)((()=>{let t=!0;if(v()){const n=(0,e.useMemo)(Jf,[]);t&&S(n)}return()=>{t=!1}}),[]),(0,e.useEffect)((()=>{if(E&&(console.log("Launch Params:",E),E.startParam))try{mt("Received parameters: ".concat(E.startParam)),tt({show:!0,type:"callback",data:{startParam:E.startParam}})}catch(t){console.error("Error parsing launch params:",t)}}),[E]),(0,e.useEffect)((()=>{if(v())try{var t;const e=null===(t=window.Telegram)||void 0===t?void 0:t.WebApp;e&&e.ready()}catch(t){console.error("Error initializing Telegram WebApp:",t)}}),[]);const[x,T]=(0,e.useState)(null),[A,_]=(0,e.useState)(!1),[k,R]=(0,e.useState)([]),[C,P]=(0,e.useState)(0),[I,O]=(0,e.useState)({}),[N,B]=(0,e.useState)(!1),[U,L]=(0,e.useState)(!1),[j,D]=(0,e.useState)(!1),[M,V]=(0,e.useState)(!1),F=(0,e.useRef)(!1),K=(0,e.useRef)(!1),[$,W]=(0,e.useState)(!1),[z,H]=(0,e.useState)(null),[Z,q]=(0,e.useState)(!0),[G,Y]=(0,e.useState)(null),[X,J]=(0,e.useState)(null),[Q,tt]=(0,e.useState)({show:!1,type:null,data:null}),[et,nt]=(0,e.useState)(null),[rt,ot]=(0,e.useState)(!1),[it,st]=(0,e.useState)(!1),at=(0,e.useRef)(!1),[ct,lt]=(0,e.useState)(null),[ut,ht]=(0,e.useState)({show:!1,color:null,message:null}),[dt,ft]=(0,e.useState)(null),[pt,mt]=(0,e.useState)("Initializing..."),gt="https://api2.onairos.uk";(0,e.useEffect)((()=>{if(!v())return;(async()=>{const t=new URL(window.location.href),e=t.searchParams.get("code"),n=t.searchParams.get("state");if(e&&n&&!at.current&&!it){at.current=!0,st(!0);try{const t=await fetch("".concat(gt,"/auth/callback"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e,state:n})});if(!t.ok)throw new Error("Failed to get Othent token");const{sessionId:r}=await t.json();(async()=>{const t=setInterval((async()=>{try{const e=await fetch("".concat(gt,"/auth/token/").concat(r),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));const n=await e.json();n.othentToken&&(clearInterval(t),await yt(n.othentToken),V(!0),window.history.replaceState({},document.title,window.location.pathname))}catch(e){console.error("Error polling for token:",e),clearInterval(t),lt("Failed to retrieve authentication token"),st(!1)}}),3e3);setTimeout((()=>{clearInterval(t),M||(lt("Authentication timeout"),st(!1))}),12e4)})()}catch(t){console.error("Auth callback processing failed:",t),lt(t.message),st(!1)}}})()}),[]);const yt=async t=>{try{const e=new Vr({appInfo:{name:"Onairos",version:"1.0.0",env:"production"},throwErrors:!0,auth0LogInMethod:"redirect",auth0RedirectURI:window.location.href,auth0ReturnToURI:window.location.href}),n=await e.completeConnectionWithToken(t);W(!0);const r=(await $v())(n.sub).toString();Y(r);const o=await Kr(r);J(o.result),H(o.token),await At(n.email,!0),_(!0),localStorage.setItem("othentToken",JSON.stringify(n)),localStorage.setItem("onairosToken",n.token)}catch(t){throw ht({show:!0,color:"red",message:"An error has occurred, please try again"}),console.error("Authentication failed:",t),t}finally{st(!1)}};(0,e.useEffect)((()=>{ct&&console.error("Authentication error:",ct)}),[ct]);const wt=()=>{const t=navigator.userAgent||navigator.vendor||window.opera;return/android|iphone|ipad|ipod|windows phone/i.test(t)};(0,e.useEffect)((()=>{if(u&&c&&"function"==typeof l){const t=async t=>{if(t.data&&"content-script"===t.data.source&&"API_URL_RESPONSE"===t.data.type&&"Onairos-Response"===t.data.unique){const{APIurl:e,approved:n,accessToken:r}=t.data,o=(t=>{const e={Small:16,Medium:32,Large:64};let n=null,r=0;return t.forEach((t=>{const o=e[t.data];o>r&&(r=o,n=t)})),r})(n),i={Input:c.slice(0,o)};try{const t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(i)}),n=await t.json();l(n)}catch(t){console.error(t),l(null,t)}}};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}}}),[]);const vt=async()=>{if(wt()||b()){if(b()){console.log("React Native detected - setting up data request overlay");R({hashedOthentSub:"mock-othent-sub-hash",encryptedUserPin:"mock-encrypted-pin",activeModels:["Personality","Demographics"],requestData:i||{data_type:"personality",data_fields:["openness","conscientiousness","extraversion","agreeableness","neuroticism"]}}.activeModels)}_(!0)}},bt=window.location.href;(0,e.useEffect)((()=>{const t=t=>{t.data&&"terminalOpened"===t.data.action&&Et()};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}}),[]);const Et=async()=>{try{const t=new Vr({appInfo:{name:"Onairos",version:"1.0.0",env:"production"},throwErrors:!1}),e=await t.connect(),n=(await $v())(e.sub).toString(),r=await Kr(n);if(console.log("Got your Pin"),"No user account"===r.result)return console.log("No user account found, triggering universal onboarding"),void window.postMessage({source:"webpage",type:"TRIGGER_ONBOARDING",webpageName:s,domain:bt,requestData:i,proofMode:h,HashedOthentSub:n});function o(t){try{const e=window.atob(t),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n.buffer}catch(t){console.error("Error converting to Buffer :",t)}}const a=o(r.result);Fr("\n    -----BEGIN PUBLIC KEY-----\n    MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA4wkWvRPaJiY8CwQ5BoJI\n    amcGAYV91Bk8NrvWq4PXM+J/RJugfgTNCYKQ/c6g4xa1YES/tJEzFS7nf0Kdoqxm\n    5aav0ru5vS4fc4vCOLTI9W1T7nj02NY91rogsQm2/KMxUQ8DaLeTZKi+0Wjsa9YO\n    6XGGd1wh4azgQkj04MWW5J1EBCcBavKoY+C85oA9jkkklQ8nGWgbugmZs7eXHNQb\n    qH8/ZHcB9Kx1CZ6XjQuVd6YE/A+swV+DksbkXANcYjr6SY/2TbB8GfpcOMM3bkyN\n    Q8e0A51q5a8abfuAkDZXe67MwKMWu/626abwPZhJrKr5HhRZZDwPtnXlktYHhOK6\n    lQIDAQAB\n    -----END PUBLIC KEY-----\n      ",await t.decrypt(a)).then((t=>{window.postMessage({source:"webpage",type:"GET_API_URL",webpageName:s,domain:bt,requestData:i,proofMode:h,HashedOthentSub:n,EncryptedUserPin:t})})).catch((t=>{console.error("Encryption failed:",t)}))}catch(c){console.error("Error Sending Data to Terminal: ",c)}},St="flex items-center justify-center font-bold rounded cursor-pointer ".concat("pill"===m?"px-4 py-2":"w-12 h-12"," ").concat(p?"bg-white border border-gray-300":"bg-transparent","\n    ").concat(wt()?"":"OnairosConnect","\n    "),xt={flexDirection:"below"===d?"column":"row",backgroundColor:p?"#ffffff":"transparent",color:p?"black":f,border:p?"1px solid #ddd":"1px solid transparent"},Tt={width:"20px",height:"20px",marginRight:"full"===w?"12px":"0"},At=async function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const n=e?{Info:{identifier:t}}:{Info:{userName:t}},r=e?"/getAccountInfo/email":"/getAccountInfo",o=await fetch("".concat(gt).concat(r),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("onairosToken"))},body:JSON.stringify(n)});if(!o.ok)throw new Error("Failed to fetch account info");const i=await o.json();return"No Account Found"===i.AccountInfo?(F.current=!0,nt(null),null):(nt(i.AccountInfo),i.AccountInfo.models?R(i.AccountInfo.models):K.current=!0,i.AccountInfo.avatar&&B(!0),i.AccountInfo.UserTraits&&L(!0),i.AccountInfo.othent&&D(!0),i.AccountInfo)}catch(t){throw console.error("Error fetching account info:",t),t}};(0,e.useEffect)((()=>{wt()&&(async()=>{try{const t=localStorage.getItem("onairosToken"),e=localStorage.getItem("token"),n=t||e;if(n){const t=await fetch("https://api2.onairos.uk/verifyToken",{headers:{Authorization:"Bearer ".concat(n)}});if(t.ok)if((await t.json()).valid){H(n),W(!0);const t=localStorage.getItem("username");await At(t)}else localStorage.removeItem("onairosToken"),localStorage.removeItem("token")}}catch(t){console.error("Token verification failed:",t)}finally{q(!1)}})()}),[]);(0,e.useEffect)((()=>{const t=localStorage.getItem("onairosToken"),e=localStorage.getItem("username");t&&e&&At(e,!1)}),[]);(0,e.useEffect)((()=>{(async()=>{const t=localStorage.getItem("onairosToken"),e=localStorage.getItem("username"),n=localStorage.getItem("othentToken");if(t)try{if((await fetch("".concat(gt,"/verifyToken"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})).ok){if(W(!0),e)await At(e,!1);else if(n){const t=JSON.parse(n);await At(t.email,!0)}}else localStorage.removeItem("onairosToken"),localStorage.removeItem("username"),localStorage.removeItem("othentToken")}catch(t){console.error("Token verification failed:",t)}})()}),[]);const _t=t=>{_(!1),l&&"function"==typeof l&&l({success:!0,apiUrl:"https://api2.onairos.uk/inferenceTest",approvedRequests:t||["personality"]})};return n().createElement(n().Fragment,null,n().createElement("div",{className:"flex items-center justify-center"},n().createElement("button",{className:St,onClick:async()=>{if(b())return console.log("React Native environment detected"),void await vt();wt()?await vt():(console.log("openTerminal clicked"),window.postMessage({source:"webpage",type:"openTerminal",webpageName:s,domain:bt,key:"Key"}))},style:xt},("full"===w||"icon"===w)&&n().createElement("img",{src:p?"https://onairos.sirv.com/Images/OnairosWhite.png":"https://onairos.sirv.com/Images/OnairosBlack.png",alt:"Onairos Logo",style:Tt,className:"".concat("pill"===m?"w-6 h-6":"w-8 h-8"," object-contain")}),("full"===w||"textOnly"===w)&&n().createElement("span",{className:"".concat(p||"black"===f?"text-black":"text-white"," ").concat("icon"===w?"sr-only":""," ").concat("right"===d?"ml-2":"left"===d?"mr-2":"")},(()=>{switch(y){case"signUp":return"Sign Up with Onairos";case"signOut":return"Sign Out of Onairos";default:return"Sign In with Onairos"}})()))),A&&b()&&n().createElement(pd,{onClose:()=>_(!1)},n().createElement("div",{style:{height:"60vh",overflow:"auto"}},n().createElement(Kv,{requestData:{personality:{type:"Personality",descriptions:"Access to your personality traits",reward:"Premium features"},demographics:{type:"Demographics",descriptions:"Basic demographic information",reward:"Personalized experience"}},dataRequester:s||"App",activeModels:k,onComplete:_t,onCancel:()=>_(!1)}))),A&&!b()&&n().createElement(pd,{onClose:()=>_(!1)},F.current?n().createElement("div",{className:"no-account"},"No Onairos Account Found"):K.current?n().createElement("div",{className:"no-model"},"No Model Found"):n().createElement("div",{className:"data-request-container"},"Data Request")),Q.show&&n().createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center"},n().createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>tt({show:!1,type:null,data:null})}),n().createElement("div",{className:"relative bg-white rounded-lg p-6 max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto"},n().createElement("button",{onClick:()=>tt({show:!1,type:null,data:null}),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600"},n().createElement("span",{className:"sr-only"},"Close"),n().createElement("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))),n().createElement("h3",{className:"text-lg font-semibold mb-4"},"callback"===Q.type?"Callback Details":"Authentication Result"),n().createElement("h3",{className:"text-lg font-semibold mb-4"},"debug"===Q.type?"Debug Results":"Authentication Result"),n().createElement("h3",{className:"text-lg font-semibold mb-4"},"apiURL"===Q.type?"API Url Returned":"Authentication Result"),n().createElement("div",{className:"bg-gray-50 rounded p-4 overflow-x-auto"},n().createElement("pre",{className:"text-sm"},JSON.stringify(Q.data,null,2))),"auth"===Q.type&&n().createElement("div",{className:"mt-4 p-3 rounded ".concat(null!==(r=Q.data)&&void 0!==r&&r.success?"bg-green-100 text-green-700":"bg-red-100 text-red-700")},null!==(o=Q.data)&&void 0!==o&&o.success?"Authentication successful!":"Authentication failed"))),rt&&n().createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n().createElement("div",{className:"bg-white p-6 rounded-lg shadow-lg w-80"},n().createElement("div",{className:"flex justify-center mb-4"},n().createElement("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-gray-900"})),n().createElement("p",{className:"text-center text-gray-700"},"Loading..."))),it&&n().createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n().createElement("div",{className:"bg-white p-6 rounded-lg shadow-lg w-80"},n().createElement("div",{className:"flex justify-center mb-4"},n().createElement("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-gray-900"})),n().createElement("p",{className:"text-center text-gray-700"},"Attempting to connect your Onairos Account..."))),et&&n().createElement(pd,{onClose:()=>{P(0),_(!1)},userData:x,avatar:N,traits:U,othentUser:j,othentConnected:M,setIsAuthenticated:W,authToken:z,setAuthToken:H,hashedOthentSub:G,setHashedOthentSub:Y,encryptedPin:X,setEncryptedPin:J}))}const zv=t=>n().createElement(Wv,t)})(),c=c.default})()));