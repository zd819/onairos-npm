!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define("Onairos",["React","ReactDOM"],t):"object"==typeof exports?exports.Onairos=t(require("react"),require("react-dom")):e.Onairos=t(e.React,e.ReactDOM)}(this,(e,t)=>(()=>{"use strict";var o={156:t=>{t.exports=e},318:e=>{e.exports=t},338:(e,t,o)=>{var n=o(318);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return o[e](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var n=o.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=o[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})();var r=a(156),c=a.n(r),s=a(338);function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(Object(o),!0).forEach(function(t){m(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function m(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const u={1:"https://anushkasirv.sirv.com/persona1.png",2:"https://anushkasirv.sirv.com/persona2.png",3:"https://anushkasirv.sirv.com/persona3.png",4:"https://anushkasirv.sirv.com/persona4.png",5:"https://anushkasirv.sirv.com/persona5.png"},d=[{name:"Google",icon:c().createElement("svg",{className:"w-6 h-6",viewBox:"0 0 24 24"},c().createElement("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c().createElement("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c().createElement("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c().createElement("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})),color:"bg-white",connector:"gmail",description:"We use your search, YouTube, and location signals to better understand your interests and routines."},{name:"Reddit",icon:c().createElement("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"#FF4500"},c().createElement("path",{d:"M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"})),color:"bg-white",connector:"reddit",description:"We use your search history to better understand your interests and routines."},{name:"Instagram",icon:c().createElement("svg",{className:"w-6 h-6",viewBox:"0 0 24 24"},c().createElement("defs",null,c().createElement("radialGradient",{id:"instagram-gradient",cx:"0.5",cy:"1",r:"1"},c().createElement("stop",{offset:"0%",stopColor:"#FD5949"}),c().createElement("stop",{offset:"50%",stopColor:"#D6249F"}),c().createElement("stop",{offset:"100%",stopColor:"#285AEB"}))),c().createElement("path",{fill:"url(#instagram-gradient)",d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.073-1.689-.073-4.849 0-3.204.013-3.583.072-4.948.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})),color:"bg-white",connector:"instagram",description:"We use your search history to better understand your interests and routines."},{name:"LinkedIn",icon:c().createElement("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"#0077B5"},c().createElement("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})),color:"bg-white",connector:"linkedin",description:"We use your search history to better understand your interests and routines."}],p={apiKey:process.env.REACT_APP_ONAIROS_API_KEY||"onairos_web_sdk_live_key_2024",baseUrl:process.env.REACT_APP_ONAIROS_BASE_URL||"https://api2.onairos.uk",sdkType:"web",enableHealthMonitoring:!0,enableAutoRefresh:!0,enableConnectionValidation:!0};function f(e){let{onComplete:t,onBack:o,appIcon:n,appName:a="App",personaImages:s}=e;const l=null!=s?s:u,[m,f]=(0,r.useState)({}),[g,h]=(0,r.useState)(!1),[b,v]=(0,r.useState)(null),[w,y]=(0,r.useState)({}),[x,E]=(0,r.useState)({}),[N,k]=(0,r.useState)(0);(0,r.useEffect)(()=>{(()=>{const e=localStorage.getItem("onairos_oauth_platform");e&&(console.log("üì± OAuth return detected for: ".concat(e)),localStorage.removeItem("onairos_oauth_platform"),localStorage.removeItem("onairos_oauth_return"),f(t=>i(i({},t),{},{[e]:!0})),y(t=>i(i({},t),{},{[e]:null})),console.log("‚úÖ ".concat(e," marked as connected from OAuth return")))})()},[]);const S=async e=>{console.log("üöÄ connectToPlatform called for: ".concat(e));const t=d.find(t=>t.name===e);if(null==t||!t.connector)return console.error("‚ùå No connector found for platform: ".concat(e)),!1;try{var o;h(!0),v(e),y(t=>i(i({},t),{},{[e]:null})),console.log("üîó Starting OAuth connection for ".concat(e,"..."));const n=localStorage.getItem("username")||(null===(o=localStorage.getItem("onairosUser"))||void 0===o?void 0:o.email)||"user@example.com",a="".concat(p.baseUrl,"/").concat(t.connector,"/authorize"),r=await fetch(a,{method:"POST",headers:{"x-api-key":p.apiKey,"Content-Type":"application/json"},body:JSON.stringify({session:{username:n}})});if(!r.ok)throw new Error("HTTP ".concat(r.status,": ").concat(r.statusText));const c=await r.json();console.log("üìã ".concat(e," OAuth response:"),c);const s={youtube:["youtubeURL","youtubeUrl","youtube_url"],linkedin:["linkedinURL","linkedinUrl","linkedin_url"],reddit:["redditURL","redditUrl","reddit_url"],pinterest:["pinterestURL","pinterestUrl","pinterest_url"],instagram:["instagramURL","instagramUrl","instagram_url"],github:["githubURL","githubUrl","github_url"],facebook:["facebookURL","facebookUrl","facebook_url"],gmail:["gmailURL","gmailUrl","gmail_url"]}[t.connector]||["".concat(t.connector,"URL"),"".concat(t.connector,"Url"),"".concat(t.connector,"_url"),"platformURL","authUrl","url"];let l=null,m=null;for(const e of s)if(c[e]){l=c[e],m=e;break}if(!l)throw console.error("‚ùå No OAuth URL found for ".concat(e,":")),console.error("Expected one of:",s),console.error("Response keys:",Object.keys(c)),console.error("Full response:",c),new Error("No OAuth URL found. Backend should return one of: ".concat(s.join(", ")));if(console.log("‚úÖ Found OAuth URL for ".concat(e," using key: ").concat(m)),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768)return localStorage.setItem("onairos_oauth_platform",e),localStorage.setItem("onairos_oauth_return",window.location.href),window.location.href=l,!0;{const o=window.open(l,"".concat(t.connector,"_oauth"),"width=500,height=600,scrollbars=yes,resizable=yes,status=no,location=no,toolbar=no,menubar=no");if(!o)throw new Error("Popup blocked. Please allow popups and try again.");let n=!1;const a=setInterval(()=>{try{if(o.location&&"onairos.uk"===o.location.hostname)return n=!0,console.log("üîÑ ".concat(e," popup navigated to onairos.uk - treating as success")),void o.close()}catch(t){n||(n=!0,console.log("üîÑ ".concat(e," popup navigated (cross-origin) - likely to onairos.uk")))}try{if(o.closed){clearInterval(a);const t=localStorage.getItem("onairos_".concat(e,"_success")),o=localStorage.getItem("onairos_".concat(e,"_error")),r=localStorage.getItem("onairos_".concat(e,"_timestamp")),c=r&&Date.now()-parseInt(r)<3e4;t&&c?(console.log("‚úÖ ".concat(e," OAuth completed successfully (callback page)")),localStorage.removeItem("onairos_".concat(e,"_success")),localStorage.removeItem("onairos_".concat(e,"_timestamp")),f(t=>i(i({},t),{},{[e]:!0})),y(t=>i(i({},t),{},{[e]:null}))):o&&c?(console.log("‚ùå ".concat(e," OAuth failed:"),o),localStorage.removeItem("onairos_".concat(e,"_error")),localStorage.removeItem("onairos_".concat(e,"_timestamp")),y(t=>i(i({},t),{},{[e]:o}))):n?(console.log("‚úÖ ".concat(e," OAuth likely successful (navigated to onairos.uk)")),f(t=>i(i({},t),{},{[e]:!0})),y(t=>i(i({},t),{},{[e]:null}))):(console.log("‚ö†Ô∏è ".concat(e," OAuth cancelled or no response")),y(t=>i(i({},t),{},{[e]:"Connection was cancelled"}))),h(!1),v(null)}}catch(e){}},1e3);return setTimeout(()=>{try{!o.closed&&o.location&&"onairos.uk"===o.location.hostname&&(console.log("üö™ Auto-closing ".concat(e," popup showing onairos.uk (not found)")),o.close())}catch(t){!o.closed&&n&&(console.log("üö™ Auto-closing ".concat(e," popup (cross-origin, likely onairos.uk)")),o.close())}},1e4),setTimeout(()=>{o.closed||(o.close(),clearInterval(a),y(t=>i(i({},t),{},{[e]:"Connection timeout"})),h(!1),v(null))},3e5),!0}}catch(t){return console.error("‚ùå Error connecting to ".concat(e,":"),t),y(o=>i(i({},o),{},{[e]:t.message})),h(!1),v(null),!1}},C=async e=>{if(console.log("üî• TOGGLE CLICKED: ".concat(e)),g&&b!==e)return void console.log("‚ö†Ô∏è Already connecting to ".concat(b,", ignoring click on ").concat(e));m[e]?(console.log("üîå Disconnecting from ".concat(e,"...")),f(t=>i(i({},t),{},{[e]:!1})),y(t=>i(i({},t),{},{[e]:null}))):await S(e)},O=Object.values(m).filter(Boolean).length,R=Math.min(O+1,5);return c().createElement("div",{className:"w-full h-full flex flex-col",style:{height:"100%",minHeight:0}},c().createElement("div",{className:"px-6 pt-16 flex-1 flex flex-col",style:{minHeight:0,overflow:"hidden"}},c().createElement("div",{className:"mb-6 flex-shrink-0"},c().createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2 text-balance leading-tight"},"Connect app data"),c().createElement("p",{className:"text-gray-600 text-base"},"More connections, better personalization.")),c().createElement("div",{className:"mb-2 flex justify-center flex-shrink-0"},c().createElement("div",{className:"w-56 h-56 overflow-hidden"},c().createElement("img",{src:l[R],alt:"Persona ".concat(R),width:"224",height:"224",className:"w-full h-full object-cover",onLoad:()=>console.log("‚úÖ Persona image loaded successfully!"),onError:e=>{console.log("‚ùå Persona image failed to load:",l[R]),console.log("Connected count:",O),console.log("Persona number:",R),console.log("All persona URLs:",l),console.log("Current location:",window.location.href),console.log("Trying to load from:",l[R]),e.target.style.display="none",e.target.parentElement.style.background="linear-gradient(135deg, #f97316 0%, #ec4899 50%, #8b5cf6 100%)"}}))),c().createElement("div",{className:"flex-1 overflow-y-auto mt-4",style:{minHeight:0}},c().createElement("div",{className:"space-y-4 pb-4"},d.map(e=>{const t=m[e.name]||!1,o=b===e.name,n=w[e.name],a=g&&!o;return c().createElement("div",{key:e.name,className:"flex items-start gap-4 p-4 rounded-xl hover:bg-gray-50 transition-colors",style:{backgroundColor:"#ffffff",border:"none",outline:"none"},onClick:()=>!a&&C(e.name)},c().createElement("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center flex-shrink-0 border border-gray-100"},o?c().createElement("div",{className:"animate-spin h-5 w-5 border-2 border-gray-400 rounded-full border-t-transparent"}):e.icon),c().createElement("div",{className:"flex-1 min-w-0 pr-4"},c().createElement("h3",{className:"font-medium mb-1",style:{backgroundColor:"#ffffff !important",color:"#111827 !important",border:"none",outline:"none"}},e.name),c().createElement("p",{className:"text-sm leading-relaxed",style:{backgroundColor:"#ffffff !important",color:"#4B5563 !important",border:"none",outline:"none"}},e.description),n&&c().createElement("p",{className:"text-xs text-red-600 mt-1"},n)),c().createElement("div",{className:"flex-shrink-0"},c().createElement("div",{onClick:t=>{t.stopPropagation(),a||C(e.name)},className:"relative inline-flex h-7 w-12 items-center rounded-full transition-all duration-200 ease-in-out cursor-pointer ".concat(t?"bg-green-500":"bg-gray-300"," ").concat(a?"opacity-50 cursor-not-allowed":"cursor-pointer")},c().createElement("span",{className:"inline-block h-5 w-5 transform rounded-full bg-white transition-all duration-200 ease-in-out shadow-md ".concat(t?"translate-x-6":"translate-x-0.5")}))))})))),c().createElement("div",{className:"px-6 pb-6 pt-4 flex-shrink-0 space-y-3",style:{minHeight:"auto"}},c().createElement("div",{className:"w-full bg-gray-900 hover:bg-gray-800 text-white rounded-full py-4 text-base font-medium flex items-center justify-center gap-2 cursor-pointer transition-colors",onClick:()=>{const e=Object.entries(m).filter(e=>{let[t,o]=e;return o}).map(e=>{let[t]=e;return t});t({connectedAccounts:e,totalConnections:e.length,healthScore:N,connectionHealth:x,sdkVersion:"2.1.7",enhancedFeatures:{healthMonitoring:p.enableHealthMonitoring,autoRefresh:p.enableAutoRefresh,connectionValidation:p.enableConnectionValidation}})}},"Update",c().createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"}))),c().createElement("div",{onClick:()=>t({connectedAccounts:[],totalConnections:0}),className:"w-full text-gray-600 text-base font-medium py-3 text-center cursor-pointer hover:text-gray-800 transition-colors"},"Skip")))}const g=e=>c().createElement("div",{className:"relative inline-flex items-center"},c().createElement("input",{type:"checkbox",id:"request-".concat(e.number),disabled:!e.active,onChange:t=>{const o=t.target.checked;console.log("Checkbox ".concat(e.title," is now: ").concat(o?"checked":"unchecked")),o?(e.setSelected(!0),e.changeGranted(1)):(e.setSelected(!1),e.changeGranted(-1)),e.onSelectionChange(o)},className:"\n          appearance-none w-5 h-5 border rounded\n          ".concat(e.active?"border-blue-500 cursor-pointer":"border-gray-300 bg-gray-100 cursor-not-allowed","\n          checked:bg-blue-600 checked:border-blue-600\n          focus:outline-none focus:ring-2 focus:ring-blue-500/30\n          transition-colors\n        ")}),c().createElement("svg",{className:"absolute left-0.5 top-0.5 w-4 h-4 text-white pointer-events-none opacity-0 peer-checked:opacity-100",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},c().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})),!e.active&&c().createElement("span",{className:"ml-2 text-xs text-red-500 font-medium"},"Not available"));const h=function(e){const[t,o]=(0,r.useState)(!1);return c().createElement("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all overflow-hidden"},c().createElement("div",{className:"p-5"},c().createElement("div",{className:"flex items-start space-x-4"},(()=>{switch(e.title){case"Profile":return c().createElement("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center"},c().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-600",viewBox:"0 0 20 20",fill:"currentColor"},c().createElement("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})));case"User Memories":return c().createElement("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center"},c().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-purple-600",viewBox:"0 0 20 20",fill:"currentColor"},c().createElement("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"})));default:return c().createElement("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center"},c().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},c().createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})))}})(),c().createElement("div",{className:"flex-1"},c().createElement("div",{className:"flex items-center justify-between"},c().createElement("h3",{className:"font-medium text-gray-800"},e.title),c().createElement(g,{active:e.active,onSelectionChange:t=>{o(t),e.onSelectionChange(t)},changeGranted:e.changeGranted,setSelected:o,number:e.number+1,type:"Test",title:e.title})),e.descriptions&&c().createElement("div",{className:"mt-2"},c().createElement("p",{className:"text-sm text-gray-600"},e.descriptions)))),e.rewards&&c().createElement("div",{className:"mt-3 pt-3 border-t border-gray-100"},c().createElement("div",{className:"flex items-center"},c().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-500 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},c().createElement("path",{fillRule:"evenodd",d:"M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z",clipRule:"evenodd"})),c().createElement("span",{className:"text-xs text-gray-500"},"Benefit: ",c().createElement("span",{className:"text-gray-700"},e.rewards))))))},b=a.p+"static/ca60d8c79124e56d8c1c.png",v=e=>{let{requestData:t={},dataRequester:o="App",proofMode:n=!1,domain:a="",appIcon:s=""}=e;const[l,i]=(0,r.useState)(!0),[m,u]=(0,r.useState)([]),[d,p]=(0,r.useState)(0),[g,v]=(0,r.useState)(!1),[w,y]=(0,r.useState)(["instagram","youtube","email"]),[x,E]=(0,r.useState)({}),N=(0,r.useRef)([]),k=(0,r.useRef)(null),S=(0,r.useRef)(null);function C(e){p(d+e)}return(0,r.useEffect)(()=>{v(d>0)},[d]),(0,r.useEffect)(()=>{(async()=>{try{await new Promise(e=>setTimeout(e,1e3)),u(["Profile","User Memories"]),i(!1)}catch(e){console.error("Error loading data:",e),i(!1)}})();const e=e=>{e.data&&"dataRequest"===e.data.type&&(e.data.requestData,e.data.activeModels&&u(e.data.activeModels),e.data.userSub&&(k.current=e.data.userSub),e.data.encryptedUserPin&&(S.current=e.data.encryptedUserPin))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),c().createElement("div",{className:"min-h-screen bg-gray-100"},l?c().createElement("div",{className:"flex items-center justify-center min-h-screen"},c().createElement("div",{className:"animate-spin h-8 w-8 border-2 border-blue-600 rounded-full border-t-transparent"})):0===m.length?c().createElement(f,{appIcon:"https://onairos.sirv.com/Images/OnairosBlack.png",appName:o,username:localStorage.getItem("username")}):c().createElement("div",{className:"max-w-md mx-auto p-6 space-y-4"},c().createElement("header",{className:"bg-white p-6 rounded-xl shadow-md"},c().createElement("div",{className:"flex items-center justify-between mb-6"},c().createElement("div",{className:"flex items-center space-x-2"},c().createElement("img",{src:b,alt:"Onairos Logo",className:"w-8 h-8"}),c().createElement("div",{className:"text-gray-400 mx-2"},"‚Üí"),s?c().createElement("img",{src:s,alt:"".concat(o," Logo"),className:"w-8 h-8 rounded-full"}):c().createElement("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center"},c().createElement("span",{className:"text-gray-600 text-xs font-bold"},o.charAt(0)))),c().createElement("h2",{className:"text-lg font-bold text-gray-800"},o)),c().createElement("h1",{className:"text-xl font-bold text-gray-800 mb-4"},"Data Access Request"),c().createElement("p",{className:"text-gray-600 mb-6"},"Select the data you want to share with ",o),c().createElement("div",{className:"flex items-center justify-between gap-4"},c().createElement("button",{onClick:async function(){window.top.postMessage({type:"closeIframe"},"*"),window.postMessage({type:"closeIframe"},"*")},className:"border w-full border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-lg transition-colors"},"Decline"),c().createElement("button",{disabled:!g,onClick:async function(){if(0!==d){const e={message:"Confirm "+o+" Data Access",confirmations:N.current};try{window.top.postMessage({type:"dataRequestComplete",approved:N.current,message:e},"*"),window.postMessage({type:"dataRequestComplete",approved:N.current,message:e},"*")}catch(e){console.error("Error sending data request:",e),window.close()}}else window.close()},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},"Approve ",d>0&&"(".concat(d,")")))),c().createElement("div",{className:"space-y-3"},["Profile","User Memories"].map((e,t)=>{const n=e.toLowerCase().replace(" ","_"),a={type:e,descriptions:"Profile"===e?"Basic profile information and preferences":"Your personal context and memory data",reward:"Profile"===e?"Personalized experience":"Contextual understanding of your preferences"};return c().createElement(h,{key:n,active:!0,title:a.type,id:a,number:t,descriptions:a.descriptions,rewards:a.reward,size:n,changeGranted:C,onSelectionChange:e=>function(e,t,o,n,a,r){const c=new Date,s={requester:e,date:c.toISOString(),name:n,reward:a,data:t};r?(console.log("Adding connection: ".concat(JSON.stringify(s))),N.current.find(o=>o.requester===e&&o.data===t)||N.current.push(s)):(console.log("Removing connection for: ".concat(t)),N.current=N.current.filter(o=>!(o.requester===e&&o.data===t))),console.log("Current selected connections:",N.current)}(o,n,0,a.type,a.reward,e)})}),c().createElement("div",{className:"bg-white p-4 rounded-xl shadow-sm mt-4"},c().createElement("h3",{className:"text-sm font-semibold text-gray-700 mb-3"},"Your Connected Services"),c().createElement("div",{className:"flex items-center space-x-3"},w.map((e,t)=>c().createElement("div",{key:t,className:"flex flex-col items-center"},(e=>{switch(e){case"instagram":return c().createElement("div",{className:"w-10 h-10 rounded-full bg-linear-to-tr from-purple-500 via-pink-500 to-yellow-500 flex items-center justify-center"},c().createElement("span",{className:"text-white text-xs"},"IG"));case"youtube":return c().createElement("div",{className:"w-10 h-10 rounded-full bg-red-600 flex items-center justify-center"},c().createElement("span",{className:"text-white text-xs"},"YT"));case"email":return c().createElement("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center"},c().createElement("span",{className:"text-white text-xs"},"@"));default:return c().createElement("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center"},c().createElement("span",{className:"text-gray-600 text-xs"},e.charAt(0).toUpperCase()))}})(e),c().createElement("span",{className:"text-xs text-gray-600 mt-1"},e))))))))};let w=!1,y="",x=null,E=null;function N(){s.createRoot(document.getElementById("root")).render(c().createElement(v,{proofMode:w,domain:y,userSub:x,encryptedUserPin:E}))}return window.addEventListener("message",e=>{e.data&&"onairosButton"===e.data.source&&(w=e.data.proofMode||!1,y=e.data.domain||"",x=e.data.userSub||null,E=e.data.encryptedUserPin||null,N())}),window.parent.postMessage({source:"onairosIframe",action:"iframeReady"},"*"),N(),{}})());
//# sourceMappingURL=iframe.bundle.js.map