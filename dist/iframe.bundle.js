!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define("Onairos",["React","ReactDOM"],t):"object"==typeof exports?exports.Onairos=t(require("react"),require("react-dom")):e.Onairos=t(e.React,e.ReactDOM)}(this,(e,t)=>(()=>{"use strict";var n={156:t=>{t.exports=e},318:e=>{e.exports=t},338:(e,t,n)=>{var o=n(318);t.createRoot=o.createRoot,t.hydrateRoot=o.hydrateRoot}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return n[e](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})();var r=a(156),c=a.n(r),l=a(338);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=[{name:"YouTube",icon:"üì∫",color:"bg-red-500",connector:"youtube"},{name:"LinkedIn",icon:"üíº",color:"bg-blue-700",connector:"linkedin"},{name:"Reddit",icon:"üî•",color:"bg-orange-500",connector:"reddit"},{name:"Pinterest",icon:"üìå",color:"bg-red-600",connector:"pinterest"},{name:"Instagram",icon:"üì∑",color:"bg-pink-500",connector:"instagram"},{name:"GitHub",icon:"‚ö°",color:"bg-gray-800",connector:"github"},{name:"Facebook",icon:"üë•",color:"bg-blue-600",connector:"facebook"},{name:"Gmail",icon:"‚úâÔ∏è",color:"bg-red-400",connector:"gmail"}],d={apiKey:process.env.REACT_APP_ONAIROS_API_KEY||"onairos_web_sdk_live_key_2024",baseUrl:process.env.REACT_APP_ONAIROS_BASE_URL||"https://api2.onairos.uk",sdkType:"web",enableHealthMonitoring:!0,enableAutoRefresh:!0,enableConnectionValidation:!0};function p(e){let{onComplete:t,appIcon:n,appName:o="App"}=e;const[a,l]=(0,r.useState)({}),[s,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[f,b]=(0,r.useState)({}),[h,w]=(0,r.useState)({}),[y,v]=(0,r.useState)(0);(0,r.useEffect)(()=>{(()=>{const e=localStorage.getItem("onairos_oauth_platform");e&&(console.log("üì± OAuth return detected for: ".concat(e)),localStorage.removeItem("onairos_oauth_platform"),localStorage.removeItem("onairos_oauth_return"),l(t=>i(i({},t),{},{[e]:!0})),b(t=>i(i({},t),{},{[e]:null})),console.log("‚úÖ ".concat(e," marked as connected from OAuth return")))})()},[]);const x=async e=>{console.log("üöÄ connectToPlatform called for: ".concat(e));const t=u.find(t=>t.name===e);if(null==t||!t.connector)return console.error("‚ùå No connector found for platform: ".concat(e)),!1;try{var n;m(!0),g(e),b(t=>i(i({},t),{},{[e]:null})),console.log("üîó Starting OAuth connection for ".concat(e,"..."));const o=localStorage.getItem("username")||(null===(n=localStorage.getItem("onairosUser"))||void 0===n?void 0:n.email)||"user@example.com",a="".concat(d.baseUrl,"/").concat(t.connector,"/authorize"),r=await fetch(a,{method:"POST",headers:{"x-api-key":d.apiKey,"Content-Type":"application/json"},body:JSON.stringify({session:{username:o}})});if(!r.ok)throw new Error("HTTP ".concat(r.status,": ").concat(r.statusText));const c=await r.json();console.log("üìã ".concat(e," OAuth response:"),c);const s={youtube:["youtubeURL","youtubeUrl","youtube_url"],linkedin:["linkedinURL","linkedinUrl","linkedin_url"],reddit:["redditURL","redditUrl","reddit_url"],pinterest:["pinterestURL","pinterestUrl","pinterest_url"],instagram:["instagramURL","instagramUrl","instagram_url"],github:["githubURL","githubUrl","github_url"],facebook:["facebookURL","facebookUrl","facebook_url"],gmail:["gmailURL","gmailUrl","gmail_url"]}[t.connector]||["".concat(t.connector,"URL"),"".concat(t.connector,"Url"),"".concat(t.connector,"_url"),"platformURL","authUrl","url"];let u=null,p=null;for(const e of s)if(c[e]){u=c[e],p=e;break}if(!u)throw console.error("‚ùå No OAuth URL found for ".concat(e,":")),console.error("Expected one of:",s),console.error("Response keys:",Object.keys(c)),console.error("Full response:",c),new Error("No OAuth URL found. Backend should return one of: ".concat(s.join(", ")));if(console.log("‚úÖ Found OAuth URL for ".concat(e," using key: ").concat(p)),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768)return localStorage.setItem("onairos_oauth_platform",e),localStorage.setItem("onairos_oauth_return",window.location.href),window.location.href=u,!0;{const n=window.open(u,"".concat(t.connector,"_oauth"),"width=500,height=600,scrollbars=yes,resizable=yes,status=no,location=no,toolbar=no,menubar=no");if(!n)throw new Error("Popup blocked. Please allow popups and try again.");let o=!1;const a=setInterval(()=>{try{if(n.location&&"onairos.uk"===n.location.hostname)return o=!0,console.log("üîÑ ".concat(e," popup navigated to onairos.uk - treating as success")),void n.close()}catch(t){o||(o=!0,console.log("üîÑ ".concat(e," popup navigated (cross-origin) - likely to onairos.uk")))}try{if(n.closed){clearInterval(a);const t=localStorage.getItem("onairos_".concat(e,"_success")),n=localStorage.getItem("onairos_".concat(e,"_error")),r=localStorage.getItem("onairos_".concat(e,"_timestamp")),c=r&&Date.now()-parseInt(r)<3e4;t&&c?(console.log("‚úÖ ".concat(e," OAuth completed successfully (callback page)")),localStorage.removeItem("onairos_".concat(e,"_success")),localStorage.removeItem("onairos_".concat(e,"_timestamp")),l(t=>i(i({},t),{},{[e]:!0})),b(t=>i(i({},t),{},{[e]:null}))):n&&c?(console.log("‚ùå ".concat(e," OAuth failed:"),n),localStorage.removeItem("onairos_".concat(e,"_error")),localStorage.removeItem("onairos_".concat(e,"_timestamp")),b(t=>i(i({},t),{},{[e]:n}))):o?(console.log("‚úÖ ".concat(e," OAuth likely successful (navigated to onairos.uk)")),l(t=>i(i({},t),{},{[e]:!0})),b(t=>i(i({},t),{},{[e]:null}))):(console.log("‚ö†Ô∏è ".concat(e," OAuth cancelled or no response")),b(t=>i(i({},t),{},{[e]:"Connection was cancelled"}))),m(!1),g(null)}}catch(e){}},1e3);return setTimeout(()=>{try{!n.closed&&n.location&&"onairos.uk"===n.location.hostname&&(console.log("üö™ Auto-closing ".concat(e," popup showing onairos.uk (not found)")),n.close())}catch(t){!n.closed&&o&&(console.log("üö™ Auto-closing ".concat(e," popup (cross-origin, likely onairos.uk)")),n.close())}},1e4),setTimeout(()=>{n.closed||(n.close(),clearInterval(a),b(t=>i(i({},t),{},{[e]:"Connection timeout"})),m(!1),g(null))},3e5),!0}}catch(t){return console.error("‚ùå Error connecting to ".concat(e,":"),t),b(n=>i(i({},n),{},{[e]:t.message})),m(!1),g(null),!1}},E=async e=>{if(console.log("üî• TOGGLE CLICKED: ".concat(e)),s&&p!==e)return void console.log("‚ö†Ô∏è Already connecting to ".concat(p,", ignoring click on ").concat(e));a[e]?(console.log("üîå Disconnecting from ".concat(e,"...")),l(t=>i(i({},t),{},{[e]:!1})),b(t=>i(i({},t),{},{[e]:null}))):await x(e)},N=Object.values(a).filter(Boolean).length;return c().createElement("div",{className:"max-w-sm mx-auto bg-white p-4 rounded-lg shadow-lg"},c().createElement("div",{className:"flex items-center justify-center mb-4"},c().createElement("div",{className:"flex items-center space-x-2"},c().createElement("img",{src:n||"https://onairos.sirv.com/Images/OnairosBlack.png",alt:o,className:"w-8 h-8 rounded-lg"}),c().createElement("div",{className:"flex items-center text-gray-400"},c().createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"}))),c().createElement("img",{src:"https://onairos.sirv.com/Images/OnairosBlack.png",alt:"Onairos",className:"w-8 h-8 rounded-lg"}))),c().createElement("div",{className:"text-center mb-4"},c().createElement("h2",{className:"text-lg font-bold text-gray-900 mb-1"},"Connect Data"),c().createElement("p",{className:"text-gray-600 text-sm"},"Connect data here to enhance your ",o," experience")),c().createElement("div",{className:"space-y-3 mb-4"},u.slice(0,6).map(e=>{const t=a[e.name]||!1,n=p===e.name,o=f[e.name],r=s&&!n;return c().createElement("div",{key:e.name,className:"flex items-center justify-between p-3 border rounded-lg transition-all duration-200 ".concat(r?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-gray-50"," ").concat(t?"border-green-300 bg-green-50":o?"border-red-300 bg-red-50":n?"border-blue-300 bg-blue-50":"border-gray-200 bg-white"),onClick:()=>!r&&E(e.name)},c().createElement("div",{className:"flex items-center space-x-3"},c().createElement("div",{className:"w-10 h-10 rounded-lg ".concat(e.color," flex items-center justify-center text-white text-lg relative")},n?c().createElement("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.icon,t&&!n&&c().createElement("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center"},c().createElement("svg",{className:"w-2.5 h-2.5 text-white",fill:"currentColor",viewBox:"0 0 20 20"},c().createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))),o&&!n&&c().createElement("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center"},c().createElement("svg",{className:"w-2.5 h-2.5 text-white",fill:"currentColor",viewBox:"0 0 20 20"},c().createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})))),c().createElement("div",{className:"flex-1"},c().createElement("h3",{className:"font-semibold text-gray-900 text-sm"},e.name),c().createElement("p",{className:"text-gray-600 text-xs"},"YouTube"===e.name?"We analyze your watch history, likes, and subscriptions to understand your interests.":"Pinterest"===e.name?"We analyze your pins, boards, and interests to understand your style and preferences.":"Connect your ".concat(e.name," account to enhance your experience.")),o&&c().createElement("p",{className:"text-xs text-red-600 mt-1"},o))),c().createElement("div",{className:"flex items-center"},c().createElement("button",{className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(t?"bg-blue-600":"bg-gray-200"," ").concat(r?"opacity-50 cursor-not-allowed":"cursor-pointer"),onClick:t=>{t.stopPropagation(),r||E(e.name)},disabled:r},c().createElement("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(t?"translate-x-6":"translate-x-1")}))))})),N>0&&c().createElement("div",{className:"mb-4 p-2 bg-green-50 border border-green-200 rounded-lg"},c().createElement("p",{className:"text-green-800 text-sm text-center"},"‚úÖ ",N," connection",N>1?"s":""," active")),c().createElement("button",{onClick:()=>{const e=Object.entries(a).filter(e=>{let[t,n]=e;return n}).map(e=>{let[t]=e;return t});t({connectedAccounts:e,totalConnections:e.length,healthScore:y,connectionHealth:h,sdkVersion:"2.1.7",enhancedFeatures:{healthMonitoring:d.enableHealthMonitoring,autoRefresh:d.enableAutoRefresh,connectionValidation:d.enableConnectionValidation}})},disabled:0===N,className:"mx-auto px-3 py-2 rounded-lg font-medium transition-colors text-xs max-w-40 ".concat(N>0?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed")},N>0?"Continue with ".concat(N," connection").concat(N>1?"s":""):"Connect at least one platform"),c().createElement("button",{onClick:()=>t({connectedAccounts:[],totalConnections:0}),className:"mx-auto mt-2 py-2 px-4 text-gray-500 hover:text-gray-700 text-sm"},"Skip for now"))}const g=e=>c().createElement("div",{className:"relative inline-flex items-center"},c().createElement("input",{type:"checkbox",id:"request-".concat(e.number),disabled:!e.active,onChange:t=>{const n=t.target.checked;console.log("Checkbox ".concat(e.title," is now: ").concat(n?"checked":"unchecked")),n?(e.setSelected(!0),e.changeGranted(1)):(e.setSelected(!1),e.changeGranted(-1)),e.onSelectionChange(n)},className:"\n          appearance-none w-5 h-5 border rounded\n          ".concat(e.active?"border-blue-500 cursor-pointer":"border-gray-300 bg-gray-100 cursor-not-allowed","\n          checked:bg-blue-600 checked:border-blue-600\n          focus:outline-none focus:ring-2 focus:ring-blue-500/30\n          transition-colors\n        ")}),c().createElement("svg",{className:"absolute left-0.5 top-0.5 w-4 h-4 text-white pointer-events-none opacity-0 peer-checked:opacity-100",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},c().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})),!e.active&&c().createElement("span",{className:"ml-2 text-xs text-red-500 font-medium"},"Not available"));const f=function(e){const[t,n]=(0,r.useState)(!1);return c().createElement("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all overflow-hidden"},c().createElement("div",{className:"p-5"},c().createElement("div",{className:"flex items-start space-x-4"},(()=>{switch(e.title){case"Profile":return c().createElement("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center"},c().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-600",viewBox:"0 0 20 20",fill:"currentColor"},c().createElement("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})));case"User Memories":return c().createElement("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center"},c().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-purple-600",viewBox:"0 0 20 20",fill:"currentColor"},c().createElement("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"})));default:return c().createElement("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center"},c().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},c().createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})))}})(),c().createElement("div",{className:"flex-1"},c().createElement("div",{className:"flex items-center justify-between"},c().createElement("h3",{className:"font-medium text-gray-800"},e.title),c().createElement(g,{active:e.active,onSelectionChange:t=>{n(t),e.onSelectionChange(t)},changeGranted:e.changeGranted,setSelected:n,number:e.number+1,type:"Test",title:e.title})),e.descriptions&&c().createElement("div",{className:"mt-2"},c().createElement("p",{className:"text-sm text-gray-600"},e.descriptions)))),e.rewards&&c().createElement("div",{className:"mt-3 pt-3 border-t border-gray-100"},c().createElement("div",{className:"flex items-center"},c().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-500 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},c().createElement("path",{fillRule:"evenodd",d:"M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z",clipRule:"evenodd"})),c().createElement("span",{className:"text-xs text-gray-500"},"Benefit: ",c().createElement("span",{className:"text-gray-700"},e.rewards))))))},b=a.p+"static/ca60d8c79124e56d8c1c.png",h=e=>{let{requestData:t={},dataRequester:n="App",proofMode:o=!1,domain:a="",appIcon:l=""}=e;const[s,i]=(0,r.useState)(!0),[m,u]=(0,r.useState)([]),[d,g]=(0,r.useState)(0),[h,w]=(0,r.useState)(!1),[y,v]=(0,r.useState)(["instagram","youtube","email"]),[x,E]=(0,r.useState)({}),N=(0,r.useRef)([]),k=(0,r.useRef)(null),S=(0,r.useRef)(null);function O(e){g(d+e)}return(0,r.useEffect)(()=>{w(d>0)},[d]),(0,r.useEffect)(()=>{(async()=>{try{await new Promise(e=>setTimeout(e,1e3)),u(["Profile","User Memories"]),i(!1)}catch(e){console.error("Error loading data:",e),i(!1)}})();const e=e=>{e.data&&"dataRequest"===e.data.type&&(e.data.requestData,e.data.activeModels&&u(e.data.activeModels),e.data.userSub&&(k.current=e.data.userSub),e.data.encryptedUserPin&&(S.current=e.data.encryptedUserPin))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),c().createElement("div",{className:"min-h-screen bg-gray-100"},s?c().createElement("div",{className:"flex items-center justify-center min-h-screen"},c().createElement("div",{className:"animate-spin h-8 w-8 border-2 border-blue-600 rounded-full border-t-transparent"})):0===m.length?c().createElement(p,{appIcon:"https://onairos.sirv.com/Images/OnairosBlack.png",appName:n,username:localStorage.getItem("username")}):c().createElement("div",{className:"max-w-md mx-auto p-6 space-y-4"},c().createElement("header",{className:"bg-white p-6 rounded-xl shadow-md"},c().createElement("div",{className:"flex items-center justify-between mb-6"},c().createElement("div",{className:"flex items-center space-x-2"},c().createElement("img",{src:b,alt:"Onairos Logo",className:"w-8 h-8"}),c().createElement("div",{className:"text-gray-400 mx-2"},"‚Üí"),l?c().createElement("img",{src:l,alt:"".concat(n," Logo"),className:"w-8 h-8 rounded-full"}):c().createElement("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center"},c().createElement("span",{className:"text-gray-600 text-xs font-bold"},n.charAt(0)))),c().createElement("h2",{className:"text-lg font-bold text-gray-800"},n)),c().createElement("h1",{className:"text-xl font-bold text-gray-800 mb-4"},"Data Access Request"),c().createElement("p",{className:"text-gray-600 mb-6"},"Select the data you want to share with ",n),c().createElement("div",{className:"flex items-center justify-between gap-4"},c().createElement("button",{onClick:async function(){window.top.postMessage({type:"closeIframe"},"*"),window.postMessage({type:"closeIframe"},"*")},className:"border w-full border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-lg transition-colors"},"Decline"),c().createElement("button",{disabled:!h,onClick:async function(){if(0!==d){const e={message:"Confirm "+n+" Data Access",confirmations:N.current};try{window.top.postMessage({type:"dataRequestComplete",approved:N.current,message:e},"*"),window.postMessage({type:"dataRequestComplete",approved:N.current,message:e},"*")}catch(e){console.error("Error sending data request:",e),window.close()}}else window.close()},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},"Approve ",d>0&&"(".concat(d,")")))),c().createElement("div",{className:"space-y-3"},["Profile","User Memories"].map((e,t)=>{const o=e.toLowerCase().replace(" ","_"),a={type:e,descriptions:"Profile"===e?"Basic profile information and preferences":"Your personal context and memory data",reward:"Profile"===e?"Personalized experience":"Contextual understanding of your preferences"};return c().createElement(f,{key:o,active:!0,title:a.type,id:a,number:t,descriptions:a.descriptions,rewards:a.reward,size:o,changeGranted:O,onSelectionChange:e=>function(e,t,n,o,a,r){const c=new Date,l={requester:e,date:c.toISOString(),name:o,reward:a,data:t};r?(console.log("Adding connection: ".concat(JSON.stringify(l))),N.current.find(n=>n.requester===e&&n.data===t)||N.current.push(l)):(console.log("Removing connection for: ".concat(t)),N.current=N.current.filter(n=>!(n.requester===e&&n.data===t))),console.log("Current selected connections:",N.current)}(n,o,0,a.type,a.reward,e)})}),c().createElement("div",{className:"bg-white p-4 rounded-xl shadow-sm mt-4"},c().createElement("h3",{className:"text-sm font-semibold text-gray-700 mb-3"},"Your Connected Services"),c().createElement("div",{className:"flex items-center space-x-3"},y.map((e,t)=>c().createElement("div",{key:t,className:"flex flex-col items-center"},(e=>{switch(e){case"instagram":return c().createElement("div",{className:"w-10 h-10 rounded-full bg-linear-to-tr from-purple-500 via-pink-500 to-yellow-500 flex items-center justify-center"},c().createElement("span",{className:"text-white text-xs"},"IG"));case"youtube":return c().createElement("div",{className:"w-10 h-10 rounded-full bg-red-600 flex items-center justify-center"},c().createElement("span",{className:"text-white text-xs"},"YT"));case"email":return c().createElement("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center"},c().createElement("span",{className:"text-white text-xs"},"@"));default:return c().createElement("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center"},c().createElement("span",{className:"text-gray-600 text-xs"},e.charAt(0).toUpperCase()))}})(e),c().createElement("span",{className:"text-xs text-gray-600 mt-1"},e))))))))};let w=!1,y="",v=null,x=null;function E(){l.createRoot(document.getElementById("root")).render(c().createElement(h,{proofMode:w,domain:y,userSub:v,encryptedUserPin:x}))}return window.addEventListener("message",e=>{e.data&&"onairosButton"===e.data.source&&(w=e.data.proofMode||!1,y=e.data.domain||"",v=e.data.userSub||null,x=e.data.encryptedUserPin||null,E())}),window.parent.postMessage({source:"onairosIframe",action:"iframeReady"},"*"),E(),{}})());
//# sourceMappingURL=iframe.bundle.js.map