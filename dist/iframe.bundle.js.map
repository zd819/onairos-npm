{"version":3,"file":"iframe.bundle.js","mappings":"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","sources":["webpack://Onairos/webpack/universalModuleDefinition","webpack://Onairos/./node_modules/react-dom/client.js","webpack://Onairos/external umd {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"React\",\"root\":\"React\"}","webpack://Onairos/external umd {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"ReactDOM\",\"root\":\"ReactDOM\"}","webpack://Onairos/webpack/bootstrap","webpack://Onairos/webpack/runtime/compat get default export","webpack://Onairos/webpack/runtime/define property getters","webpack://Onairos/webpack/runtime/global","webpack://Onairos/webpack/runtime/hasOwnProperty shorthand","webpack://Onairos/webpack/runtime/make namespace object","webpack://Onairos/webpack/runtime/publicPath","webpack://Onairos/./src/components/UniversalOnboarding.jsx","webpack://Onairos/./src/iframe/components/Box.jsx","webpack://Onairos/./src/iframe/components/IndividualConnection.jsx","webpack://Onairos/./src/iframe/DataRequestPage.jsx","webpack://Onairos/./src/iframe/data_request_page.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Onairos\", [\"React\", \"ReactDOM\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Onairos\"] = factory(require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"Onairos\"] = factory(root[\"React\"], root[\"ReactDOM\"]);\n})(this, (__WEBPACK_EXTERNAL_MODULE__639__, __WEBPACK_EXTERNAL_MODULE__346__) => {\nreturn ","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__639__;","module.exports = __WEBPACK_EXTERNAL_MODULE__346__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","import React, { useState, useEffect } from 'react';\r\n\r\nconst platforms = [\r\n  { name: 'YouTube', icon: '📺', color: 'bg-red-500', connector: 'youtube' },\r\n  { name: 'LinkedIn', icon: '💼', color: 'bg-blue-700', connector: 'linkedin' },\r\n  { name: 'Reddit', icon: '🔥', color: 'bg-orange-500', connector: 'reddit' },\r\n  { name: 'Pinterest', icon: '📌', color: 'bg-red-600', connector: 'pinterest' },\r\n  { name: 'Instagram', icon: '📷', color: 'bg-pink-500', connector: 'instagram' },\r\n  { name: 'GitHub', icon: '⚡', color: 'bg-gray-800', connector: 'github' },\r\n  { name: 'Facebook', icon: '👥', color: 'bg-blue-600', connector: 'facebook' },\r\n  { name: 'Gmail', icon: '✉️', color: 'bg-red-400', connector: 'gmail' }\r\n];\r\n\r\n// Enhanced SDK configuration\r\nconst sdkConfig = {\r\n  apiKey: process.env.REACT_APP_ONAIROS_API_KEY || 'onairos_web_sdk_live_key_2024',\r\n  baseUrl: process.env.REACT_APP_ONAIROS_BASE_URL || 'https://api2.onairos.uk',\r\n  sdkType: 'web', // web, mobile, desktop\r\n  enableHealthMonitoring: true,\r\n  enableAutoRefresh: true,\r\n  enableConnectionValidation: true\r\n};\r\n\r\n/**\r\n * UniversalOnboarding Component - Compact & Enhanced\r\n * Displays a streamlined onboarding screen for data connections\r\n */\r\nexport default function UniversalOnboarding({ onComplete, appIcon, appName = 'App' }) {\r\n  const [connectedAccounts, setConnectedAccounts] = useState({});\r\n  const [isConnecting, setIsConnecting] = useState(false);\r\n  const [connectingPlatform, setConnectingPlatform] = useState(null);\r\n  const [connectionErrors, setConnectionErrors] = useState({});\r\n  const [connectionHealth, setConnectionHealth] = useState({});\r\n  const [healthScore, setHealthScore] = useState(0);\r\n\r\n  // Mobile device detection\r\n  const isMobileDevice = () => {\r\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\r\n           (window.innerWidth <= 768);\r\n  };\r\n\r\n  // Handle mobile OAuth return\r\n  useEffect(() => {\r\n    const handleOAuthReturn = () => {\r\n      const platform = localStorage.getItem('onairos_oauth_platform');\r\n      if (platform) {\r\n        console.log(`📱 OAuth return detected for: ${platform}`);\r\n        \r\n        // Clear OAuth state\r\n        localStorage.removeItem('onairos_oauth_platform');\r\n        localStorage.removeItem('onairos_oauth_return');\r\n        \r\n        // Mark as connected\r\n        setConnectedAccounts(prev => ({\r\n          ...prev,\r\n          [platform]: true\r\n        }));\r\n        \r\n        // Clear any errors\r\n        setConnectionErrors(prev => ({\r\n          ...prev,\r\n          [platform]: null\r\n        }));\r\n        \r\n        console.log(`✅ ${platform} marked as connected from OAuth return`);\r\n      }\r\n    };\r\n\r\n    handleOAuthReturn();\r\n  }, []);\r\n\r\n  const connectToPlatform = async (platformName) => {\r\n    console.log(`🚀 connectToPlatform called for: ${platformName}`);\r\n    \r\n    const platform = platforms.find(p => p.name === platformName);\r\n    if (!platform?.connector) {\r\n      console.error(`❌ No connector found for platform: ${platformName}`);\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      setIsConnecting(true);\r\n      setConnectingPlatform(platformName);\r\n      \r\n      // Clear any previous errors\r\n      setConnectionErrors(prev => ({\r\n        ...prev,\r\n        [platformName]: null\r\n      }));\r\n      \r\n      console.log(`🔗 Starting OAuth connection for ${platformName}...`);\r\n      \r\n      const username = localStorage.getItem('username') || localStorage.getItem('onairosUser')?.email || 'user@example.com';\r\n      \r\n      // Enhanced authorize endpoint with SDK type\r\n      const authorizeUrl = `${sdkConfig.baseUrl}/${platform.connector}/authorize`;\r\n      \r\n      const response = await fetch(authorizeUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'x-api-key': sdkConfig.apiKey,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          session: {\r\n            username: username\r\n          }\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n\r\n             const responseData = await response.json();\r\n       console.log(`📋 ${platformName} OAuth response:`, responseData);\r\n       \r\n       // Check for platform-specific URL keys with multiple fallbacks\r\n       const platformUrlKeys = {\r\n         'youtube': ['youtubeURL', 'youtubeUrl', 'youtube_url'],\r\n         'linkedin': ['linkedinURL', 'linkedinUrl', 'linkedin_url'], \r\n         'reddit': ['redditURL', 'redditUrl', 'reddit_url'],\r\n         'pinterest': ['pinterestURL', 'pinterestUrl', 'pinterest_url'],\r\n         'instagram': ['instagramURL', 'instagramUrl', 'instagram_url'],\r\n         'github': ['githubURL', 'githubUrl', 'github_url'],\r\n         'facebook': ['facebookURL', 'facebookUrl', 'facebook_url'],\r\n         'gmail': ['gmailURL', 'gmailUrl', 'gmail_url']\r\n       };\r\n       \r\n       const possibleKeys = platformUrlKeys[platform.connector] || [\r\n         `${platform.connector}URL`,\r\n         `${platform.connector}Url`, \r\n         `${platform.connector}_url`,\r\n         'platformURL',\r\n         'authUrl', \r\n         'url'\r\n       ];\r\n       \r\n       let oauthUrl = null;\r\n       let usedKey = null;\r\n       \r\n       // Try each possible key\r\n       for (const key of possibleKeys) {\r\n         if (responseData[key]) {\r\n           oauthUrl = responseData[key];\r\n           usedKey = key;\r\n           break;\r\n         }\r\n       }\r\n       \r\n       if (!oauthUrl) {\r\n         console.error(`❌ No OAuth URL found for ${platformName}:`);\r\n         console.error(`Expected one of:`, possibleKeys);\r\n         console.error(`Response keys:`, Object.keys(responseData));\r\n         console.error(`Full response:`, responseData);\r\n         throw new Error(`No OAuth URL found. Backend should return one of: ${possibleKeys.join(', ')}`);\r\n       }\r\n       \r\n       console.log(`✅ Found OAuth URL for ${platformName} using key: ${usedKey}`);\r\n        \r\n      if (isMobileDevice()) {\r\n        // Mobile: Use redirect flow\r\n        localStorage.setItem('onairos_oauth_platform', platformName);\r\n        localStorage.setItem('onairos_oauth_return', window.location.href);\r\n        window.location.href = oauthUrl;\r\n        return true;\r\n      } else {\r\n        // Desktop: Use popup flow with enhanced monitoring\r\n        const popup = window.open(\r\n          oauthUrl,\r\n          `${platform.connector}_oauth`,\r\n          'width=500,height=600,scrollbars=yes,resizable=yes,status=no,location=no,toolbar=no,menubar=no'\r\n        );\r\n        \r\n        if (!popup) {\r\n          throw new Error('Popup blocked. Please allow popups and try again.');\r\n        }\r\n\r\n                 // Enhanced popup monitoring with onairos.uk detection\r\n         let hasNavigatedToOnairos = false;\r\n         const checkInterval = setInterval(() => {\r\n           try {\r\n             // Try to detect if popup has navigated to onairos.uk (indicates success)\r\n             if (popup.location && popup.location.hostname === 'onairos.uk') {\r\n               hasNavigatedToOnairos = true;\r\n               console.log(`🔄 ${platformName} popup navigated to onairos.uk - treating as success`);\r\n               \r\n               // Close the popup since it shows \"not found\"\r\n               popup.close();\r\n               return; // Let the popup.closed check handle the rest\r\n             }\r\n           } catch (e) {\r\n             // Cross-origin error is expected when popup navigates to onairos.uk\r\n             // This actually indicates the OAuth likely succeeded\r\n             if (!hasNavigatedToOnairos) {\r\n               hasNavigatedToOnairos = true;\r\n               console.log(`🔄 ${platformName} popup navigated (cross-origin) - likely to onairos.uk`);\r\n             }\r\n           }\r\n           \r\n           try {\r\n             // Check if popup is closed\r\n             if (popup.closed) {\r\n               clearInterval(checkInterval);\r\n               \r\n               // Check for success or error signals from callback page\r\n               const successFlag = localStorage.getItem(`onairos_${platformName}_success`);\r\n               const errorFlag = localStorage.getItem(`onairos_${platformName}_error`);\r\n               const timestamp = localStorage.getItem(`onairos_${platformName}_timestamp`);\r\n               \r\n               // Only process recent signals (within 30 seconds)\r\n               const isRecentSignal = timestamp && (Date.now() - parseInt(timestamp) < 30000);\r\n               \r\n               if (successFlag && isRecentSignal) {\r\n                 // Success flow from callback page\r\n                 console.log(`✅ ${platformName} OAuth completed successfully (callback page)`);\r\n                 localStorage.removeItem(`onairos_${platformName}_success`);\r\n                 localStorage.removeItem(`onairos_${platformName}_timestamp`);\r\n                 \r\n                 setConnectedAccounts(prev => ({\r\n                   ...prev,\r\n                   [platformName]: true\r\n                 }));\r\n                 setConnectionErrors(prev => ({\r\n                   ...prev,\r\n                   [platformName]: null\r\n                 }));\r\n                 \r\n               } else if (errorFlag && isRecentSignal) {\r\n                 // Error flow from callback page\r\n                 console.log(`❌ ${platformName} OAuth failed:`, errorFlag);\r\n                 localStorage.removeItem(`onairos_${platformName}_error`);\r\n                 localStorage.removeItem(`onairos_${platformName}_timestamp`);\r\n                 \r\n                 setConnectionErrors(prev => ({\r\n                   ...prev,\r\n                   [platformName]: errorFlag\r\n                 }));\r\n                 \r\n               } else if (hasNavigatedToOnairos) {\r\n                 // Popup navigated to onairos.uk - assume success\r\n                 console.log(`✅ ${platformName} OAuth likely successful (navigated to onairos.uk)`);\r\n                 setConnectedAccounts(prev => ({\r\n                   ...prev,\r\n                   [platformName]: true\r\n                 }));\r\n                 setConnectionErrors(prev => ({\r\n                   ...prev,\r\n                   [platformName]: null\r\n                 }));\r\n                 \r\n               } else {\r\n                 // No signal and no onairos navigation - assume user cancelled\r\n                 console.log(`⚠️ ${platformName} OAuth cancelled or no response`);\r\n                 setConnectionErrors(prev => ({\r\n                   ...prev,\r\n                   [platformName]: 'Connection was cancelled'\r\n                 }));\r\n               }\r\n               \r\n               setIsConnecting(false);\r\n               setConnectingPlatform(null);\r\n             }\r\n           } catch (error) {\r\n             // Cross-origin error when popup navigates away - this is normal\r\n             // console.log(`🔄 Popup navigated away for ${platformName}`);\r\n           }\r\n         }, 1000);\r\n\r\n                 // Auto-close popup if it shows onairos.uk \"not found\" page after 10 seconds\r\n         setTimeout(() => {\r\n           try {\r\n             if (!popup.closed && popup.location && popup.location.hostname === 'onairos.uk') {\r\n               console.log(`🚪 Auto-closing ${platformName} popup showing onairos.uk (not found)`);\r\n               popup.close();\r\n             }\r\n           } catch (e) {\r\n             // Cross-origin error is expected - try to close anyway if it's been 10 seconds\r\n             if (!popup.closed && hasNavigatedToOnairos) {\r\n               console.log(`🚪 Auto-closing ${platformName} popup (cross-origin, likely onairos.uk)`);\r\n               popup.close();\r\n             }\r\n           }\r\n         }, 10000);\r\n\r\n         // Final timeout after 5 minutes\r\n         setTimeout(() => {\r\n           if (!popup.closed) {\r\n             popup.close();\r\n             clearInterval(checkInterval);\r\n             setConnectionErrors(prev => ({\r\n               ...prev,\r\n               [platformName]: 'Connection timeout'\r\n             }));\r\n             setIsConnecting(false);\r\n             setConnectingPlatform(null);\r\n           }\r\n         }, 300000);\r\n\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error(`❌ Error connecting to ${platformName}:`, error);\r\n      setConnectionErrors(prev => ({\r\n        ...prev,\r\n        [platformName]: error.message\r\n      }));\r\n      setIsConnecting(false);\r\n      setConnectingPlatform(null);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleToggle = async (platformName) => {\r\n    console.log(`🔥 TOGGLE CLICKED: ${platformName}`);\r\n    \r\n    if (isConnecting && connectingPlatform !== platformName) {\r\n      console.log(`⚠️ Already connecting to ${connectingPlatform}, ignoring click on ${platformName}`);\r\n      return;\r\n    }\r\n    \r\n    const isConnected = connectedAccounts[platformName];\r\n    \r\n    if (isConnected) {\r\n      // Disconnect\r\n      console.log(`🔌 Disconnecting from ${platformName}...`);\r\n      setConnectedAccounts(prev => ({\r\n        ...prev,\r\n        [platformName]: false\r\n      }));\r\n      setConnectionErrors(prev => ({\r\n        ...prev,\r\n        [platformName]: null\r\n      }));\r\n    } else {\r\n      // Connect\r\n      await connectToPlatform(platformName);\r\n    }\r\n  };\r\n\r\n  const handleContinue = () => {\r\n    const connected = Object.entries(connectedAccounts)\r\n      .filter(([platform, isConnected]) => isConnected)\r\n      .map(([platform]) => platform);\r\n    \r\n    onComplete({\r\n      connectedAccounts: connected,\r\n      totalConnections: connected.length,\r\n      healthScore: healthScore,\r\n      connectionHealth: connectionHealth,\r\n      sdkVersion: '2.1.7',\r\n      enhancedFeatures: {\r\n        healthMonitoring: sdkConfig.enableHealthMonitoring,\r\n        autoRefresh: sdkConfig.enableAutoRefresh,\r\n        connectionValidation: sdkConfig.enableConnectionValidation\r\n      }\r\n    });\r\n  };\r\n\r\n  const connectedCount = Object.values(connectedAccounts).filter(Boolean).length;\r\n\r\n  return (\r\n    <div className=\"max-w-sm mx-auto bg-white p-4 rounded-lg shadow-lg\">\r\n      {/* Compact Header */}\r\n      <div className=\"flex items-center justify-center mb-4\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <img \r\n            src={appIcon || \"https://onairos.sirv.com/Images/OnairosBlack.png\"} \r\n            alt={appName} \r\n            className=\"w-8 h-8 rounded-lg\"\r\n          />\r\n          <div className=\"flex items-center text-gray-400\">\r\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n            </svg>\r\n          </div>\r\n          <img \r\n            src=\"https://onairos.sirv.com/Images/OnairosBlack.png\" \r\n            alt=\"Onairos\" \r\n            className=\"w-8 h-8 rounded-lg\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Simple Clear Title */}\r\n      <div className=\"text-center mb-4\">\r\n        <h2 className=\"text-lg font-bold text-gray-900 mb-1\">Connect Data</h2>\r\n        <p className=\"text-gray-600 text-sm\">\r\n          Connect data here to enhance your {appName} experience\r\n        </p>\r\n      </div>\r\n\r\n      {/* Compact Platform Grid */}\r\n      <div className=\"grid grid-cols-2 gap-3 mb-4\">\r\n        {platforms.map((platform) => {\r\n          const isConnected = connectedAccounts[platform.name] || false;\r\n          const isCurrentlyConnecting = connectingPlatform === platform.name;\r\n          const hasError = connectionErrors[platform.name];\r\n          const isDisabled = isConnecting && !isCurrentlyConnecting;\r\n          \r\n          return (\r\n            <div \r\n              key={platform.name}\r\n              className={`relative p-3 border-2 rounded-lg transition-all duration-200 cursor-pointer ${\r\n                isDisabled ? 'opacity-50 cursor-not-allowed' : 'hover:shadow-md'\r\n              } ${\r\n                isConnected ? 'border-green-400 bg-green-50' : \r\n                hasError ? 'border-red-400 bg-red-50' :\r\n                isCurrentlyConnecting ? 'border-blue-400 bg-blue-50' : \r\n                'border-gray-200 bg-white hover:border-gray-300'\r\n              }`}\r\n              onClick={() => !isDisabled && handleToggle(platform.name)}\r\n            >\r\n              {/* Platform Icon */}\r\n              <div className={`w-8 h-8 rounded-lg ${platform.color} flex items-center justify-center text-white text-lg mb-2 mx-auto relative`}>\r\n                {isCurrentlyConnecting ? (\r\n                  <div className=\"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent\"></div>\r\n                ) : (\r\n                  platform.icon\r\n                )}\r\n                \r\n                {/* Connection Status Indicator */}\r\n                {isConnected && !isCurrentlyConnecting && (\r\n                  <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center\">\r\n                    <svg className=\"w-2.5 h-2.5 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                      <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\r\n                    </svg>\r\n                  </div>\r\n                )}\r\n                \r\n                {hasError && !isCurrentlyConnecting && (\r\n                  <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center\">\r\n                    <svg className=\"w-2.5 h-2.5 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                      <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\r\n                    </svg>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              \r\n              {/* Platform Name */}\r\n              <div className=\"text-center\">\r\n                <h3 className=\"font-medium text-gray-900 text-xs\">{platform.name}</h3>\r\n                <p className={`text-xs mt-1 ${\r\n                  isCurrentlyConnecting ? 'text-blue-600' : \r\n                  isConnected ? 'text-green-600' : \r\n                  hasError ? 'text-red-600' :\r\n                  'text-gray-500'\r\n                }`}>\r\n                  {isCurrentlyConnecting ? 'Connecting...' : \r\n                   isConnected ? 'Connected' : \r\n                   hasError ? 'Failed' :\r\n                   'Tap to connect'}\r\n                </p>\r\n                \r\n                {/* Error Message */}\r\n                {hasError && (\r\n                  <p className=\"text-xs text-red-600 mt-1 break-words\">\r\n                    {hasError}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Connection Status Summary */}\r\n      {connectedCount > 0 && (\r\n        <div className=\"mb-4 p-2 bg-green-50 border border-green-200 rounded-lg\">\r\n          <p className=\"text-green-800 text-sm text-center\">\r\n            ✅ {connectedCount} connection{connectedCount > 1 ? 's' : ''} active\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Continue Button */}\r\n      <button\r\n        onClick={handleContinue}\r\n        disabled={connectedCount === 0}\r\n        className={`w-full py-3 px-4 rounded-lg font-semibold transition-colors ${\r\n          connectedCount > 0\r\n            ? 'bg-blue-600 text-white hover:bg-blue-700'\r\n            : 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n        }`}\r\n      >\r\n        {connectedCount > 0 ? `Continue with ${connectedCount} connection${connectedCount > 1 ? 's' : ''}` : 'Connect at least one platform'}\r\n      </button>\r\n\r\n      {/* Skip Option */}\r\n      <button\r\n        onClick={() => onComplete({ connectedAccounts: [], totalConnections: 0 })}\r\n        className=\"w-full mt-2 py-2 text-gray-500 hover:text-gray-700 text-sm\"\r\n      >\r\n        Skip for now\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\n\n/**\n * Box Component\n * Displays a checkbox item for data access requests\n */\nconst Box = (props) => {\n  const handleChange = (e) => {\n    const checked = e.target.checked;\n    console.log(`Checkbox ${props.title} is now: ${checked ? 'checked' : 'unchecked'}`);\n    if (checked) {\n      props.setSelected(true);\n      props.changeGranted(1);\n    } else {\n      props.setSelected(false);\n      props.changeGranted(-1);\n    }\n    \n    props.onSelectionChange(checked);\n  };\n\n  return (\n    <div className=\"relative inline-flex items-center\">\n      <input\n        type=\"checkbox\"\n        id={`request-${props.number}`}\n        disabled={!props.active}\n        onChange={handleChange}\n        className={`\n          appearance-none w-5 h-5 border rounded\n          ${!props.active ? 'border-gray-300 bg-gray-100 cursor-not-allowed' : 'border-blue-500 cursor-pointer'}\n          checked:bg-blue-600 checked:border-blue-600\n          focus:outline-none focus:ring-2 focus:ring-blue-500/30\n          transition-colors\n        `}\n      />\n      <svg \n        className=\"absolute left-0.5 top-0.5 w-4 h-4 text-white pointer-events-none opacity-0 peer-checked:opacity-100\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        viewBox=\"0 0 24 24\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"3\" d=\"M5 13l4 4L19 7\"></path>\n      </svg>\n      \n      {!props.active && (\n        <span className=\"ml-2 text-xs text-red-500 font-medium\">\n          Not available\n        </span>\n      )}\n    </div>\n  );\n};\n\nexport default Box;\n","import React, { useState } from 'react';\nimport Box from './Box';\n\n/**\n * IndividualConnection Component\n * Displays a card for each data connection request\n */\nfunction IndividualConnection(props) {\n  const [selected, setSelected] = useState(false);\n\n  const handleSelectionChange = (isSelected) => {\n    setSelected(isSelected);\n    props.onSelectionChange(isSelected);\n  };\n\n  // Get icon based on data type\n  const getDataTypeIcon = () => {\n    switch(props.title) {\n      case \"Profile\":\n        return (\n          <div className=\"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 text-blue-600\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path fillRule=\"evenodd\" d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\" clipRule=\"evenodd\" />\n            </svg>\n          </div>\n        );\n      case \"User Memories\":\n        return (\n          <div className=\"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 text-purple-600\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path d=\"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z\" />\n            </svg>\n          </div>\n        );\n      default:\n        return (\n          <div className=\"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 text-gray-600\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z\" clipRule=\"evenodd\" />\n            </svg>\n          </div>\n        );\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-sm hover:shadow-md transition-all overflow-hidden\">\n      <div className=\"p-5\">\n        <div className=\"flex items-start space-x-4\">\n          {getDataTypeIcon()}\n          <div className=\"flex-1\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"font-medium text-gray-800\">{props.title}</h3>\n              <Box\n                active={props.active}\n                onSelectionChange={handleSelectionChange}\n                changeGranted={props.changeGranted}\n                setSelected={setSelected}\n                number={props.number + 1}\n                type={\"Test\"}\n                title={props.title}\n              />\n            </div>\n            \n            {props.descriptions && (\n              <div className=\"mt-2\">\n                <p className=\"text-sm text-gray-600\">{props.descriptions}</p>\n              </div>\n            )}\n          </div>\n        </div>\n        \n        {props.rewards && (\n          <div className=\"mt-3 pt-3 border-t border-gray-100\">\n            <div className=\"flex items-center\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 text-yellow-500 mr-2\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fillRule=\"evenodd\" d=\"M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z\" clipRule=\"evenodd\" />\n              </svg>\n              <span className=\"text-xs text-gray-500\">Benefit: <span className=\"text-gray-700\">{props.rewards}</span></span>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default IndividualConnection;\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport UniversalOnboarding from '../components/UniversalOnboarding.jsx';\r\nimport IndividualConnection from './components/IndividualConnection';\r\nimport onairosLogo from './icons/onairos_logo.png';\r\n\r\n/**\r\n * DataRequestPage Component\r\n * Displays different data requests and handles user interactions\r\n */\r\nconst DataRequestPage = ({ requestData = {}, dataRequester = 'App', proofMode = false, domain = '', appIcon = '' }) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeModels, setActiveModels] = useState([]);\r\n  const [granted, setGranted] = useState(0);\r\n  const [allowSubmit, setAllowSubmit] = useState(false);\r\n  const [userConnections, setUserConnections] = useState(['instagram', 'youtube', 'email']);\r\n  const [selectedRequests, setSelectedRequests] = useState({});\r\n  const selectedConnections = useRef([]);\r\n  const userSub = useRef(null);\r\n  const encryptedUserPin = useRef(null);\r\n\r\n  // Update allowSubmit when granted changes\r\n  useEffect(() => {\r\n    if (granted > 0) {\r\n      setAllowSubmit(true);\r\n    } else {\r\n      setAllowSubmit(false);\r\n    }\r\n  }, [granted]);\r\n\r\n  // Simulate loading data\r\n  useEffect(() => {\r\n    // In a real implementation, this would fetch active models from a service\r\n    const loadData = async () => {\r\n      try {\r\n        // Simulate API call\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        \r\n        // Sample active models - this would come from your backend\r\n        setActiveModels(['Profile', 'User Memories']);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error('Error loading data:', error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    loadData();\r\n\r\n    // Message handler to receive data from parent window\r\n    const handleMessage = (event) => {\r\n      if (event.data && event.data.type === 'dataRequest') {\r\n        // Process received data\r\n        if (event.data.requestData) {\r\n          // Update request data state\r\n        }\r\n        if (event.data.activeModels) {\r\n          setActiveModels(event.data.activeModels);\r\n        }\r\n        if (event.data.userSub) {\r\n          userSub.current = event.data.userSub;\r\n        }\r\n        if (event.data.encryptedUserPin) {\r\n          encryptedUserPin.current = event.data.encryptedUserPin;\r\n        }\r\n      }\r\n    };\r\n\r\n    // Add message listener\r\n    window.addEventListener('message', handleMessage);\r\n    \r\n    // Clean up listener\r\n    return () => {\r\n      window.removeEventListener('message', handleMessage);\r\n    };\r\n  }, []);\r\n\r\n  /**\r\n   * Reject all data requests\r\n   */\r\n  async function rejectDataRequest() {\r\n    window.top.postMessage({type: 'closeIframe'}, '*');\r\n    window.postMessage({type: 'closeIframe'}, '*');\r\n  }\r\n\r\n  /**\r\n   * Send the selected data requests to the parent window\r\n   */\r\n  async function sendDataRequest() {\r\n    if (granted === 0) {\r\n      window.close();\r\n      return;\r\n    } else {\r\n      const SignMessage = {\r\n        message: 'Confirm ' + dataRequester + ' Data Access',\r\n        confirmations: selectedConnections.current\r\n      };\r\n      \r\n      // Send simplified response\r\n      try {\r\n        window.top.postMessage({\r\n          type: 'dataRequestComplete',\r\n          approved: selectedConnections.current,\r\n          message: SignMessage\r\n        }, '*');\r\n        \r\n        window.postMessage({\r\n          type: 'dataRequestComplete',\r\n          approved: selectedConnections.current,\r\n          message: SignMessage\r\n        }, '*');\r\n      } catch (error) {\r\n        console.error(\"Error sending data request:\", error);\r\n        window.close();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update the granted count\r\n   */\r\n  function changeGranted(plusMinus) {\r\n    setGranted(granted + plusMinus);\r\n  }\r\n\r\n  /**\r\n   * Handle selection of a connection/data request\r\n   */\r\n  function handleConnectionSelection(dataRequester, modelType, index, title, reward, isSelected) {\r\n    const newDate = new Date();\r\n    const newConnection = {\r\n      requester: dataRequester,\r\n      date: newDate.toISOString(),\r\n      name: title,\r\n      reward: reward,\r\n      data: modelType\r\n    };\r\n\r\n    if (isSelected) {\r\n      console.log(`Adding connection: ${JSON.stringify(newConnection)}`);\r\n      if (!selectedConnections.current.find(connection => connection.requester === dataRequester && connection.data === modelType)) {\r\n        selectedConnections.current.push(newConnection);\r\n      }\r\n    } else {\r\n      console.log(`Removing connection for: ${modelType}`);\r\n      selectedConnections.current = selectedConnections.current.filter(\r\n        connection => !(connection.requester === dataRequester && connection.data === modelType)\r\n      );\r\n    }\r\n\r\n    console.log('Current selected connections:', selectedConnections.current);\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100\">\r\n      {loading ? (\r\n        <div className=\"flex items-center justify-center min-h-screen\">\r\n          <div className=\"animate-spin h-8 w-8 border-2 border-blue-600 rounded-full border-t-transparent\"></div>\r\n        </div>\r\n      ) : activeModels.length === 0 ? (\r\n        <UniversalOnboarding \r\n          appIcon=\"https://onairos.sirv.com/Images/OnairosBlack.png\" \r\n          appName={dataRequester}\r\n          username={localStorage.getItem(\"username\")}\r\n        />\r\n      ) : (\r\n        <div className=\"max-w-md mx-auto p-6 space-y-4\">\r\n          <header className=\"bg-white p-6 rounded-xl shadow-md\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <img src={onairosLogo} alt=\"Onairos Logo\" className=\"w-8 h-8\" />\r\n                <div className=\"text-gray-400 mx-2\">→</div>\r\n                {appIcon ? (\r\n                  <img src={appIcon} alt={`${dataRequester} Logo`} className=\"w-8 h-8 rounded-full\" />\r\n                ) : (\r\n                  <div className=\"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center\">\r\n                    <span className=\"text-gray-600 text-xs font-bold\">{dataRequester.charAt(0)}</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <h2 className=\"text-lg font-bold text-gray-800\">{dataRequester}</h2>\r\n            </div>\r\n            \r\n            <h1 className=\"text-xl font-bold text-gray-800 mb-4\">Data Access Request</h1>\r\n            <p className=\"text-gray-600 mb-6\">Select the data you want to share with {dataRequester}</p>\r\n            \r\n            <div className=\"flex items-center justify-between gap-4\">\r\n              <button\r\n                onClick={rejectDataRequest}\r\n                className=\"border w-full border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-lg transition-colors\"\r\n              >\r\n                Decline\r\n              </button>\r\n              <button\r\n                disabled={!allowSubmit}\r\n                onClick={sendDataRequest}\r\n                className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                Approve {granted > 0 && `(${granted})`}\r\n              </button>\r\n            </div>\r\n          </header>\r\n\r\n          <div className=\"space-y-3\">\r\n            {/* Only show Profile and User Memories */}\r\n            {['Profile', 'User Memories'].map((dataType, index) => {\r\n              const key = dataType.toLowerCase().replace(' ', '_');\r\n              const product = {\r\n                type: dataType,\r\n                descriptions: dataType === 'Profile' ? \r\n                  'Basic profile information and preferences' : \r\n                  'Your personal context and memory data',\r\n                reward: dataType === 'Profile' ? \r\n                  'Personalized experience' : \r\n                  'Contextual understanding of your preferences'\r\n              };\r\n              \r\n              return (\r\n                <IndividualConnection\r\n                  key={key}\r\n                  active={true}\r\n                  title={product.type}\r\n                  id={product}\r\n                  number={index}\r\n                  descriptions={product.descriptions}\r\n                  rewards={product.reward}\r\n                  size={key}\r\n                  changeGranted={changeGranted}\r\n                  onSelectionChange={(isSelected) =>\r\n                    handleConnectionSelection(dataRequester, key, index, product.type, product.reward, isSelected)\r\n                  }\r\n                />\r\n              );\r\n            })}\r\n            \r\n            {/* User Connections Section */}\r\n            <div className=\"bg-white p-4 rounded-xl shadow-sm mt-4\">\r\n              <h3 className=\"text-sm font-semibold text-gray-700 mb-3\">Your Connected Services</h3>\r\n              <div className=\"flex items-center space-x-3\">\r\n                {userConnections.map((connection, index) => {\r\n                  const getConnectionIcon = (type) => {\r\n                    switch(type) {\r\n                      case 'instagram':\r\n                        return (\r\n                          <div className=\"w-10 h-10 rounded-full bg-linear-to-tr from-purple-500 via-pink-500 to-yellow-500 flex items-center justify-center\">\r\n                            <span className=\"text-white text-xs\">IG</span>\r\n                          </div>\r\n                        );\r\n                      case 'youtube':\r\n                        return (\r\n                          <div className=\"w-10 h-10 rounded-full bg-red-600 flex items-center justify-center\">\r\n                            <span className=\"text-white text-xs\">YT</span>\r\n                          </div>\r\n                        );\r\n                      case 'email':\r\n                        return (\r\n                          <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center\">\r\n                            <span className=\"text-white text-xs\">@</span>\r\n                          </div>\r\n                        );\r\n                      default:\r\n                        return (\r\n                          <div className=\"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center\">\r\n                            <span className=\"text-gray-600 text-xs\">{type.charAt(0).toUpperCase()}</span>\r\n                          </div>\r\n                        );\r\n                    }\r\n                  };\r\n                  \r\n                  return (\r\n                    <div key={index} className=\"flex flex-col items-center\">\r\n                      {getConnectionIcon(connection)}\r\n                      <span className=\"text-xs text-gray-600 mt-1\">{connection}</span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DataRequestPage;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport DataRequestPage from './DataRequestPage.jsx';\n\n// Global variables to store data from parent window\nlet proofMode = false;\nlet domain = '';\nlet userSub = null;\nlet encryptedUserPin = null;\n\n// Handle messages from the parent window\nwindow.addEventListener('message', (event) => {\n  // Verify the sender origin if needed\n  // if (event.origin !== 'expected-origin') return;\n  \n  if (event.data && event.data.source === 'onairosButton') {\n    proofMode = event.data.proofMode || false;\n    domain = event.data.domain || '';\n    userSub = event.data.userSub || null;\n    encryptedUserPin = event.data.encryptedUserPin || null;\n    \n    // Re-render with the new data\n    renderApp();\n  }\n});\n\n// Notify the parent window that the iframe is ready\nwindow.parent.postMessage({\n  source: 'onairosIframe',\n  action: 'iframeReady'\n}, '*');\n\n// Function to render the React app\nfunction renderApp() {\n  const root = ReactDOM.createRoot(document.getElementById('root'));\n  root.render(\n    <DataRequestPage \n      proofMode={proofMode}\n      domain={domain}\n      userSub={userSub}\n      encryptedUserPin={encryptedUserPin}\n    />\n  );\n}\n\n// Initial render\nrenderApp();\n"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__639__","__WEBPACK_EXTERNAL_MODULE__346__","m","createRoot","hydrateRoot","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","g","globalThis","Function","e","window","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","length","i","Error","replace","p","platforms","name","icon","color","connector","sdkConfig","apiKey","process","env","REACT_APP_ONAIROS_API_KEY","baseUrl","REACT_APP_ONAIROS_BASE_URL","sdkType","enableHealthMonitoring","enableAutoRefresh","enableConnectionValidation","UniversalOnboarding","_ref","onComplete","appIcon","appName","connectedAccounts","setConnectedAccounts","useState","isConnecting","setIsConnecting","connectingPlatform","setConnectingPlatform","connectionErrors","setConnectionErrors","connectionHealth","setConnectionHealth","healthScore","setHealthScore","useEffect","handleOAuthReturn","platform","localStorage","getItem","console","log","concat","removeItem","prev","_objectSpread","connectToPlatform","async","platformName","find","error","_localStorage$getItem","username","email","authorizeUrl","response","fetch","method","headers","body","JSON","stringify","session","ok","status","statusText","responseData","json","possibleKeys","oauthUrl","usedKey","keys","join","test","navigator","userAgent","innerWidth","setItem","href","popup","open","hasNavigatedToOnairos","checkInterval","setInterval","hostname","close","closed","clearInterval","successFlag","errorFlag","timestamp","isRecentSignal","Date","now","parseInt","setTimeout","message","connectedCount","values","filter","Boolean","React","className","alt","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","map","isConnected","isCurrentlyConnecting","hasError","isDisabled","onClick","handleToggle","fillRule","clipRule","handleContinue","connected","entries","_ref2","_ref3","totalConnections","sdkVersion","enhancedFeatures","healthMonitoring","autoRefresh","connectionValidation","disabled","props","type","id","number","active","onChange","checked","target","title","setSelected","changeGranted","onSelectionChange","xmlns","selected","getDataTypeIcon","Box","isSelected","descriptions","rewards","requestData","dataRequester","proofMode","domain","loading","setLoading","activeModels","setActiveModels","granted","setGranted","allowSubmit","setAllowSubmit","userConnections","setUserConnections","selectedRequests","setSelectedRequests","selectedConnections","useRef","userSub","encryptedUserPin","plusMinus","Promise","resolve","loadData","handleMessage","event","data","current","addEventListener","removeEventListener","onairosLogo","charAt","top","postMessage","SignMessage","confirmations","approved","dataType","index","toLowerCase","product","reward","IndividualConnection","size","modelType","newDate","newConnection","requester","date","toISOString","connection","push","handleConnectionSelection","toUpperCase","getConnectionIcon","renderApp","ReactDOM","getElementById","render","DataRequestPage","source","parent","action"],"sourceRoot":""}