{"version":3,"file":"onairos.bundle.js","mappings":"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","sources":["webpack://Onairos/webpack/universalModuleDefinition","webpack://Onairos/./node_modules/lottie-react/build/index.umd.js","webpack://Onairos/./node_modules/lottie-web/build/player/lottie.js","webpack://Onairos/external umd \"@capacitor/browser\"","webpack://Onairos/external umd \"@capacitor/core\"","webpack://Onairos/external umd {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"React\",\"root\":\"React\"}","webpack://Onairos/external umd {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"ReactDOM\",\"root\":\"ReactDOM\"}","webpack://Onairos/webpack/bootstrap","webpack://Onairos/webpack/runtime/load script","webpack://Onairos/webpack/runtime/amd options","webpack://Onairos/webpack/runtime/compat get default export","webpack://Onairos/webpack/runtime/define property getters","webpack://Onairos/webpack/runtime/ensure chunk","webpack://Onairos/webpack/runtime/get javascript chunk filename","webpack://Onairos/webpack/runtime/global","webpack://Onairos/webpack/runtime/hasOwnProperty shorthand","webpack://Onairos/webpack/runtime/make namespace object","webpack://Onairos/webpack/runtime/publicPath","webpack://Onairos/webpack/runtime/jsonp chunk loading","webpack://Onairos/./node_modules/@react-oauth/google/dist/index.esm.js","webpack://Onairos/./node_modules/@capacitor/app/dist/esm/index.js","webpack://Onairos/./src/components/WelcomeScreen.jsx","webpack://Onairos/./node_modules/lucide-react/dist/esm/shared/src/utils.js","webpack://Onairos/./node_modules/lucide-react/dist/esm/defaultAttributes.js","webpack://Onairos/./node_modules/lucide-react/dist/esm/Icon.js","webpack://Onairos/./node_modules/lucide-react/dist/esm/icons/check.js","webpack://Onairos/./node_modules/lucide-react/dist/esm/createLucideIcon.js","webpack://Onairos/./src/theme/colors.js","webpack://Onairos/./src/components/ui/PrimaryButton.jsx","webpack://Onairos/./src/components/EmailAuth.js","webpack://Onairos/./src/utils/capacitorDetection.js","webpack://Onairos/./src/components/ConnectChatGPTModal.jsx","webpack://Onairos/./src/components/UniversalOnboarding.jsx","webpack://Onairos/./src/components/PinSetup.js","webpack://Onairos/./src/components/DataRequest.js","webpack://Onairos/./src/components/TrainingComponent.jsx","webpack://Onairos/./node_modules/engine.io-parser/build/esm/commons.js","webpack://Onairos/./node_modules/engine.io-parser/build/esm/encodePacket.browser.js","webpack://Onairos/./node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","webpack://Onairos/./node_modules/engine.io-parser/build/esm/decodePacket.browser.js","webpack://Onairos/./node_modules/engine.io-parser/build/esm/index.js","webpack://Onairos/./node_modules/@socket.io/component-emitter/lib/esm/index.js","webpack://Onairos/./node_modules/engine.io-client/build/esm/globals.js","webpack://Onairos/./node_modules/engine.io-client/build/esm/util.js","webpack://Onairos/./node_modules/engine.io-client/build/esm/transport.js","webpack://Onairos/./node_modules/engine.io-client/build/esm/contrib/parseqs.js","webpack://Onairos/./node_modules/engine.io-client/build/esm/transports/polling.js","webpack://Onairos/./node_modules/engine.io-client/build/esm/contrib/has-cors.js","webpack://Onairos/./node_modules/engine.io-client/build/esm/transports/polling-xhr.js","webpack://Onairos/./node_modules/engine.io-client/build/esm/transports/websocket.js","webpack://Onairos/./node_modules/engine.io-client/build/esm/transports/index.js","webpack://Onairos/./node_modules/engine.io-client/build/esm/transports/webtransport.js","webpack://Onairos/./node_modules/engine.io-client/build/esm/contrib/parseuri.js","webpack://Onairos/./node_modules/engine.io-client/build/esm/socket.js","webpack://Onairos/./node_modules/socket.io-parser/build/esm/is-binary.js","webpack://Onairos/./node_modules/socket.io-parser/build/esm/binary.js","webpack://Onairos/./node_modules/socket.io-parser/build/esm/index.js","webpack://Onairos/./node_modules/socket.io-client/build/esm/on.js","webpack://Onairos/./node_modules/socket.io-client/build/esm/socket.js","webpack://Onairos/./node_modules/socket.io-client/build/esm/contrib/backo2.js","webpack://Onairos/./node_modules/socket.io-client/build/esm/manager.js","webpack://Onairos/./node_modules/socket.io-client/build/esm/index.js","webpack://Onairos/./node_modules/socket.io-client/build/esm/url.js","webpack://Onairos/./src/components/TrainingScreen.jsx","webpack://Onairos/./src/components/LoadingScreen.jsx","webpack://Onairos/./src/components/WrappedLoadingPage.jsx","webpack://Onairos/./src/utils/responseFormatter.js","webpack://Onairos/./src/utils/userDataFormatter.js","webpack://Onairos/./src/components/ui/PageLayout.jsx","webpack://Onairos/./src/onairosButton.jsx","webpack://Onairos/./src/utils/overlayHandler.js","webpack://Onairos/./src/utils/apiKeyValidation.js","webpack://Onairos/./src/utils/sdkInitialization.js","webpack://Onairos/./src/onairos.jsx"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"@capacitor/core\"), require(\"@capacitor/browser\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Onairos\", [\"React\", \"@capacitor/core\", \"@capacitor/browser\", \"ReactDOM\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Onairos\"] = factory(require(\"react\"), require(\"@capacitor/core\"), require(\"@capacitor/browser\"), require(\"react-dom\"));\n\telse\n\t\troot[\"Onairos\"] = factory(root[\"React\"], root[\"@capacitor/core\"], root[\"@capacitor/browser\"], root[\"ReactDOM\"]);\n})(this, (__WEBPACK_EXTERNAL_MODULE__639__, __WEBPACK_EXTERNAL_MODULE__283__, __WEBPACK_EXTERNAL_MODULE__478__, __WEBPACK_EXTERNAL_MODULE__346__) => {\nreturn ","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('lottie-web'), require('react')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'lottie-web', 'react'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global[\"lottie-react\"] = {}, global.Lottie, global.React));\n})(this, (function (exports, lottie, React) { 'use strict';\n\n  function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\n  var lottie__default = /*#__PURE__*/_interopDefaultLegacy(lottie);\n  var React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\n  function _arrayLikeToArray(r, a) {\n    (null == a || a > r.length) && (a = r.length);\n    for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n    return n;\n  }\n  function _arrayWithHoles(r) {\n    if (Array.isArray(r)) return r;\n  }\n  function _defineProperty(e, r, t) {\n    return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n      value: t,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }) : e[r] = t, e;\n  }\n  function _iterableToArrayLimit(r, l) {\n    var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n    if (null != t) {\n      var e,\n        n,\n        i,\n        u,\n        a = [],\n        f = !0,\n        o = !1;\n      try {\n        if (i = (t = t.call(r)).next, 0 === l) {\n          if (Object(t) !== t) return;\n          f = !1;\n        } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n      } catch (r) {\n        o = !0, n = r;\n      } finally {\n        try {\n          if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return;\n        } finally {\n          if (o) throw n;\n        }\n      }\n      return a;\n    }\n  }\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  function ownKeys(e, r) {\n    var t = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var o = Object.getOwnPropertySymbols(e);\n      r && (o = o.filter(function (r) {\n        return Object.getOwnPropertyDescriptor(e, r).enumerable;\n      })), t.push.apply(t, o);\n    }\n    return t;\n  }\n  function _objectSpread2(e) {\n    for (var r = 1; r < arguments.length; r++) {\n      var t = null != arguments[r] ? arguments[r] : {};\n      r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n        _defineProperty(e, r, t[r]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n        Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n      });\n    }\n    return e;\n  }\n  function _objectWithoutProperties(e, t) {\n    if (null == e) return {};\n    var o,\n      r,\n      i = _objectWithoutPropertiesLoose(e, t);\n    if (Object.getOwnPropertySymbols) {\n      var s = Object.getOwnPropertySymbols(e);\n      for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n    }\n    return i;\n  }\n  function _objectWithoutPropertiesLoose(r, e) {\n    if (null == r) return {};\n    var t = {};\n    for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n      if (e.includes(n)) continue;\n      t[n] = r[n];\n    }\n    return t;\n  }\n  function _slicedToArray(r, e) {\n    return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();\n  }\n  function _toPrimitive(t, r) {\n    if (\"object\" != typeof t || !t) return t;\n    var e = t[Symbol.toPrimitive];\n    if (void 0 !== e) {\n      var i = e.call(t, r || \"default\");\n      if (\"object\" != typeof i) return i;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n    return (\"string\" === r ? String : Number)(t);\n  }\n  function _toPropertyKey(t) {\n    var i = _toPrimitive(t, \"string\");\n    return \"symbol\" == typeof i ? i : i + \"\";\n  }\n  function _unsupportedIterableToArray(r, a) {\n    if (r) {\n      if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n      var t = {}.toString.call(r).slice(8, -1);\n      return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n    }\n  }\n\n  var _excluded$1 = [\"animationData\", \"loop\", \"autoplay\", \"initialSegment\", \"onComplete\", \"onLoopComplete\", \"onEnterFrame\", \"onSegmentStart\", \"onConfigReady\", \"onDataReady\", \"onDataFailed\", \"onLoadedImages\", \"onDOMLoaded\", \"onDestroy\", \"lottieRef\", \"renderer\", \"name\", \"assetsPath\", \"rendererSettings\"];\n  var useLottie = function useLottie(props, style) {\n    var animationData = props.animationData,\n      loop = props.loop,\n      autoplay = props.autoplay,\n      initialSegment = props.initialSegment,\n      onComplete = props.onComplete,\n      onLoopComplete = props.onLoopComplete,\n      onEnterFrame = props.onEnterFrame,\n      onSegmentStart = props.onSegmentStart,\n      onConfigReady = props.onConfigReady,\n      onDataReady = props.onDataReady,\n      onDataFailed = props.onDataFailed,\n      onLoadedImages = props.onLoadedImages,\n      onDOMLoaded = props.onDOMLoaded,\n      onDestroy = props.onDestroy;\n      props.lottieRef;\n      props.renderer;\n      props.name;\n      props.assetsPath;\n      props.rendererSettings;\n      var rest = _objectWithoutProperties(props, _excluded$1);\n    var _useState = React.useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      animationLoaded = _useState2[0],\n      setAnimationLoaded = _useState2[1];\n    var animationInstanceRef = React.useRef();\n    var animationContainer = React.useRef(null);\n    /*\n          ======================================\n              INTERACTION METHODS\n          ======================================\n       */\n    /**\n     * Play\n     */\n    var play = function play() {\n      var _a;\n      (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.play();\n    };\n    /**\n     * Stop\n     */\n    var stop = function stop() {\n      var _a;\n      (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.stop();\n    };\n    /**\n     * Pause\n     */\n    var pause = function pause() {\n      var _a;\n      (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.pause();\n    };\n    /**\n     * Set animation speed\n     * @param speed\n     */\n    var setSpeed = function setSpeed(speed) {\n      var _a;\n      (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.setSpeed(speed);\n    };\n    /**\n     * Got to frame and play\n     * @param value\n     * @param isFrame\n     */\n    var goToAndPlay = function goToAndPlay(value, isFrame) {\n      var _a;\n      (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.goToAndPlay(value, isFrame);\n    };\n    /**\n     * Got to frame and stop\n     * @param value\n     * @param isFrame\n     */\n    var goToAndStop = function goToAndStop(value, isFrame) {\n      var _a;\n      (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.goToAndStop(value, isFrame);\n    };\n    /**\n     * Set animation direction\n     * @param direction\n     */\n    var setDirection = function setDirection(direction) {\n      var _a;\n      (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.setDirection(direction);\n    };\n    /**\n     * Play animation segments\n     * @param segments\n     * @param forceFlag\n     */\n    var playSegments = function playSegments(segments, forceFlag) {\n      var _a;\n      (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.playSegments(segments, forceFlag);\n    };\n    /**\n     * Set sub frames\n     * @param useSubFrames\n     */\n    var setSubframe = function setSubframe(useSubFrames) {\n      var _a;\n      (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.setSubframe(useSubFrames);\n    };\n    /**\n     * Get animation duration\n     * @param inFrames\n     */\n    var getDuration = function getDuration(inFrames) {\n      var _a;\n      return (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.getDuration(inFrames);\n    };\n    /**\n     * Destroy animation\n     */\n    var destroy = function destroy() {\n      var _a;\n      (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n      // Removing the reference to the animation so separate cleanups are skipped.\n      // Without it the internal `lottie-react` instance throws exceptions as it already cleared itself on destroy.\n      animationInstanceRef.current = undefined;\n    };\n    /*\n          ======================================\n              LOTTIE\n          ======================================\n       */\n    /**\n     * Load a new animation, and if it's the case, destroy the previous one\n     * @param {Object} forcedConfigs\n     */\n    var loadAnimation = function loadAnimation() {\n      var forcedConfigs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _a;\n      // Return if the container ref is null\n      if (!animationContainer.current) {\n        return;\n      }\n      // Destroy any previous instance\n      (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n      // Build the animation configuration\n      var config = _objectSpread2(_objectSpread2(_objectSpread2({}, props), forcedConfigs), {}, {\n        container: animationContainer.current\n      });\n      // Save the animation instance\n      animationInstanceRef.current = lottie__default[\"default\"].loadAnimation(config);\n      setAnimationLoaded(!!animationInstanceRef.current);\n      // Return a function that will clean up\n      return function () {\n        var _a;\n        (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n        animationInstanceRef.current = undefined;\n      };\n    };\n    /**\n     * (Re)Initialize when animation data changed\n     */\n    React.useEffect(function () {\n      var onUnmount = loadAnimation();\n      // Clean up on unmount\n      return function () {\n        return onUnmount === null || onUnmount === void 0 ? void 0 : onUnmount();\n      };\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [animationData, loop]);\n    // Update the autoplay state\n    React.useEffect(function () {\n      if (!animationInstanceRef.current) {\n        return;\n      }\n      animationInstanceRef.current.autoplay = !!autoplay;\n    }, [autoplay]);\n    // Update the initial segment state\n    React.useEffect(function () {\n      if (!animationInstanceRef.current) {\n        return;\n      }\n      // When null should reset to default animation length\n      if (!initialSegment) {\n        animationInstanceRef.current.resetSegments(true);\n        return;\n      }\n      // If it's not a valid segment, do nothing\n      if (!Array.isArray(initialSegment) || !initialSegment.length) {\n        return;\n      }\n      // If the current position it's not in the new segment\n      // set the current position to start\n      if (animationInstanceRef.current.currentRawFrame < initialSegment[0] || animationInstanceRef.current.currentRawFrame > initialSegment[1]) {\n        animationInstanceRef.current.currentRawFrame = initialSegment[0];\n      }\n      // Update the segment\n      animationInstanceRef.current.setSegment(initialSegment[0], initialSegment[1]);\n    }, [initialSegment]);\n    /*\n          ======================================\n              EVENTS\n          ======================================\n       */\n    /**\n     * Reinitialize listener on change\n     */\n    React.useEffect(function () {\n      var partialListeners = [{\n        name: \"complete\",\n        handler: onComplete\n      }, {\n        name: \"loopComplete\",\n        handler: onLoopComplete\n      }, {\n        name: \"enterFrame\",\n        handler: onEnterFrame\n      }, {\n        name: \"segmentStart\",\n        handler: onSegmentStart\n      }, {\n        name: \"config_ready\",\n        handler: onConfigReady\n      }, {\n        name: \"data_ready\",\n        handler: onDataReady\n      }, {\n        name: \"data_failed\",\n        handler: onDataFailed\n      }, {\n        name: \"loaded_images\",\n        handler: onLoadedImages\n      }, {\n        name: \"DOMLoaded\",\n        handler: onDOMLoaded\n      }, {\n        name: \"destroy\",\n        handler: onDestroy\n      }];\n      var listeners = partialListeners.filter(function (listener) {\n        return listener.handler != null;\n      });\n      if (!listeners.length) {\n        return;\n      }\n      var deregisterList = listeners.map(\n      /**\n       * Handle the process of adding an event listener\n       * @param {Listener} listener\n       * @return {Function} Function that deregister the listener\n       */\n      function (listener) {\n        var _a;\n        (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.addEventListener(listener.name, listener.handler);\n        // Return a function to deregister this listener\n        return function () {\n          var _a;\n          (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.removeEventListener(listener.name, listener.handler);\n        };\n      });\n      // Deregister listeners on unmount\n      return function () {\n        deregisterList.forEach(function (deregister) {\n          return deregister();\n        });\n      };\n    }, [onComplete, onLoopComplete, onEnterFrame, onSegmentStart, onConfigReady, onDataReady, onDataFailed, onLoadedImages, onDOMLoaded, onDestroy]);\n    /**\n     * Build the animation view\n     */\n    var View = /*#__PURE__*/React__default[\"default\"].createElement(\"div\", _objectSpread2({\n      style: style,\n      ref: animationContainer\n    }, rest));\n    return {\n      View: View,\n      play: play,\n      stop: stop,\n      pause: pause,\n      setSpeed: setSpeed,\n      goToAndStop: goToAndStop,\n      goToAndPlay: goToAndPlay,\n      setDirection: setDirection,\n      playSegments: playSegments,\n      setSubframe: setSubframe,\n      getDuration: getDuration,\n      destroy: destroy,\n      animationContainerRef: animationContainer,\n      animationLoaded: animationLoaded,\n      animationItem: animationInstanceRef.current\n    };\n  };\n\n  // helpers\n  function getContainerVisibility(container) {\n    var _container$getBoundin = container.getBoundingClientRect(),\n      top = _container$getBoundin.top,\n      height = _container$getBoundin.height;\n    var current = window.innerHeight - top;\n    var max = window.innerHeight + height;\n    return current / max;\n  }\n  function getContainerCursorPosition(container, cursorX, cursorY) {\n    var _container$getBoundin2 = container.getBoundingClientRect(),\n      top = _container$getBoundin2.top,\n      left = _container$getBoundin2.left,\n      width = _container$getBoundin2.width,\n      height = _container$getBoundin2.height;\n    var x = (cursorX - left) / width;\n    var y = (cursorY - top) / height;\n    return {\n      x: x,\n      y: y\n    };\n  }\n  var useInitInteractivity = function useInitInteractivity(_ref) {\n    var wrapperRef = _ref.wrapperRef,\n      animationItem = _ref.animationItem,\n      mode = _ref.mode,\n      actions = _ref.actions;\n    React.useEffect(function () {\n      var wrapper = wrapperRef.current;\n      if (!wrapper || !animationItem || !actions.length) {\n        return;\n      }\n      animationItem.stop();\n      var scrollModeHandler = function scrollModeHandler() {\n        var assignedSegment = null;\n        var scrollHandler = function scrollHandler() {\n          var currentPercent = getContainerVisibility(wrapper);\n          // Find the first action that satisfies the current position conditions\n          var action = actions.find(function (_ref2) {\n            var visibility = _ref2.visibility;\n            return visibility && currentPercent >= visibility[0] && currentPercent <= visibility[1];\n          });\n          // Skip if no matching action was found!\n          if (!action) {\n            return;\n          }\n          if (action.type === \"seek\" && action.visibility && action.frames.length === 2) {\n            // Seek: Go to a frame based on player scroll position action\n            var frameToGo = action.frames[0] + Math.ceil((currentPercent - action.visibility[0]) / (action.visibility[1] - action.visibility[0]) * action.frames[1]);\n            //! goToAndStop must be relative to the start of the current segment\n            animationItem.goToAndStop(frameToGo - animationItem.firstFrame - 1, true);\n          }\n          if (action.type === \"loop\") {\n            // Loop: Loop a given frames\n            if (assignedSegment === null) {\n              // if not playing any segments currently. play those segments and save to state\n              animationItem.playSegments(action.frames, true);\n              assignedSegment = action.frames;\n            } else {\n              // if playing any segments currently.\n              //check if segments in state are equal to the frames selected by action\n              if (assignedSegment !== action.frames) {\n                // if they are not equal. new segments are to be loaded\n                animationItem.playSegments(action.frames, true);\n                assignedSegment = action.frames;\n              } else if (animationItem.isPaused) {\n                // if they are equal the play method must be called only if lottie is paused\n                animationItem.playSegments(action.frames, true);\n                assignedSegment = action.frames;\n              }\n            }\n          }\n          if (action.type === \"play\" && animationItem.isPaused) {\n            // Play: Reset segments and continue playing full animation from current position\n            animationItem.resetSegments(true);\n            animationItem.play();\n          }\n          if (action.type === \"stop\") {\n            // Stop: Stop playback\n            animationItem.goToAndStop(action.frames[0] - animationItem.firstFrame - 1, true);\n          }\n        };\n        document.addEventListener(\"scroll\", scrollHandler);\n        return function () {\n          document.removeEventListener(\"scroll\", scrollHandler);\n        };\n      };\n      var cursorModeHandler = function cursorModeHandler() {\n        var handleCursor = function handleCursor(_x, _y) {\n          var x = _x;\n          var y = _y;\n          // Resolve cursor position if cursor is inside container\n          if (x !== -1 && y !== -1) {\n            // Get container cursor position\n            var pos = getContainerCursorPosition(wrapper, x, y);\n            // Use the resolved position\n            x = pos.x;\n            y = pos.y;\n          }\n          // Find the first action that satisfies the current position conditions\n          var action = actions.find(function (_ref3) {\n            var position = _ref3.position;\n            if (position && Array.isArray(position.x) && Array.isArray(position.y)) {\n              return x >= position.x[0] && x <= position.x[1] && y >= position.y[0] && y <= position.y[1];\n            }\n            if (position && !Number.isNaN(position.x) && !Number.isNaN(position.y)) {\n              return x === position.x && y === position.y;\n            }\n            return false;\n          });\n          // Skip if no matching action was found!\n          if (!action) {\n            return;\n          }\n          // Process action types:\n          if (action.type === \"seek\" && action.position && Array.isArray(action.position.x) && Array.isArray(action.position.y) && action.frames.length === 2) {\n            // Seek: Go to a frame based on player scroll position action\n            var xPercent = (x - action.position.x[0]) / (action.position.x[1] - action.position.x[0]);\n            var yPercent = (y - action.position.y[0]) / (action.position.y[1] - action.position.y[0]);\n            animationItem.playSegments(action.frames, true);\n            animationItem.goToAndStop(Math.ceil((xPercent + yPercent) / 2 * (action.frames[1] - action.frames[0])), true);\n          }\n          if (action.type === \"loop\") {\n            animationItem.playSegments(action.frames, true);\n          }\n          if (action.type === \"play\") {\n            // Play: Reset segments and continue playing full animation from current position\n            if (animationItem.isPaused) {\n              animationItem.resetSegments(false);\n            }\n            animationItem.playSegments(action.frames);\n          }\n          if (action.type === \"stop\") {\n            animationItem.goToAndStop(action.frames[0], true);\n          }\n        };\n        var mouseMoveHandler = function mouseMoveHandler(ev) {\n          handleCursor(ev.clientX, ev.clientY);\n        };\n        var mouseOutHandler = function mouseOutHandler() {\n          handleCursor(-1, -1);\n        };\n        wrapper.addEventListener(\"mousemove\", mouseMoveHandler);\n        wrapper.addEventListener(\"mouseout\", mouseOutHandler);\n        return function () {\n          wrapper.removeEventListener(\"mousemove\", mouseMoveHandler);\n          wrapper.removeEventListener(\"mouseout\", mouseOutHandler);\n        };\n      };\n      switch (mode) {\n        case \"scroll\":\n          return scrollModeHandler();\n        case \"cursor\":\n          return cursorModeHandler();\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [mode, animationItem]);\n  };\n  var useLottieInteractivity = function useLottieInteractivity(_ref4) {\n    var actions = _ref4.actions,\n      mode = _ref4.mode,\n      lottieObj = _ref4.lottieObj;\n    var animationItem = lottieObj.animationItem,\n      View = lottieObj.View,\n      animationContainerRef = lottieObj.animationContainerRef;\n    useInitInteractivity({\n      actions: actions,\n      animationItem: animationItem,\n      mode: mode,\n      wrapperRef: animationContainerRef\n    });\n    return View;\n  };\n\n  var _excluded = [\"style\", \"interactivity\"];\n  var Lottie = function Lottie(props) {\n    var _a, _b, _c;\n    var style = props.style,\n      interactivity = props.interactivity,\n      lottieProps = _objectWithoutProperties(props, _excluded);\n    /**\n     * Initialize the 'useLottie' hook\n     */\n    var _useLottie = useLottie(lottieProps, style),\n      View = _useLottie.View,\n      play = _useLottie.play,\n      stop = _useLottie.stop,\n      pause = _useLottie.pause,\n      setSpeed = _useLottie.setSpeed,\n      goToAndStop = _useLottie.goToAndStop,\n      goToAndPlay = _useLottie.goToAndPlay,\n      setDirection = _useLottie.setDirection,\n      playSegments = _useLottie.playSegments,\n      setSubframe = _useLottie.setSubframe,\n      getDuration = _useLottie.getDuration,\n      destroy = _useLottie.destroy,\n      animationContainerRef = _useLottie.animationContainerRef,\n      animationLoaded = _useLottie.animationLoaded,\n      animationItem = _useLottie.animationItem;\n    /**\n     * Make the hook variables/methods available through the provided 'lottieRef'\n     */\n    React.useEffect(function () {\n      if (props.lottieRef) {\n        props.lottieRef.current = {\n          play: play,\n          stop: stop,\n          pause: pause,\n          setSpeed: setSpeed,\n          goToAndPlay: goToAndPlay,\n          goToAndStop: goToAndStop,\n          setDirection: setDirection,\n          playSegments: playSegments,\n          setSubframe: setSubframe,\n          getDuration: getDuration,\n          destroy: destroy,\n          animationContainerRef: animationContainerRef,\n          animationLoaded: animationLoaded,\n          animationItem: animationItem\n        };\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [(_a = props.lottieRef) === null || _a === void 0 ? void 0 : _a.current]);\n    return useLottieInteractivity({\n      lottieObj: {\n        View: View,\n        play: play,\n        stop: stop,\n        pause: pause,\n        setSpeed: setSpeed,\n        goToAndStop: goToAndStop,\n        goToAndPlay: goToAndPlay,\n        setDirection: setDirection,\n        playSegments: playSegments,\n        setSubframe: setSubframe,\n        getDuration: getDuration,\n        destroy: destroy,\n        animationContainerRef: animationContainerRef,\n        animationLoaded: animationLoaded,\n        animationItem: animationItem\n      },\n      actions: (_b = interactivity === null || interactivity === void 0 ? void 0 : interactivity.actions) !== null && _b !== void 0 ? _b : [],\n      mode: (_c = interactivity === null || interactivity === void 0 ? void 0 : interactivity.mode) !== null && _c !== void 0 ? _c : \"scroll\"\n    });\n  };\n\n  Object.defineProperty(exports, 'LottiePlayer', {\n    enumerable: true,\n    get: function () { return lottie__default[\"default\"]; }\n  });\n  exports[\"default\"] = Lottie;\n  exports.useLottie = useLottie;\n  exports.useLottieInteractivity = useLottieInteractivity;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n//# sourceMappingURL=index.umd.js.map\n","(typeof document !== \"undefined\") && (typeof navigator !== \"undefined\") && (function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.lottie = factory());\n})(this, (function () { 'use strict';\n\n  var svgNS = 'http://www.w3.org/2000/svg';\n  var locationHref = '';\n  var _useWebWorker = false;\n  var initialDefaultFrame = -999999;\n  var setWebWorker = function setWebWorker(flag) {\n    _useWebWorker = !!flag;\n  };\n  var getWebWorker = function getWebWorker() {\n    return _useWebWorker;\n  };\n  var setLocationHref = function setLocationHref(value) {\n    locationHref = value;\n  };\n  var getLocationHref = function getLocationHref() {\n    return locationHref;\n  };\n\n  function createTag(type) {\n    // return {appendChild:function(){},setAttribute:function(){},style:{}}\n    return document.createElement(type);\n  }\n\n  function extendPrototype(sources, destination) {\n    var i;\n    var len = sources.length;\n    var sourcePrototype;\n    for (i = 0; i < len; i += 1) {\n      sourcePrototype = sources[i].prototype;\n      for (var attr in sourcePrototype) {\n        if (Object.prototype.hasOwnProperty.call(sourcePrototype, attr)) destination.prototype[attr] = sourcePrototype[attr];\n      }\n    }\n  }\n  function getDescriptor(object, prop) {\n    return Object.getOwnPropertyDescriptor(object, prop);\n  }\n  function createProxyFunction(prototype) {\n    function ProxyFunction() {}\n    ProxyFunction.prototype = prototype;\n    return ProxyFunction;\n  }\n\n  // import Howl from '../../3rd_party/howler';\n\n  var audioControllerFactory = function () {\n    function AudioController(audioFactory) {\n      this.audios = [];\n      this.audioFactory = audioFactory;\n      this._volume = 1;\n      this._isMuted = false;\n    }\n    AudioController.prototype = {\n      addAudio: function addAudio(audio) {\n        this.audios.push(audio);\n      },\n      pause: function pause() {\n        var i;\n        var len = this.audios.length;\n        for (i = 0; i < len; i += 1) {\n          this.audios[i].pause();\n        }\n      },\n      resume: function resume() {\n        var i;\n        var len = this.audios.length;\n        for (i = 0; i < len; i += 1) {\n          this.audios[i].resume();\n        }\n      },\n      setRate: function setRate(rateValue) {\n        var i;\n        var len = this.audios.length;\n        for (i = 0; i < len; i += 1) {\n          this.audios[i].setRate(rateValue);\n        }\n      },\n      createAudio: function createAudio(assetPath) {\n        if (this.audioFactory) {\n          return this.audioFactory(assetPath);\n        }\n        if (window.Howl) {\n          return new window.Howl({\n            src: [assetPath]\n          });\n        }\n        return {\n          isPlaying: false,\n          play: function play() {\n            this.isPlaying = true;\n          },\n          seek: function seek() {\n            this.isPlaying = false;\n          },\n          playing: function playing() {},\n          rate: function rate() {},\n          setVolume: function setVolume() {}\n        };\n      },\n      setAudioFactory: function setAudioFactory(audioFactory) {\n        this.audioFactory = audioFactory;\n      },\n      setVolume: function setVolume(value) {\n        this._volume = value;\n        this._updateVolume();\n      },\n      mute: function mute() {\n        this._isMuted = true;\n        this._updateVolume();\n      },\n      unmute: function unmute() {\n        this._isMuted = false;\n        this._updateVolume();\n      },\n      getVolume: function getVolume() {\n        return this._volume;\n      },\n      _updateVolume: function _updateVolume() {\n        var i;\n        var len = this.audios.length;\n        for (i = 0; i < len; i += 1) {\n          this.audios[i].volume(this._volume * (this._isMuted ? 0 : 1));\n        }\n      }\n    };\n    return function () {\n      return new AudioController();\n    };\n  }();\n\n  var createTypedArray = function () {\n    function createRegularArray(type, len) {\n      var i = 0;\n      var arr = [];\n      var value;\n      switch (type) {\n        case 'int16':\n        case 'uint8c':\n          value = 1;\n          break;\n        default:\n          value = 1.1;\n          break;\n      }\n      for (i = 0; i < len; i += 1) {\n        arr.push(value);\n      }\n      return arr;\n    }\n    function createTypedArrayFactory(type, len) {\n      if (type === 'float32') {\n        return new Float32Array(len);\n      }\n      if (type === 'int16') {\n        return new Int16Array(len);\n      }\n      if (type === 'uint8c') {\n        return new Uint8ClampedArray(len);\n      }\n      return createRegularArray(type, len);\n    }\n    if (typeof Uint8ClampedArray === 'function' && typeof Float32Array === 'function') {\n      return createTypedArrayFactory;\n    }\n    return createRegularArray;\n  }();\n  function createSizedArray(len) {\n    return Array.apply(null, {\n      length: len\n    });\n  }\n\n  function _typeof$6(o) { \"@babel/helpers - typeof\"; return _typeof$6 = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof$6(o); }\n  var subframeEnabled = true;\n  var expressionsPlugin = null;\n  var expressionsInterfaces = null;\n  var idPrefix$1 = '';\n  var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n  var _shouldRoundValues = false;\n  var bmPow = Math.pow;\n  var bmSqrt = Math.sqrt;\n  var bmFloor = Math.floor;\n  var bmMax = Math.max;\n  var bmMin = Math.min;\n  var BMMath = {};\n  (function () {\n    var propertyNames = ['abs', 'acos', 'acosh', 'asin', 'asinh', 'atan', 'atanh', 'atan2', 'ceil', 'cbrt', 'expm1', 'clz32', 'cos', 'cosh', 'exp', 'floor', 'fround', 'hypot', 'imul', 'log', 'log1p', 'log2', 'log10', 'max', 'min', 'pow', 'random', 'round', 'sign', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'trunc', 'E', 'LN10', 'LN2', 'LOG10E', 'LOG2E', 'PI', 'SQRT1_2', 'SQRT2'];\n    var i;\n    var len = propertyNames.length;\n    for (i = 0; i < len; i += 1) {\n      BMMath[propertyNames[i]] = Math[propertyNames[i]];\n    }\n  })();\n  function ProjectInterface$1() {\n    return {};\n  }\n  BMMath.random = Math.random;\n  BMMath.abs = function (val) {\n    var tOfVal = _typeof$6(val);\n    if (tOfVal === 'object' && val.length) {\n      var absArr = createSizedArray(val.length);\n      var i;\n      var len = val.length;\n      for (i = 0; i < len; i += 1) {\n        absArr[i] = Math.abs(val[i]);\n      }\n      return absArr;\n    }\n    return Math.abs(val);\n  };\n  var defaultCurveSegments = 150;\n  var degToRads = Math.PI / 180;\n  var roundCorner = 0.5519;\n  function roundValues(flag) {\n    _shouldRoundValues = !!flag;\n  }\n  function bmRnd(value) {\n    if (_shouldRoundValues) {\n      return Math.round(value);\n    }\n    return value;\n  }\n  function styleDiv(element) {\n    element.style.position = 'absolute';\n    element.style.top = 0;\n    element.style.left = 0;\n    element.style.display = 'block';\n    element.style.transformOrigin = '0 0';\n    element.style.webkitTransformOrigin = '0 0';\n    element.style.backfaceVisibility = 'visible';\n    element.style.webkitBackfaceVisibility = 'visible';\n    element.style.transformStyle = 'preserve-3d';\n    element.style.webkitTransformStyle = 'preserve-3d';\n    element.style.mozTransformStyle = 'preserve-3d';\n  }\n  function BMEnterFrameEvent(type, currentTime, totalTime, frameMultiplier) {\n    this.type = type;\n    this.currentTime = currentTime;\n    this.totalTime = totalTime;\n    this.direction = frameMultiplier < 0 ? -1 : 1;\n  }\n  function BMCompleteEvent(type, frameMultiplier) {\n    this.type = type;\n    this.direction = frameMultiplier < 0 ? -1 : 1;\n  }\n  function BMCompleteLoopEvent(type, totalLoops, currentLoop, frameMultiplier) {\n    this.type = type;\n    this.currentLoop = currentLoop;\n    this.totalLoops = totalLoops;\n    this.direction = frameMultiplier < 0 ? -1 : 1;\n  }\n  function BMSegmentStartEvent(type, firstFrame, totalFrames) {\n    this.type = type;\n    this.firstFrame = firstFrame;\n    this.totalFrames = totalFrames;\n  }\n  function BMDestroyEvent(type, target) {\n    this.type = type;\n    this.target = target;\n  }\n  function BMRenderFrameErrorEvent(nativeError, currentTime) {\n    this.type = 'renderFrameError';\n    this.nativeError = nativeError;\n    this.currentTime = currentTime;\n  }\n  function BMConfigErrorEvent(nativeError) {\n    this.type = 'configError';\n    this.nativeError = nativeError;\n  }\n  function BMAnimationConfigErrorEvent(type, nativeError) {\n    this.type = type;\n    this.nativeError = nativeError;\n  }\n  var createElementID = function () {\n    var _count = 0;\n    return function createID() {\n      _count += 1;\n      return idPrefix$1 + '__lottie_element_' + _count;\n    };\n  }();\n  function HSVtoRGB(h, s, v) {\n    var r;\n    var g;\n    var b;\n    var i;\n    var f;\n    var p;\n    var q;\n    var t;\n    i = Math.floor(h * 6);\n    f = h * 6 - i;\n    p = v * (1 - s);\n    q = v * (1 - f * s);\n    t = v * (1 - (1 - f) * s);\n    switch (i % 6) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n      case 5:\n        r = v;\n        g = p;\n        b = q;\n        break;\n      default:\n        break;\n    }\n    return [r, g, b];\n  }\n  function RGBtoHSV(r, g, b) {\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var d = max - min;\n    var h;\n    var s = max === 0 ? 0 : d / max;\n    var v = max / 255;\n    switch (max) {\n      case min:\n        h = 0;\n        break;\n      case r:\n        h = g - b + d * (g < b ? 6 : 0);\n        h /= 6 * d;\n        break;\n      case g:\n        h = b - r + d * 2;\n        h /= 6 * d;\n        break;\n      case b:\n        h = r - g + d * 4;\n        h /= 6 * d;\n        break;\n      default:\n        break;\n    }\n    return [h, s, v];\n  }\n  function addSaturationToRGB(color, offset) {\n    var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\n    hsv[1] += offset;\n    if (hsv[1] > 1) {\n      hsv[1] = 1;\n    } else if (hsv[1] <= 0) {\n      hsv[1] = 0;\n    }\n    return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\n  }\n  function addBrightnessToRGB(color, offset) {\n    var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\n    hsv[2] += offset;\n    if (hsv[2] > 1) {\n      hsv[2] = 1;\n    } else if (hsv[2] < 0) {\n      hsv[2] = 0;\n    }\n    return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\n  }\n  function addHueToRGB(color, offset) {\n    var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\n    hsv[0] += offset / 360;\n    if (hsv[0] > 1) {\n      hsv[0] -= 1;\n    } else if (hsv[0] < 0) {\n      hsv[0] += 1;\n    }\n    return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\n  }\n  var rgbToHex = function () {\n    var colorMap = [];\n    var i;\n    var hex;\n    for (i = 0; i < 256; i += 1) {\n      hex = i.toString(16);\n      colorMap[i] = hex.length === 1 ? '0' + hex : hex;\n    }\n    return function (r, g, b) {\n      if (r < 0) {\n        r = 0;\n      }\n      if (g < 0) {\n        g = 0;\n      }\n      if (b < 0) {\n        b = 0;\n      }\n      return '#' + colorMap[r] + colorMap[g] + colorMap[b];\n    };\n  }();\n  var setSubframeEnabled = function setSubframeEnabled(flag) {\n    subframeEnabled = !!flag;\n  };\n  var getSubframeEnabled = function getSubframeEnabled() {\n    return subframeEnabled;\n  };\n  var setExpressionsPlugin = function setExpressionsPlugin(value) {\n    expressionsPlugin = value;\n  };\n  var getExpressionsPlugin = function getExpressionsPlugin() {\n    return expressionsPlugin;\n  };\n  var setExpressionInterfaces = function setExpressionInterfaces(value) {\n    expressionsInterfaces = value;\n  };\n  var getExpressionInterfaces = function getExpressionInterfaces() {\n    return expressionsInterfaces;\n  };\n  var setDefaultCurveSegments = function setDefaultCurveSegments(value) {\n    defaultCurveSegments = value;\n  };\n  var getDefaultCurveSegments = function getDefaultCurveSegments() {\n    return defaultCurveSegments;\n  };\n  var setIdPrefix = function setIdPrefix(value) {\n    idPrefix$1 = value;\n  };\n  var getIdPrefix = function getIdPrefix() {\n    return idPrefix$1;\n  };\n\n  function createNS(type) {\n    // return {appendChild:function(){},setAttribute:function(){},style:{}}\n    return document.createElementNS(svgNS, type);\n  }\n\n  function _typeof$5(o) { \"@babel/helpers - typeof\"; return _typeof$5 = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof$5(o); }\n  var dataManager = function () {\n    var _counterId = 1;\n    var processes = [];\n    var workerFn;\n    var workerInstance;\n    var workerProxy = {\n      onmessage: function onmessage() {},\n      postMessage: function postMessage(path) {\n        workerFn({\n          data: path\n        });\n      }\n    };\n    var _workerSelf = {\n      postMessage: function postMessage(data) {\n        workerProxy.onmessage({\n          data: data\n        });\n      }\n    };\n    function createWorker(fn) {\n      if (window.Worker && window.Blob && getWebWorker()) {\n        var blob = new Blob(['var _workerSelf = self; self.onmessage = ', fn.toString()], {\n          type: 'text/javascript'\n        });\n        // var blob = new Blob(['self.onmessage = ', fn.toString()], { type: 'text/javascript' });\n        var url = URL.createObjectURL(blob);\n        return new Worker(url);\n      }\n      workerFn = fn;\n      return workerProxy;\n    }\n    function setupWorker() {\n      if (!workerInstance) {\n        workerInstance = createWorker(function workerStart(e) {\n          function dataFunctionManager() {\n            function completeLayers(layers, comps) {\n              var layerData;\n              var i;\n              var len = layers.length;\n              var j;\n              var jLen;\n              var k;\n              var kLen;\n              for (i = 0; i < len; i += 1) {\n                layerData = layers[i];\n                if ('ks' in layerData && !layerData.completed) {\n                  layerData.completed = true;\n                  if (layerData.hasMask) {\n                    var maskProps = layerData.masksProperties;\n                    jLen = maskProps.length;\n                    for (j = 0; j < jLen; j += 1) {\n                      if (maskProps[j].pt.k.i) {\n                        convertPathsToAbsoluteValues(maskProps[j].pt.k);\n                      } else {\n                        kLen = maskProps[j].pt.k.length;\n                        for (k = 0; k < kLen; k += 1) {\n                          if (maskProps[j].pt.k[k].s) {\n                            convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\n                          }\n                          if (maskProps[j].pt.k[k].e) {\n                            convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\n                          }\n                        }\n                      }\n                    }\n                  }\n                  if (layerData.ty === 0) {\n                    layerData.layers = findCompLayers(layerData.refId, comps);\n                    completeLayers(layerData.layers, comps);\n                  } else if (layerData.ty === 4) {\n                    completeShapes(layerData.shapes);\n                  } else if (layerData.ty === 5) {\n                    completeText(layerData);\n                  }\n                }\n              }\n            }\n            function completeChars(chars, assets) {\n              if (chars) {\n                var i = 0;\n                var len = chars.length;\n                for (i = 0; i < len; i += 1) {\n                  if (chars[i].t === 1) {\n                    // var compData = findComp(chars[i].data.refId, assets);\n                    chars[i].data.layers = findCompLayers(chars[i].data.refId, assets);\n                    // chars[i].data.ip = 0;\n                    // chars[i].data.op = 99999;\n                    // chars[i].data.st = 0;\n                    // chars[i].data.sr = 1;\n                    // chars[i].w = compData.w;\n                    // chars[i].data.ks = {\n                    //   a: { k: [0, 0, 0], a: 0 },\n                    //   p: { k: [0, -compData.h, 0], a: 0 },\n                    //   r: { k: 0, a: 0 },\n                    //   s: { k: [100, 100], a: 0 },\n                    //   o: { k: 100, a: 0 },\n                    // };\n                    completeLayers(chars[i].data.layers, assets);\n                  }\n                }\n              }\n            }\n            function findComp(id, comps) {\n              var i = 0;\n              var len = comps.length;\n              while (i < len) {\n                if (comps[i].id === id) {\n                  return comps[i];\n                }\n                i += 1;\n              }\n              return null;\n            }\n            function findCompLayers(id, comps) {\n              var comp = findComp(id, comps);\n              if (comp) {\n                if (!comp.layers.__used) {\n                  comp.layers.__used = true;\n                  return comp.layers;\n                }\n                return JSON.parse(JSON.stringify(comp.layers));\n              }\n              return null;\n            }\n            function completeShapes(arr) {\n              var i;\n              var len = arr.length;\n              var j;\n              var jLen;\n              for (i = len - 1; i >= 0; i -= 1) {\n                if (arr[i].ty === 'sh') {\n                  if (arr[i].ks.k.i) {\n                    convertPathsToAbsoluteValues(arr[i].ks.k);\n                  } else {\n                    jLen = arr[i].ks.k.length;\n                    for (j = 0; j < jLen; j += 1) {\n                      if (arr[i].ks.k[j].s) {\n                        convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\n                      }\n                      if (arr[i].ks.k[j].e) {\n                        convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\n                      }\n                    }\n                  }\n                } else if (arr[i].ty === 'gr') {\n                  completeShapes(arr[i].it);\n                }\n              }\n            }\n            function convertPathsToAbsoluteValues(path) {\n              var i;\n              var len = path.i.length;\n              for (i = 0; i < len; i += 1) {\n                path.i[i][0] += path.v[i][0];\n                path.i[i][1] += path.v[i][1];\n                path.o[i][0] += path.v[i][0];\n                path.o[i][1] += path.v[i][1];\n              }\n            }\n            function checkVersion(minimum, animVersionString) {\n              var animVersion = animVersionString ? animVersionString.split('.') : [100, 100, 100];\n              if (minimum[0] > animVersion[0]) {\n                return true;\n              }\n              if (animVersion[0] > minimum[0]) {\n                return false;\n              }\n              if (minimum[1] > animVersion[1]) {\n                return true;\n              }\n              if (animVersion[1] > minimum[1]) {\n                return false;\n              }\n              if (minimum[2] > animVersion[2]) {\n                return true;\n              }\n              if (animVersion[2] > minimum[2]) {\n                return false;\n              }\n              return null;\n            }\n            var checkText = function () {\n              var minimumVersion = [4, 4, 14];\n              function updateTextLayer(textLayer) {\n                var documentData = textLayer.t.d;\n                textLayer.t.d = {\n                  k: [{\n                    s: documentData,\n                    t: 0\n                  }]\n                };\n              }\n              function iterateLayers(layers) {\n                var i;\n                var len = layers.length;\n                for (i = 0; i < len; i += 1) {\n                  if (layers[i].ty === 5) {\n                    updateTextLayer(layers[i]);\n                  }\n                }\n              }\n              return function (animationData) {\n                if (checkVersion(minimumVersion, animationData.v)) {\n                  iterateLayers(animationData.layers);\n                  if (animationData.assets) {\n                    var i;\n                    var len = animationData.assets.length;\n                    for (i = 0; i < len; i += 1) {\n                      if (animationData.assets[i].layers) {\n                        iterateLayers(animationData.assets[i].layers);\n                      }\n                    }\n                  }\n                }\n              };\n            }();\n            var checkChars = function () {\n              var minimumVersion = [4, 7, 99];\n              return function (animationData) {\n                if (animationData.chars && !checkVersion(minimumVersion, animationData.v)) {\n                  var i;\n                  var len = animationData.chars.length;\n                  for (i = 0; i < len; i += 1) {\n                    var charData = animationData.chars[i];\n                    if (charData.data && charData.data.shapes) {\n                      completeShapes(charData.data.shapes);\n                      charData.data.ip = 0;\n                      charData.data.op = 99999;\n                      charData.data.st = 0;\n                      charData.data.sr = 1;\n                      charData.data.ks = {\n                        p: {\n                          k: [0, 0],\n                          a: 0\n                        },\n                        s: {\n                          k: [100, 100],\n                          a: 0\n                        },\n                        a: {\n                          k: [0, 0],\n                          a: 0\n                        },\n                        r: {\n                          k: 0,\n                          a: 0\n                        },\n                        o: {\n                          k: 100,\n                          a: 0\n                        }\n                      };\n                      if (!animationData.chars[i].t) {\n                        charData.data.shapes.push({\n                          ty: 'no'\n                        });\n                        charData.data.shapes[0].it.push({\n                          p: {\n                            k: [0, 0],\n                            a: 0\n                          },\n                          s: {\n                            k: [100, 100],\n                            a: 0\n                          },\n                          a: {\n                            k: [0, 0],\n                            a: 0\n                          },\n                          r: {\n                            k: 0,\n                            a: 0\n                          },\n                          o: {\n                            k: 100,\n                            a: 0\n                          },\n                          sk: {\n                            k: 0,\n                            a: 0\n                          },\n                          sa: {\n                            k: 0,\n                            a: 0\n                          },\n                          ty: 'tr'\n                        });\n                      }\n                    }\n                  }\n                }\n              };\n            }();\n            var checkPathProperties = function () {\n              var minimumVersion = [5, 7, 15];\n              function updateTextLayer(textLayer) {\n                var pathData = textLayer.t.p;\n                if (typeof pathData.a === 'number') {\n                  pathData.a = {\n                    a: 0,\n                    k: pathData.a\n                  };\n                }\n                if (typeof pathData.p === 'number') {\n                  pathData.p = {\n                    a: 0,\n                    k: pathData.p\n                  };\n                }\n                if (typeof pathData.r === 'number') {\n                  pathData.r = {\n                    a: 0,\n                    k: pathData.r\n                  };\n                }\n              }\n              function iterateLayers(layers) {\n                var i;\n                var len = layers.length;\n                for (i = 0; i < len; i += 1) {\n                  if (layers[i].ty === 5) {\n                    updateTextLayer(layers[i]);\n                  }\n                }\n              }\n              return function (animationData) {\n                if (checkVersion(minimumVersion, animationData.v)) {\n                  iterateLayers(animationData.layers);\n                  if (animationData.assets) {\n                    var i;\n                    var len = animationData.assets.length;\n                    for (i = 0; i < len; i += 1) {\n                      if (animationData.assets[i].layers) {\n                        iterateLayers(animationData.assets[i].layers);\n                      }\n                    }\n                  }\n                }\n              };\n            }();\n            var checkColors = function () {\n              var minimumVersion = [4, 1, 9];\n              function iterateShapes(shapes) {\n                var i;\n                var len = shapes.length;\n                var j;\n                var jLen;\n                for (i = 0; i < len; i += 1) {\n                  if (shapes[i].ty === 'gr') {\n                    iterateShapes(shapes[i].it);\n                  } else if (shapes[i].ty === 'fl' || shapes[i].ty === 'st') {\n                    if (shapes[i].c.k && shapes[i].c.k[0].i) {\n                      jLen = shapes[i].c.k.length;\n                      for (j = 0; j < jLen; j += 1) {\n                        if (shapes[i].c.k[j].s) {\n                          shapes[i].c.k[j].s[0] /= 255;\n                          shapes[i].c.k[j].s[1] /= 255;\n                          shapes[i].c.k[j].s[2] /= 255;\n                          shapes[i].c.k[j].s[3] /= 255;\n                        }\n                        if (shapes[i].c.k[j].e) {\n                          shapes[i].c.k[j].e[0] /= 255;\n                          shapes[i].c.k[j].e[1] /= 255;\n                          shapes[i].c.k[j].e[2] /= 255;\n                          shapes[i].c.k[j].e[3] /= 255;\n                        }\n                      }\n                    } else {\n                      shapes[i].c.k[0] /= 255;\n                      shapes[i].c.k[1] /= 255;\n                      shapes[i].c.k[2] /= 255;\n                      shapes[i].c.k[3] /= 255;\n                    }\n                  }\n                }\n              }\n              function iterateLayers(layers) {\n                var i;\n                var len = layers.length;\n                for (i = 0; i < len; i += 1) {\n                  if (layers[i].ty === 4) {\n                    iterateShapes(layers[i].shapes);\n                  }\n                }\n              }\n              return function (animationData) {\n                if (checkVersion(minimumVersion, animationData.v)) {\n                  iterateLayers(animationData.layers);\n                  if (animationData.assets) {\n                    var i;\n                    var len = animationData.assets.length;\n                    for (i = 0; i < len; i += 1) {\n                      if (animationData.assets[i].layers) {\n                        iterateLayers(animationData.assets[i].layers);\n                      }\n                    }\n                  }\n                }\n              };\n            }();\n            var checkShapes = function () {\n              var minimumVersion = [4, 4, 18];\n              function completeClosingShapes(arr) {\n                var i;\n                var len = arr.length;\n                var j;\n                var jLen;\n                for (i = len - 1; i >= 0; i -= 1) {\n                  if (arr[i].ty === 'sh') {\n                    if (arr[i].ks.k.i) {\n                      arr[i].ks.k.c = arr[i].closed;\n                    } else {\n                      jLen = arr[i].ks.k.length;\n                      for (j = 0; j < jLen; j += 1) {\n                        if (arr[i].ks.k[j].s) {\n                          arr[i].ks.k[j].s[0].c = arr[i].closed;\n                        }\n                        if (arr[i].ks.k[j].e) {\n                          arr[i].ks.k[j].e[0].c = arr[i].closed;\n                        }\n                      }\n                    }\n                  } else if (arr[i].ty === 'gr') {\n                    completeClosingShapes(arr[i].it);\n                  }\n                }\n              }\n              function iterateLayers(layers) {\n                var layerData;\n                var i;\n                var len = layers.length;\n                var j;\n                var jLen;\n                var k;\n                var kLen;\n                for (i = 0; i < len; i += 1) {\n                  layerData = layers[i];\n                  if (layerData.hasMask) {\n                    var maskProps = layerData.masksProperties;\n                    jLen = maskProps.length;\n                    for (j = 0; j < jLen; j += 1) {\n                      if (maskProps[j].pt.k.i) {\n                        maskProps[j].pt.k.c = maskProps[j].cl;\n                      } else {\n                        kLen = maskProps[j].pt.k.length;\n                        for (k = 0; k < kLen; k += 1) {\n                          if (maskProps[j].pt.k[k].s) {\n                            maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\n                          }\n                          if (maskProps[j].pt.k[k].e) {\n                            maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\n                          }\n                        }\n                      }\n                    }\n                  }\n                  if (layerData.ty === 4) {\n                    completeClosingShapes(layerData.shapes);\n                  }\n                }\n              }\n              return function (animationData) {\n                if (checkVersion(minimumVersion, animationData.v)) {\n                  iterateLayers(animationData.layers);\n                  if (animationData.assets) {\n                    var i;\n                    var len = animationData.assets.length;\n                    for (i = 0; i < len; i += 1) {\n                      if (animationData.assets[i].layers) {\n                        iterateLayers(animationData.assets[i].layers);\n                      }\n                    }\n                  }\n                }\n              };\n            }();\n            function completeData(animationData) {\n              if (animationData.__complete) {\n                return;\n              }\n              checkColors(animationData);\n              checkText(animationData);\n              checkChars(animationData);\n              checkPathProperties(animationData);\n              checkShapes(animationData);\n              completeLayers(animationData.layers, animationData.assets);\n              completeChars(animationData.chars, animationData.assets);\n              animationData.__complete = true;\n            }\n            function completeText(data) {\n              if (data.t.a.length === 0 && !('m' in data.t.p)) {\n                // data.singleShape = true;\n              }\n            }\n            var moduleOb = {};\n            moduleOb.completeData = completeData;\n            moduleOb.checkColors = checkColors;\n            moduleOb.checkChars = checkChars;\n            moduleOb.checkPathProperties = checkPathProperties;\n            moduleOb.checkShapes = checkShapes;\n            moduleOb.completeLayers = completeLayers;\n            return moduleOb;\n          }\n          if (!_workerSelf.dataManager) {\n            _workerSelf.dataManager = dataFunctionManager();\n          }\n          if (!_workerSelf.assetLoader) {\n            _workerSelf.assetLoader = function () {\n              function formatResponse(xhr) {\n                // using typeof doubles the time of execution of this method,\n                // so if available, it's better to use the header to validate the type\n                var contentTypeHeader = xhr.getResponseHeader('content-type');\n                if (contentTypeHeader && xhr.responseType === 'json' && contentTypeHeader.indexOf('json') !== -1) {\n                  return xhr.response;\n                }\n                if (xhr.response && _typeof$5(xhr.response) === 'object') {\n                  return xhr.response;\n                }\n                if (xhr.response && typeof xhr.response === 'string') {\n                  return JSON.parse(xhr.response);\n                }\n                if (xhr.responseText) {\n                  return JSON.parse(xhr.responseText);\n                }\n                return null;\n              }\n              function loadAsset(path, fullPath, callback, errorCallback) {\n                var response;\n                var xhr = new XMLHttpRequest();\n                // set responseType after calling open or IE will break.\n                try {\n                  // This crashes on Android WebView prior to KitKat\n                  xhr.responseType = 'json';\n                } catch (err) {} // eslint-disable-line no-empty\n                xhr.onreadystatechange = function () {\n                  if (xhr.readyState === 4) {\n                    if (xhr.status === 200) {\n                      response = formatResponse(xhr);\n                      callback(response);\n                    } else {\n                      try {\n                        response = formatResponse(xhr);\n                        callback(response);\n                      } catch (err) {\n                        if (errorCallback) {\n                          errorCallback(err);\n                        }\n                      }\n                    }\n                  }\n                };\n                try {\n                  // Hack to workaround banner validation\n                  xhr.open(['G', 'E', 'T'].join(''), path, true);\n                } catch (error) {\n                  // Hack to workaround banner validation\n                  xhr.open(['G', 'E', 'T'].join(''), fullPath + '/' + path, true);\n                }\n                xhr.send();\n              }\n              return {\n                load: loadAsset\n              };\n            }();\n          }\n          if (e.data.type === 'loadAnimation') {\n            _workerSelf.assetLoader.load(e.data.path, e.data.fullPath, function (data) {\n              _workerSelf.dataManager.completeData(data);\n              _workerSelf.postMessage({\n                id: e.data.id,\n                payload: data,\n                status: 'success'\n              });\n            }, function () {\n              _workerSelf.postMessage({\n                id: e.data.id,\n                status: 'error'\n              });\n            });\n          } else if (e.data.type === 'complete') {\n            var animation = e.data.animation;\n            _workerSelf.dataManager.completeData(animation);\n            _workerSelf.postMessage({\n              id: e.data.id,\n              payload: animation,\n              status: 'success'\n            });\n          } else if (e.data.type === 'loadData') {\n            _workerSelf.assetLoader.load(e.data.path, e.data.fullPath, function (data) {\n              _workerSelf.postMessage({\n                id: e.data.id,\n                payload: data,\n                status: 'success'\n              });\n            }, function () {\n              _workerSelf.postMessage({\n                id: e.data.id,\n                status: 'error'\n              });\n            });\n          }\n        });\n        workerInstance.onmessage = function (event) {\n          var data = event.data;\n          var id = data.id;\n          var process = processes[id];\n          processes[id] = null;\n          if (data.status === 'success') {\n            process.onComplete(data.payload);\n          } else if (process.onError) {\n            process.onError();\n          }\n        };\n      }\n    }\n    function createProcess(onComplete, onError) {\n      _counterId += 1;\n      var id = 'processId_' + _counterId;\n      processes[id] = {\n        onComplete: onComplete,\n        onError: onError\n      };\n      return id;\n    }\n    function loadAnimation(path, onComplete, onError) {\n      setupWorker();\n      var processId = createProcess(onComplete, onError);\n      workerInstance.postMessage({\n        type: 'loadAnimation',\n        path: path,\n        fullPath: window.location.origin + window.location.pathname,\n        id: processId\n      });\n    }\n    function loadData(path, onComplete, onError) {\n      setupWorker();\n      var processId = createProcess(onComplete, onError);\n      workerInstance.postMessage({\n        type: 'loadData',\n        path: path,\n        fullPath: window.location.origin + window.location.pathname,\n        id: processId\n      });\n    }\n    function completeAnimation(anim, onComplete, onError) {\n      setupWorker();\n      var processId = createProcess(onComplete, onError);\n      workerInstance.postMessage({\n        type: 'complete',\n        animation: anim,\n        id: processId\n      });\n    }\n    return {\n      loadAnimation: loadAnimation,\n      loadData: loadData,\n      completeAnimation: completeAnimation\n    };\n  }();\n\n  var ImagePreloader = function () {\n    var proxyImage = function () {\n      var canvas = createTag('canvas');\n      canvas.width = 1;\n      canvas.height = 1;\n      var ctx = canvas.getContext('2d');\n      ctx.fillStyle = 'rgba(0,0,0,0)';\n      ctx.fillRect(0, 0, 1, 1);\n      return canvas;\n    }();\n    function imageLoaded() {\n      this.loadedAssets += 1;\n      if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\n        if (this.imagesLoadedCb) {\n          this.imagesLoadedCb(null);\n        }\n      }\n    }\n    function footageLoaded() {\n      this.loadedFootagesCount += 1;\n      if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\n        if (this.imagesLoadedCb) {\n          this.imagesLoadedCb(null);\n        }\n      }\n    }\n    function getAssetsPath(assetData, assetsPath, originalPath) {\n      var path = '';\n      if (assetData.e) {\n        path = assetData.p;\n      } else if (assetsPath) {\n        var imagePath = assetData.p;\n        if (imagePath.indexOf('images/') !== -1) {\n          imagePath = imagePath.split('/')[1];\n        }\n        path = assetsPath + imagePath;\n      } else {\n        path = originalPath;\n        path += assetData.u ? assetData.u : '';\n        path += assetData.p;\n      }\n      return path;\n    }\n    function testImageLoaded(img) {\n      var _count = 0;\n      var intervalId = setInterval(function () {\n        var box = img.getBBox();\n        if (box.width || _count > 500) {\n          this._imageLoaded();\n          clearInterval(intervalId);\n        }\n        _count += 1;\n      }.bind(this), 50);\n    }\n    function createImageData(assetData) {\n      var path = getAssetsPath(assetData, this.assetsPath, this.path);\n      var img = createNS('image');\n      if (isSafari) {\n        this.testImageLoaded(img);\n      } else {\n        img.addEventListener('load', this._imageLoaded, false);\n      }\n      img.addEventListener('error', function () {\n        ob.img = proxyImage;\n        this._imageLoaded();\n      }.bind(this), false);\n      img.setAttributeNS('http://www.w3.org/1999/xlink', 'href', path);\n      if (this._elementHelper.append) {\n        this._elementHelper.append(img);\n      } else {\n        this._elementHelper.appendChild(img);\n      }\n      var ob = {\n        img: img,\n        assetData: assetData\n      };\n      return ob;\n    }\n    function createImgData(assetData) {\n      var path = getAssetsPath(assetData, this.assetsPath, this.path);\n      var img = createTag('img');\n      img.crossOrigin = 'anonymous';\n      img.addEventListener('load', this._imageLoaded, false);\n      img.addEventListener('error', function () {\n        ob.img = proxyImage;\n        this._imageLoaded();\n      }.bind(this), false);\n      img.src = path;\n      var ob = {\n        img: img,\n        assetData: assetData\n      };\n      return ob;\n    }\n    function createFootageData(data) {\n      var ob = {\n        assetData: data\n      };\n      var path = getAssetsPath(data, this.assetsPath, this.path);\n      dataManager.loadData(path, function (footageData) {\n        ob.img = footageData;\n        this._footageLoaded();\n      }.bind(this), function () {\n        ob.img = {};\n        this._footageLoaded();\n      }.bind(this));\n      return ob;\n    }\n    function loadAssets(assets, cb) {\n      this.imagesLoadedCb = cb;\n      var i;\n      var len = assets.length;\n      for (i = 0; i < len; i += 1) {\n        if (!assets[i].layers) {\n          if (!assets[i].t || assets[i].t === 'seq') {\n            this.totalImages += 1;\n            this.images.push(this._createImageData(assets[i]));\n          } else if (assets[i].t === 3) {\n            this.totalFootages += 1;\n            this.images.push(this.createFootageData(assets[i]));\n          }\n        }\n      }\n    }\n    function setPath(path) {\n      this.path = path || '';\n    }\n    function setAssetsPath(path) {\n      this.assetsPath = path || '';\n    }\n    function getAsset(assetData) {\n      var i = 0;\n      var len = this.images.length;\n      while (i < len) {\n        if (this.images[i].assetData === assetData) {\n          return this.images[i].img;\n        }\n        i += 1;\n      }\n      return null;\n    }\n    function destroy() {\n      this.imagesLoadedCb = null;\n      this.images.length = 0;\n    }\n    function loadedImages() {\n      return this.totalImages === this.loadedAssets;\n    }\n    function loadedFootages() {\n      return this.totalFootages === this.loadedFootagesCount;\n    }\n    function setCacheType(type, elementHelper) {\n      if (type === 'svg') {\n        this._elementHelper = elementHelper;\n        this._createImageData = this.createImageData.bind(this);\n      } else {\n        this._createImageData = this.createImgData.bind(this);\n      }\n    }\n    function ImagePreloaderFactory() {\n      this._imageLoaded = imageLoaded.bind(this);\n      this._footageLoaded = footageLoaded.bind(this);\n      this.testImageLoaded = testImageLoaded.bind(this);\n      this.createFootageData = createFootageData.bind(this);\n      this.assetsPath = '';\n      this.path = '';\n      this.totalImages = 0;\n      this.totalFootages = 0;\n      this.loadedAssets = 0;\n      this.loadedFootagesCount = 0;\n      this.imagesLoadedCb = null;\n      this.images = [];\n    }\n    ImagePreloaderFactory.prototype = {\n      loadAssets: loadAssets,\n      setAssetsPath: setAssetsPath,\n      setPath: setPath,\n      loadedImages: loadedImages,\n      loadedFootages: loadedFootages,\n      destroy: destroy,\n      getAsset: getAsset,\n      createImgData: createImgData,\n      createImageData: createImageData,\n      imageLoaded: imageLoaded,\n      footageLoaded: footageLoaded,\n      setCacheType: setCacheType\n    };\n    return ImagePreloaderFactory;\n  }();\n\n  function BaseEvent() {}\n  BaseEvent.prototype = {\n    triggerEvent: function triggerEvent(eventName, args) {\n      if (this._cbs[eventName]) {\n        var callbacks = this._cbs[eventName];\n        for (var i = 0; i < callbacks.length; i += 1) {\n          callbacks[i](args);\n        }\n      }\n    },\n    addEventListener: function addEventListener(eventName, callback) {\n      if (!this._cbs[eventName]) {\n        this._cbs[eventName] = [];\n      }\n      this._cbs[eventName].push(callback);\n      return function () {\n        this.removeEventListener(eventName, callback);\n      }.bind(this);\n    },\n    removeEventListener: function removeEventListener(eventName, callback) {\n      if (!callback) {\n        this._cbs[eventName] = null;\n      } else if (this._cbs[eventName]) {\n        var i = 0;\n        var len = this._cbs[eventName].length;\n        while (i < len) {\n          if (this._cbs[eventName][i] === callback) {\n            this._cbs[eventName].splice(i, 1);\n            i -= 1;\n            len -= 1;\n          }\n          i += 1;\n        }\n        if (!this._cbs[eventName].length) {\n          this._cbs[eventName] = null;\n        }\n      }\n    }\n  };\n\n  var markerParser = function () {\n    function parsePayloadLines(payload) {\n      var lines = payload.split('\\r\\n');\n      var keys = {};\n      var line;\n      var keysCount = 0;\n      for (var i = 0; i < lines.length; i += 1) {\n        line = lines[i].split(':');\n        if (line.length === 2) {\n          keys[line[0]] = line[1].trim();\n          keysCount += 1;\n        }\n      }\n      if (keysCount === 0) {\n        throw new Error();\n      }\n      return keys;\n    }\n    return function (_markers) {\n      var markers = [];\n      for (var i = 0; i < _markers.length; i += 1) {\n        var _marker = _markers[i];\n        var markerData = {\n          time: _marker.tm,\n          duration: _marker.dr\n        };\n        try {\n          markerData.payload = JSON.parse(_markers[i].cm);\n        } catch (_) {\n          try {\n            markerData.payload = parsePayloadLines(_markers[i].cm);\n          } catch (__) {\n            markerData.payload = {\n              name: _markers[i].cm\n            };\n          }\n        }\n        markers.push(markerData);\n      }\n      return markers;\n    };\n  }();\n\n  var ProjectInterface = function () {\n    function registerComposition(comp) {\n      this.compositions.push(comp);\n    }\n    return function () {\n      function _thisProjectFunction(name) {\n        var i = 0;\n        var len = this.compositions.length;\n        while (i < len) {\n          if (this.compositions[i].data && this.compositions[i].data.nm === name) {\n            if (this.compositions[i].prepareFrame && this.compositions[i].data.xt) {\n              this.compositions[i].prepareFrame(this.currentFrame);\n            }\n            return this.compositions[i].compInterface;\n          }\n          i += 1;\n        }\n        return null;\n      }\n      _thisProjectFunction.compositions = [];\n      _thisProjectFunction.currentFrame = 0;\n      _thisProjectFunction.registerComposition = registerComposition;\n      return _thisProjectFunction;\n    };\n  }();\n\n  var renderers = {};\n  var registerRenderer = function registerRenderer(key, value) {\n    renderers[key] = value;\n  };\n  function getRenderer(key) {\n    return renderers[key];\n  }\n  function getRegisteredRenderer() {\n    // Returns canvas by default for compatibility\n    if (renderers.canvas) {\n      return 'canvas';\n    }\n    // Returns any renderer that is registered\n    for (var key in renderers) {\n      if (renderers[key]) {\n        return key;\n      }\n    }\n    return '';\n  }\n\n  function _typeof$4(o) { \"@babel/helpers - typeof\"; return _typeof$4 = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof$4(o); }\n  var AnimationItem = function AnimationItem() {\n    this._cbs = [];\n    this.name = '';\n    this.path = '';\n    this.isLoaded = false;\n    this.currentFrame = 0;\n    this.currentRawFrame = 0;\n    this.firstFrame = 0;\n    this.totalFrames = 0;\n    this.frameRate = 0;\n    this.frameMult = 0;\n    this.playSpeed = 1;\n    this.playDirection = 1;\n    this.playCount = 0;\n    this.animationData = {};\n    this.assets = [];\n    this.isPaused = true;\n    this.autoplay = false;\n    this.loop = true;\n    this.renderer = null;\n    this.animationID = createElementID();\n    this.assetsPath = '';\n    this.timeCompleted = 0;\n    this.segmentPos = 0;\n    this.isSubframeEnabled = getSubframeEnabled();\n    this.segments = [];\n    this._idle = true;\n    this._completedLoop = false;\n    this.projectInterface = ProjectInterface();\n    this.imagePreloader = new ImagePreloader();\n    this.audioController = audioControllerFactory();\n    this.markers = [];\n    this.configAnimation = this.configAnimation.bind(this);\n    this.onSetupError = this.onSetupError.bind(this);\n    this.onSegmentComplete = this.onSegmentComplete.bind(this);\n    this.drawnFrameEvent = new BMEnterFrameEvent('drawnFrame', 0, 0, 0);\n    this.expressionsPlugin = getExpressionsPlugin();\n  };\n  extendPrototype([BaseEvent], AnimationItem);\n  AnimationItem.prototype.setParams = function (params) {\n    if (params.wrapper || params.container) {\n      this.wrapper = params.wrapper || params.container;\n    }\n    var animType = 'svg';\n    if (params.animType) {\n      animType = params.animType;\n    } else if (params.renderer) {\n      animType = params.renderer;\n    }\n    var RendererClass = getRenderer(animType);\n    this.renderer = new RendererClass(this, params.rendererSettings);\n    this.imagePreloader.setCacheType(animType, this.renderer.globalData.defs);\n    this.renderer.setProjectInterface(this.projectInterface);\n    this.animType = animType;\n    if (params.loop === '' || params.loop === null || params.loop === undefined || params.loop === true) {\n      this.loop = true;\n    } else if (params.loop === false) {\n      this.loop = false;\n    } else {\n      this.loop = parseInt(params.loop, 10);\n    }\n    this.autoplay = 'autoplay' in params ? params.autoplay : true;\n    this.name = params.name ? params.name : '';\n    this.autoloadSegments = Object.prototype.hasOwnProperty.call(params, 'autoloadSegments') ? params.autoloadSegments : true;\n    this.assetsPath = params.assetsPath;\n    this.initialSegment = params.initialSegment;\n    if (params.audioFactory) {\n      this.audioController.setAudioFactory(params.audioFactory);\n    }\n    if (params.animationData) {\n      this.setupAnimation(params.animationData);\n    } else if (params.path) {\n      if (params.path.lastIndexOf('\\\\') !== -1) {\n        this.path = params.path.substr(0, params.path.lastIndexOf('\\\\') + 1);\n      } else {\n        this.path = params.path.substr(0, params.path.lastIndexOf('/') + 1);\n      }\n      this.fileName = params.path.substr(params.path.lastIndexOf('/') + 1);\n      this.fileName = this.fileName.substr(0, this.fileName.lastIndexOf('.json'));\n      dataManager.loadAnimation(params.path, this.configAnimation, this.onSetupError);\n    }\n  };\n  AnimationItem.prototype.onSetupError = function () {\n    this.trigger('data_failed');\n  };\n  AnimationItem.prototype.setupAnimation = function (data) {\n    dataManager.completeAnimation(data, this.configAnimation);\n  };\n  AnimationItem.prototype.setData = function (wrapper, animationData) {\n    if (animationData) {\n      if (_typeof$4(animationData) !== 'object') {\n        animationData = JSON.parse(animationData);\n      }\n    }\n    var params = {\n      wrapper: wrapper,\n      animationData: animationData\n    };\n    var wrapperAttributes = wrapper.attributes;\n    params.path = wrapperAttributes.getNamedItem('data-animation-path') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-animation-path').value : wrapperAttributes.getNamedItem('data-bm-path') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-path').value : wrapperAttributes.getNamedItem('bm-path') ? wrapperAttributes.getNamedItem('bm-path').value : '';\n    params.animType = wrapperAttributes.getNamedItem('data-anim-type') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-type').value : wrapperAttributes.getNamedItem('data-bm-type') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-type').value : wrapperAttributes.getNamedItem('bm-type') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('bm-type').value : wrapperAttributes.getNamedItem('data-bm-renderer') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-renderer').value : wrapperAttributes.getNamedItem('bm-renderer') ? wrapperAttributes.getNamedItem('bm-renderer').value : getRegisteredRenderer() || 'canvas';\n    var loop = wrapperAttributes.getNamedItem('data-anim-loop') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-loop').value : wrapperAttributes.getNamedItem('data-bm-loop') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-loop').value : wrapperAttributes.getNamedItem('bm-loop') ? wrapperAttributes.getNamedItem('bm-loop').value : '';\n    if (loop === 'false') {\n      params.loop = false;\n    } else if (loop === 'true') {\n      params.loop = true;\n    } else if (loop !== '') {\n      params.loop = parseInt(loop, 10);\n    }\n    var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-autoplay').value : wrapperAttributes.getNamedItem('data-bm-autoplay') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-autoplay').value : wrapperAttributes.getNamedItem('bm-autoplay') ? wrapperAttributes.getNamedItem('bm-autoplay').value : true;\n    params.autoplay = autoplay !== 'false';\n    params.name = wrapperAttributes.getNamedItem('data-name') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-name').value : wrapperAttributes.getNamedItem('data-bm-name') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-name').value : wrapperAttributes.getNamedItem('bm-name') ? wrapperAttributes.getNamedItem('bm-name').value : '';\n    var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-prerender').value : wrapperAttributes.getNamedItem('data-bm-prerender') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-prerender').value : wrapperAttributes.getNamedItem('bm-prerender') ? wrapperAttributes.getNamedItem('bm-prerender').value : '';\n    if (prerender === 'false') {\n      params.prerender = false;\n    }\n    if (!params.path) {\n      this.trigger('destroy');\n    } else {\n      this.setParams(params);\n    }\n  };\n  AnimationItem.prototype.includeLayers = function (data) {\n    if (data.op > this.animationData.op) {\n      this.animationData.op = data.op;\n      this.totalFrames = Math.floor(data.op - this.animationData.ip);\n    }\n    var layers = this.animationData.layers;\n    var i;\n    var len = layers.length;\n    var newLayers = data.layers;\n    var j;\n    var jLen = newLayers.length;\n    for (j = 0; j < jLen; j += 1) {\n      i = 0;\n      while (i < len) {\n        if (layers[i].id === newLayers[j].id) {\n          layers[i] = newLayers[j];\n          break;\n        }\n        i += 1;\n      }\n    }\n    if (data.chars || data.fonts) {\n      this.renderer.globalData.fontManager.addChars(data.chars);\n      this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\n    }\n    if (data.assets) {\n      len = data.assets.length;\n      for (i = 0; i < len; i += 1) {\n        this.animationData.assets.push(data.assets[i]);\n      }\n    }\n    this.animationData.__complete = false;\n    dataManager.completeAnimation(this.animationData, this.onSegmentComplete);\n  };\n  AnimationItem.prototype.onSegmentComplete = function (data) {\n    this.animationData = data;\n    var expressionsPlugin = getExpressionsPlugin();\n    if (expressionsPlugin) {\n      expressionsPlugin.initExpressions(this);\n    }\n    this.loadNextSegment();\n  };\n  AnimationItem.prototype.loadNextSegment = function () {\n    var segments = this.animationData.segments;\n    if (!segments || segments.length === 0 || !this.autoloadSegments) {\n      this.trigger('data_ready');\n      this.timeCompleted = this.totalFrames;\n      return;\n    }\n    var segment = segments.shift();\n    this.timeCompleted = segment.time * this.frameRate;\n    var segmentPath = this.path + this.fileName + '_' + this.segmentPos + '.json';\n    this.segmentPos += 1;\n    dataManager.loadData(segmentPath, this.includeLayers.bind(this), function () {\n      this.trigger('data_failed');\n    }.bind(this));\n  };\n  AnimationItem.prototype.loadSegments = function () {\n    var segments = this.animationData.segments;\n    if (!segments) {\n      this.timeCompleted = this.totalFrames;\n    }\n    this.loadNextSegment();\n  };\n  AnimationItem.prototype.imagesLoaded = function () {\n    this.trigger('loaded_images');\n    this.checkLoaded();\n  };\n  AnimationItem.prototype.preloadImages = function () {\n    this.imagePreloader.setAssetsPath(this.assetsPath);\n    this.imagePreloader.setPath(this.path);\n    this.imagePreloader.loadAssets(this.animationData.assets, this.imagesLoaded.bind(this));\n  };\n  AnimationItem.prototype.configAnimation = function (animData) {\n    if (!this.renderer) {\n      return;\n    }\n    try {\n      this.animationData = animData;\n      if (this.initialSegment) {\n        this.totalFrames = Math.floor(this.initialSegment[1] - this.initialSegment[0]);\n        this.firstFrame = Math.round(this.initialSegment[0]);\n      } else {\n        this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\n        this.firstFrame = Math.round(this.animationData.ip);\n      }\n      this.renderer.configAnimation(animData);\n      if (!animData.assets) {\n        animData.assets = [];\n      }\n      this.assets = this.animationData.assets;\n      this.frameRate = this.animationData.fr;\n      this.frameMult = this.animationData.fr / 1000;\n      this.renderer.searchExtraCompositions(animData.assets);\n      this.markers = markerParser(animData.markers || []);\n      this.trigger('config_ready');\n      this.preloadImages();\n      this.loadSegments();\n      this.updaFrameModifier();\n      this.waitForFontsLoaded();\n      if (this.isPaused) {\n        this.audioController.pause();\n      }\n    } catch (error) {\n      this.triggerConfigError(error);\n    }\n  };\n  AnimationItem.prototype.waitForFontsLoaded = function () {\n    if (!this.renderer) {\n      return;\n    }\n    if (this.renderer.globalData.fontManager.isLoaded) {\n      this.checkLoaded();\n    } else {\n      setTimeout(this.waitForFontsLoaded.bind(this), 20);\n    }\n  };\n  AnimationItem.prototype.checkLoaded = function () {\n    if (!this.isLoaded && this.renderer.globalData.fontManager.isLoaded && (this.imagePreloader.loadedImages() || this.renderer.rendererType !== 'canvas') && this.imagePreloader.loadedFootages()) {\n      this.isLoaded = true;\n      var expressionsPlugin = getExpressionsPlugin();\n      if (expressionsPlugin) {\n        expressionsPlugin.initExpressions(this);\n      }\n      this.renderer.initItems();\n      setTimeout(function () {\n        this.trigger('DOMLoaded');\n      }.bind(this), 0);\n      this.gotoFrame();\n      if (this.autoplay) {\n        this.play();\n      }\n    }\n  };\n  AnimationItem.prototype.resize = function (width, height) {\n    // Adding this validation for backwards compatibility in case an event object was being passed down\n    var _width = typeof width === 'number' ? width : undefined;\n    var _height = typeof height === 'number' ? height : undefined;\n    this.renderer.updateContainerSize(_width, _height);\n  };\n  AnimationItem.prototype.setSubframe = function (flag) {\n    this.isSubframeEnabled = !!flag;\n  };\n  AnimationItem.prototype.gotoFrame = function () {\n    this.currentFrame = this.isSubframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame; // eslint-disable-line no-bitwise\n\n    if (this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted) {\n      this.currentFrame = this.timeCompleted;\n    }\n    this.trigger('enterFrame');\n    this.renderFrame();\n    this.trigger('drawnFrame');\n  };\n  AnimationItem.prototype.renderFrame = function () {\n    if (this.isLoaded === false || !this.renderer) {\n      return;\n    }\n    try {\n      if (this.expressionsPlugin) {\n        this.expressionsPlugin.resetFrame();\n      }\n      this.renderer.renderFrame(this.currentFrame + this.firstFrame);\n    } catch (error) {\n      this.triggerRenderFrameError(error);\n    }\n  };\n  AnimationItem.prototype.play = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    if (this.isPaused === true) {\n      this.isPaused = false;\n      this.trigger('_play');\n      this.audioController.resume();\n      if (this._idle) {\n        this._idle = false;\n        this.trigger('_active');\n      }\n    }\n  };\n  AnimationItem.prototype.pause = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    if (this.isPaused === false) {\n      this.isPaused = true;\n      this.trigger('_pause');\n      this._idle = true;\n      this.trigger('_idle');\n      this.audioController.pause();\n    }\n  };\n  AnimationItem.prototype.togglePause = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    if (this.isPaused === true) {\n      this.play();\n    } else {\n      this.pause();\n    }\n  };\n  AnimationItem.prototype.stop = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    this.pause();\n    this.playCount = 0;\n    this._completedLoop = false;\n    this.setCurrentRawFrameValue(0);\n  };\n  AnimationItem.prototype.getMarkerData = function (markerName) {\n    var marker;\n    for (var i = 0; i < this.markers.length; i += 1) {\n      marker = this.markers[i];\n      if (marker.payload && marker.payload.name === markerName) {\n        return marker;\n      }\n    }\n    return null;\n  };\n  AnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    var numValue = Number(value);\n    if (isNaN(numValue)) {\n      var marker = this.getMarkerData(value);\n      if (marker) {\n        this.goToAndStop(marker.time, true);\n      }\n    } else if (isFrame) {\n      this.setCurrentRawFrameValue(value);\n    } else {\n      this.setCurrentRawFrameValue(value * this.frameModifier);\n    }\n    this.pause();\n  };\n  AnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    var numValue = Number(value);\n    if (isNaN(numValue)) {\n      var marker = this.getMarkerData(value);\n      if (marker) {\n        if (!marker.duration) {\n          this.goToAndStop(marker.time, true);\n        } else {\n          this.playSegments([marker.time, marker.time + marker.duration], true);\n        }\n      }\n    } else {\n      this.goToAndStop(numValue, isFrame, name);\n    }\n    this.play();\n  };\n  AnimationItem.prototype.advanceTime = function (value) {\n    if (this.isPaused === true || this.isLoaded === false) {\n      return;\n    }\n    var nextValue = this.currentRawFrame + value * this.frameModifier;\n    var _isComplete = false;\n    // Checking if nextValue > totalFrames - 1 for addressing non looping and looping animations.\n    // If animation won't loop, it should stop at totalFrames - 1. If it will loop it should complete the last frame and then loop.\n    if (nextValue >= this.totalFrames - 1 && this.frameModifier > 0) {\n      if (!this.loop || this.playCount === this.loop) {\n        if (!this.checkSegments(nextValue > this.totalFrames ? nextValue % this.totalFrames : 0)) {\n          _isComplete = true;\n          nextValue = this.totalFrames - 1;\n        }\n      } else if (nextValue >= this.totalFrames) {\n        this.playCount += 1;\n        if (!this.checkSegments(nextValue % this.totalFrames)) {\n          this.setCurrentRawFrameValue(nextValue % this.totalFrames);\n          this._completedLoop = true;\n          this.trigger('loopComplete');\n        }\n      } else {\n        this.setCurrentRawFrameValue(nextValue);\n      }\n    } else if (nextValue < 0) {\n      if (!this.checkSegments(nextValue % this.totalFrames)) {\n        if (this.loop && !(this.playCount-- <= 0 && this.loop !== true)) {\n          // eslint-disable-line no-plusplus\n          this.setCurrentRawFrameValue(this.totalFrames + nextValue % this.totalFrames);\n          if (!this._completedLoop) {\n            this._completedLoop = true;\n          } else {\n            this.trigger('loopComplete');\n          }\n        } else {\n          _isComplete = true;\n          nextValue = 0;\n        }\n      }\n    } else {\n      this.setCurrentRawFrameValue(nextValue);\n    }\n    if (_isComplete) {\n      this.setCurrentRawFrameValue(nextValue);\n      this.pause();\n      this.trigger('complete');\n    }\n  };\n  AnimationItem.prototype.adjustSegment = function (arr, offset) {\n    this.playCount = 0;\n    if (arr[1] < arr[0]) {\n      if (this.frameModifier > 0) {\n        if (this.playSpeed < 0) {\n          this.setSpeed(-this.playSpeed);\n        } else {\n          this.setDirection(-1);\n        }\n      }\n      this.totalFrames = arr[0] - arr[1];\n      this.timeCompleted = this.totalFrames;\n      this.firstFrame = arr[1];\n      this.setCurrentRawFrameValue(this.totalFrames - 0.001 - offset);\n    } else if (arr[1] > arr[0]) {\n      if (this.frameModifier < 0) {\n        if (this.playSpeed < 0) {\n          this.setSpeed(-this.playSpeed);\n        } else {\n          this.setDirection(1);\n        }\n      }\n      this.totalFrames = arr[1] - arr[0];\n      this.timeCompleted = this.totalFrames;\n      this.firstFrame = arr[0];\n      this.setCurrentRawFrameValue(0.001 + offset);\n    }\n    this.trigger('segmentStart');\n  };\n  AnimationItem.prototype.setSegment = function (init, end) {\n    var pendingFrame = -1;\n    if (this.isPaused) {\n      if (this.currentRawFrame + this.firstFrame < init) {\n        pendingFrame = init;\n      } else if (this.currentRawFrame + this.firstFrame > end) {\n        pendingFrame = end - init;\n      }\n    }\n    this.firstFrame = init;\n    this.totalFrames = end - init;\n    this.timeCompleted = this.totalFrames;\n    if (pendingFrame !== -1) {\n      this.goToAndStop(pendingFrame, true);\n    }\n  };\n  AnimationItem.prototype.playSegments = function (arr, forceFlag) {\n    if (forceFlag) {\n      this.segments.length = 0;\n    }\n    if (_typeof$4(arr[0]) === 'object') {\n      var i;\n      var len = arr.length;\n      for (i = 0; i < len; i += 1) {\n        this.segments.push(arr[i]);\n      }\n    } else {\n      this.segments.push(arr);\n    }\n    if (this.segments.length && forceFlag) {\n      this.adjustSegment(this.segments.shift(), 0);\n    }\n    if (this.isPaused) {\n      this.play();\n    }\n  };\n  AnimationItem.prototype.resetSegments = function (forceFlag) {\n    this.segments.length = 0;\n    this.segments.push([this.animationData.ip, this.animationData.op]);\n    if (forceFlag) {\n      this.checkSegments(0);\n    }\n  };\n  AnimationItem.prototype.checkSegments = function (offset) {\n    if (this.segments.length) {\n      this.adjustSegment(this.segments.shift(), offset);\n      return true;\n    }\n    return false;\n  };\n  AnimationItem.prototype.destroy = function (name) {\n    if (name && this.name !== name || !this.renderer) {\n      return;\n    }\n    this.renderer.destroy();\n    this.imagePreloader.destroy();\n    this.trigger('destroy');\n    this._cbs = null;\n    this.onEnterFrame = null;\n    this.onLoopComplete = null;\n    this.onComplete = null;\n    this.onSegmentStart = null;\n    this.onDestroy = null;\n    this.renderer = null;\n    this.expressionsPlugin = null;\n    this.imagePreloader = null;\n    this.projectInterface = null;\n  };\n  AnimationItem.prototype.setCurrentRawFrameValue = function (value) {\n    this.currentRawFrame = value;\n    this.gotoFrame();\n  };\n  AnimationItem.prototype.setSpeed = function (val) {\n    this.playSpeed = val;\n    this.updaFrameModifier();\n  };\n  AnimationItem.prototype.setDirection = function (val) {\n    this.playDirection = val < 0 ? -1 : 1;\n    this.updaFrameModifier();\n  };\n  AnimationItem.prototype.setLoop = function (isLooping) {\n    this.loop = isLooping;\n  };\n  AnimationItem.prototype.setVolume = function (val, name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    this.audioController.setVolume(val);\n  };\n  AnimationItem.prototype.getVolume = function () {\n    return this.audioController.getVolume();\n  };\n  AnimationItem.prototype.mute = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    this.audioController.mute();\n  };\n  AnimationItem.prototype.unmute = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    this.audioController.unmute();\n  };\n  AnimationItem.prototype.updaFrameModifier = function () {\n    this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\n    this.audioController.setRate(this.playSpeed * this.playDirection);\n  };\n  AnimationItem.prototype.getPath = function () {\n    return this.path;\n  };\n  AnimationItem.prototype.getAssetsPath = function (assetData) {\n    var path = '';\n    if (assetData.e) {\n      path = assetData.p;\n    } else if (this.assetsPath) {\n      var imagePath = assetData.p;\n      if (imagePath.indexOf('images/') !== -1) {\n        imagePath = imagePath.split('/')[1];\n      }\n      path = this.assetsPath + imagePath;\n    } else {\n      path = this.path;\n      path += assetData.u ? assetData.u : '';\n      path += assetData.p;\n    }\n    return path;\n  };\n  AnimationItem.prototype.getAssetData = function (id) {\n    var i = 0;\n    var len = this.assets.length;\n    while (i < len) {\n      if (id === this.assets[i].id) {\n        return this.assets[i];\n      }\n      i += 1;\n    }\n    return null;\n  };\n  AnimationItem.prototype.hide = function () {\n    this.renderer.hide();\n  };\n  AnimationItem.prototype.show = function () {\n    this.renderer.show();\n  };\n  AnimationItem.prototype.getDuration = function (isFrame) {\n    return isFrame ? this.totalFrames : this.totalFrames / this.frameRate;\n  };\n  AnimationItem.prototype.updateDocumentData = function (path, documentData, index) {\n    try {\n      var element = this.renderer.getElementByPath(path);\n      element.updateDocumentData(documentData, index);\n    } catch (error) {\n      // TODO: decide how to handle catch case\n    }\n  };\n  AnimationItem.prototype.trigger = function (name) {\n    if (this._cbs && this._cbs[name]) {\n      switch (name) {\n        case 'enterFrame':\n          this.triggerEvent(name, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameModifier));\n          break;\n        case 'drawnFrame':\n          this.drawnFrameEvent.currentTime = this.currentFrame;\n          this.drawnFrameEvent.totalTime = this.totalFrames;\n          this.drawnFrameEvent.direction = this.frameModifier;\n          this.triggerEvent(name, this.drawnFrameEvent);\n          break;\n        case 'loopComplete':\n          this.triggerEvent(name, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\n          break;\n        case 'complete':\n          this.triggerEvent(name, new BMCompleteEvent(name, this.frameMult));\n          break;\n        case 'segmentStart':\n          this.triggerEvent(name, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\n          break;\n        case 'destroy':\n          this.triggerEvent(name, new BMDestroyEvent(name, this));\n          break;\n        default:\n          this.triggerEvent(name);\n      }\n    }\n    if (name === 'enterFrame' && this.onEnterFrame) {\n      this.onEnterFrame.call(this, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameMult));\n    }\n    if (name === 'loopComplete' && this.onLoopComplete) {\n      this.onLoopComplete.call(this, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\n    }\n    if (name === 'complete' && this.onComplete) {\n      this.onComplete.call(this, new BMCompleteEvent(name, this.frameMult));\n    }\n    if (name === 'segmentStart' && this.onSegmentStart) {\n      this.onSegmentStart.call(this, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\n    }\n    if (name === 'destroy' && this.onDestroy) {\n      this.onDestroy.call(this, new BMDestroyEvent(name, this));\n    }\n  };\n  AnimationItem.prototype.triggerRenderFrameError = function (nativeError) {\n    var error = new BMRenderFrameErrorEvent(nativeError, this.currentFrame);\n    this.triggerEvent('error', error);\n    if (this.onError) {\n      this.onError.call(this, error);\n    }\n  };\n  AnimationItem.prototype.triggerConfigError = function (nativeError) {\n    var error = new BMConfigErrorEvent(nativeError, this.currentFrame);\n    this.triggerEvent('error', error);\n    if (this.onError) {\n      this.onError.call(this, error);\n    }\n  };\n\n  var animationManager = function () {\n    var moduleOb = {};\n    var registeredAnimations = [];\n    var initTime = 0;\n    var len = 0;\n    var playingAnimationsNum = 0;\n    var _stopped = true;\n    var _isFrozen = false;\n    function removeElement(ev) {\n      var i = 0;\n      var animItem = ev.target;\n      while (i < len) {\n        if (registeredAnimations[i].animation === animItem) {\n          registeredAnimations.splice(i, 1);\n          i -= 1;\n          len -= 1;\n          if (!animItem.isPaused) {\n            subtractPlayingCount();\n          }\n        }\n        i += 1;\n      }\n    }\n    function registerAnimation(element, animationData) {\n      if (!element) {\n        return null;\n      }\n      var i = 0;\n      while (i < len) {\n        if (registeredAnimations[i].elem === element && registeredAnimations[i].elem !== null) {\n          return registeredAnimations[i].animation;\n        }\n        i += 1;\n      }\n      var animItem = new AnimationItem();\n      setupAnimation(animItem, element);\n      animItem.setData(element, animationData);\n      return animItem;\n    }\n    function getRegisteredAnimations() {\n      var i;\n      var lenAnims = registeredAnimations.length;\n      var animations = [];\n      for (i = 0; i < lenAnims; i += 1) {\n        animations.push(registeredAnimations[i].animation);\n      }\n      return animations;\n    }\n    function addPlayingCount() {\n      playingAnimationsNum += 1;\n      activate();\n    }\n    function subtractPlayingCount() {\n      playingAnimationsNum -= 1;\n    }\n    function setupAnimation(animItem, element) {\n      animItem.addEventListener('destroy', removeElement);\n      animItem.addEventListener('_active', addPlayingCount);\n      animItem.addEventListener('_idle', subtractPlayingCount);\n      registeredAnimations.push({\n        elem: element,\n        animation: animItem\n      });\n      len += 1;\n    }\n    function loadAnimation(params) {\n      var animItem = new AnimationItem();\n      setupAnimation(animItem, null);\n      animItem.setParams(params);\n      return animItem;\n    }\n    function setSpeed(val, animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.setSpeed(val, animation);\n      }\n    }\n    function setDirection(val, animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.setDirection(val, animation);\n      }\n    }\n    function play(animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.play(animation);\n      }\n    }\n    function resume(nowTime) {\n      var elapsedTime = nowTime - initTime;\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.advanceTime(elapsedTime);\n      }\n      initTime = nowTime;\n      if (playingAnimationsNum && !_isFrozen) {\n        window.requestAnimationFrame(resume);\n      } else {\n        _stopped = true;\n      }\n    }\n    function first(nowTime) {\n      initTime = nowTime;\n      window.requestAnimationFrame(resume);\n    }\n    function pause(animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.pause(animation);\n      }\n    }\n    function goToAndStop(value, isFrame, animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.goToAndStop(value, isFrame, animation);\n      }\n    }\n    function stop(animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.stop(animation);\n      }\n    }\n    function togglePause(animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.togglePause(animation);\n      }\n    }\n    function destroy(animation) {\n      var i;\n      for (i = len - 1; i >= 0; i -= 1) {\n        registeredAnimations[i].animation.destroy(animation);\n      }\n    }\n    function searchAnimations(animationData, standalone, renderer) {\n      var animElements = [].concat([].slice.call(document.getElementsByClassName('lottie')), [].slice.call(document.getElementsByClassName('bodymovin')));\n      var i;\n      var lenAnims = animElements.length;\n      for (i = 0; i < lenAnims; i += 1) {\n        if (renderer) {\n          animElements[i].setAttribute('data-bm-type', renderer);\n        }\n        registerAnimation(animElements[i], animationData);\n      }\n      if (standalone && lenAnims === 0) {\n        if (!renderer) {\n          renderer = 'svg';\n        }\n        var body = document.getElementsByTagName('body')[0];\n        body.innerText = '';\n        var div = createTag('div');\n        div.style.width = '100%';\n        div.style.height = '100%';\n        div.setAttribute('data-bm-type', renderer);\n        body.appendChild(div);\n        registerAnimation(div, animationData);\n      }\n    }\n    function resize() {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.resize();\n      }\n    }\n    function activate() {\n      if (!_isFrozen && playingAnimationsNum) {\n        if (_stopped) {\n          window.requestAnimationFrame(first);\n          _stopped = false;\n        }\n      }\n    }\n    function freeze() {\n      _isFrozen = true;\n    }\n    function unfreeze() {\n      _isFrozen = false;\n      activate();\n    }\n    function setVolume(val, animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.setVolume(val, animation);\n      }\n    }\n    function mute(animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.mute(animation);\n      }\n    }\n    function unmute(animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.unmute(animation);\n      }\n    }\n    moduleOb.registerAnimation = registerAnimation;\n    moduleOb.loadAnimation = loadAnimation;\n    moduleOb.setSpeed = setSpeed;\n    moduleOb.setDirection = setDirection;\n    moduleOb.play = play;\n    moduleOb.pause = pause;\n    moduleOb.stop = stop;\n    moduleOb.togglePause = togglePause;\n    moduleOb.searchAnimations = searchAnimations;\n    moduleOb.resize = resize;\n    // moduleOb.start = start;\n    moduleOb.goToAndStop = goToAndStop;\n    moduleOb.destroy = destroy;\n    moduleOb.freeze = freeze;\n    moduleOb.unfreeze = unfreeze;\n    moduleOb.setVolume = setVolume;\n    moduleOb.mute = mute;\n    moduleOb.unmute = unmute;\n    moduleOb.getRegisteredAnimations = getRegisteredAnimations;\n    return moduleOb;\n  }();\n\n  /* eslint-disable */\n  var BezierFactory = function () {\n    /**\n       * BezierEasing - use bezier curve for transition easing function\n       * by Gatan Renaudeau 2014 - 2015  MIT License\n       *\n       * Credits: is based on Firefox's nsSMILKeySpline.cpp\n       * Usage:\n       * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\n       * spline.get(x) => returns the easing value | x must be in [0, 1] range\n       *\n       */\n\n    var ob = {};\n    ob.getBezierEasing = getBezierEasing;\n    var beziers = {};\n    function getBezierEasing(a, b, c, d, nm) {\n      var str = nm || ('bez_' + a + '_' + b + '_' + c + '_' + d).replace(/\\./g, 'p');\n      if (beziers[str]) {\n        return beziers[str];\n      }\n      var bezEasing = new BezierEasing([a, b, c, d]);\n      beziers[str] = bezEasing;\n      return bezEasing;\n    }\n\n    // These values are established by empiricism with tests (tradeoff: performance VS precision)\n    var NEWTON_ITERATIONS = 4;\n    var NEWTON_MIN_SLOPE = 0.001;\n    var SUBDIVISION_PRECISION = 0.0000001;\n    var SUBDIVISION_MAX_ITERATIONS = 10;\n    var kSplineTableSize = 11;\n    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n    var float32ArraySupported = typeof Float32Array === 'function';\n    function A(aA1, aA2) {\n      return 1.0 - 3.0 * aA2 + 3.0 * aA1;\n    }\n    function B(aA1, aA2) {\n      return 3.0 * aA2 - 6.0 * aA1;\n    }\n    function C(aA1) {\n      return 3.0 * aA1;\n    }\n\n    // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\n    function calcBezier(aT, aA1, aA2) {\n      return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n    }\n\n    // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\n    function getSlope(aT, aA1, aA2) {\n      return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n    }\n    function binarySubdivide(aX, aA, aB, mX1, mX2) {\n      var currentX,\n        currentT,\n        i = 0;\n      do {\n        currentT = aA + (aB - aA) / 2.0;\n        currentX = calcBezier(currentT, mX1, mX2) - aX;\n        if (currentX > 0.0) {\n          aB = currentT;\n        } else {\n          aA = currentT;\n        }\n      } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n      return currentT;\n    }\n    function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n      for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n        var currentSlope = getSlope(aGuessT, mX1, mX2);\n        if (currentSlope === 0.0) return aGuessT;\n        var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n        aGuessT -= currentX / currentSlope;\n      }\n      return aGuessT;\n    }\n\n    /**\n       * points is an array of [ mX1, mY1, mX2, mY2 ]\n       */\n    function BezierEasing(points) {\n      this._p = points;\n      this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n      this._precomputed = false;\n      this.get = this.get.bind(this);\n    }\n    BezierEasing.prototype = {\n      get: function get(x) {\n        var mX1 = this._p[0],\n          mY1 = this._p[1],\n          mX2 = this._p[2],\n          mY2 = this._p[3];\n        if (!this._precomputed) this._precompute();\n        if (mX1 === mY1 && mX2 === mY2) return x; // linear\n        // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n        if (x === 0) return 0;\n        if (x === 1) return 1;\n        return calcBezier(this._getTForX(x), mY1, mY2);\n      },\n      // Private part\n\n      _precompute: function _precompute() {\n        var mX1 = this._p[0],\n          mY1 = this._p[1],\n          mX2 = this._p[2],\n          mY2 = this._p[3];\n        this._precomputed = true;\n        if (mX1 !== mY1 || mX2 !== mY2) {\n          this._calcSampleValues();\n        }\n      },\n      _calcSampleValues: function _calcSampleValues() {\n        var mX1 = this._p[0],\n          mX2 = this._p[2];\n        for (var i = 0; i < kSplineTableSize; ++i) {\n          this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n        }\n      },\n      /**\n           * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\n           */\n      _getTForX: function _getTForX(aX) {\n        var mX1 = this._p[0],\n          mX2 = this._p[2],\n          mSampleValues = this._mSampleValues;\n        var intervalStart = 0.0;\n        var currentSample = 1;\n        var lastSample = kSplineTableSize - 1;\n        for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\n          intervalStart += kSampleStepSize;\n        }\n        --currentSample;\n\n        // Interpolate to provide an initial guess for t\n        var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample + 1] - mSampleValues[currentSample]);\n        var guessForT = intervalStart + dist * kSampleStepSize;\n        var initialSlope = getSlope(guessForT, mX1, mX2);\n        if (initialSlope >= NEWTON_MIN_SLOPE) {\n          return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n        }\n        if (initialSlope === 0.0) {\n          return guessForT;\n        }\n        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n      }\n    };\n    return ob;\n  }();\n\n  var pooling = function () {\n    function _double(arr) {\n      return arr.concat(createSizedArray(arr.length));\n    }\n    return {\n      \"double\": _double\n    };\n  }();\n\n  var poolFactory = function () {\n    return function (initialLength, _create, _release) {\n      var _length = 0;\n      var _maxLength = initialLength;\n      var pool = createSizedArray(_maxLength);\n      var ob = {\n        newElement: newElement,\n        release: release\n      };\n      function newElement() {\n        var element;\n        if (_length) {\n          _length -= 1;\n          element = pool[_length];\n        } else {\n          element = _create();\n        }\n        return element;\n      }\n      function release(element) {\n        if (_length === _maxLength) {\n          pool = pooling[\"double\"](pool);\n          _maxLength *= 2;\n        }\n        if (_release) {\n          _release(element);\n        }\n        pool[_length] = element;\n        _length += 1;\n      }\n      return ob;\n    };\n  }();\n\n  var bezierLengthPool = function () {\n    function create() {\n      return {\n        addedLength: 0,\n        percents: createTypedArray('float32', getDefaultCurveSegments()),\n        lengths: createTypedArray('float32', getDefaultCurveSegments())\n      };\n    }\n    return poolFactory(8, create);\n  }();\n\n  var segmentsLengthPool = function () {\n    function create() {\n      return {\n        lengths: [],\n        totalLength: 0\n      };\n    }\n    function release(element) {\n      var i;\n      var len = element.lengths.length;\n      for (i = 0; i < len; i += 1) {\n        bezierLengthPool.release(element.lengths[i]);\n      }\n      element.lengths.length = 0;\n    }\n    return poolFactory(8, create, release);\n  }();\n\n  function bezFunction() {\n    var math = Math;\n    function pointOnLine2D(x1, y1, x2, y2, x3, y3) {\n      var det1 = x1 * y2 + y1 * x3 + x2 * y3 - x3 * y2 - y3 * x1 - x2 * y1;\n      return det1 > -0.001 && det1 < 0.001;\n    }\n    function pointOnLine3D(x1, y1, z1, x2, y2, z2, x3, y3, z3) {\n      if (z1 === 0 && z2 === 0 && z3 === 0) {\n        return pointOnLine2D(x1, y1, x2, y2, x3, y3);\n      }\n      var dist1 = math.sqrt(math.pow(x2 - x1, 2) + math.pow(y2 - y1, 2) + math.pow(z2 - z1, 2));\n      var dist2 = math.sqrt(math.pow(x3 - x1, 2) + math.pow(y3 - y1, 2) + math.pow(z3 - z1, 2));\n      var dist3 = math.sqrt(math.pow(x3 - x2, 2) + math.pow(y3 - y2, 2) + math.pow(z3 - z2, 2));\n      var diffDist;\n      if (dist1 > dist2) {\n        if (dist1 > dist3) {\n          diffDist = dist1 - dist2 - dist3;\n        } else {\n          diffDist = dist3 - dist2 - dist1;\n        }\n      } else if (dist3 > dist2) {\n        diffDist = dist3 - dist2 - dist1;\n      } else {\n        diffDist = dist2 - dist1 - dist3;\n      }\n      return diffDist > -0.0001 && diffDist < 0.0001;\n    }\n    var getBezierLength = function () {\n      return function (pt1, pt2, pt3, pt4) {\n        var curveSegments = getDefaultCurveSegments();\n        var k;\n        var i;\n        var len;\n        var ptCoord;\n        var perc;\n        var addedLength = 0;\n        var ptDistance;\n        var point = [];\n        var lastPoint = [];\n        var lengthData = bezierLengthPool.newElement();\n        len = pt3.length;\n        for (k = 0; k < curveSegments; k += 1) {\n          perc = k / (curveSegments - 1);\n          ptDistance = 0;\n          for (i = 0; i < len; i += 1) {\n            ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * pt3[i] + 3 * (1 - perc) * bmPow(perc, 2) * pt4[i] + bmPow(perc, 3) * pt2[i];\n            point[i] = ptCoord;\n            if (lastPoint[i] !== null) {\n              ptDistance += bmPow(point[i] - lastPoint[i], 2);\n            }\n            lastPoint[i] = point[i];\n          }\n          if (ptDistance) {\n            ptDistance = bmSqrt(ptDistance);\n            addedLength += ptDistance;\n          }\n          lengthData.percents[k] = perc;\n          lengthData.lengths[k] = addedLength;\n        }\n        lengthData.addedLength = addedLength;\n        return lengthData;\n      };\n    }();\n    function getSegmentsLength(shapeData) {\n      var segmentsLength = segmentsLengthPool.newElement();\n      var closed = shapeData.c;\n      var pathV = shapeData.v;\n      var pathO = shapeData.o;\n      var pathI = shapeData.i;\n      var i;\n      var len = shapeData._length;\n      var lengths = segmentsLength.lengths;\n      var totalLength = 0;\n      for (i = 0; i < len - 1; i += 1) {\n        lengths[i] = getBezierLength(pathV[i], pathV[i + 1], pathO[i], pathI[i + 1]);\n        totalLength += lengths[i].addedLength;\n      }\n      if (closed && len) {\n        lengths[i] = getBezierLength(pathV[i], pathV[0], pathO[i], pathI[0]);\n        totalLength += lengths[i].addedLength;\n      }\n      segmentsLength.totalLength = totalLength;\n      return segmentsLength;\n    }\n    function BezierData(length) {\n      this.segmentLength = 0;\n      this.points = new Array(length);\n    }\n    function PointData(partial, point) {\n      this.partialLength = partial;\n      this.point = point;\n    }\n    var buildBezierData = function () {\n      var storedData = {};\n      return function (pt1, pt2, pt3, pt4) {\n        var bezierName = (pt1[0] + '_' + pt1[1] + '_' + pt2[0] + '_' + pt2[1] + '_' + pt3[0] + '_' + pt3[1] + '_' + pt4[0] + '_' + pt4[1]).replace(/\\./g, 'p');\n        if (!storedData[bezierName]) {\n          var curveSegments = getDefaultCurveSegments();\n          var k;\n          var i;\n          var len;\n          var ptCoord;\n          var perc;\n          var addedLength = 0;\n          var ptDistance;\n          var point;\n          var lastPoint = null;\n          if (pt1.length === 2 && (pt1[0] !== pt2[0] || pt1[1] !== pt2[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt1[0] + pt3[0], pt1[1] + pt3[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt2[0] + pt4[0], pt2[1] + pt4[1])) {\n            curveSegments = 2;\n          }\n          var bezierData = new BezierData(curveSegments);\n          len = pt3.length;\n          for (k = 0; k < curveSegments; k += 1) {\n            point = createSizedArray(len);\n            perc = k / (curveSegments - 1);\n            ptDistance = 0;\n            for (i = 0; i < len; i += 1) {\n              ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * (pt1[i] + pt3[i]) + 3 * (1 - perc) * bmPow(perc, 2) * (pt2[i] + pt4[i]) + bmPow(perc, 3) * pt2[i];\n              point[i] = ptCoord;\n              if (lastPoint !== null) {\n                ptDistance += bmPow(point[i] - lastPoint[i], 2);\n              }\n            }\n            ptDistance = bmSqrt(ptDistance);\n            addedLength += ptDistance;\n            bezierData.points[k] = new PointData(ptDistance, point);\n            lastPoint = point;\n          }\n          bezierData.segmentLength = addedLength;\n          storedData[bezierName] = bezierData;\n        }\n        return storedData[bezierName];\n      };\n    }();\n    function getDistancePerc(perc, bezierData) {\n      var percents = bezierData.percents;\n      var lengths = bezierData.lengths;\n      var len = percents.length;\n      var initPos = bmFloor((len - 1) * perc);\n      var lengthPos = perc * bezierData.addedLength;\n      var lPerc = 0;\n      if (initPos === len - 1 || initPos === 0 || lengthPos === lengths[initPos]) {\n        return percents[initPos];\n      }\n      var dir = lengths[initPos] > lengthPos ? -1 : 1;\n      var flag = true;\n      while (flag) {\n        if (lengths[initPos] <= lengthPos && lengths[initPos + 1] > lengthPos) {\n          lPerc = (lengthPos - lengths[initPos]) / (lengths[initPos + 1] - lengths[initPos]);\n          flag = false;\n        } else {\n          initPos += dir;\n        }\n        if (initPos < 0 || initPos >= len - 1) {\n          // FIX for TypedArrays that don't store floating point values with enough accuracy\n          if (initPos === len - 1) {\n            return percents[initPos];\n          }\n          flag = false;\n        }\n      }\n      return percents[initPos] + (percents[initPos + 1] - percents[initPos]) * lPerc;\n    }\n    function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\n      var t1 = getDistancePerc(percent, bezierData);\n      var u1 = 1 - t1;\n      var ptX = math.round((u1 * u1 * u1 * pt1[0] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[0] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[0] + t1 * t1 * t1 * pt2[0]) * 1000) / 1000;\n      var ptY = math.round((u1 * u1 * u1 * pt1[1] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[1] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[1] + t1 * t1 * t1 * pt2[1]) * 1000) / 1000;\n      return [ptX, ptY];\n    }\n    var bezierSegmentPoints = createTypedArray('float32', 8);\n    function getNewSegment(pt1, pt2, pt3, pt4, startPerc, endPerc, bezierData) {\n      if (startPerc < 0) {\n        startPerc = 0;\n      } else if (startPerc > 1) {\n        startPerc = 1;\n      }\n      var t0 = getDistancePerc(startPerc, bezierData);\n      endPerc = endPerc > 1 ? 1 : endPerc;\n      var t1 = getDistancePerc(endPerc, bezierData);\n      var i;\n      var len = pt1.length;\n      var u0 = 1 - t0;\n      var u1 = 1 - t1;\n      var u0u0u0 = u0 * u0 * u0;\n      var t0u0u0_3 = t0 * u0 * u0 * 3; // eslint-disable-line camelcase\n      var t0t0u0_3 = t0 * t0 * u0 * 3; // eslint-disable-line camelcase\n      var t0t0t0 = t0 * t0 * t0;\n      //\n      var u0u0u1 = u0 * u0 * u1;\n      var t0u0u1_3 = t0 * u0 * u1 + u0 * t0 * u1 + u0 * u0 * t1; // eslint-disable-line camelcase\n      var t0t0u1_3 = t0 * t0 * u1 + u0 * t0 * t1 + t0 * u0 * t1; // eslint-disable-line camelcase\n      var t0t0t1 = t0 * t0 * t1;\n      //\n      var u0u1u1 = u0 * u1 * u1;\n      var t0u1u1_3 = t0 * u1 * u1 + u0 * t1 * u1 + u0 * u1 * t1; // eslint-disable-line camelcase\n      var t0t1u1_3 = t0 * t1 * u1 + u0 * t1 * t1 + t0 * u1 * t1; // eslint-disable-line camelcase\n      var t0t1t1 = t0 * t1 * t1;\n      //\n      var u1u1u1 = u1 * u1 * u1;\n      var t1u1u1_3 = t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1; // eslint-disable-line camelcase\n      var t1t1u1_3 = t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1; // eslint-disable-line camelcase\n      var t1t1t1 = t1 * t1 * t1;\n      for (i = 0; i < len; i += 1) {\n        bezierSegmentPoints[i * 4] = math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n        bezierSegmentPoints[i * 4 + 1] = math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n        bezierSegmentPoints[i * 4 + 2] = math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n        bezierSegmentPoints[i * 4 + 3] = math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n      }\n      return bezierSegmentPoints;\n    }\n    return {\n      getSegmentsLength: getSegmentsLength,\n      getNewSegment: getNewSegment,\n      getPointInSegment: getPointInSegment,\n      buildBezierData: buildBezierData,\n      pointOnLine2D: pointOnLine2D,\n      pointOnLine3D: pointOnLine3D\n    };\n  }\n  var bez = bezFunction();\n\n  var initFrame = initialDefaultFrame;\n  var mathAbs = Math.abs;\n  function interpolateValue(frameNum, caching) {\n    var offsetTime = this.offsetTime;\n    var newValue;\n    if (this.propType === 'multidimensional') {\n      newValue = createTypedArray('float32', this.pv.length);\n    }\n    var iterationIndex = caching.lastIndex;\n    var i = iterationIndex;\n    var len = this.keyframes.length - 1;\n    var flag = true;\n    var keyData;\n    var nextKeyData;\n    var keyframeMetadata;\n    while (flag) {\n      keyData = this.keyframes[i];\n      nextKeyData = this.keyframes[i + 1];\n      if (i === len - 1 && frameNum >= nextKeyData.t - offsetTime) {\n        if (keyData.h) {\n          keyData = nextKeyData;\n        }\n        iterationIndex = 0;\n        break;\n      }\n      if (nextKeyData.t - offsetTime > frameNum) {\n        iterationIndex = i;\n        break;\n      }\n      if (i < len - 1) {\n        i += 1;\n      } else {\n        iterationIndex = 0;\n        flag = false;\n      }\n    }\n    keyframeMetadata = this.keyframesMetadata[i] || {};\n    var k;\n    var kLen;\n    var perc;\n    var jLen;\n    var j;\n    var fnc;\n    var nextKeyTime = nextKeyData.t - offsetTime;\n    var keyTime = keyData.t - offsetTime;\n    var endValue;\n    if (keyData.to) {\n      if (!keyframeMetadata.bezierData) {\n        keyframeMetadata.bezierData = bez.buildBezierData(keyData.s, nextKeyData.s || keyData.e, keyData.to, keyData.ti);\n      }\n      var bezierData = keyframeMetadata.bezierData;\n      if (frameNum >= nextKeyTime || frameNum < keyTime) {\n        var ind = frameNum >= nextKeyTime ? bezierData.points.length - 1 : 0;\n        kLen = bezierData.points[ind].point.length;\n        for (k = 0; k < kLen; k += 1) {\n          newValue[k] = bezierData.points[ind].point[k];\n        }\n        // caching._lastKeyframeIndex = -1;\n      } else {\n        if (keyframeMetadata.__fnct) {\n          fnc = keyframeMetadata.__fnct;\n        } else {\n          fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y, keyData.n).get;\n          keyframeMetadata.__fnct = fnc;\n        }\n        perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\n        var distanceInLine = bezierData.segmentLength * perc;\n        var segmentPerc;\n        var addedLength = caching.lastFrame < frameNum && caching._lastKeyframeIndex === i ? caching._lastAddedLength : 0;\n        j = caching.lastFrame < frameNum && caching._lastKeyframeIndex === i ? caching._lastPoint : 0;\n        flag = true;\n        jLen = bezierData.points.length;\n        while (flag) {\n          addedLength += bezierData.points[j].partialLength;\n          if (distanceInLine === 0 || perc === 0 || j === bezierData.points.length - 1) {\n            kLen = bezierData.points[j].point.length;\n            for (k = 0; k < kLen; k += 1) {\n              newValue[k] = bezierData.points[j].point[k];\n            }\n            break;\n          } else if (distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j + 1].partialLength) {\n            segmentPerc = (distanceInLine - addedLength) / bezierData.points[j + 1].partialLength;\n            kLen = bezierData.points[j].point.length;\n            for (k = 0; k < kLen; k += 1) {\n              newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j + 1].point[k] - bezierData.points[j].point[k]) * segmentPerc;\n            }\n            break;\n          }\n          if (j < jLen - 1) {\n            j += 1;\n          } else {\n            flag = false;\n          }\n        }\n        caching._lastPoint = j;\n        caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\n        caching._lastKeyframeIndex = i;\n      }\n    } else {\n      var outX;\n      var outY;\n      var inX;\n      var inY;\n      var keyValue;\n      len = keyData.s.length;\n      endValue = nextKeyData.s || keyData.e;\n      if (this.sh && keyData.h !== 1) {\n        if (frameNum >= nextKeyTime) {\n          newValue[0] = endValue[0];\n          newValue[1] = endValue[1];\n          newValue[2] = endValue[2];\n        } else if (frameNum <= keyTime) {\n          newValue[0] = keyData.s[0];\n          newValue[1] = keyData.s[1];\n          newValue[2] = keyData.s[2];\n        } else {\n          var quatStart = createQuaternion(keyData.s);\n          var quatEnd = createQuaternion(endValue);\n          var time = (frameNum - keyTime) / (nextKeyTime - keyTime);\n          quaternionToEuler(newValue, slerp(quatStart, quatEnd, time));\n        }\n      } else {\n        for (i = 0; i < len; i += 1) {\n          if (keyData.h !== 1) {\n            if (frameNum >= nextKeyTime) {\n              perc = 1;\n            } else if (frameNum < keyTime) {\n              perc = 0;\n            } else {\n              if (keyData.o.x.constructor === Array) {\n                if (!keyframeMetadata.__fnct) {\n                  keyframeMetadata.__fnct = [];\n                }\n                if (!keyframeMetadata.__fnct[i]) {\n                  outX = keyData.o.x[i] === undefined ? keyData.o.x[0] : keyData.o.x[i];\n                  outY = keyData.o.y[i] === undefined ? keyData.o.y[0] : keyData.o.y[i];\n                  inX = keyData.i.x[i] === undefined ? keyData.i.x[0] : keyData.i.x[i];\n                  inY = keyData.i.y[i] === undefined ? keyData.i.y[0] : keyData.i.y[i];\n                  fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\n                  keyframeMetadata.__fnct[i] = fnc;\n                } else {\n                  fnc = keyframeMetadata.__fnct[i];\n                }\n              } else if (!keyframeMetadata.__fnct) {\n                outX = keyData.o.x;\n                outY = keyData.o.y;\n                inX = keyData.i.x;\n                inY = keyData.i.y;\n                fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\n                keyData.keyframeMetadata = fnc;\n              } else {\n                fnc = keyframeMetadata.__fnct;\n              }\n              perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\n            }\n          }\n          endValue = nextKeyData.s || keyData.e;\n          keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i] + (endValue[i] - keyData.s[i]) * perc;\n          if (this.propType === 'multidimensional') {\n            newValue[i] = keyValue;\n          } else {\n            newValue = keyValue;\n          }\n        }\n      }\n    }\n    caching.lastIndex = iterationIndex;\n    return newValue;\n  }\n\n  // based on @Toji's https://github.com/toji/gl-matrix/\n  function slerp(a, b, t) {\n    var out = [];\n    var ax = a[0];\n    var ay = a[1];\n    var az = a[2];\n    var aw = a[3];\n    var bx = b[0];\n    var by = b[1];\n    var bz = b[2];\n    var bw = b[3];\n    var omega;\n    var cosom;\n    var sinom;\n    var scale0;\n    var scale1;\n    cosom = ax * bx + ay * by + az * bz + aw * bw;\n    if (cosom < 0.0) {\n      cosom = -cosom;\n      bx = -bx;\n      by = -by;\n      bz = -bz;\n      bw = -bw;\n    }\n    if (1.0 - cosom > 0.000001) {\n      omega = Math.acos(cosom);\n      sinom = Math.sin(omega);\n      scale0 = Math.sin((1.0 - t) * omega) / sinom;\n      scale1 = Math.sin(t * omega) / sinom;\n    } else {\n      scale0 = 1.0 - t;\n      scale1 = t;\n    }\n    out[0] = scale0 * ax + scale1 * bx;\n    out[1] = scale0 * ay + scale1 * by;\n    out[2] = scale0 * az + scale1 * bz;\n    out[3] = scale0 * aw + scale1 * bw;\n    return out;\n  }\n  function quaternionToEuler(out, quat) {\n    var qx = quat[0];\n    var qy = quat[1];\n    var qz = quat[2];\n    var qw = quat[3];\n    var heading = Math.atan2(2 * qy * qw - 2 * qx * qz, 1 - 2 * qy * qy - 2 * qz * qz);\n    var attitude = Math.asin(2 * qx * qy + 2 * qz * qw);\n    var bank = Math.atan2(2 * qx * qw - 2 * qy * qz, 1 - 2 * qx * qx - 2 * qz * qz);\n    out[0] = heading / degToRads;\n    out[1] = attitude / degToRads;\n    out[2] = bank / degToRads;\n  }\n  function createQuaternion(values) {\n    var heading = values[0] * degToRads;\n    var attitude = values[1] * degToRads;\n    var bank = values[2] * degToRads;\n    var c1 = Math.cos(heading / 2);\n    var c2 = Math.cos(attitude / 2);\n    var c3 = Math.cos(bank / 2);\n    var s1 = Math.sin(heading / 2);\n    var s2 = Math.sin(attitude / 2);\n    var s3 = Math.sin(bank / 2);\n    var w = c1 * c2 * c3 - s1 * s2 * s3;\n    var x = s1 * s2 * c3 + c1 * c2 * s3;\n    var y = s1 * c2 * c3 + c1 * s2 * s3;\n    var z = c1 * s2 * c3 - s1 * c2 * s3;\n    return [x, y, z, w];\n  }\n  function getValueAtCurrentTime() {\n    var frameNum = this.comp.renderedFrame - this.offsetTime;\n    var initTime = this.keyframes[0].t - this.offsetTime;\n    var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\n    if (!(frameNum === this._caching.lastFrame || this._caching.lastFrame !== initFrame && (this._caching.lastFrame >= endTime && frameNum >= endTime || this._caching.lastFrame < initTime && frameNum < initTime))) {\n      if (this._caching.lastFrame >= frameNum) {\n        this._caching._lastKeyframeIndex = -1;\n        this._caching.lastIndex = 0;\n      }\n      var renderResult = this.interpolateValue(frameNum, this._caching);\n      this.pv = renderResult;\n    }\n    this._caching.lastFrame = frameNum;\n    return this.pv;\n  }\n  function setVValue(val) {\n    var multipliedValue;\n    if (this.propType === 'unidimensional') {\n      multipliedValue = val * this.mult;\n      if (mathAbs(this.v - multipliedValue) > 0.00001) {\n        this.v = multipliedValue;\n        this._mdf = true;\n      }\n    } else {\n      var i = 0;\n      var len = this.v.length;\n      while (i < len) {\n        multipliedValue = val[i] * this.mult;\n        if (mathAbs(this.v[i] - multipliedValue) > 0.00001) {\n          this.v[i] = multipliedValue;\n          this._mdf = true;\n        }\n        i += 1;\n      }\n    }\n  }\n  function processEffectsSequence() {\n    if (this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) {\n      return;\n    }\n    if (this.lock) {\n      this.setVValue(this.pv);\n      return;\n    }\n    this.lock = true;\n    this._mdf = this._isFirstFrame;\n    var i;\n    var len = this.effectsSequence.length;\n    var finalValue = this.kf ? this.pv : this.data.k;\n    for (i = 0; i < len; i += 1) {\n      finalValue = this.effectsSequence[i](finalValue);\n    }\n    this.setVValue(finalValue);\n    this._isFirstFrame = false;\n    this.lock = false;\n    this.frameId = this.elem.globalData.frameId;\n  }\n  function addEffect(effectFunction) {\n    this.effectsSequence.push(effectFunction);\n    this.container.addDynamicProperty(this);\n  }\n  function ValueProperty(elem, data, mult, container) {\n    this.propType = 'unidimensional';\n    this.mult = mult || 1;\n    this.data = data;\n    this.v = mult ? data.k * mult : data.k;\n    this.pv = data.k;\n    this._mdf = false;\n    this.elem = elem;\n    this.container = container;\n    this.comp = elem.comp;\n    this.k = false;\n    this.kf = false;\n    this.vel = 0;\n    this.effectsSequence = [];\n    this._isFirstFrame = true;\n    this.getValue = processEffectsSequence;\n    this.setVValue = setVValue;\n    this.addEffect = addEffect;\n  }\n  function MultiDimensionalProperty(elem, data, mult, container) {\n    this.propType = 'multidimensional';\n    this.mult = mult || 1;\n    this.data = data;\n    this._mdf = false;\n    this.elem = elem;\n    this.container = container;\n    this.comp = elem.comp;\n    this.k = false;\n    this.kf = false;\n    this.frameId = -1;\n    var i;\n    var len = data.k.length;\n    this.v = createTypedArray('float32', len);\n    this.pv = createTypedArray('float32', len);\n    this.vel = createTypedArray('float32', len);\n    for (i = 0; i < len; i += 1) {\n      this.v[i] = data.k[i] * this.mult;\n      this.pv[i] = data.k[i];\n    }\n    this._isFirstFrame = true;\n    this.effectsSequence = [];\n    this.getValue = processEffectsSequence;\n    this.setVValue = setVValue;\n    this.addEffect = addEffect;\n  }\n  function KeyframedValueProperty(elem, data, mult, container) {\n    this.propType = 'unidimensional';\n    this.keyframes = data.k;\n    this.keyframesMetadata = [];\n    this.offsetTime = elem.data.st;\n    this.frameId = -1;\n    this._caching = {\n      lastFrame: initFrame,\n      lastIndex: 0,\n      value: 0,\n      _lastKeyframeIndex: -1\n    };\n    this.k = true;\n    this.kf = true;\n    this.data = data;\n    this.mult = mult || 1;\n    this.elem = elem;\n    this.container = container;\n    this.comp = elem.comp;\n    this.v = initFrame;\n    this.pv = initFrame;\n    this._isFirstFrame = true;\n    this.getValue = processEffectsSequence;\n    this.setVValue = setVValue;\n    this.interpolateValue = interpolateValue;\n    this.effectsSequence = [getValueAtCurrentTime.bind(this)];\n    this.addEffect = addEffect;\n  }\n  function KeyframedMultidimensionalProperty(elem, data, mult, container) {\n    this.propType = 'multidimensional';\n    var i;\n    var len = data.k.length;\n    var s;\n    var e;\n    var to;\n    var ti;\n    for (i = 0; i < len - 1; i += 1) {\n      if (data.k[i].to && data.k[i].s && data.k[i + 1] && data.k[i + 1].s) {\n        s = data.k[i].s;\n        e = data.k[i + 1].s;\n        to = data.k[i].to;\n        ti = data.k[i].ti;\n        if (s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], s[0] + to[0], s[1] + to[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], e[0] + ti[0], e[1] + ti[1]) || s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], s[0] + to[0], s[1] + to[1], s[2] + to[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], e[0] + ti[0], e[1] + ti[1], e[2] + ti[2])) {\n          data.k[i].to = null;\n          data.k[i].ti = null;\n        }\n        if (s[0] === e[0] && s[1] === e[1] && to[0] === 0 && to[1] === 0 && ti[0] === 0 && ti[1] === 0) {\n          if (s.length === 2 || s[2] === e[2] && to[2] === 0 && ti[2] === 0) {\n            data.k[i].to = null;\n            data.k[i].ti = null;\n          }\n        }\n      }\n    }\n    this.effectsSequence = [getValueAtCurrentTime.bind(this)];\n    this.data = data;\n    this.keyframes = data.k;\n    this.keyframesMetadata = [];\n    this.offsetTime = elem.data.st;\n    this.k = true;\n    this.kf = true;\n    this._isFirstFrame = true;\n    this.mult = mult || 1;\n    this.elem = elem;\n    this.container = container;\n    this.comp = elem.comp;\n    this.getValue = processEffectsSequence;\n    this.setVValue = setVValue;\n    this.interpolateValue = interpolateValue;\n    this.frameId = -1;\n    var arrLen = data.k[0].s.length;\n    this.v = createTypedArray('float32', arrLen);\n    this.pv = createTypedArray('float32', arrLen);\n    for (i = 0; i < arrLen; i += 1) {\n      this.v[i] = initFrame;\n      this.pv[i] = initFrame;\n    }\n    this._caching = {\n      lastFrame: initFrame,\n      lastIndex: 0,\n      value: createTypedArray('float32', arrLen)\n    };\n    this.addEffect = addEffect;\n  }\n  var PropertyFactory = function () {\n    function getProp(elem, data, type, mult, container) {\n      if (data.sid) {\n        data = elem.globalData.slotManager.getProp(data);\n      }\n      var p;\n      if (!data.k.length) {\n        p = new ValueProperty(elem, data, mult, container);\n      } else if (typeof data.k[0] === 'number') {\n        p = new MultiDimensionalProperty(elem, data, mult, container);\n      } else {\n        switch (type) {\n          case 0:\n            p = new KeyframedValueProperty(elem, data, mult, container);\n            break;\n          case 1:\n            p = new KeyframedMultidimensionalProperty(elem, data, mult, container);\n            break;\n          default:\n            break;\n        }\n      }\n      if (p.effectsSequence.length) {\n        container.addDynamicProperty(p);\n      }\n      return p;\n    }\n    var ob = {\n      getProp: getProp\n    };\n    return ob;\n  }();\n\n  function DynamicPropertyContainer() {}\n  DynamicPropertyContainer.prototype = {\n    addDynamicProperty: function addDynamicProperty(prop) {\n      if (this.dynamicProperties.indexOf(prop) === -1) {\n        this.dynamicProperties.push(prop);\n        this.container.addDynamicProperty(this);\n        this._isAnimated = true;\n      }\n    },\n    iterateDynamicProperties: function iterateDynamicProperties() {\n      this._mdf = false;\n      var i;\n      var len = this.dynamicProperties.length;\n      for (i = 0; i < len; i += 1) {\n        this.dynamicProperties[i].getValue();\n        if (this.dynamicProperties[i]._mdf) {\n          this._mdf = true;\n        }\n      }\n    },\n    initDynamicPropertyContainer: function initDynamicPropertyContainer(container) {\n      this.container = container;\n      this.dynamicProperties = [];\n      this._mdf = false;\n      this._isAnimated = false;\n    }\n  };\n\n  var pointPool = function () {\n    function create() {\n      return createTypedArray('float32', 2);\n    }\n    return poolFactory(8, create);\n  }();\n\n  function ShapePath() {\n    this.c = false;\n    this._length = 0;\n    this._maxLength = 8;\n    this.v = createSizedArray(this._maxLength);\n    this.o = createSizedArray(this._maxLength);\n    this.i = createSizedArray(this._maxLength);\n  }\n  ShapePath.prototype.setPathData = function (closed, len) {\n    this.c = closed;\n    this.setLength(len);\n    var i = 0;\n    while (i < len) {\n      this.v[i] = pointPool.newElement();\n      this.o[i] = pointPool.newElement();\n      this.i[i] = pointPool.newElement();\n      i += 1;\n    }\n  };\n  ShapePath.prototype.setLength = function (len) {\n    while (this._maxLength < len) {\n      this.doubleArrayLength();\n    }\n    this._length = len;\n  };\n  ShapePath.prototype.doubleArrayLength = function () {\n    this.v = this.v.concat(createSizedArray(this._maxLength));\n    this.i = this.i.concat(createSizedArray(this._maxLength));\n    this.o = this.o.concat(createSizedArray(this._maxLength));\n    this._maxLength *= 2;\n  };\n  ShapePath.prototype.setXYAt = function (x, y, type, pos, replace) {\n    var arr;\n    this._length = Math.max(this._length, pos + 1);\n    if (this._length >= this._maxLength) {\n      this.doubleArrayLength();\n    }\n    switch (type) {\n      case 'v':\n        arr = this.v;\n        break;\n      case 'i':\n        arr = this.i;\n        break;\n      case 'o':\n        arr = this.o;\n        break;\n      default:\n        arr = [];\n        break;\n    }\n    if (!arr[pos] || arr[pos] && !replace) {\n      arr[pos] = pointPool.newElement();\n    }\n    arr[pos][0] = x;\n    arr[pos][1] = y;\n  };\n  ShapePath.prototype.setTripleAt = function (vX, vY, oX, oY, iX, iY, pos, replace) {\n    this.setXYAt(vX, vY, 'v', pos, replace);\n    this.setXYAt(oX, oY, 'o', pos, replace);\n    this.setXYAt(iX, iY, 'i', pos, replace);\n  };\n  ShapePath.prototype.reverse = function () {\n    var newPath = new ShapePath();\n    newPath.setPathData(this.c, this._length);\n    var vertices = this.v;\n    var outPoints = this.o;\n    var inPoints = this.i;\n    var init = 0;\n    if (this.c) {\n      newPath.setTripleAt(vertices[0][0], vertices[0][1], inPoints[0][0], inPoints[0][1], outPoints[0][0], outPoints[0][1], 0, false);\n      init = 1;\n    }\n    var cnt = this._length - 1;\n    var len = this._length;\n    var i;\n    for (i = init; i < len; i += 1) {\n      newPath.setTripleAt(vertices[cnt][0], vertices[cnt][1], inPoints[cnt][0], inPoints[cnt][1], outPoints[cnt][0], outPoints[cnt][1], i, false);\n      cnt -= 1;\n    }\n    return newPath;\n  };\n  ShapePath.prototype.length = function () {\n    return this._length;\n  };\n\n  var shapePool = function () {\n    function create() {\n      return new ShapePath();\n    }\n    function release(shapePath) {\n      var len = shapePath._length;\n      var i;\n      for (i = 0; i < len; i += 1) {\n        pointPool.release(shapePath.v[i]);\n        pointPool.release(shapePath.i[i]);\n        pointPool.release(shapePath.o[i]);\n        shapePath.v[i] = null;\n        shapePath.i[i] = null;\n        shapePath.o[i] = null;\n      }\n      shapePath._length = 0;\n      shapePath.c = false;\n    }\n    function clone(shape) {\n      var cloned = factory.newElement();\n      var i;\n      var len = shape._length === undefined ? shape.v.length : shape._length;\n      cloned.setLength(len);\n      cloned.c = shape.c;\n      for (i = 0; i < len; i += 1) {\n        cloned.setTripleAt(shape.v[i][0], shape.v[i][1], shape.o[i][0], shape.o[i][1], shape.i[i][0], shape.i[i][1], i);\n      }\n      return cloned;\n    }\n    var factory = poolFactory(4, create, release);\n    factory.clone = clone;\n    return factory;\n  }();\n\n  function ShapeCollection() {\n    this._length = 0;\n    this._maxLength = 4;\n    this.shapes = createSizedArray(this._maxLength);\n  }\n  ShapeCollection.prototype.addShape = function (shapeData) {\n    if (this._length === this._maxLength) {\n      this.shapes = this.shapes.concat(createSizedArray(this._maxLength));\n      this._maxLength *= 2;\n    }\n    this.shapes[this._length] = shapeData;\n    this._length += 1;\n  };\n  ShapeCollection.prototype.releaseShapes = function () {\n    var i;\n    for (i = 0; i < this._length; i += 1) {\n      shapePool.release(this.shapes[i]);\n    }\n    this._length = 0;\n  };\n\n  var shapeCollectionPool = function () {\n    var ob = {\n      newShapeCollection: newShapeCollection,\n      release: release\n    };\n    var _length = 0;\n    var _maxLength = 4;\n    var pool = createSizedArray(_maxLength);\n    function newShapeCollection() {\n      var shapeCollection;\n      if (_length) {\n        _length -= 1;\n        shapeCollection = pool[_length];\n      } else {\n        shapeCollection = new ShapeCollection();\n      }\n      return shapeCollection;\n    }\n    function release(shapeCollection) {\n      var i;\n      var len = shapeCollection._length;\n      for (i = 0; i < len; i += 1) {\n        shapePool.release(shapeCollection.shapes[i]);\n      }\n      shapeCollection._length = 0;\n      if (_length === _maxLength) {\n        pool = pooling[\"double\"](pool);\n        _maxLength *= 2;\n      }\n      pool[_length] = shapeCollection;\n      _length += 1;\n    }\n    return ob;\n  }();\n\n  var ShapePropertyFactory = function () {\n    var initFrame = -999999;\n    function interpolateShape(frameNum, previousValue, caching) {\n      var iterationIndex = caching.lastIndex;\n      var keyPropS;\n      var keyPropE;\n      var isHold;\n      var j;\n      var k;\n      var jLen;\n      var kLen;\n      var perc;\n      var vertexValue;\n      var kf = this.keyframes;\n      if (frameNum < kf[0].t - this.offsetTime) {\n        keyPropS = kf[0].s[0];\n        isHold = true;\n        iterationIndex = 0;\n      } else if (frameNum >= kf[kf.length - 1].t - this.offsetTime) {\n        keyPropS = kf[kf.length - 1].s ? kf[kf.length - 1].s[0] : kf[kf.length - 2].e[0];\n        /* if(kf[kf.length - 1].s){\n                  keyPropS = kf[kf.length - 1].s[0];\n              }else{\n                  keyPropS = kf[kf.length - 2].e[0];\n              } */\n        isHold = true;\n      } else {\n        var i = iterationIndex;\n        var len = kf.length - 1;\n        var flag = true;\n        var keyData;\n        var nextKeyData;\n        var keyframeMetadata;\n        while (flag) {\n          keyData = kf[i];\n          nextKeyData = kf[i + 1];\n          if (nextKeyData.t - this.offsetTime > frameNum) {\n            break;\n          }\n          if (i < len - 1) {\n            i += 1;\n          } else {\n            flag = false;\n          }\n        }\n        keyframeMetadata = this.keyframesMetadata[i] || {};\n        isHold = keyData.h === 1;\n        iterationIndex = i;\n        if (!isHold) {\n          if (frameNum >= nextKeyData.t - this.offsetTime) {\n            perc = 1;\n          } else if (frameNum < keyData.t - this.offsetTime) {\n            perc = 0;\n          } else {\n            var fnc;\n            if (keyframeMetadata.__fnct) {\n              fnc = keyframeMetadata.__fnct;\n            } else {\n              fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y).get;\n              keyframeMetadata.__fnct = fnc;\n            }\n            perc = fnc((frameNum - (keyData.t - this.offsetTime)) / (nextKeyData.t - this.offsetTime - (keyData.t - this.offsetTime)));\n          }\n          keyPropE = nextKeyData.s ? nextKeyData.s[0] : keyData.e[0];\n        }\n        keyPropS = keyData.s[0];\n      }\n      jLen = previousValue._length;\n      kLen = keyPropS.i[0].length;\n      caching.lastIndex = iterationIndex;\n      for (j = 0; j < jLen; j += 1) {\n        for (k = 0; k < kLen; k += 1) {\n          vertexValue = isHold ? keyPropS.i[j][k] : keyPropS.i[j][k] + (keyPropE.i[j][k] - keyPropS.i[j][k]) * perc;\n          previousValue.i[j][k] = vertexValue;\n          vertexValue = isHold ? keyPropS.o[j][k] : keyPropS.o[j][k] + (keyPropE.o[j][k] - keyPropS.o[j][k]) * perc;\n          previousValue.o[j][k] = vertexValue;\n          vertexValue = isHold ? keyPropS.v[j][k] : keyPropS.v[j][k] + (keyPropE.v[j][k] - keyPropS.v[j][k]) * perc;\n          previousValue.v[j][k] = vertexValue;\n        }\n      }\n    }\n    function interpolateShapeCurrentTime() {\n      var frameNum = this.comp.renderedFrame - this.offsetTime;\n      var initTime = this.keyframes[0].t - this.offsetTime;\n      var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\n      var lastFrame = this._caching.lastFrame;\n      if (!(lastFrame !== initFrame && (lastFrame < initTime && frameNum < initTime || lastFrame > endTime && frameNum > endTime))) {\n        /// /\n        this._caching.lastIndex = lastFrame < frameNum ? this._caching.lastIndex : 0;\n        this.interpolateShape(frameNum, this.pv, this._caching);\n        /// /\n      }\n      this._caching.lastFrame = frameNum;\n      return this.pv;\n    }\n    function resetShape() {\n      this.paths = this.localShapeCollection;\n    }\n    function shapesEqual(shape1, shape2) {\n      if (shape1._length !== shape2._length || shape1.c !== shape2.c) {\n        return false;\n      }\n      var i;\n      var len = shape1._length;\n      for (i = 0; i < len; i += 1) {\n        if (shape1.v[i][0] !== shape2.v[i][0] || shape1.v[i][1] !== shape2.v[i][1] || shape1.o[i][0] !== shape2.o[i][0] || shape1.o[i][1] !== shape2.o[i][1] || shape1.i[i][0] !== shape2.i[i][0] || shape1.i[i][1] !== shape2.i[i][1]) {\n          return false;\n        }\n      }\n      return true;\n    }\n    function setVValue(newPath) {\n      if (!shapesEqual(this.v, newPath)) {\n        this.v = shapePool.clone(newPath);\n        this.localShapeCollection.releaseShapes();\n        this.localShapeCollection.addShape(this.v);\n        this._mdf = true;\n        this.paths = this.localShapeCollection;\n      }\n    }\n    function processEffectsSequence() {\n      if (this.elem.globalData.frameId === this.frameId) {\n        return;\n      }\n      if (!this.effectsSequence.length) {\n        this._mdf = false;\n        return;\n      }\n      if (this.lock) {\n        this.setVValue(this.pv);\n        return;\n      }\n      this.lock = true;\n      this._mdf = false;\n      var finalValue;\n      if (this.kf) {\n        finalValue = this.pv;\n      } else if (this.data.ks) {\n        finalValue = this.data.ks.k;\n      } else {\n        finalValue = this.data.pt.k;\n      }\n      var i;\n      var len = this.effectsSequence.length;\n      for (i = 0; i < len; i += 1) {\n        finalValue = this.effectsSequence[i](finalValue);\n      }\n      this.setVValue(finalValue);\n      this.lock = false;\n      this.frameId = this.elem.globalData.frameId;\n    }\n    function ShapeProperty(elem, data, type) {\n      this.propType = 'shape';\n      this.comp = elem.comp;\n      this.container = elem;\n      this.elem = elem;\n      this.data = data;\n      this.k = false;\n      this.kf = false;\n      this._mdf = false;\n      var pathData = type === 3 ? data.pt.k : data.ks.k;\n      this.v = shapePool.clone(pathData);\n      this.pv = shapePool.clone(this.v);\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n      this.paths = this.localShapeCollection;\n      this.paths.addShape(this.v);\n      this.reset = resetShape;\n      this.effectsSequence = [];\n    }\n    function addEffect(effectFunction) {\n      this.effectsSequence.push(effectFunction);\n      this.container.addDynamicProperty(this);\n    }\n    ShapeProperty.prototype.interpolateShape = interpolateShape;\n    ShapeProperty.prototype.getValue = processEffectsSequence;\n    ShapeProperty.prototype.setVValue = setVValue;\n    ShapeProperty.prototype.addEffect = addEffect;\n    function KeyframedShapeProperty(elem, data, type) {\n      this.propType = 'shape';\n      this.comp = elem.comp;\n      this.elem = elem;\n      this.container = elem;\n      this.offsetTime = elem.data.st;\n      this.keyframes = type === 3 ? data.pt.k : data.ks.k;\n      this.keyframesMetadata = [];\n      this.k = true;\n      this.kf = true;\n      var len = this.keyframes[0].s[0].i.length;\n      this.v = shapePool.newElement();\n      this.v.setPathData(this.keyframes[0].s[0].c, len);\n      this.pv = shapePool.clone(this.v);\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n      this.paths = this.localShapeCollection;\n      this.paths.addShape(this.v);\n      this.lastFrame = initFrame;\n      this.reset = resetShape;\n      this._caching = {\n        lastFrame: initFrame,\n        lastIndex: 0\n      };\n      this.effectsSequence = [interpolateShapeCurrentTime.bind(this)];\n    }\n    KeyframedShapeProperty.prototype.getValue = processEffectsSequence;\n    KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\n    KeyframedShapeProperty.prototype.setVValue = setVValue;\n    KeyframedShapeProperty.prototype.addEffect = addEffect;\n    var EllShapeProperty = function () {\n      var cPoint = roundCorner;\n      function EllShapePropertyFactory(elem, data) {\n        this.v = shapePool.newElement();\n        this.v.setPathData(true, 4);\n        this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n        this.paths = this.localShapeCollection;\n        this.localShapeCollection.addShape(this.v);\n        this.d = data.d;\n        this.elem = elem;\n        this.comp = elem.comp;\n        this.frameId = -1;\n        this.initDynamicPropertyContainer(elem);\n        this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\n        this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\n        if (this.dynamicProperties.length) {\n          this.k = true;\n        } else {\n          this.k = false;\n          this.convertEllToPath();\n        }\n      }\n      EllShapePropertyFactory.prototype = {\n        reset: resetShape,\n        getValue: function getValue() {\n          if (this.elem.globalData.frameId === this.frameId) {\n            return;\n          }\n          this.frameId = this.elem.globalData.frameId;\n          this.iterateDynamicProperties();\n          if (this._mdf) {\n            this.convertEllToPath();\n          }\n        },\n        convertEllToPath: function convertEllToPath() {\n          var p0 = this.p.v[0];\n          var p1 = this.p.v[1];\n          var s0 = this.s.v[0] / 2;\n          var s1 = this.s.v[1] / 2;\n          var _cw = this.d !== 3;\n          var _v = this.v;\n          _v.v[0][0] = p0;\n          _v.v[0][1] = p1 - s1;\n          _v.v[1][0] = _cw ? p0 + s0 : p0 - s0;\n          _v.v[1][1] = p1;\n          _v.v[2][0] = p0;\n          _v.v[2][1] = p1 + s1;\n          _v.v[3][0] = _cw ? p0 - s0 : p0 + s0;\n          _v.v[3][1] = p1;\n          _v.i[0][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\n          _v.i[0][1] = p1 - s1;\n          _v.i[1][0] = _cw ? p0 + s0 : p0 - s0;\n          _v.i[1][1] = p1 - s1 * cPoint;\n          _v.i[2][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\n          _v.i[2][1] = p1 + s1;\n          _v.i[3][0] = _cw ? p0 - s0 : p0 + s0;\n          _v.i[3][1] = p1 + s1 * cPoint;\n          _v.o[0][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\n          _v.o[0][1] = p1 - s1;\n          _v.o[1][0] = _cw ? p0 + s0 : p0 - s0;\n          _v.o[1][1] = p1 + s1 * cPoint;\n          _v.o[2][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\n          _v.o[2][1] = p1 + s1;\n          _v.o[3][0] = _cw ? p0 - s0 : p0 + s0;\n          _v.o[3][1] = p1 - s1 * cPoint;\n        }\n      };\n      extendPrototype([DynamicPropertyContainer], EllShapePropertyFactory);\n      return EllShapePropertyFactory;\n    }();\n    var StarShapeProperty = function () {\n      function StarShapePropertyFactory(elem, data) {\n        this.v = shapePool.newElement();\n        this.v.setPathData(true, 0);\n        this.elem = elem;\n        this.comp = elem.comp;\n        this.data = data;\n        this.frameId = -1;\n        this.d = data.d;\n        this.initDynamicPropertyContainer(elem);\n        if (data.sy === 1) {\n          this.ir = PropertyFactory.getProp(elem, data.ir, 0, 0, this);\n          this.is = PropertyFactory.getProp(elem, data.is, 0, 0.01, this);\n          this.convertToPath = this.convertStarToPath;\n        } else {\n          this.convertToPath = this.convertPolygonToPath;\n        }\n        this.pt = PropertyFactory.getProp(elem, data.pt, 0, 0, this);\n        this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\n        this.r = PropertyFactory.getProp(elem, data.r, 0, degToRads, this);\n        this.or = PropertyFactory.getProp(elem, data.or, 0, 0, this);\n        this.os = PropertyFactory.getProp(elem, data.os, 0, 0.01, this);\n        this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n        this.localShapeCollection.addShape(this.v);\n        this.paths = this.localShapeCollection;\n        if (this.dynamicProperties.length) {\n          this.k = true;\n        } else {\n          this.k = false;\n          this.convertToPath();\n        }\n      }\n      StarShapePropertyFactory.prototype = {\n        reset: resetShape,\n        getValue: function getValue() {\n          if (this.elem.globalData.frameId === this.frameId) {\n            return;\n          }\n          this.frameId = this.elem.globalData.frameId;\n          this.iterateDynamicProperties();\n          if (this._mdf) {\n            this.convertToPath();\n          }\n        },\n        convertStarToPath: function convertStarToPath() {\n          var numPts = Math.floor(this.pt.v) * 2;\n          var angle = Math.PI * 2 / numPts;\n          /* this.v.v.length = numPts;\n                  this.v.i.length = numPts;\n                  this.v.o.length = numPts; */\n          var longFlag = true;\n          var longRad = this.or.v;\n          var shortRad = this.ir.v;\n          var longRound = this.os.v;\n          var shortRound = this.is.v;\n          var longPerimSegment = 2 * Math.PI * longRad / (numPts * 2);\n          var shortPerimSegment = 2 * Math.PI * shortRad / (numPts * 2);\n          var i;\n          var rad;\n          var roundness;\n          var perimSegment;\n          var currentAng = -Math.PI / 2;\n          currentAng += this.r.v;\n          var dir = this.data.d === 3 ? -1 : 1;\n          this.v._length = 0;\n          for (i = 0; i < numPts; i += 1) {\n            rad = longFlag ? longRad : shortRad;\n            roundness = longFlag ? longRound : shortRound;\n            perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\n            var x = rad * Math.cos(currentAng);\n            var y = rad * Math.sin(currentAng);\n            var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\n            var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\n            x += +this.p.v[0];\n            y += +this.p.v[1];\n            this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\n\n            /* this.v.v[i] = [x,y];\n                      this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\n                      this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\n                      this.v._length = numPts; */\n            longFlag = !longFlag;\n            currentAng += angle * dir;\n          }\n        },\n        convertPolygonToPath: function convertPolygonToPath() {\n          var numPts = Math.floor(this.pt.v);\n          var angle = Math.PI * 2 / numPts;\n          var rad = this.or.v;\n          var roundness = this.os.v;\n          var perimSegment = 2 * Math.PI * rad / (numPts * 4);\n          var i;\n          var currentAng = -Math.PI * 0.5;\n          var dir = this.data.d === 3 ? -1 : 1;\n          currentAng += this.r.v;\n          this.v._length = 0;\n          for (i = 0; i < numPts; i += 1) {\n            var x = rad * Math.cos(currentAng);\n            var y = rad * Math.sin(currentAng);\n            var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\n            var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\n            x += +this.p.v[0];\n            y += +this.p.v[1];\n            this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\n            currentAng += angle * dir;\n          }\n          this.paths.length = 0;\n          this.paths[0] = this.v;\n        }\n      };\n      extendPrototype([DynamicPropertyContainer], StarShapePropertyFactory);\n      return StarShapePropertyFactory;\n    }();\n    var RectShapeProperty = function () {\n      function RectShapePropertyFactory(elem, data) {\n        this.v = shapePool.newElement();\n        this.v.c = true;\n        this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n        this.localShapeCollection.addShape(this.v);\n        this.paths = this.localShapeCollection;\n        this.elem = elem;\n        this.comp = elem.comp;\n        this.frameId = -1;\n        this.d = data.d;\n        this.initDynamicPropertyContainer(elem);\n        this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\n        this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\n        this.r = PropertyFactory.getProp(elem, data.r, 0, 0, this);\n        if (this.dynamicProperties.length) {\n          this.k = true;\n        } else {\n          this.k = false;\n          this.convertRectToPath();\n        }\n      }\n      RectShapePropertyFactory.prototype = {\n        convertRectToPath: function convertRectToPath() {\n          var p0 = this.p.v[0];\n          var p1 = this.p.v[1];\n          var v0 = this.s.v[0] / 2;\n          var v1 = this.s.v[1] / 2;\n          var round = bmMin(v0, v1, this.r.v);\n          var cPoint = round * (1 - roundCorner);\n          this.v._length = 0;\n          if (this.d === 2 || this.d === 1) {\n            this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, 0, true);\n            this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, p0 + v0, p1 + v1 - round, 1, true);\n            if (round !== 0) {\n              this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, 2, true);\n              this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0 + round, p1 + v1, 3, true);\n              this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, 4, true);\n              this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1 + round, 5, true);\n              this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, 6, true);\n              this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, p0 + v0 - round, p1 - v1, 7, true);\n            } else {\n              this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0, p1 + v1, 2);\n              this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1, 3);\n            }\n          } else {\n            this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, p0 + v0, p1 - v1 + round, 0, true);\n            if (round !== 0) {\n              this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, 1, true);\n              this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0 + round, p1 - v1, 2, true);\n              this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, 3, true);\n              this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1 - round, 4, true);\n              this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, 5, true);\n              this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0 - round, p1 + v1, 6, true);\n              this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, 7, true);\n            } else {\n              this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0, p1 - v1, 1, true);\n              this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1, 2, true);\n              this.v.setTripleAt(p0 + v0, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0, p1 + v1, 3, true);\n            }\n          }\n        },\n        getValue: function getValue() {\n          if (this.elem.globalData.frameId === this.frameId) {\n            return;\n          }\n          this.frameId = this.elem.globalData.frameId;\n          this.iterateDynamicProperties();\n          if (this._mdf) {\n            this.convertRectToPath();\n          }\n        },\n        reset: resetShape\n      };\n      extendPrototype([DynamicPropertyContainer], RectShapePropertyFactory);\n      return RectShapePropertyFactory;\n    }();\n    function getShapeProp(elem, data, type) {\n      var prop;\n      if (type === 3 || type === 4) {\n        var dataProp = type === 3 ? data.pt : data.ks;\n        var keys = dataProp.k;\n        if (keys.length) {\n          prop = new KeyframedShapeProperty(elem, data, type);\n        } else {\n          prop = new ShapeProperty(elem, data, type);\n        }\n      } else if (type === 5) {\n        prop = new RectShapeProperty(elem, data);\n      } else if (type === 6) {\n        prop = new EllShapeProperty(elem, data);\n      } else if (type === 7) {\n        prop = new StarShapeProperty(elem, data);\n      }\n      if (prop.k) {\n        elem.addDynamicProperty(prop);\n      }\n      return prop;\n    }\n    function getConstructorFunction() {\n      return ShapeProperty;\n    }\n    function getKeyframedConstructorFunction() {\n      return KeyframedShapeProperty;\n    }\n    var ob = {};\n    ob.getShapeProp = getShapeProp;\n    ob.getConstructorFunction = getConstructorFunction;\n    ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\n    return ob;\n  }();\n\n  /*!\n   Transformation Matrix v2.0\n   (c) Epistemex 2014-2015\n   www.epistemex.com\n   By Ken Fyrstenberg\n   Contributions by leeoniya.\n   License: MIT, header required.\n   */\n\n  /**\n   * 2D transformation matrix object initialized with identity matrix.\n   *\n   * The matrix can synchronize a canvas context by supplying the context\n   * as an argument, or later apply current absolute transform to an\n   * existing context.\n   *\n   * All values are handled as floating point values.\n   *\n   * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\n   * @prop {number} a - scale x\n   * @prop {number} b - shear y\n   * @prop {number} c - shear x\n   * @prop {number} d - scale y\n   * @prop {number} e - translate x\n   * @prop {number} f - translate y\n   * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\n   * @constructor\n   */\n\n  var Matrix = function () {\n    var _cos = Math.cos;\n    var _sin = Math.sin;\n    var _tan = Math.tan;\n    var _rnd = Math.round;\n    function reset() {\n      this.props[0] = 1;\n      this.props[1] = 0;\n      this.props[2] = 0;\n      this.props[3] = 0;\n      this.props[4] = 0;\n      this.props[5] = 1;\n      this.props[6] = 0;\n      this.props[7] = 0;\n      this.props[8] = 0;\n      this.props[9] = 0;\n      this.props[10] = 1;\n      this.props[11] = 0;\n      this.props[12] = 0;\n      this.props[13] = 0;\n      this.props[14] = 0;\n      this.props[15] = 1;\n      return this;\n    }\n    function rotate(angle) {\n      if (angle === 0) {\n        return this;\n      }\n      var mCos = _cos(angle);\n      var mSin = _sin(angle);\n      return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    }\n    function rotateX(angle) {\n      if (angle === 0) {\n        return this;\n      }\n      var mCos = _cos(angle);\n      var mSin = _sin(angle);\n      return this._t(1, 0, 0, 0, 0, mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1);\n    }\n    function rotateY(angle) {\n      if (angle === 0) {\n        return this;\n      }\n      var mCos = _cos(angle);\n      var mSin = _sin(angle);\n      return this._t(mCos, 0, mSin, 0, 0, 1, 0, 0, -mSin, 0, mCos, 0, 0, 0, 0, 1);\n    }\n    function rotateZ(angle) {\n      if (angle === 0) {\n        return this;\n      }\n      var mCos = _cos(angle);\n      var mSin = _sin(angle);\n      return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    }\n    function shear(sx, sy) {\n      return this._t(1, sy, sx, 1, 0, 0);\n    }\n    function skew(ax, ay) {\n      return this.shear(_tan(ax), _tan(ay));\n    }\n    function skewFromAxis(ax, angle) {\n      var mCos = _cos(angle);\n      var mSin = _sin(angle);\n      return this._t(mCos, mSin, 0, 0, -mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(1, 0, 0, 0, _tan(ax), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n      // return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, _tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\n    }\n    function scale(sx, sy, sz) {\n      if (!sz && sz !== 0) {\n        sz = 1;\n      }\n      if (sx === 1 && sy === 1 && sz === 1) {\n        return this;\n      }\n      return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\n    }\n    function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\n      this.props[0] = a;\n      this.props[1] = b;\n      this.props[2] = c;\n      this.props[3] = d;\n      this.props[4] = e;\n      this.props[5] = f;\n      this.props[6] = g;\n      this.props[7] = h;\n      this.props[8] = i;\n      this.props[9] = j;\n      this.props[10] = k;\n      this.props[11] = l;\n      this.props[12] = m;\n      this.props[13] = n;\n      this.props[14] = o;\n      this.props[15] = p;\n      return this;\n    }\n    function translate(tx, ty, tz) {\n      tz = tz || 0;\n      if (tx !== 0 || ty !== 0 || tz !== 0) {\n        return this._t(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1);\n      }\n      return this;\n    }\n    function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\n      var _p = this.props;\n      if (a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0) {\n        // NOTE: commenting this condition because TurboFan deoptimizes code when present\n        // if(m2 !== 0 || n2 !== 0 || o2 !== 0){\n        _p[12] = _p[12] * a2 + _p[15] * m2;\n        _p[13] = _p[13] * f2 + _p[15] * n2;\n        _p[14] = _p[14] * k2 + _p[15] * o2;\n        _p[15] *= p2;\n        // }\n        this._identityCalculated = false;\n        return this;\n      }\n      var a1 = _p[0];\n      var b1 = _p[1];\n      var c1 = _p[2];\n      var d1 = _p[3];\n      var e1 = _p[4];\n      var f1 = _p[5];\n      var g1 = _p[6];\n      var h1 = _p[7];\n      var i1 = _p[8];\n      var j1 = _p[9];\n      var k1 = _p[10];\n      var l1 = _p[11];\n      var m1 = _p[12];\n      var n1 = _p[13];\n      var o1 = _p[14];\n      var p1 = _p[15];\n\n      /* matrix order (canvas compatible):\n           * ace\n           * bdf\n           * 001\n           */\n      _p[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\n      _p[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2;\n      _p[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2;\n      _p[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2;\n      _p[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2;\n      _p[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2;\n      _p[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2;\n      _p[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2;\n      _p[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2;\n      _p[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2;\n      _p[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2;\n      _p[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2;\n      _p[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2;\n      _p[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2;\n      _p[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2;\n      _p[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2;\n      this._identityCalculated = false;\n      return this;\n    }\n    function multiply(matrix) {\n      var matrixProps = matrix.props;\n      return this.transform(matrixProps[0], matrixProps[1], matrixProps[2], matrixProps[3], matrixProps[4], matrixProps[5], matrixProps[6], matrixProps[7], matrixProps[8], matrixProps[9], matrixProps[10], matrixProps[11], matrixProps[12], matrixProps[13], matrixProps[14], matrixProps[15]);\n    }\n    function isIdentity() {\n      if (!this._identityCalculated) {\n        this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0 || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0 || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0 || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\n        this._identityCalculated = true;\n      }\n      return this._identity;\n    }\n    function equals(matr) {\n      var i = 0;\n      while (i < 16) {\n        if (matr.props[i] !== this.props[i]) {\n          return false;\n        }\n        i += 1;\n      }\n      return true;\n    }\n    function clone(matr) {\n      var i;\n      for (i = 0; i < 16; i += 1) {\n        matr.props[i] = this.props[i];\n      }\n      return matr;\n    }\n    function cloneFromProps(props) {\n      var i;\n      for (i = 0; i < 16; i += 1) {\n        this.props[i] = props[i];\n      }\n    }\n    function applyToPoint(x, y, z) {\n      return {\n        x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\n        y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\n        z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]\n      };\n      /* return {\n           x: x * me.a + y * me.c + me.e,\n           y: x * me.b + y * me.d + me.f\n           }; */\n    }\n    function applyToX(x, y, z) {\n      return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\n    }\n    function applyToY(x, y, z) {\n      return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\n    }\n    function applyToZ(x, y, z) {\n      return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\n    }\n    function getInverseMatrix() {\n      var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\n      var a = this.props[5] / determinant;\n      var b = -this.props[1] / determinant;\n      var c = -this.props[4] / determinant;\n      var d = this.props[0] / determinant;\n      var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12]) / determinant;\n      var f = -(this.props[0] * this.props[13] - this.props[1] * this.props[12]) / determinant;\n      var inverseMatrix = new Matrix();\n      inverseMatrix.props[0] = a;\n      inverseMatrix.props[1] = b;\n      inverseMatrix.props[4] = c;\n      inverseMatrix.props[5] = d;\n      inverseMatrix.props[12] = e;\n      inverseMatrix.props[13] = f;\n      return inverseMatrix;\n    }\n    function inversePoint(pt) {\n      var inverseMatrix = this.getInverseMatrix();\n      return inverseMatrix.applyToPointArray(pt[0], pt[1], pt[2] || 0);\n    }\n    function inversePoints(pts) {\n      var i;\n      var len = pts.length;\n      var retPts = [];\n      for (i = 0; i < len; i += 1) {\n        retPts[i] = inversePoint(pts[i]);\n      }\n      return retPts;\n    }\n    function applyToTriplePoints(pt1, pt2, pt3) {\n      var arr = createTypedArray('float32', 6);\n      if (this.isIdentity()) {\n        arr[0] = pt1[0];\n        arr[1] = pt1[1];\n        arr[2] = pt2[0];\n        arr[3] = pt2[1];\n        arr[4] = pt3[0];\n        arr[5] = pt3[1];\n      } else {\n        var p0 = this.props[0];\n        var p1 = this.props[1];\n        var p4 = this.props[4];\n        var p5 = this.props[5];\n        var p12 = this.props[12];\n        var p13 = this.props[13];\n        arr[0] = pt1[0] * p0 + pt1[1] * p4 + p12;\n        arr[1] = pt1[0] * p1 + pt1[1] * p5 + p13;\n        arr[2] = pt2[0] * p0 + pt2[1] * p4 + p12;\n        arr[3] = pt2[0] * p1 + pt2[1] * p5 + p13;\n        arr[4] = pt3[0] * p0 + pt3[1] * p4 + p12;\n        arr[5] = pt3[0] * p1 + pt3[1] * p5 + p13;\n      }\n      return arr;\n    }\n    function applyToPointArray(x, y, z) {\n      var arr;\n      if (this.isIdentity()) {\n        arr = [x, y, z];\n      } else {\n        arr = [x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12], x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13], x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]];\n      }\n      return arr;\n    }\n    function applyToPointStringified(x, y) {\n      if (this.isIdentity()) {\n        return x + ',' + y;\n      }\n      var _p = this.props;\n      return Math.round((x * _p[0] + y * _p[4] + _p[12]) * 100) / 100 + ',' + Math.round((x * _p[1] + y * _p[5] + _p[13]) * 100) / 100;\n    }\n    function toCSS() {\n      // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\n      /* if(this.isIdentity()) {\n              return '';\n          } */\n      var i = 0;\n      var props = this.props;\n      var cssValue = 'matrix3d(';\n      var v = 10000;\n      while (i < 16) {\n        cssValue += _rnd(props[i] * v) / v;\n        cssValue += i === 15 ? ')' : ',';\n        i += 1;\n      }\n      return cssValue;\n    }\n    function roundMatrixProperty(val) {\n      var v = 10000;\n      if (val < 0.000001 && val > 0 || val > -0.000001 && val < 0) {\n        return _rnd(val * v) / v;\n      }\n      return val;\n    }\n    function to2dCSS() {\n      // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\n      /* if(this.isIdentity()) {\n              return '';\n          } */\n      var props = this.props;\n      var _a = roundMatrixProperty(props[0]);\n      var _b = roundMatrixProperty(props[1]);\n      var _c = roundMatrixProperty(props[4]);\n      var _d = roundMatrixProperty(props[5]);\n      var _e = roundMatrixProperty(props[12]);\n      var _f = roundMatrixProperty(props[13]);\n      return 'matrix(' + _a + ',' + _b + ',' + _c + ',' + _d + ',' + _e + ',' + _f + ')';\n    }\n    return function () {\n      this.reset = reset;\n      this.rotate = rotate;\n      this.rotateX = rotateX;\n      this.rotateY = rotateY;\n      this.rotateZ = rotateZ;\n      this.skew = skew;\n      this.skewFromAxis = skewFromAxis;\n      this.shear = shear;\n      this.scale = scale;\n      this.setTransform = setTransform;\n      this.translate = translate;\n      this.transform = transform;\n      this.multiply = multiply;\n      this.applyToPoint = applyToPoint;\n      this.applyToX = applyToX;\n      this.applyToY = applyToY;\n      this.applyToZ = applyToZ;\n      this.applyToPointArray = applyToPointArray;\n      this.applyToTriplePoints = applyToTriplePoints;\n      this.applyToPointStringified = applyToPointStringified;\n      this.toCSS = toCSS;\n      this.to2dCSS = to2dCSS;\n      this.clone = clone;\n      this.cloneFromProps = cloneFromProps;\n      this.equals = equals;\n      this.inversePoints = inversePoints;\n      this.inversePoint = inversePoint;\n      this.getInverseMatrix = getInverseMatrix;\n      this._t = this.transform;\n      this.isIdentity = isIdentity;\n      this._identity = true;\n      this._identityCalculated = false;\n      this.props = createTypedArray('float32', 16);\n      this.reset();\n    };\n  }();\n\n  function _typeof$3(o) { \"@babel/helpers - typeof\"; return _typeof$3 = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof$3(o); }\n  var lottie = {};\n  var standalone = '__[STANDALONE]__';\n  var animationData = '__[ANIMATIONDATA]__';\n  var renderer = '';\n  function setLocation(href) {\n    setLocationHref(href);\n  }\n  function searchAnimations() {\n    if (standalone === true) {\n      animationManager.searchAnimations(animationData, standalone, renderer);\n    } else {\n      animationManager.searchAnimations();\n    }\n  }\n  function setSubframeRendering(flag) {\n    setSubframeEnabled(flag);\n  }\n  function setPrefix(prefix) {\n    setIdPrefix(prefix);\n  }\n  function loadAnimation(params) {\n    if (standalone === true) {\n      params.animationData = JSON.parse(animationData);\n    }\n    return animationManager.loadAnimation(params);\n  }\n  function setQuality(value) {\n    if (typeof value === 'string') {\n      switch (value) {\n        case 'high':\n          setDefaultCurveSegments(200);\n          break;\n        default:\n        case 'medium':\n          setDefaultCurveSegments(50);\n          break;\n        case 'low':\n          setDefaultCurveSegments(10);\n          break;\n      }\n    } else if (!isNaN(value) && value > 1) {\n      setDefaultCurveSegments(value);\n    }\n    if (getDefaultCurveSegments() >= 50) {\n      roundValues(false);\n    } else {\n      roundValues(true);\n    }\n  }\n  function inBrowser() {\n    return typeof navigator !== 'undefined';\n  }\n  function installPlugin(type, plugin) {\n    if (type === 'expressions') {\n      setExpressionsPlugin(plugin);\n    }\n  }\n  function getFactory(name) {\n    switch (name) {\n      case 'propertyFactory':\n        return PropertyFactory;\n      case 'shapePropertyFactory':\n        return ShapePropertyFactory;\n      case 'matrix':\n        return Matrix;\n      default:\n        return null;\n    }\n  }\n  lottie.play = animationManager.play;\n  lottie.pause = animationManager.pause;\n  lottie.setLocationHref = setLocation;\n  lottie.togglePause = animationManager.togglePause;\n  lottie.setSpeed = animationManager.setSpeed;\n  lottie.setDirection = animationManager.setDirection;\n  lottie.stop = animationManager.stop;\n  lottie.searchAnimations = searchAnimations;\n  lottie.registerAnimation = animationManager.registerAnimation;\n  lottie.loadAnimation = loadAnimation;\n  lottie.setSubframeRendering = setSubframeRendering;\n  lottie.resize = animationManager.resize;\n  // lottie.start = start;\n  lottie.goToAndStop = animationManager.goToAndStop;\n  lottie.destroy = animationManager.destroy;\n  lottie.setQuality = setQuality;\n  lottie.inBrowser = inBrowser;\n  lottie.installPlugin = installPlugin;\n  lottie.freeze = animationManager.freeze;\n  lottie.unfreeze = animationManager.unfreeze;\n  lottie.setVolume = animationManager.setVolume;\n  lottie.mute = animationManager.mute;\n  lottie.unmute = animationManager.unmute;\n  lottie.getRegisteredAnimations = animationManager.getRegisteredAnimations;\n  lottie.useWebWorker = setWebWorker;\n  lottie.setIDPrefix = setPrefix;\n  lottie.__getFactory = getFactory;\n  lottie.version = '5.13.0';\n  function checkReady() {\n    if (document.readyState === 'complete') {\n      clearInterval(readyStateCheckInterval);\n      searchAnimations();\n    }\n  }\n  function getQueryVariable(variable) {\n    var vars = queryString.split('&');\n    for (var i = 0; i < vars.length; i += 1) {\n      var pair = vars[i].split('=');\n      if (decodeURIComponent(pair[0]) == variable) {\n        // eslint-disable-line eqeqeq\n        return decodeURIComponent(pair[1]);\n      }\n    }\n    return null;\n  }\n  var queryString = '';\n  if (standalone) {\n    var scripts = document.getElementsByTagName('script');\n    var index = scripts.length - 1;\n    var myScript = scripts[index] || {\n      src: ''\n    };\n    queryString = myScript.src ? myScript.src.replace(/^[^\\?]+\\??/, '') : ''; // eslint-disable-line no-useless-escape\n    renderer = getQueryVariable('renderer');\n  }\n  var readyStateCheckInterval = setInterval(checkReady, 100);\n\n  // this adds bodymovin to the window object for backwards compatibility\n  try {\n    if (!((typeof exports === \"undefined\" ? \"undefined\" : _typeof$3(exports)) === 'object' && typeof module !== 'undefined') && !(typeof define === 'function' && define.amd) // eslint-disable-line no-undef\n    ) {\n      window.bodymovin = lottie;\n    }\n  } catch (err) {\n    //\n  }\n\n  var ShapeModifiers = function () {\n    var ob = {};\n    var modifiers = {};\n    ob.registerModifier = registerModifier;\n    ob.getModifier = getModifier;\n    function registerModifier(nm, factory) {\n      if (!modifiers[nm]) {\n        modifiers[nm] = factory;\n      }\n    }\n    function getModifier(nm, elem, data) {\n      return new modifiers[nm](elem, data);\n    }\n    return ob;\n  }();\n  function ShapeModifier() {}\n  ShapeModifier.prototype.initModifierProperties = function () {};\n  ShapeModifier.prototype.addShapeToModifier = function () {};\n  ShapeModifier.prototype.addShape = function (data) {\n    if (!this.closed) {\n      // Adding shape to dynamic properties. It covers the case where a shape has no effects applied, to reset it's _mdf state on every tick.\n      data.sh.container.addDynamicProperty(data.sh);\n      var shapeData = {\n        shape: data.sh,\n        data: data,\n        localShapeCollection: shapeCollectionPool.newShapeCollection()\n      };\n      this.shapes.push(shapeData);\n      this.addShapeToModifier(shapeData);\n      if (this._isAnimated) {\n        data.setAsAnimated();\n      }\n    }\n  };\n  ShapeModifier.prototype.init = function (elem, data) {\n    this.shapes = [];\n    this.elem = elem;\n    this.initDynamicPropertyContainer(elem);\n    this.initModifierProperties(elem, data);\n    this.frameId = initialDefaultFrame;\n    this.closed = false;\n    this.k = false;\n    if (this.dynamicProperties.length) {\n      this.k = true;\n    } else {\n      this.getValue(true);\n    }\n  };\n  ShapeModifier.prototype.processKeys = function () {\n    if (this.elem.globalData.frameId === this.frameId) {\n      return;\n    }\n    this.frameId = this.elem.globalData.frameId;\n    this.iterateDynamicProperties();\n  };\n  extendPrototype([DynamicPropertyContainer], ShapeModifier);\n\n  function TrimModifier() {}\n  extendPrototype([ShapeModifier], TrimModifier);\n  TrimModifier.prototype.initModifierProperties = function (elem, data) {\n    this.s = PropertyFactory.getProp(elem, data.s, 0, 0.01, this);\n    this.e = PropertyFactory.getProp(elem, data.e, 0, 0.01, this);\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0, this);\n    this.sValue = 0;\n    this.eValue = 0;\n    this.getValue = this.processKeys;\n    this.m = data.m;\n    this._isAnimated = !!this.s.effectsSequence.length || !!this.e.effectsSequence.length || !!this.o.effectsSequence.length;\n  };\n  TrimModifier.prototype.addShapeToModifier = function (shapeData) {\n    shapeData.pathsData = [];\n  };\n  TrimModifier.prototype.calculateShapeEdges = function (s, e, shapeLength, addedLength, totalModifierLength) {\n    var segments = [];\n    if (e <= 1) {\n      segments.push({\n        s: s,\n        e: e\n      });\n    } else if (s >= 1) {\n      segments.push({\n        s: s - 1,\n        e: e - 1\n      });\n    } else {\n      segments.push({\n        s: s,\n        e: 1\n      });\n      segments.push({\n        s: 0,\n        e: e - 1\n      });\n    }\n    var shapeSegments = [];\n    var i;\n    var len = segments.length;\n    var segmentOb;\n    for (i = 0; i < len; i += 1) {\n      segmentOb = segments[i];\n      if (!(segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength)) {\n        var shapeS;\n        var shapeE;\n        if (segmentOb.s * totalModifierLength <= addedLength) {\n          shapeS = 0;\n        } else {\n          shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\n        }\n        if (segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\n          shapeE = 1;\n        } else {\n          shapeE = (segmentOb.e * totalModifierLength - addedLength) / shapeLength;\n        }\n        shapeSegments.push([shapeS, shapeE]);\n      }\n    }\n    if (!shapeSegments.length) {\n      shapeSegments.push([0, 0]);\n    }\n    return shapeSegments;\n  };\n  TrimModifier.prototype.releasePathsData = function (pathsData) {\n    var i;\n    var len = pathsData.length;\n    for (i = 0; i < len; i += 1) {\n      segmentsLengthPool.release(pathsData[i]);\n    }\n    pathsData.length = 0;\n    return pathsData;\n  };\n  TrimModifier.prototype.processShapes = function (_isFirstFrame) {\n    var s;\n    var e;\n    if (this._mdf || _isFirstFrame) {\n      var o = this.o.v % 360 / 360;\n      if (o < 0) {\n        o += 1;\n      }\n      if (this.s.v > 1) {\n        s = 1 + o;\n      } else if (this.s.v < 0) {\n        s = 0 + o;\n      } else {\n        s = this.s.v + o;\n      }\n      if (this.e.v > 1) {\n        e = 1 + o;\n      } else if (this.e.v < 0) {\n        e = 0 + o;\n      } else {\n        e = this.e.v + o;\n      }\n      if (s > e) {\n        var _s = s;\n        s = e;\n        e = _s;\n      }\n      s = Math.round(s * 10000) * 0.0001;\n      e = Math.round(e * 10000) * 0.0001;\n      this.sValue = s;\n      this.eValue = e;\n    } else {\n      s = this.sValue;\n      e = this.eValue;\n    }\n    var shapePaths;\n    var i;\n    var len = this.shapes.length;\n    var j;\n    var jLen;\n    var pathsData;\n    var pathData;\n    var totalShapeLength;\n    var totalModifierLength = 0;\n    if (e === s) {\n      for (i = 0; i < len; i += 1) {\n        this.shapes[i].localShapeCollection.releaseShapes();\n        this.shapes[i].shape._mdf = true;\n        this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\n        if (this._mdf) {\n          this.shapes[i].pathsData.length = 0;\n        }\n      }\n    } else if (!(e === 1 && s === 0 || e === 0 && s === 1)) {\n      var segments = [];\n      var shapeData;\n      var localShapeCollection;\n      for (i = 0; i < len; i += 1) {\n        shapeData = this.shapes[i];\n        // if shape hasn't changed and trim properties haven't changed, cached previous path can be used\n        if (!shapeData.shape._mdf && !this._mdf && !_isFirstFrame && this.m !== 2) {\n          shapeData.shape.paths = shapeData.localShapeCollection;\n        } else {\n          shapePaths = shapeData.shape.paths;\n          jLen = shapePaths._length;\n          totalShapeLength = 0;\n          if (!shapeData.shape._mdf && shapeData.pathsData.length) {\n            totalShapeLength = shapeData.totalShapeLength;\n          } else {\n            pathsData = this.releasePathsData(shapeData.pathsData);\n            for (j = 0; j < jLen; j += 1) {\n              pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\n              pathsData.push(pathData);\n              totalShapeLength += pathData.totalLength;\n            }\n            shapeData.totalShapeLength = totalShapeLength;\n            shapeData.pathsData = pathsData;\n          }\n          totalModifierLength += totalShapeLength;\n          shapeData.shape._mdf = true;\n        }\n      }\n      var shapeS = s;\n      var shapeE = e;\n      var addedLength = 0;\n      var edges;\n      for (i = len - 1; i >= 0; i -= 1) {\n        shapeData = this.shapes[i];\n        if (shapeData.shape._mdf) {\n          localShapeCollection = shapeData.localShapeCollection;\n          localShapeCollection.releaseShapes();\n          // if m === 2 means paths are trimmed individually so edges need to be found for this specific shape relative to whoel group\n          if (this.m === 2 && len > 1) {\n            edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\n            addedLength += shapeData.totalShapeLength;\n          } else {\n            edges = [[shapeS, shapeE]];\n          }\n          jLen = edges.length;\n          for (j = 0; j < jLen; j += 1) {\n            shapeS = edges[j][0];\n            shapeE = edges[j][1];\n            segments.length = 0;\n            if (shapeE <= 1) {\n              segments.push({\n                s: shapeData.totalShapeLength * shapeS,\n                e: shapeData.totalShapeLength * shapeE\n              });\n            } else if (shapeS >= 1) {\n              segments.push({\n                s: shapeData.totalShapeLength * (shapeS - 1),\n                e: shapeData.totalShapeLength * (shapeE - 1)\n              });\n            } else {\n              segments.push({\n                s: shapeData.totalShapeLength * shapeS,\n                e: shapeData.totalShapeLength\n              });\n              segments.push({\n                s: 0,\n                e: shapeData.totalShapeLength * (shapeE - 1)\n              });\n            }\n            var newShapesData = this.addShapes(shapeData, segments[0]);\n            if (segments[0].s !== segments[0].e) {\n              if (segments.length > 1) {\n                var lastShapeInCollection = shapeData.shape.paths.shapes[shapeData.shape.paths._length - 1];\n                if (lastShapeInCollection.c) {\n                  var lastShape = newShapesData.pop();\n                  this.addPaths(newShapesData, localShapeCollection);\n                  newShapesData = this.addShapes(shapeData, segments[1], lastShape);\n                } else {\n                  this.addPaths(newShapesData, localShapeCollection);\n                  newShapesData = this.addShapes(shapeData, segments[1]);\n                }\n              }\n              this.addPaths(newShapesData, localShapeCollection);\n            }\n          }\n          shapeData.shape.paths = localShapeCollection;\n        }\n      }\n    } else if (this._mdf) {\n      for (i = 0; i < len; i += 1) {\n        // Releasign Trim Cached paths data when no trim applied in case shapes are modified inbetween.\n        // Don't remove this even if it's losing cached info.\n        this.shapes[i].pathsData.length = 0;\n        this.shapes[i].shape._mdf = true;\n      }\n    }\n  };\n  TrimModifier.prototype.addPaths = function (newPaths, localShapeCollection) {\n    var i;\n    var len = newPaths.length;\n    for (i = 0; i < len; i += 1) {\n      localShapeCollection.addShape(newPaths[i]);\n    }\n  };\n  TrimModifier.prototype.addSegment = function (pt1, pt2, pt3, pt4, shapePath, pos, newShape) {\n    shapePath.setXYAt(pt2[0], pt2[1], 'o', pos);\n    shapePath.setXYAt(pt3[0], pt3[1], 'i', pos + 1);\n    if (newShape) {\n      shapePath.setXYAt(pt1[0], pt1[1], 'v', pos);\n    }\n    shapePath.setXYAt(pt4[0], pt4[1], 'v', pos + 1);\n  };\n  TrimModifier.prototype.addSegmentFromArray = function (points, shapePath, pos, newShape) {\n    shapePath.setXYAt(points[1], points[5], 'o', pos);\n    shapePath.setXYAt(points[2], points[6], 'i', pos + 1);\n    if (newShape) {\n      shapePath.setXYAt(points[0], points[4], 'v', pos);\n    }\n    shapePath.setXYAt(points[3], points[7], 'v', pos + 1);\n  };\n  TrimModifier.prototype.addShapes = function (shapeData, shapeSegment, shapePath) {\n    var pathsData = shapeData.pathsData;\n    var shapePaths = shapeData.shape.paths.shapes;\n    var i;\n    var len = shapeData.shape.paths._length;\n    var j;\n    var jLen;\n    var addedLength = 0;\n    var currentLengthData;\n    var segmentCount;\n    var lengths;\n    var segment;\n    var shapes = [];\n    var initPos;\n    var newShape = true;\n    if (!shapePath) {\n      shapePath = shapePool.newElement();\n      segmentCount = 0;\n      initPos = 0;\n    } else {\n      segmentCount = shapePath._length;\n      initPos = shapePath._length;\n    }\n    shapes.push(shapePath);\n    for (i = 0; i < len; i += 1) {\n      lengths = pathsData[i].lengths;\n      shapePath.c = shapePaths[i].c;\n      jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\n      for (j = 1; j < jLen; j += 1) {\n        currentLengthData = lengths[j - 1];\n        if (addedLength + currentLengthData.addedLength < shapeSegment.s) {\n          addedLength += currentLengthData.addedLength;\n          shapePath.c = false;\n        } else if (addedLength > shapeSegment.e) {\n          shapePath.c = false;\n          break;\n        } else {\n          if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength) {\n            this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[j], shapePaths[i].v[j], shapePath, segmentCount, newShape);\n            newShape = false;\n          } else {\n            segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[j], shapePaths[i].o[j - 1], shapePaths[i].i[j], (shapeSegment.s - addedLength) / currentLengthData.addedLength, (shapeSegment.e - addedLength) / currentLengthData.addedLength, lengths[j - 1]);\n            this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\n            // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\n            newShape = false;\n            shapePath.c = false;\n          }\n          addedLength += currentLengthData.addedLength;\n          segmentCount += 1;\n        }\n      }\n      if (shapePaths[i].c && lengths.length) {\n        currentLengthData = lengths[j - 1];\n        if (addedLength <= shapeSegment.e) {\n          var segmentLength = lengths[j - 1].addedLength;\n          if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength) {\n            this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[0], shapePaths[i].v[0], shapePath, segmentCount, newShape);\n            newShape = false;\n          } else {\n            segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[0], shapePaths[i].o[j - 1], shapePaths[i].i[0], (shapeSegment.s - addedLength) / segmentLength, (shapeSegment.e - addedLength) / segmentLength, lengths[j - 1]);\n            this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\n            // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\n            newShape = false;\n            shapePath.c = false;\n          }\n        } else {\n          shapePath.c = false;\n        }\n        addedLength += currentLengthData.addedLength;\n        segmentCount += 1;\n      }\n      if (shapePath._length) {\n        shapePath.setXYAt(shapePath.v[initPos][0], shapePath.v[initPos][1], 'i', initPos);\n        shapePath.setXYAt(shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1], 'o', shapePath._length - 1);\n      }\n      if (addedLength > shapeSegment.e) {\n        break;\n      }\n      if (i < len - 1) {\n        shapePath = shapePool.newElement();\n        newShape = true;\n        shapes.push(shapePath);\n        segmentCount = 0;\n      }\n    }\n    return shapes;\n  };\n\n  function PuckerAndBloatModifier() {}\n  extendPrototype([ShapeModifier], PuckerAndBloatModifier);\n  PuckerAndBloatModifier.prototype.initModifierProperties = function (elem, data) {\n    this.getValue = this.processKeys;\n    this.amount = PropertyFactory.getProp(elem, data.a, 0, null, this);\n    this._isAnimated = !!this.amount.effectsSequence.length;\n  };\n  PuckerAndBloatModifier.prototype.processPath = function (path, amount) {\n    var percent = amount / 100;\n    var centerPoint = [0, 0];\n    var pathLength = path._length;\n    var i = 0;\n    for (i = 0; i < pathLength; i += 1) {\n      centerPoint[0] += path.v[i][0];\n      centerPoint[1] += path.v[i][1];\n    }\n    centerPoint[0] /= pathLength;\n    centerPoint[1] /= pathLength;\n    var clonedPath = shapePool.newElement();\n    clonedPath.c = path.c;\n    var vX;\n    var vY;\n    var oX;\n    var oY;\n    var iX;\n    var iY;\n    for (i = 0; i < pathLength; i += 1) {\n      vX = path.v[i][0] + (centerPoint[0] - path.v[i][0]) * percent;\n      vY = path.v[i][1] + (centerPoint[1] - path.v[i][1]) * percent;\n      oX = path.o[i][0] + (centerPoint[0] - path.o[i][0]) * -percent;\n      oY = path.o[i][1] + (centerPoint[1] - path.o[i][1]) * -percent;\n      iX = path.i[i][0] + (centerPoint[0] - path.i[i][0]) * -percent;\n      iY = path.i[i][1] + (centerPoint[1] - path.i[i][1]) * -percent;\n      clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, i);\n    }\n    return clonedPath;\n  };\n  PuckerAndBloatModifier.prototype.processShapes = function (_isFirstFrame) {\n    var shapePaths;\n    var i;\n    var len = this.shapes.length;\n    var j;\n    var jLen;\n    var amount = this.amount.v;\n    if (amount !== 0) {\n      var shapeData;\n      var localShapeCollection;\n      for (i = 0; i < len; i += 1) {\n        shapeData = this.shapes[i];\n        localShapeCollection = shapeData.localShapeCollection;\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\n          localShapeCollection.releaseShapes();\n          shapeData.shape._mdf = true;\n          shapePaths = shapeData.shape.paths.shapes;\n          jLen = shapeData.shape.paths._length;\n          for (j = 0; j < jLen; j += 1) {\n            localShapeCollection.addShape(this.processPath(shapePaths[j], amount));\n          }\n        }\n        shapeData.shape.paths = shapeData.localShapeCollection;\n      }\n    }\n    if (!this.dynamicProperties.length) {\n      this._mdf = false;\n    }\n  };\n\n  var TransformPropertyFactory = function () {\n    var defaultVector = [0, 0];\n    function applyToMatrix(mat) {\n      var _mdf = this._mdf;\n      this.iterateDynamicProperties();\n      this._mdf = this._mdf || _mdf;\n      if (this.a) {\n        mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\n      }\n      if (this.s) {\n        mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\n      }\n      if (this.sk) {\n        mat.skewFromAxis(-this.sk.v, this.sa.v);\n      }\n      if (this.r) {\n        mat.rotate(-this.r.v);\n      } else {\n        mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\n      }\n      if (this.data.p.s) {\n        if (this.data.p.z) {\n          mat.translate(this.px.v, this.py.v, -this.pz.v);\n        } else {\n          mat.translate(this.px.v, this.py.v, 0);\n        }\n      } else {\n        mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\n      }\n    }\n    function processKeys(forceRender) {\n      if (this.elem.globalData.frameId === this.frameId) {\n        return;\n      }\n      if (this._isDirty) {\n        this.precalculateMatrix();\n        this._isDirty = false;\n      }\n      this.iterateDynamicProperties();\n      if (this._mdf || forceRender) {\n        var frameRate;\n        this.v.cloneFromProps(this.pre.props);\n        if (this.appliedTransformations < 1) {\n          this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\n        }\n        if (this.appliedTransformations < 2) {\n          this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\n        }\n        if (this.sk && this.appliedTransformations < 3) {\n          this.v.skewFromAxis(-this.sk.v, this.sa.v);\n        }\n        if (this.r && this.appliedTransformations < 4) {\n          this.v.rotate(-this.r.v);\n        } else if (!this.r && this.appliedTransformations < 4) {\n          this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\n        }\n        if (this.autoOriented) {\n          var v1;\n          var v2;\n          frameRate = this.elem.globalData.frameRate;\n          if (this.p && this.p.keyframes && this.p.getValueAtTime) {\n            if (this.p._caching.lastFrame + this.p.offsetTime <= this.p.keyframes[0].t) {\n              v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / frameRate, 0);\n              v2 = this.p.getValueAtTime(this.p.keyframes[0].t / frameRate, 0);\n            } else if (this.p._caching.lastFrame + this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\n              v1 = this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length - 1].t / frameRate, 0);\n              v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.05) / frameRate, 0);\n            } else {\n              v1 = this.p.pv;\n              v2 = this.p.getValueAtTime((this.p._caching.lastFrame + this.p.offsetTime - 0.01) / frameRate, this.p.offsetTime);\n            }\n          } else if (this.px && this.px.keyframes && this.py.keyframes && this.px.getValueAtTime && this.py.getValueAtTime) {\n            v1 = [];\n            v2 = [];\n            var px = this.px;\n            var py = this.py;\n            if (px._caching.lastFrame + px.offsetTime <= px.keyframes[0].t) {\n              v1[0] = px.getValueAtTime((px.keyframes[0].t + 0.01) / frameRate, 0);\n              v1[1] = py.getValueAtTime((py.keyframes[0].t + 0.01) / frameRate, 0);\n              v2[0] = px.getValueAtTime(px.keyframes[0].t / frameRate, 0);\n              v2[1] = py.getValueAtTime(py.keyframes[0].t / frameRate, 0);\n            } else if (px._caching.lastFrame + px.offsetTime >= px.keyframes[px.keyframes.length - 1].t) {\n              v1[0] = px.getValueAtTime(px.keyframes[px.keyframes.length - 1].t / frameRate, 0);\n              v1[1] = py.getValueAtTime(py.keyframes[py.keyframes.length - 1].t / frameRate, 0);\n              v2[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t - 0.01) / frameRate, 0);\n              v2[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t - 0.01) / frameRate, 0);\n            } else {\n              v1 = [px.pv, py.pv];\n              v2[0] = px.getValueAtTime((px._caching.lastFrame + px.offsetTime - 0.01) / frameRate, px.offsetTime);\n              v2[1] = py.getValueAtTime((py._caching.lastFrame + py.offsetTime - 0.01) / frameRate, py.offsetTime);\n            }\n          } else {\n            v2 = defaultVector;\n            v1 = v2;\n          }\n          this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\n        }\n        if (this.data.p && this.data.p.s) {\n          if (this.data.p.z) {\n            this.v.translate(this.px.v, this.py.v, -this.pz.v);\n          } else {\n            this.v.translate(this.px.v, this.py.v, 0);\n          }\n        } else {\n          this.v.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\n        }\n      }\n      this.frameId = this.elem.globalData.frameId;\n    }\n    function precalculateMatrix() {\n      this.appliedTransformations = 0;\n      this.pre.reset();\n      if (!this.a.effectsSequence.length) {\n        this.pre.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\n        this.appliedTransformations = 1;\n      } else {\n        return;\n      }\n      if (!this.s.effectsSequence.length) {\n        this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\n        this.appliedTransformations = 2;\n      } else {\n        return;\n      }\n      if (this.sk) {\n        if (!this.sk.effectsSequence.length && !this.sa.effectsSequence.length) {\n          this.pre.skewFromAxis(-this.sk.v, this.sa.v);\n          this.appliedTransformations = 3;\n        } else {\n          return;\n        }\n      }\n      if (this.r) {\n        if (!this.r.effectsSequence.length) {\n          this.pre.rotate(-this.r.v);\n          this.appliedTransformations = 4;\n        }\n      } else if (!this.rz.effectsSequence.length && !this.ry.effectsSequence.length && !this.rx.effectsSequence.length && !this.or.effectsSequence.length) {\n        this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\n        this.appliedTransformations = 4;\n      }\n    }\n    function autoOrient() {\n      //\n      // var prevP = this.getValueAtTime();\n    }\n    function addDynamicProperty(prop) {\n      this._addDynamicProperty(prop);\n      this.elem.addDynamicProperty(prop);\n      this._isDirty = true;\n    }\n    function TransformProperty(elem, data, container) {\n      this.elem = elem;\n      this.frameId = -1;\n      this.propType = 'transform';\n      this.data = data;\n      this.v = new Matrix();\n      // Precalculated matrix with non animated properties\n      this.pre = new Matrix();\n      this.appliedTransformations = 0;\n      this.initDynamicPropertyContainer(container || elem);\n      if (data.p && data.p.s) {\n        this.px = PropertyFactory.getProp(elem, data.p.x, 0, 0, this);\n        this.py = PropertyFactory.getProp(elem, data.p.y, 0, 0, this);\n        if (data.p.z) {\n          this.pz = PropertyFactory.getProp(elem, data.p.z, 0, 0, this);\n        }\n      } else {\n        this.p = PropertyFactory.getProp(elem, data.p || {\n          k: [0, 0, 0]\n        }, 1, 0, this);\n      }\n      if (data.rx) {\n        this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this);\n        this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this);\n        this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this);\n        if (data.or.k[0].ti) {\n          var i;\n          var len = data.or.k.length;\n          for (i = 0; i < len; i += 1) {\n            data.or.k[i].to = null;\n            data.or.k[i].ti = null;\n          }\n        }\n        this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this);\n        // sh Indicates it needs to be capped between -180 and 180\n        this.or.sh = true;\n      } else {\n        this.r = PropertyFactory.getProp(elem, data.r || {\n          k: 0\n        }, 0, degToRads, this);\n      }\n      if (data.sk) {\n        this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this);\n        this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this);\n      }\n      this.a = PropertyFactory.getProp(elem, data.a || {\n        k: [0, 0, 0]\n      }, 1, 0, this);\n      this.s = PropertyFactory.getProp(elem, data.s || {\n        k: [100, 100, 100]\n      }, 1, 0.01, this);\n      // Opacity is not part of the transform properties, that's why it won't use this.dynamicProperties. That way transforms won't get updated if opacity changes.\n      if (data.o) {\n        this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, elem);\n      } else {\n        this.o = {\n          _mdf: false,\n          v: 1\n        };\n      }\n      this._isDirty = true;\n      if (!this.dynamicProperties.length) {\n        this.getValue(true);\n      }\n    }\n    TransformProperty.prototype = {\n      applyToMatrix: applyToMatrix,\n      getValue: processKeys,\n      precalculateMatrix: precalculateMatrix,\n      autoOrient: autoOrient\n    };\n    extendPrototype([DynamicPropertyContainer], TransformProperty);\n    TransformProperty.prototype.addDynamicProperty = addDynamicProperty;\n    TransformProperty.prototype._addDynamicProperty = DynamicPropertyContainer.prototype.addDynamicProperty;\n    function getTransformProperty(elem, data, container) {\n      return new TransformProperty(elem, data, container);\n    }\n    return {\n      getTransformProperty: getTransformProperty\n    };\n  }();\n\n  function RepeaterModifier() {}\n  extendPrototype([ShapeModifier], RepeaterModifier);\n  RepeaterModifier.prototype.initModifierProperties = function (elem, data) {\n    this.getValue = this.processKeys;\n    this.c = PropertyFactory.getProp(elem, data.c, 0, null, this);\n    this.o = PropertyFactory.getProp(elem, data.o, 0, null, this);\n    this.tr = TransformPropertyFactory.getTransformProperty(elem, data.tr, this);\n    this.so = PropertyFactory.getProp(elem, data.tr.so, 0, 0.01, this);\n    this.eo = PropertyFactory.getProp(elem, data.tr.eo, 0, 0.01, this);\n    this.data = data;\n    if (!this.dynamicProperties.length) {\n      this.getValue(true);\n    }\n    this._isAnimated = !!this.dynamicProperties.length;\n    this.pMatrix = new Matrix();\n    this.rMatrix = new Matrix();\n    this.sMatrix = new Matrix();\n    this.tMatrix = new Matrix();\n    this.matrix = new Matrix();\n  };\n  RepeaterModifier.prototype.applyTransforms = function (pMatrix, rMatrix, sMatrix, transform, perc, inv) {\n    var dir = inv ? -1 : 1;\n    var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\n    var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\n    pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\n    rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\n    rMatrix.rotate(-transform.r.v * dir * perc);\n    rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\n    sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\n    sMatrix.scale(inv ? 1 / scaleX : scaleX, inv ? 1 / scaleY : scaleY);\n    sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\n  };\n  RepeaterModifier.prototype.init = function (elem, arr, pos, elemsData) {\n    this.elem = elem;\n    this.arr = arr;\n    this.pos = pos;\n    this.elemsData = elemsData;\n    this._currentCopies = 0;\n    this._elements = [];\n    this._groups = [];\n    this.frameId = -1;\n    this.initDynamicPropertyContainer(elem);\n    this.initModifierProperties(elem, arr[pos]);\n    while (pos > 0) {\n      pos -= 1;\n      // this._elements.unshift(arr.splice(pos,1)[0]);\n      this._elements.unshift(arr[pos]);\n    }\n    if (this.dynamicProperties.length) {\n      this.k = true;\n    } else {\n      this.getValue(true);\n    }\n  };\n  RepeaterModifier.prototype.resetElements = function (elements) {\n    var i;\n    var len = elements.length;\n    for (i = 0; i < len; i += 1) {\n      elements[i]._processed = false;\n      if (elements[i].ty === 'gr') {\n        this.resetElements(elements[i].it);\n      }\n    }\n  };\n  RepeaterModifier.prototype.cloneElements = function (elements) {\n    var newElements = JSON.parse(JSON.stringify(elements));\n    this.resetElements(newElements);\n    return newElements;\n  };\n  RepeaterModifier.prototype.changeGroupRender = function (elements, renderFlag) {\n    var i;\n    var len = elements.length;\n    for (i = 0; i < len; i += 1) {\n      elements[i]._render = renderFlag;\n      if (elements[i].ty === 'gr') {\n        this.changeGroupRender(elements[i].it, renderFlag);\n      }\n    }\n  };\n  RepeaterModifier.prototype.processShapes = function (_isFirstFrame) {\n    var items;\n    var itemsTransform;\n    var i;\n    var dir;\n    var cont;\n    var hasReloaded = false;\n    if (this._mdf || _isFirstFrame) {\n      var copies = Math.ceil(this.c.v);\n      if (this._groups.length < copies) {\n        while (this._groups.length < copies) {\n          var group = {\n            it: this.cloneElements(this._elements),\n            ty: 'gr'\n          };\n          group.it.push({\n            a: {\n              a: 0,\n              ix: 1,\n              k: [0, 0]\n            },\n            nm: 'Transform',\n            o: {\n              a: 0,\n              ix: 7,\n              k: 100\n            },\n            p: {\n              a: 0,\n              ix: 2,\n              k: [0, 0]\n            },\n            r: {\n              a: 1,\n              ix: 6,\n              k: [{\n                s: 0,\n                e: 0,\n                t: 0\n              }, {\n                s: 0,\n                e: 0,\n                t: 1\n              }]\n            },\n            s: {\n              a: 0,\n              ix: 3,\n              k: [100, 100]\n            },\n            sa: {\n              a: 0,\n              ix: 5,\n              k: 0\n            },\n            sk: {\n              a: 0,\n              ix: 4,\n              k: 0\n            },\n            ty: 'tr'\n          });\n          this.arr.splice(0, 0, group);\n          this._groups.splice(0, 0, group);\n          this._currentCopies += 1;\n        }\n        this.elem.reloadShapes();\n        hasReloaded = true;\n      }\n      cont = 0;\n      var renderFlag;\n      for (i = 0; i <= this._groups.length - 1; i += 1) {\n        renderFlag = cont < copies;\n        this._groups[i]._render = renderFlag;\n        this.changeGroupRender(this._groups[i].it, renderFlag);\n        if (!renderFlag) {\n          var elems = this.elemsData[i].it;\n          var transformData = elems[elems.length - 1];\n          if (transformData.transform.op.v !== 0) {\n            transformData.transform.op._mdf = true;\n            transformData.transform.op.v = 0;\n          } else {\n            transformData.transform.op._mdf = false;\n          }\n        }\n        cont += 1;\n      }\n      this._currentCopies = copies;\n      /// /\n\n      var offset = this.o.v;\n      var offsetModulo = offset % 1;\n      var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\n      var pProps = this.pMatrix.props;\n      var rProps = this.rMatrix.props;\n      var sProps = this.sMatrix.props;\n      this.pMatrix.reset();\n      this.rMatrix.reset();\n      this.sMatrix.reset();\n      this.tMatrix.reset();\n      this.matrix.reset();\n      var iteration = 0;\n      if (offset > 0) {\n        while (iteration < roundOffset) {\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\n          iteration += 1;\n        }\n        if (offsetModulo) {\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\n          iteration += offsetModulo;\n        }\n      } else if (offset < 0) {\n        while (iteration > roundOffset) {\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\n          iteration -= 1;\n        }\n        if (offsetModulo) {\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, -offsetModulo, true);\n          iteration -= offsetModulo;\n        }\n      }\n      i = this.data.m === 1 ? 0 : this._currentCopies - 1;\n      dir = this.data.m === 1 ? 1 : -1;\n      cont = this._currentCopies;\n      var j;\n      var jLen;\n      while (cont) {\n        items = this.elemsData[i].it;\n        itemsTransform = items[items.length - 1].transform.mProps.v.props;\n        jLen = itemsTransform.length;\n        items[items.length - 1].transform.mProps._mdf = true;\n        items[items.length - 1].transform.op._mdf = true;\n        items[items.length - 1].transform.op.v = this._currentCopies === 1 ? this.so.v : this.so.v + (this.eo.v - this.so.v) * (i / (this._currentCopies - 1));\n        if (iteration !== 0) {\n          if (i !== 0 && dir === 1 || i !== this._currentCopies - 1 && dir === -1) {\n            this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\n          }\n          this.matrix.transform(rProps[0], rProps[1], rProps[2], rProps[3], rProps[4], rProps[5], rProps[6], rProps[7], rProps[8], rProps[9], rProps[10], rProps[11], rProps[12], rProps[13], rProps[14], rProps[15]);\n          this.matrix.transform(sProps[0], sProps[1], sProps[2], sProps[3], sProps[4], sProps[5], sProps[6], sProps[7], sProps[8], sProps[9], sProps[10], sProps[11], sProps[12], sProps[13], sProps[14], sProps[15]);\n          this.matrix.transform(pProps[0], pProps[1], pProps[2], pProps[3], pProps[4], pProps[5], pProps[6], pProps[7], pProps[8], pProps[9], pProps[10], pProps[11], pProps[12], pProps[13], pProps[14], pProps[15]);\n          for (j = 0; j < jLen; j += 1) {\n            itemsTransform[j] = this.matrix.props[j];\n          }\n          this.matrix.reset();\n        } else {\n          this.matrix.reset();\n          for (j = 0; j < jLen; j += 1) {\n            itemsTransform[j] = this.matrix.props[j];\n          }\n        }\n        iteration += 1;\n        cont -= 1;\n        i += dir;\n      }\n    } else {\n      cont = this._currentCopies;\n      i = 0;\n      dir = 1;\n      while (cont) {\n        items = this.elemsData[i].it;\n        itemsTransform = items[items.length - 1].transform.mProps.v.props;\n        items[items.length - 1].transform.mProps._mdf = false;\n        items[items.length - 1].transform.op._mdf = false;\n        cont -= 1;\n        i += dir;\n      }\n    }\n    return hasReloaded;\n  };\n  RepeaterModifier.prototype.addShape = function () {};\n\n  function RoundCornersModifier() {}\n  extendPrototype([ShapeModifier], RoundCornersModifier);\n  RoundCornersModifier.prototype.initModifierProperties = function (elem, data) {\n    this.getValue = this.processKeys;\n    this.rd = PropertyFactory.getProp(elem, data.r, 0, null, this);\n    this._isAnimated = !!this.rd.effectsSequence.length;\n  };\n  RoundCornersModifier.prototype.processPath = function (path, round) {\n    var clonedPath = shapePool.newElement();\n    clonedPath.c = path.c;\n    var i;\n    var len = path._length;\n    var currentV;\n    var currentI;\n    var currentO;\n    var closerV;\n    var distance;\n    var newPosPerc;\n    var index = 0;\n    var vX;\n    var vY;\n    var oX;\n    var oY;\n    var iX;\n    var iY;\n    for (i = 0; i < len; i += 1) {\n      currentV = path.v[i];\n      currentO = path.o[i];\n      currentI = path.i[i];\n      if (currentV[0] === currentO[0] && currentV[1] === currentO[1] && currentV[0] === currentI[0] && currentV[1] === currentI[1]) {\n        if ((i === 0 || i === len - 1) && !path.c) {\n          clonedPath.setTripleAt(currentV[0], currentV[1], currentO[0], currentO[1], currentI[0], currentI[1], index);\n          /* clonedPath.v[index] = currentV;\n                  clonedPath.o[index] = currentO;\n                  clonedPath.i[index] = currentI; */\n          index += 1;\n        } else {\n          if (i === 0) {\n            closerV = path.v[len - 1];\n          } else {\n            closerV = path.v[i - 1];\n          }\n          distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\n          newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\n          iX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\n          vX = iX;\n          iY = currentV[1] - (currentV[1] - closerV[1]) * newPosPerc;\n          vY = iY;\n          oX = vX - (vX - currentV[0]) * roundCorner;\n          oY = vY - (vY - currentV[1]) * roundCorner;\n          clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\n          index += 1;\n          if (i === len - 1) {\n            closerV = path.v[0];\n          } else {\n            closerV = path.v[i + 1];\n          }\n          distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\n          newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\n          oX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\n          vX = oX;\n          oY = currentV[1] + (closerV[1] - currentV[1]) * newPosPerc;\n          vY = oY;\n          iX = vX - (vX - currentV[0]) * roundCorner;\n          iY = vY - (vY - currentV[1]) * roundCorner;\n          clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\n          index += 1;\n        }\n      } else {\n        clonedPath.setTripleAt(path.v[i][0], path.v[i][1], path.o[i][0], path.o[i][1], path.i[i][0], path.i[i][1], index);\n        index += 1;\n      }\n    }\n    return clonedPath;\n  };\n  RoundCornersModifier.prototype.processShapes = function (_isFirstFrame) {\n    var shapePaths;\n    var i;\n    var len = this.shapes.length;\n    var j;\n    var jLen;\n    var rd = this.rd.v;\n    if (rd !== 0) {\n      var shapeData;\n      var localShapeCollection;\n      for (i = 0; i < len; i += 1) {\n        shapeData = this.shapes[i];\n        localShapeCollection = shapeData.localShapeCollection;\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\n          localShapeCollection.releaseShapes();\n          shapeData.shape._mdf = true;\n          shapePaths = shapeData.shape.paths.shapes;\n          jLen = shapeData.shape.paths._length;\n          for (j = 0; j < jLen; j += 1) {\n            localShapeCollection.addShape(this.processPath(shapePaths[j], rd));\n          }\n        }\n        shapeData.shape.paths = shapeData.localShapeCollection;\n      }\n    }\n    if (!this.dynamicProperties.length) {\n      this._mdf = false;\n    }\n  };\n\n  function floatEqual(a, b) {\n    return Math.abs(a - b) * 100000 <= Math.min(Math.abs(a), Math.abs(b));\n  }\n  function floatZero(f) {\n    return Math.abs(f) <= 0.00001;\n  }\n  function lerp(p0, p1, amount) {\n    return p0 * (1 - amount) + p1 * amount;\n  }\n  function lerpPoint(p0, p1, amount) {\n    return [lerp(p0[0], p1[0], amount), lerp(p0[1], p1[1], amount)];\n  }\n  function quadRoots(a, b, c) {\n    // no root\n    if (a === 0) return [];\n    var s = b * b - 4 * a * c;\n    // Complex roots\n    if (s < 0) return [];\n    var singleRoot = -b / (2 * a);\n    // 1 root\n    if (s === 0) return [singleRoot];\n    var delta = Math.sqrt(s) / (2 * a);\n    // 2 roots\n    return [singleRoot - delta, singleRoot + delta];\n  }\n  function polynomialCoefficients(p0, p1, p2, p3) {\n    return [-p0 + 3 * p1 - 3 * p2 + p3, 3 * p0 - 6 * p1 + 3 * p2, -3 * p0 + 3 * p1, p0];\n  }\n  function singlePoint(p) {\n    return new PolynomialBezier(p, p, p, p, false);\n  }\n  function PolynomialBezier(p0, p1, p2, p3, linearize) {\n    if (linearize && pointEqual(p0, p1)) {\n      p1 = lerpPoint(p0, p3, 1 / 3);\n    }\n    if (linearize && pointEqual(p2, p3)) {\n      p2 = lerpPoint(p0, p3, 2 / 3);\n    }\n    var coeffx = polynomialCoefficients(p0[0], p1[0], p2[0], p3[0]);\n    var coeffy = polynomialCoefficients(p0[1], p1[1], p2[1], p3[1]);\n    this.a = [coeffx[0], coeffy[0]];\n    this.b = [coeffx[1], coeffy[1]];\n    this.c = [coeffx[2], coeffy[2]];\n    this.d = [coeffx[3], coeffy[3]];\n    this.points = [p0, p1, p2, p3];\n  }\n  PolynomialBezier.prototype.point = function (t) {\n    return [((this.a[0] * t + this.b[0]) * t + this.c[0]) * t + this.d[0], ((this.a[1] * t + this.b[1]) * t + this.c[1]) * t + this.d[1]];\n  };\n  PolynomialBezier.prototype.derivative = function (t) {\n    return [(3 * t * this.a[0] + 2 * this.b[0]) * t + this.c[0], (3 * t * this.a[1] + 2 * this.b[1]) * t + this.c[1]];\n  };\n  PolynomialBezier.prototype.tangentAngle = function (t) {\n    var p = this.derivative(t);\n    return Math.atan2(p[1], p[0]);\n  };\n  PolynomialBezier.prototype.normalAngle = function (t) {\n    var p = this.derivative(t);\n    return Math.atan2(p[0], p[1]);\n  };\n  PolynomialBezier.prototype.inflectionPoints = function () {\n    var denom = this.a[1] * this.b[0] - this.a[0] * this.b[1];\n    if (floatZero(denom)) return [];\n    var tcusp = -0.5 * (this.a[1] * this.c[0] - this.a[0] * this.c[1]) / denom;\n    var square = tcusp * tcusp - 1 / 3 * (this.b[1] * this.c[0] - this.b[0] * this.c[1]) / denom;\n    if (square < 0) return [];\n    var root = Math.sqrt(square);\n    if (floatZero(root)) {\n      if (root > 0 && root < 1) return [tcusp];\n      return [];\n    }\n    return [tcusp - root, tcusp + root].filter(function (r) {\n      return r > 0 && r < 1;\n    });\n  };\n  PolynomialBezier.prototype.split = function (t) {\n    if (t <= 0) return [singlePoint(this.points[0]), this];\n    if (t >= 1) return [this, singlePoint(this.points[this.points.length - 1])];\n    var p10 = lerpPoint(this.points[0], this.points[1], t);\n    var p11 = lerpPoint(this.points[1], this.points[2], t);\n    var p12 = lerpPoint(this.points[2], this.points[3], t);\n    var p20 = lerpPoint(p10, p11, t);\n    var p21 = lerpPoint(p11, p12, t);\n    var p3 = lerpPoint(p20, p21, t);\n    return [new PolynomialBezier(this.points[0], p10, p20, p3, true), new PolynomialBezier(p3, p21, p12, this.points[3], true)];\n  };\n  function extrema(bez, comp) {\n    var min = bez.points[0][comp];\n    var max = bez.points[bez.points.length - 1][comp];\n    if (min > max) {\n      var e = max;\n      max = min;\n      min = e;\n    }\n    // Derivative roots to find min/max\n    var f = quadRoots(3 * bez.a[comp], 2 * bez.b[comp], bez.c[comp]);\n    for (var i = 0; i < f.length; i += 1) {\n      if (f[i] > 0 && f[i] < 1) {\n        var val = bez.point(f[i])[comp];\n        if (val < min) min = val;else if (val > max) max = val;\n      }\n    }\n    return {\n      min: min,\n      max: max\n    };\n  }\n  PolynomialBezier.prototype.bounds = function () {\n    return {\n      x: extrema(this, 0),\n      y: extrema(this, 1)\n    };\n  };\n  PolynomialBezier.prototype.boundingBox = function () {\n    var bounds = this.bounds();\n    return {\n      left: bounds.x.min,\n      right: bounds.x.max,\n      top: bounds.y.min,\n      bottom: bounds.y.max,\n      width: bounds.x.max - bounds.x.min,\n      height: bounds.y.max - bounds.y.min,\n      cx: (bounds.x.max + bounds.x.min) / 2,\n      cy: (bounds.y.max + bounds.y.min) / 2\n    };\n  };\n  function intersectData(bez, t1, t2) {\n    var box = bez.boundingBox();\n    return {\n      cx: box.cx,\n      cy: box.cy,\n      width: box.width,\n      height: box.height,\n      bez: bez,\n      t: (t1 + t2) / 2,\n      t1: t1,\n      t2: t2\n    };\n  }\n  function splitData(data) {\n    var split = data.bez.split(0.5);\n    return [intersectData(split[0], data.t1, data.t), intersectData(split[1], data.t, data.t2)];\n  }\n  function boxIntersect(b1, b2) {\n    return Math.abs(b1.cx - b2.cx) * 2 < b1.width + b2.width && Math.abs(b1.cy - b2.cy) * 2 < b1.height + b2.height;\n  }\n  function intersectsImpl(d1, d2, depth, tolerance, intersections, maxRecursion) {\n    if (!boxIntersect(d1, d2)) return;\n    if (depth >= maxRecursion || d1.width <= tolerance && d1.height <= tolerance && d2.width <= tolerance && d2.height <= tolerance) {\n      intersections.push([d1.t, d2.t]);\n      return;\n    }\n    var d1s = splitData(d1);\n    var d2s = splitData(d2);\n    intersectsImpl(d1s[0], d2s[0], depth + 1, tolerance, intersections, maxRecursion);\n    intersectsImpl(d1s[0], d2s[1], depth + 1, tolerance, intersections, maxRecursion);\n    intersectsImpl(d1s[1], d2s[0], depth + 1, tolerance, intersections, maxRecursion);\n    intersectsImpl(d1s[1], d2s[1], depth + 1, tolerance, intersections, maxRecursion);\n  }\n  PolynomialBezier.prototype.intersections = function (other, tolerance, maxRecursion) {\n    if (tolerance === undefined) tolerance = 2;\n    if (maxRecursion === undefined) maxRecursion = 7;\n    var intersections = [];\n    intersectsImpl(intersectData(this, 0, 1), intersectData(other, 0, 1), 0, tolerance, intersections, maxRecursion);\n    return intersections;\n  };\n  PolynomialBezier.shapeSegment = function (shapePath, index) {\n    var nextIndex = (index + 1) % shapePath.length();\n    return new PolynomialBezier(shapePath.v[index], shapePath.o[index], shapePath.i[nextIndex], shapePath.v[nextIndex], true);\n  };\n  PolynomialBezier.shapeSegmentInverted = function (shapePath, index) {\n    var nextIndex = (index + 1) % shapePath.length();\n    return new PolynomialBezier(shapePath.v[nextIndex], shapePath.i[nextIndex], shapePath.o[index], shapePath.v[index], true);\n  };\n  function crossProduct(a, b) {\n    return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n  }\n  function lineIntersection(start1, end1, start2, end2) {\n    var v1 = [start1[0], start1[1], 1];\n    var v2 = [end1[0], end1[1], 1];\n    var v3 = [start2[0], start2[1], 1];\n    var v4 = [end2[0], end2[1], 1];\n    var r = crossProduct(crossProduct(v1, v2), crossProduct(v3, v4));\n    if (floatZero(r[2])) return null;\n    return [r[0] / r[2], r[1] / r[2]];\n  }\n  function polarOffset(p, angle, length) {\n    return [p[0] + Math.cos(angle) * length, p[1] - Math.sin(angle) * length];\n  }\n  function pointDistance(p1, p2) {\n    return Math.hypot(p1[0] - p2[0], p1[1] - p2[1]);\n  }\n  function pointEqual(p1, p2) {\n    return floatEqual(p1[0], p2[0]) && floatEqual(p1[1], p2[1]);\n  }\n\n  function ZigZagModifier() {}\n  extendPrototype([ShapeModifier], ZigZagModifier);\n  ZigZagModifier.prototype.initModifierProperties = function (elem, data) {\n    this.getValue = this.processKeys;\n    this.amplitude = PropertyFactory.getProp(elem, data.s, 0, null, this);\n    this.frequency = PropertyFactory.getProp(elem, data.r, 0, null, this);\n    this.pointsType = PropertyFactory.getProp(elem, data.pt, 0, null, this);\n    this._isAnimated = this.amplitude.effectsSequence.length !== 0 || this.frequency.effectsSequence.length !== 0 || this.pointsType.effectsSequence.length !== 0;\n  };\n  function setPoint(outputBezier, point, angle, direction, amplitude, outAmplitude, inAmplitude) {\n    var angO = angle - Math.PI / 2;\n    var angI = angle + Math.PI / 2;\n    var px = point[0] + Math.cos(angle) * direction * amplitude;\n    var py = point[1] - Math.sin(angle) * direction * amplitude;\n    outputBezier.setTripleAt(px, py, px + Math.cos(angO) * outAmplitude, py - Math.sin(angO) * outAmplitude, px + Math.cos(angI) * inAmplitude, py - Math.sin(angI) * inAmplitude, outputBezier.length());\n  }\n  function getPerpendicularVector(pt1, pt2) {\n    var vector = [pt2[0] - pt1[0], pt2[1] - pt1[1]];\n    var rot = -Math.PI * 0.5;\n    var rotatedVector = [Math.cos(rot) * vector[0] - Math.sin(rot) * vector[1], Math.sin(rot) * vector[0] + Math.cos(rot) * vector[1]];\n    return rotatedVector;\n  }\n  function getProjectingAngle(path, cur) {\n    var prevIndex = cur === 0 ? path.length() - 1 : cur - 1;\n    var nextIndex = (cur + 1) % path.length();\n    var prevPoint = path.v[prevIndex];\n    var nextPoint = path.v[nextIndex];\n    var pVector = getPerpendicularVector(prevPoint, nextPoint);\n    return Math.atan2(0, 1) - Math.atan2(pVector[1], pVector[0]);\n  }\n  function zigZagCorner(outputBezier, path, cur, amplitude, frequency, pointType, direction) {\n    var angle = getProjectingAngle(path, cur);\n    var point = path.v[cur % path._length];\n    var prevPoint = path.v[cur === 0 ? path._length - 1 : cur - 1];\n    var nextPoint = path.v[(cur + 1) % path._length];\n    var prevDist = pointType === 2 ? Math.sqrt(Math.pow(point[0] - prevPoint[0], 2) + Math.pow(point[1] - prevPoint[1], 2)) : 0;\n    var nextDist = pointType === 2 ? Math.sqrt(Math.pow(point[0] - nextPoint[0], 2) + Math.pow(point[1] - nextPoint[1], 2)) : 0;\n    setPoint(outputBezier, path.v[cur % path._length], angle, direction, amplitude, nextDist / ((frequency + 1) * 2), prevDist / ((frequency + 1) * 2), pointType);\n  }\n  function zigZagSegment(outputBezier, segment, amplitude, frequency, pointType, direction) {\n    for (var i = 0; i < frequency; i += 1) {\n      var t = (i + 1) / (frequency + 1);\n      var dist = pointType === 2 ? Math.sqrt(Math.pow(segment.points[3][0] - segment.points[0][0], 2) + Math.pow(segment.points[3][1] - segment.points[0][1], 2)) : 0;\n      var angle = segment.normalAngle(t);\n      var point = segment.point(t);\n      setPoint(outputBezier, point, angle, direction, amplitude, dist / ((frequency + 1) * 2), dist / ((frequency + 1) * 2), pointType);\n      direction = -direction;\n    }\n    return direction;\n  }\n  ZigZagModifier.prototype.processPath = function (path, amplitude, frequency, pointType) {\n    var count = path._length;\n    var clonedPath = shapePool.newElement();\n    clonedPath.c = path.c;\n    if (!path.c) {\n      count -= 1;\n    }\n    if (count === 0) return clonedPath;\n    var direction = -1;\n    var segment = PolynomialBezier.shapeSegment(path, 0);\n    zigZagCorner(clonedPath, path, 0, amplitude, frequency, pointType, direction);\n    for (var i = 0; i < count; i += 1) {\n      direction = zigZagSegment(clonedPath, segment, amplitude, frequency, pointType, -direction);\n      if (i === count - 1 && !path.c) {\n        segment = null;\n      } else {\n        segment = PolynomialBezier.shapeSegment(path, (i + 1) % count);\n      }\n      zigZagCorner(clonedPath, path, i + 1, amplitude, frequency, pointType, direction);\n    }\n    return clonedPath;\n  };\n  ZigZagModifier.prototype.processShapes = function (_isFirstFrame) {\n    var shapePaths;\n    var i;\n    var len = this.shapes.length;\n    var j;\n    var jLen;\n    var amplitude = this.amplitude.v;\n    var frequency = Math.max(0, Math.round(this.frequency.v));\n    var pointType = this.pointsType.v;\n    if (amplitude !== 0) {\n      var shapeData;\n      var localShapeCollection;\n      for (i = 0; i < len; i += 1) {\n        shapeData = this.shapes[i];\n        localShapeCollection = shapeData.localShapeCollection;\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\n          localShapeCollection.releaseShapes();\n          shapeData.shape._mdf = true;\n          shapePaths = shapeData.shape.paths.shapes;\n          jLen = shapeData.shape.paths._length;\n          for (j = 0; j < jLen; j += 1) {\n            localShapeCollection.addShape(this.processPath(shapePaths[j], amplitude, frequency, pointType));\n          }\n        }\n        shapeData.shape.paths = shapeData.localShapeCollection;\n      }\n    }\n    if (!this.dynamicProperties.length) {\n      this._mdf = false;\n    }\n  };\n\n  function linearOffset(p1, p2, amount) {\n    var angle = Math.atan2(p2[0] - p1[0], p2[1] - p1[1]);\n    return [polarOffset(p1, angle, amount), polarOffset(p2, angle, amount)];\n  }\n  function offsetSegment(segment, amount) {\n    var p0;\n    var p1a;\n    var p1b;\n    var p2b;\n    var p2a;\n    var p3;\n    var e;\n    e = linearOffset(segment.points[0], segment.points[1], amount);\n    p0 = e[0];\n    p1a = e[1];\n    e = linearOffset(segment.points[1], segment.points[2], amount);\n    p1b = e[0];\n    p2b = e[1];\n    e = linearOffset(segment.points[2], segment.points[3], amount);\n    p2a = e[0];\n    p3 = e[1];\n    var p1 = lineIntersection(p0, p1a, p1b, p2b);\n    if (p1 === null) p1 = p1a;\n    var p2 = lineIntersection(p2a, p3, p1b, p2b);\n    if (p2 === null) p2 = p2a;\n    return new PolynomialBezier(p0, p1, p2, p3);\n  }\n  function joinLines(outputBezier, seg1, seg2, lineJoin, miterLimit) {\n    var p0 = seg1.points[3];\n    var p1 = seg2.points[0];\n\n    // Bevel\n    if (lineJoin === 3) return p0;\n\n    // Connected, they don't need a joint\n    if (pointEqual(p0, p1)) return p0;\n\n    // Round\n    if (lineJoin === 2) {\n      var angleOut = -seg1.tangentAngle(1);\n      var angleIn = -seg2.tangentAngle(0) + Math.PI;\n      var center = lineIntersection(p0, polarOffset(p0, angleOut + Math.PI / 2, 100), p1, polarOffset(p1, angleOut + Math.PI / 2, 100));\n      var radius = center ? pointDistance(center, p0) : pointDistance(p0, p1) / 2;\n      var tan = polarOffset(p0, angleOut, 2 * radius * roundCorner);\n      outputBezier.setXYAt(tan[0], tan[1], 'o', outputBezier.length() - 1);\n      tan = polarOffset(p1, angleIn, 2 * radius * roundCorner);\n      outputBezier.setTripleAt(p1[0], p1[1], p1[0], p1[1], tan[0], tan[1], outputBezier.length());\n      return p1;\n    }\n\n    // Miter\n    var t0 = pointEqual(p0, seg1.points[2]) ? seg1.points[0] : seg1.points[2];\n    var t1 = pointEqual(p1, seg2.points[1]) ? seg2.points[3] : seg2.points[1];\n    var intersection = lineIntersection(t0, p0, p1, t1);\n    if (intersection && pointDistance(intersection, p0) < miterLimit) {\n      outputBezier.setTripleAt(intersection[0], intersection[1], intersection[0], intersection[1], intersection[0], intersection[1], outputBezier.length());\n      return intersection;\n    }\n    return p0;\n  }\n  function getIntersection(a, b) {\n    var intersect = a.intersections(b);\n    if (intersect.length && floatEqual(intersect[0][0], 1)) intersect.shift();\n    if (intersect.length) return intersect[0];\n    return null;\n  }\n  function pruneSegmentIntersection(a, b) {\n    var outa = a.slice();\n    var outb = b.slice();\n    var intersect = getIntersection(a[a.length - 1], b[0]);\n    if (intersect) {\n      outa[a.length - 1] = a[a.length - 1].split(intersect[0])[0];\n      outb[0] = b[0].split(intersect[1])[1];\n    }\n    if (a.length > 1 && b.length > 1) {\n      intersect = getIntersection(a[0], b[b.length - 1]);\n      if (intersect) {\n        return [[a[0].split(intersect[0])[0]], [b[b.length - 1].split(intersect[1])[1]]];\n      }\n    }\n    return [outa, outb];\n  }\n  function pruneIntersections(segments) {\n    var e;\n    for (var i = 1; i < segments.length; i += 1) {\n      e = pruneSegmentIntersection(segments[i - 1], segments[i]);\n      segments[i - 1] = e[0];\n      segments[i] = e[1];\n    }\n    if (segments.length > 1) {\n      e = pruneSegmentIntersection(segments[segments.length - 1], segments[0]);\n      segments[segments.length - 1] = e[0];\n      segments[0] = e[1];\n    }\n    return segments;\n  }\n  function offsetSegmentSplit(segment, amount) {\n    /*\n      We split each bezier segment into smaller pieces based\n      on inflection points, this ensures the control point\n      polygon is convex.\n       (A cubic bezier can have none, one, or two inflection points)\n    */\n    var flex = segment.inflectionPoints();\n    var left;\n    var right;\n    var split;\n    var mid;\n    if (flex.length === 0) {\n      return [offsetSegment(segment, amount)];\n    }\n    if (flex.length === 1 || floatEqual(flex[1], 1)) {\n      split = segment.split(flex[0]);\n      left = split[0];\n      right = split[1];\n      return [offsetSegment(left, amount), offsetSegment(right, amount)];\n    }\n    split = segment.split(flex[0]);\n    left = split[0];\n    var t = (flex[1] - flex[0]) / (1 - flex[0]);\n    split = split[1].split(t);\n    mid = split[0];\n    right = split[1];\n    return [offsetSegment(left, amount), offsetSegment(mid, amount), offsetSegment(right, amount)];\n  }\n  function OffsetPathModifier() {}\n  extendPrototype([ShapeModifier], OffsetPathModifier);\n  OffsetPathModifier.prototype.initModifierProperties = function (elem, data) {\n    this.getValue = this.processKeys;\n    this.amount = PropertyFactory.getProp(elem, data.a, 0, null, this);\n    this.miterLimit = PropertyFactory.getProp(elem, data.ml, 0, null, this);\n    this.lineJoin = data.lj;\n    this._isAnimated = this.amount.effectsSequence.length !== 0;\n  };\n  OffsetPathModifier.prototype.processPath = function (inputBezier, amount, lineJoin, miterLimit) {\n    var outputBezier = shapePool.newElement();\n    outputBezier.c = inputBezier.c;\n    var count = inputBezier.length();\n    if (!inputBezier.c) {\n      count -= 1;\n    }\n    var i;\n    var j;\n    var segment;\n    var multiSegments = [];\n    for (i = 0; i < count; i += 1) {\n      segment = PolynomialBezier.shapeSegment(inputBezier, i);\n      multiSegments.push(offsetSegmentSplit(segment, amount));\n    }\n    if (!inputBezier.c) {\n      for (i = count - 1; i >= 0; i -= 1) {\n        segment = PolynomialBezier.shapeSegmentInverted(inputBezier, i);\n        multiSegments.push(offsetSegmentSplit(segment, amount));\n      }\n    }\n    multiSegments = pruneIntersections(multiSegments);\n\n    // Add bezier segments to the output and apply line joints\n    var lastPoint = null;\n    var lastSeg = null;\n    for (i = 0; i < multiSegments.length; i += 1) {\n      var multiSegment = multiSegments[i];\n      if (lastSeg) lastPoint = joinLines(outputBezier, lastSeg, multiSegment[0], lineJoin, miterLimit);\n      lastSeg = multiSegment[multiSegment.length - 1];\n      for (j = 0; j < multiSegment.length; j += 1) {\n        segment = multiSegment[j];\n        if (lastPoint && pointEqual(segment.points[0], lastPoint)) {\n          outputBezier.setXYAt(segment.points[1][0], segment.points[1][1], 'o', outputBezier.length() - 1);\n        } else {\n          outputBezier.setTripleAt(segment.points[0][0], segment.points[0][1], segment.points[1][0], segment.points[1][1], segment.points[0][0], segment.points[0][1], outputBezier.length());\n        }\n        outputBezier.setTripleAt(segment.points[3][0], segment.points[3][1], segment.points[3][0], segment.points[3][1], segment.points[2][0], segment.points[2][1], outputBezier.length());\n        lastPoint = segment.points[3];\n      }\n    }\n    if (multiSegments.length) joinLines(outputBezier, lastSeg, multiSegments[0][0], lineJoin, miterLimit);\n    return outputBezier;\n  };\n  OffsetPathModifier.prototype.processShapes = function (_isFirstFrame) {\n    var shapePaths;\n    var i;\n    var len = this.shapes.length;\n    var j;\n    var jLen;\n    var amount = this.amount.v;\n    var miterLimit = this.miterLimit.v;\n    var lineJoin = this.lineJoin;\n    if (amount !== 0) {\n      var shapeData;\n      var localShapeCollection;\n      for (i = 0; i < len; i += 1) {\n        shapeData = this.shapes[i];\n        localShapeCollection = shapeData.localShapeCollection;\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\n          localShapeCollection.releaseShapes();\n          shapeData.shape._mdf = true;\n          shapePaths = shapeData.shape.paths.shapes;\n          jLen = shapeData.shape.paths._length;\n          for (j = 0; j < jLen; j += 1) {\n            localShapeCollection.addShape(this.processPath(shapePaths[j], amount, lineJoin, miterLimit));\n          }\n        }\n        shapeData.shape.paths = shapeData.localShapeCollection;\n      }\n    }\n    if (!this.dynamicProperties.length) {\n      this._mdf = false;\n    }\n  };\n\n  function getFontProperties(fontData) {\n    var styles = fontData.fStyle ? fontData.fStyle.split(' ') : [];\n    var fWeight = 'normal';\n    var fStyle = 'normal';\n    var len = styles.length;\n    var styleName;\n    for (var i = 0; i < len; i += 1) {\n      styleName = styles[i].toLowerCase();\n      switch (styleName) {\n        case 'italic':\n          fStyle = 'italic';\n          break;\n        case 'bold':\n          fWeight = '700';\n          break;\n        case 'black':\n          fWeight = '900';\n          break;\n        case 'medium':\n          fWeight = '500';\n          break;\n        case 'regular':\n        case 'normal':\n          fWeight = '400';\n          break;\n        case 'light':\n        case 'thin':\n          fWeight = '200';\n          break;\n        default:\n          break;\n      }\n    }\n    return {\n      style: fStyle,\n      weight: fontData.fWeight || fWeight\n    };\n  }\n\n  var FontManager = function () {\n    var maxWaitingTime = 5000;\n    var emptyChar = {\n      w: 0,\n      size: 0,\n      shapes: [],\n      data: {\n        shapes: []\n      }\n    };\n    var combinedCharacters = [];\n    // Hindi characters\n    combinedCharacters = combinedCharacters.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366, 2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379, 2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);\n    var BLACK_FLAG_CODE_POINT = 127988;\n    var CANCEL_TAG_CODE_POINT = 917631;\n    var A_TAG_CODE_POINT = 917601;\n    var Z_TAG_CODE_POINT = 917626;\n    var VARIATION_SELECTOR_16_CODE_POINT = 65039;\n    var ZERO_WIDTH_JOINER_CODE_POINT = 8205;\n    var REGIONAL_CHARACTER_A_CODE_POINT = 127462;\n    var REGIONAL_CHARACTER_Z_CODE_POINT = 127487;\n    var surrogateModifiers = ['d83cdffb', 'd83cdffc', 'd83cdffd', 'd83cdffe', 'd83cdfff'];\n    function trimFontOptions(font) {\n      var familyArray = font.split(',');\n      var i;\n      var len = familyArray.length;\n      var enabledFamilies = [];\n      for (i = 0; i < len; i += 1) {\n        if (familyArray[i] !== 'sans-serif' && familyArray[i] !== 'monospace') {\n          enabledFamilies.push(familyArray[i]);\n        }\n      }\n      return enabledFamilies.join(',');\n    }\n    function setUpNode(font, family) {\n      var parentNode = createTag('span');\n      // Node is invisible to screen readers.\n      parentNode.setAttribute('aria-hidden', true);\n      parentNode.style.fontFamily = family;\n      var node = createTag('span');\n      // Characters that vary significantly among different fonts\n      node.innerText = 'giItT1WQy@!-/#';\n      // Visible - so we can measure it - but not on the screen\n      parentNode.style.position = 'absolute';\n      parentNode.style.left = '-10000px';\n      parentNode.style.top = '-10000px';\n      // Large font size makes even subtle changes obvious\n      parentNode.style.fontSize = '300px';\n      // Reset any font properties\n      parentNode.style.fontVariant = 'normal';\n      parentNode.style.fontStyle = 'normal';\n      parentNode.style.fontWeight = 'normal';\n      parentNode.style.letterSpacing = '0';\n      parentNode.appendChild(node);\n      document.body.appendChild(parentNode);\n\n      // Remember width with no applied web font\n      var width = node.offsetWidth;\n      node.style.fontFamily = trimFontOptions(font) + ', ' + family;\n      return {\n        node: node,\n        w: width,\n        parent: parentNode\n      };\n    }\n    function checkLoadedFonts() {\n      var i;\n      var len = this.fonts.length;\n      var node;\n      var w;\n      var loadedCount = len;\n      for (i = 0; i < len; i += 1) {\n        if (this.fonts[i].loaded) {\n          loadedCount -= 1;\n        } else if (this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0) {\n          this.fonts[i].loaded = true;\n        } else {\n          node = this.fonts[i].monoCase.node;\n          w = this.fonts[i].monoCase.w;\n          if (node.offsetWidth !== w) {\n            loadedCount -= 1;\n            this.fonts[i].loaded = true;\n          } else {\n            node = this.fonts[i].sansCase.node;\n            w = this.fonts[i].sansCase.w;\n            if (node.offsetWidth !== w) {\n              loadedCount -= 1;\n              this.fonts[i].loaded = true;\n            }\n          }\n          if (this.fonts[i].loaded) {\n            this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\n            this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\n          }\n        }\n      }\n      if (loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime) {\n        setTimeout(this.checkLoadedFontsBinded, 20);\n      } else {\n        setTimeout(this.setIsLoadedBinded, 10);\n      }\n    }\n    function createHelper(fontData, def) {\n      var engine = document.body && def ? 'svg' : 'canvas';\n      var helper;\n      var fontProps = getFontProperties(fontData);\n      if (engine === 'svg') {\n        var tHelper = createNS('text');\n        tHelper.style.fontSize = '100px';\n        // tHelper.style.fontFamily = fontData.fFamily;\n        tHelper.setAttribute('font-family', fontData.fFamily);\n        tHelper.setAttribute('font-style', fontProps.style);\n        tHelper.setAttribute('font-weight', fontProps.weight);\n        tHelper.textContent = '1';\n        if (fontData.fClass) {\n          tHelper.style.fontFamily = 'inherit';\n          tHelper.setAttribute('class', fontData.fClass);\n        } else {\n          tHelper.style.fontFamily = fontData.fFamily;\n        }\n        def.appendChild(tHelper);\n        helper = tHelper;\n      } else {\n        var tCanvasHelper = new OffscreenCanvas(500, 500).getContext('2d');\n        tCanvasHelper.font = fontProps.style + ' ' + fontProps.weight + ' 100px ' + fontData.fFamily;\n        helper = tCanvasHelper;\n      }\n      function measure(text) {\n        if (engine === 'svg') {\n          helper.textContent = text;\n          return helper.getComputedTextLength();\n        }\n        return helper.measureText(text).width;\n      }\n      return {\n        measureText: measure\n      };\n    }\n    function addFonts(fontData, defs) {\n      if (!fontData) {\n        this.isLoaded = true;\n        return;\n      }\n      if (this.chars) {\n        this.isLoaded = true;\n        this.fonts = fontData.list;\n        return;\n      }\n      if (!document.body) {\n        this.isLoaded = true;\n        fontData.list.forEach(function (data) {\n          data.helper = createHelper(data);\n          data.cache = {};\n        });\n        this.fonts = fontData.list;\n        return;\n      }\n      var fontArr = fontData.list;\n      var i;\n      var len = fontArr.length;\n      var _pendingFonts = len;\n      for (i = 0; i < len; i += 1) {\n        var shouldLoadFont = true;\n        var loadedSelector;\n        var j;\n        fontArr[i].loaded = false;\n        fontArr[i].monoCase = setUpNode(fontArr[i].fFamily, 'monospace');\n        fontArr[i].sansCase = setUpNode(fontArr[i].fFamily, 'sans-serif');\n        if (!fontArr[i].fPath) {\n          fontArr[i].loaded = true;\n          _pendingFonts -= 1;\n        } else if (fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3) {\n          loadedSelector = document.querySelectorAll('style[f-forigin=\"p\"][f-family=\"' + fontArr[i].fFamily + '\"], style[f-origin=\"3\"][f-family=\"' + fontArr[i].fFamily + '\"]');\n          if (loadedSelector.length > 0) {\n            shouldLoadFont = false;\n          }\n          if (shouldLoadFont) {\n            var s = createTag('style');\n            s.setAttribute('f-forigin', fontArr[i].fOrigin);\n            s.setAttribute('f-origin', fontArr[i].origin);\n            s.setAttribute('f-family', fontArr[i].fFamily);\n            s.type = 'text/css';\n            s.innerText = '@font-face {font-family: ' + fontArr[i].fFamily + \"; font-style: normal; src: url('\" + fontArr[i].fPath + \"');}\";\n            defs.appendChild(s);\n          }\n        } else if (fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1) {\n          loadedSelector = document.querySelectorAll('link[f-forigin=\"g\"], link[f-origin=\"1\"]');\n          for (j = 0; j < loadedSelector.length; j += 1) {\n            if (loadedSelector[j].href.indexOf(fontArr[i].fPath) !== -1) {\n              // Font is already loaded\n              shouldLoadFont = false;\n            }\n          }\n          if (shouldLoadFont) {\n            var l = createTag('link');\n            l.setAttribute('f-forigin', fontArr[i].fOrigin);\n            l.setAttribute('f-origin', fontArr[i].origin);\n            l.type = 'text/css';\n            l.rel = 'stylesheet';\n            l.href = fontArr[i].fPath;\n            document.body.appendChild(l);\n          }\n        } else if (fontArr[i].fOrigin === 't' || fontArr[i].origin === 2) {\n          loadedSelector = document.querySelectorAll('script[f-forigin=\"t\"], script[f-origin=\"2\"]');\n          for (j = 0; j < loadedSelector.length; j += 1) {\n            if (fontArr[i].fPath === loadedSelector[j].src) {\n              // Font is already loaded\n              shouldLoadFont = false;\n            }\n          }\n          if (shouldLoadFont) {\n            var sc = createTag('link');\n            sc.setAttribute('f-forigin', fontArr[i].fOrigin);\n            sc.setAttribute('f-origin', fontArr[i].origin);\n            sc.setAttribute('rel', 'stylesheet');\n            sc.setAttribute('href', fontArr[i].fPath);\n            defs.appendChild(sc);\n          }\n        }\n        fontArr[i].helper = createHelper(fontArr[i], defs);\n        fontArr[i].cache = {};\n        this.fonts.push(fontArr[i]);\n      }\n      if (_pendingFonts === 0) {\n        this.isLoaded = true;\n      } else {\n        // On some cases even if the font is loaded, it won't load correctly when measuring text on canvas.\n        // Adding this timeout seems to fix it\n        setTimeout(this.checkLoadedFonts.bind(this), 100);\n      }\n    }\n    function addChars(chars) {\n      if (!chars) {\n        return;\n      }\n      if (!this.chars) {\n        this.chars = [];\n      }\n      var i;\n      var len = chars.length;\n      var j;\n      var jLen = this.chars.length;\n      var found;\n      for (i = 0; i < len; i += 1) {\n        j = 0;\n        found = false;\n        while (j < jLen) {\n          if (this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch) {\n            found = true;\n          }\n          j += 1;\n        }\n        if (!found) {\n          this.chars.push(chars[i]);\n          jLen += 1;\n        }\n      }\n    }\n    function getCharData(_char, style, font) {\n      var i = 0;\n      var len = this.chars.length;\n      while (i < len) {\n        if (this.chars[i].ch === _char && this.chars[i].style === style && this.chars[i].fFamily === font) {\n          return this.chars[i];\n        }\n        i += 1;\n      }\n      if ((typeof _char === 'string' && _char.charCodeAt(0) !== 13 || !_char) && console && console.warn // eslint-disable-line no-console\n      && !this._warned) {\n        this._warned = true;\n        console.warn('Missing character from exported characters list: ', _char, style, font); // eslint-disable-line no-console\n      }\n      return emptyChar;\n    }\n    function measureText(_char2, fontName, size) {\n      var fontData = this.getFontByName(fontName);\n      // Using the char instead of char.charCodeAt(0)\n      // to avoid collisions between equal chars\n      var index = _char2;\n      if (!fontData.cache[index]) {\n        var tHelper = fontData.helper;\n        if (_char2 === ' ') {\n          var doubleSize = tHelper.measureText('|' + _char2 + '|');\n          var singleSize = tHelper.measureText('||');\n          fontData.cache[index] = (doubleSize - singleSize) / 100;\n        } else {\n          fontData.cache[index] = tHelper.measureText(_char2) / 100;\n        }\n      }\n      return fontData.cache[index] * size;\n    }\n    function getFontByName(name) {\n      var i = 0;\n      var len = this.fonts.length;\n      while (i < len) {\n        if (this.fonts[i].fName === name) {\n          return this.fonts[i];\n        }\n        i += 1;\n      }\n      return this.fonts[0];\n    }\n    function getCodePoint(string) {\n      var codePoint = 0;\n      var first = string.charCodeAt(0);\n      if (first >= 0xD800 && first <= 0xDBFF) {\n        var second = string.charCodeAt(1);\n        if (second >= 0xDC00 && second <= 0xDFFF) {\n          codePoint = (first - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n        }\n      }\n      return codePoint;\n    }\n\n    // Skin tone modifiers\n    function isModifier(firstCharCode, secondCharCode) {\n      var sum = firstCharCode.toString(16) + secondCharCode.toString(16);\n      return surrogateModifiers.indexOf(sum) !== -1;\n    }\n    function isZeroWidthJoiner(charCode) {\n      return charCode === ZERO_WIDTH_JOINER_CODE_POINT;\n    }\n\n    // This codepoint may change the appearance of the preceding character.\n    // If that is a symbol, dingbat or emoji, U+FE0F forces it to be rendered\n    // as a colorful image as compared to a monochrome text variant.\n    function isVariationSelector(charCode) {\n      return charCode === VARIATION_SELECTOR_16_CODE_POINT;\n    }\n\n    // The regional indicator symbols are a set of 26 alphabetic Unicode\n    /// characters (AZ) intended to be used to encode ISO 3166-1 alpha-2\n    // two-letter country codes in a way that allows optional special treatment.\n    function isRegionalCode(string) {\n      var codePoint = getCodePoint(string);\n      if (codePoint >= REGIONAL_CHARACTER_A_CODE_POINT && codePoint <= REGIONAL_CHARACTER_Z_CODE_POINT) {\n        return true;\n      }\n      return false;\n    }\n\n    // Some Emoji implementations represent combinations of\n    // two regional indicator letters as a single flag symbol.\n    function isFlagEmoji(string) {\n      return isRegionalCode(string.substr(0, 2)) && isRegionalCode(string.substr(2, 2));\n    }\n    function isCombinedCharacter(_char3) {\n      return combinedCharacters.indexOf(_char3) !== -1;\n    }\n\n    // Regional flags start with a BLACK_FLAG_CODE_POINT\n    // folowed by 5 chars in the TAG range\n    // and end with a CANCEL_TAG_CODE_POINT\n    function isRegionalFlag(text, index) {\n      var codePoint = getCodePoint(text.substr(index, 2));\n      if (codePoint !== BLACK_FLAG_CODE_POINT) {\n        return false;\n      }\n      var count = 0;\n      index += 2;\n      while (count < 5) {\n        codePoint = getCodePoint(text.substr(index, 2));\n        if (codePoint < A_TAG_CODE_POINT || codePoint > Z_TAG_CODE_POINT) {\n          return false;\n        }\n        count += 1;\n        index += 2;\n      }\n      return getCodePoint(text.substr(index, 2)) === CANCEL_TAG_CODE_POINT;\n    }\n    function setIsLoaded() {\n      this.isLoaded = true;\n    }\n    var Font = function Font() {\n      this.fonts = [];\n      this.chars = null;\n      this.typekitLoaded = 0;\n      this.isLoaded = false;\n      this._warned = false;\n      this.initTime = Date.now();\n      this.setIsLoadedBinded = this.setIsLoaded.bind(this);\n      this.checkLoadedFontsBinded = this.checkLoadedFonts.bind(this);\n    };\n    Font.isModifier = isModifier;\n    Font.isZeroWidthJoiner = isZeroWidthJoiner;\n    Font.isFlagEmoji = isFlagEmoji;\n    Font.isRegionalCode = isRegionalCode;\n    Font.isCombinedCharacter = isCombinedCharacter;\n    Font.isRegionalFlag = isRegionalFlag;\n    Font.isVariationSelector = isVariationSelector;\n    Font.BLACK_FLAG_CODE_POINT = BLACK_FLAG_CODE_POINT;\n    var fontPrototype = {\n      addChars: addChars,\n      addFonts: addFonts,\n      getCharData: getCharData,\n      getFontByName: getFontByName,\n      measureText: measureText,\n      checkLoadedFonts: checkLoadedFonts,\n      setIsLoaded: setIsLoaded\n    };\n    Font.prototype = fontPrototype;\n    return Font;\n  }();\n\n  function SlotManager(animationData) {\n    this.animationData = animationData;\n  }\n  SlotManager.prototype.getProp = function (data) {\n    if (this.animationData.slots && this.animationData.slots[data.sid]) {\n      return Object.assign(data, this.animationData.slots[data.sid].p);\n    }\n    return data;\n  };\n  function slotFactory(animationData) {\n    return new SlotManager(animationData);\n  }\n\n  function RenderableElement() {}\n  RenderableElement.prototype = {\n    initRenderable: function initRenderable() {\n      // layer's visibility related to inpoint and outpoint. Rename isVisible to isInRange\n      this.isInRange = false;\n      // layer's display state\n      this.hidden = false;\n      // If layer's transparency equals 0, it can be hidden\n      this.isTransparent = false;\n      // list of animated components\n      this.renderableComponents = [];\n    },\n    addRenderableComponent: function addRenderableComponent(component) {\n      if (this.renderableComponents.indexOf(component) === -1) {\n        this.renderableComponents.push(component);\n      }\n    },\n    removeRenderableComponent: function removeRenderableComponent(component) {\n      if (this.renderableComponents.indexOf(component) !== -1) {\n        this.renderableComponents.splice(this.renderableComponents.indexOf(component), 1);\n      }\n    },\n    prepareRenderableFrame: function prepareRenderableFrame(num) {\n      this.checkLayerLimits(num);\n    },\n    checkTransparency: function checkTransparency() {\n      if (this.finalTransform.mProp.o.v <= 0) {\n        if (!this.isTransparent && this.globalData.renderConfig.hideOnTransparent) {\n          this.isTransparent = true;\n          this.hide();\n        }\n      } else if (this.isTransparent) {\n        this.isTransparent = false;\n        this.show();\n      }\n    },\n    /**\n       * @function\n       * Initializes frame related properties.\n       *\n       * @param {number} num\n       * current frame number in Layer's time\n       *\n       */\n    checkLayerLimits: function checkLayerLimits(num) {\n      if (this.data.ip - this.data.st <= num && this.data.op - this.data.st > num) {\n        if (this.isInRange !== true) {\n          this.globalData._mdf = true;\n          this._mdf = true;\n          this.isInRange = true;\n          this.show();\n        }\n      } else if (this.isInRange !== false) {\n        this.globalData._mdf = true;\n        this.isInRange = false;\n        this.hide();\n      }\n    },\n    renderRenderable: function renderRenderable() {\n      var i;\n      var len = this.renderableComponents.length;\n      for (i = 0; i < len; i += 1) {\n        this.renderableComponents[i].renderFrame(this._isFirstFrame);\n      }\n      /* this.maskManager.renderFrame(this.finalTransform.mat);\n          this.renderableEffectsManager.renderFrame(this._isFirstFrame); */\n    },\n    sourceRectAtTime: function sourceRectAtTime() {\n      return {\n        top: 0,\n        left: 0,\n        width: 100,\n        height: 100\n      };\n    },\n    getLayerSize: function getLayerSize() {\n      if (this.data.ty === 5) {\n        return {\n          w: this.data.textData.width,\n          h: this.data.textData.height\n        };\n      }\n      return {\n        w: this.data.width,\n        h: this.data.height\n      };\n    }\n  };\n\n  var getBlendMode = function () {\n    var blendModeEnums = {\n      0: 'source-over',\n      1: 'multiply',\n      2: 'screen',\n      3: 'overlay',\n      4: 'darken',\n      5: 'lighten',\n      6: 'color-dodge',\n      7: 'color-burn',\n      8: 'hard-light',\n      9: 'soft-light',\n      10: 'difference',\n      11: 'exclusion',\n      12: 'hue',\n      13: 'saturation',\n      14: 'color',\n      15: 'luminosity'\n    };\n    return function (mode) {\n      return blendModeEnums[mode] || '';\n    };\n  }();\n\n  function SliderEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n  }\n  function AngleEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n  }\n  function ColorEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\n  }\n  function PointEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\n  }\n  function LayerIndexEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n  }\n  function MaskIndexEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n  }\n  function CheckboxEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n  }\n  function NoValueEffect() {\n    this.p = {};\n  }\n\n  function EffectsManager(data, element) {\n    var effects = data.ef || [];\n    this.effectElements = [];\n    var i;\n    var len = effects.length;\n    var effectItem;\n    for (i = 0; i < len; i += 1) {\n      effectItem = new GroupEffect(effects[i], element);\n      this.effectElements.push(effectItem);\n    }\n  }\n  function GroupEffect(data, element) {\n    this.init(data, element);\n  }\n  extendPrototype([DynamicPropertyContainer], GroupEffect);\n  GroupEffect.prototype.getValue = GroupEffect.prototype.iterateDynamicProperties;\n  GroupEffect.prototype.init = function (data, element) {\n    this.data = data;\n    this.effectElements = [];\n    this.initDynamicPropertyContainer(element);\n    var i;\n    var len = this.data.ef.length;\n    var eff;\n    var effects = this.data.ef;\n    for (i = 0; i < len; i += 1) {\n      eff = null;\n      switch (effects[i].ty) {\n        case 0:\n          eff = new SliderEffect(effects[i], element, this);\n          break;\n        case 1:\n          eff = new AngleEffect(effects[i], element, this);\n          break;\n        case 2:\n          eff = new ColorEffect(effects[i], element, this);\n          break;\n        case 3:\n          eff = new PointEffect(effects[i], element, this);\n          break;\n        case 4:\n        case 7:\n          eff = new CheckboxEffect(effects[i], element, this);\n          break;\n        case 10:\n          eff = new LayerIndexEffect(effects[i], element, this);\n          break;\n        case 11:\n          eff = new MaskIndexEffect(effects[i], element, this);\n          break;\n        case 5:\n          eff = new EffectsManager(effects[i], element, this);\n          break;\n        // case 6:\n        default:\n          eff = new NoValueEffect(effects[i], element, this);\n          break;\n      }\n      if (eff) {\n        this.effectElements.push(eff);\n      }\n    }\n  };\n\n  function BaseElement() {}\n  BaseElement.prototype = {\n    checkMasks: function checkMasks() {\n      if (!this.data.hasMask) {\n        return false;\n      }\n      var i = 0;\n      var len = this.data.masksProperties.length;\n      while (i < len) {\n        if (this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false) {\n          return true;\n        }\n        i += 1;\n      }\n      return false;\n    },\n    initExpressions: function initExpressions() {\n      var expressionsInterfaces = getExpressionInterfaces();\n      if (!expressionsInterfaces) {\n        return;\n      }\n      var LayerExpressionInterface = expressionsInterfaces('layer');\n      var EffectsExpressionInterface = expressionsInterfaces('effects');\n      var ShapeExpressionInterface = expressionsInterfaces('shape');\n      var TextExpressionInterface = expressionsInterfaces('text');\n      var CompExpressionInterface = expressionsInterfaces('comp');\n      this.layerInterface = LayerExpressionInterface(this);\n      if (this.data.hasMask && this.maskManager) {\n        this.layerInterface.registerMaskInterface(this.maskManager);\n      }\n      var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this, this.layerInterface);\n      this.layerInterface.registerEffectsInterface(effectsInterface);\n      if (this.data.ty === 0 || this.data.xt) {\n        this.compInterface = CompExpressionInterface(this);\n      } else if (this.data.ty === 4) {\n        this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData, this.itemsData, this.layerInterface);\n        this.layerInterface.content = this.layerInterface.shapeInterface;\n      } else if (this.data.ty === 5) {\n        this.layerInterface.textInterface = TextExpressionInterface(this);\n        this.layerInterface.text = this.layerInterface.textInterface;\n      }\n    },\n    setBlendMode: function setBlendMode() {\n      var blendModeValue = getBlendMode(this.data.bm);\n      var elem = this.baseElement || this.layerElement;\n      elem.style['mix-blend-mode'] = blendModeValue;\n    },\n    initBaseData: function initBaseData(data, globalData, comp) {\n      this.globalData = globalData;\n      this.comp = comp;\n      this.data = data;\n      this.layerId = createElementID();\n\n      // Stretch factor for old animations missing this property.\n      if (!this.data.sr) {\n        this.data.sr = 1;\n      }\n      // effects manager\n      this.effectsManager = new EffectsManager(this.data, this, this.dynamicProperties);\n    },\n    getType: function getType() {\n      return this.type;\n    },\n    sourceRectAtTime: function sourceRectAtTime() {}\n  };\n\n  /**\n   * @file\n   * Handles element's layer frame update.\n   * Checks layer in point and out point\n   *\n   */\n\n  function FrameElement() {}\n  FrameElement.prototype = {\n    /**\n       * @function\n       * Initializes frame related properties.\n       *\n       */\n    initFrame: function initFrame() {\n      // set to true when inpoint is rendered\n      this._isFirstFrame = false;\n      // list of animated properties\n      this.dynamicProperties = [];\n      // If layer has been modified in current tick this will be true\n      this._mdf = false;\n    },\n    /**\n       * @function\n       * Calculates all dynamic values\n       *\n       * @param {number} num\n       * current frame number in Layer's time\n       * @param {boolean} isVisible\n       * if layers is currently in range\n       *\n       */\n    prepareProperties: function prepareProperties(num, isVisible) {\n      var i;\n      var len = this.dynamicProperties.length;\n      for (i = 0; i < len; i += 1) {\n        if (isVisible || this._isParent && this.dynamicProperties[i].propType === 'transform') {\n          this.dynamicProperties[i].getValue();\n          if (this.dynamicProperties[i]._mdf) {\n            this.globalData._mdf = true;\n            this._mdf = true;\n          }\n        }\n      }\n    },\n    addDynamicProperty: function addDynamicProperty(prop) {\n      if (this.dynamicProperties.indexOf(prop) === -1) {\n        this.dynamicProperties.push(prop);\n      }\n    }\n  };\n\n  function FootageElement(data, globalData, comp) {\n    this.initFrame();\n    this.initRenderable();\n    this.assetData = globalData.getAssetData(data.refId);\n    this.footageData = globalData.imageLoader.getAsset(this.assetData);\n    this.initBaseData(data, globalData, comp);\n  }\n  FootageElement.prototype.prepareFrame = function () {};\n  extendPrototype([RenderableElement, BaseElement, FrameElement], FootageElement);\n  FootageElement.prototype.getBaseElement = function () {\n    return null;\n  };\n  FootageElement.prototype.renderFrame = function () {};\n  FootageElement.prototype.destroy = function () {};\n  FootageElement.prototype.initExpressions = function () {\n    var expressionsInterfaces = getExpressionInterfaces();\n    if (!expressionsInterfaces) {\n      return;\n    }\n    var FootageInterface = expressionsInterfaces('footage');\n    this.layerInterface = FootageInterface(this);\n  };\n  FootageElement.prototype.getFootageData = function () {\n    return this.footageData;\n  };\n\n  function AudioElement(data, globalData, comp) {\n    this.initFrame();\n    this.initRenderable();\n    this.assetData = globalData.getAssetData(data.refId);\n    this.initBaseData(data, globalData, comp);\n    this._isPlaying = false;\n    this._canPlay = false;\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\n    this.audio = this.globalData.audioController.createAudio(assetPath);\n    this._currentTime = 0;\n    this.globalData.audioController.addAudio(this);\n    this._volumeMultiplier = 1;\n    this._volume = 1;\n    this._previousVolume = null;\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\n      _placeholder: true\n    };\n    this.lv = PropertyFactory.getProp(this, data.au && data.au.lv ? data.au.lv : {\n      k: [100]\n    }, 1, 0.01, this);\n  }\n  AudioElement.prototype.prepareFrame = function (num) {\n    this.prepareRenderableFrame(num, true);\n    this.prepareProperties(num, true);\n    if (!this.tm._placeholder) {\n      var timeRemapped = this.tm.v;\n      this._currentTime = timeRemapped;\n    } else {\n      this._currentTime = num / this.data.sr;\n    }\n    this._volume = this.lv.v[0];\n    var totalVolume = this._volume * this._volumeMultiplier;\n    if (this._previousVolume !== totalVolume) {\n      this._previousVolume = totalVolume;\n      this.audio.volume(totalVolume);\n    }\n  };\n  extendPrototype([RenderableElement, BaseElement, FrameElement], AudioElement);\n  AudioElement.prototype.renderFrame = function () {\n    if (this.isInRange && this._canPlay) {\n      if (!this._isPlaying) {\n        this.audio.play();\n        this.audio.seek(this._currentTime / this.globalData.frameRate);\n        this._isPlaying = true;\n      } else if (!this.audio.playing() || Math.abs(this._currentTime / this.globalData.frameRate - this.audio.seek()) > 0.1) {\n        this.audio.seek(this._currentTime / this.globalData.frameRate);\n      }\n    }\n  };\n  AudioElement.prototype.show = function () {\n    // this.audio.play()\n  };\n  AudioElement.prototype.hide = function () {\n    this.audio.pause();\n    this._isPlaying = false;\n  };\n  AudioElement.prototype.pause = function () {\n    this.audio.pause();\n    this._isPlaying = false;\n    this._canPlay = false;\n  };\n  AudioElement.prototype.resume = function () {\n    this._canPlay = true;\n  };\n  AudioElement.prototype.setRate = function (rateValue) {\n    this.audio.rate(rateValue);\n  };\n  AudioElement.prototype.volume = function (volumeValue) {\n    this._volumeMultiplier = volumeValue;\n    this._previousVolume = volumeValue * this._volume;\n    this.audio.volume(this._previousVolume);\n  };\n  AudioElement.prototype.getBaseElement = function () {\n    return null;\n  };\n  AudioElement.prototype.destroy = function () {};\n  AudioElement.prototype.sourceRectAtTime = function () {};\n  AudioElement.prototype.initExpressions = function () {};\n\n  function BaseRenderer() {}\n  BaseRenderer.prototype.checkLayers = function (num) {\n    var i;\n    var len = this.layers.length;\n    var data;\n    this.completeLayers = true;\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (!this.elements[i]) {\n        data = this.layers[i];\n        if (data.ip - data.st <= num - this.layers[i].st && data.op - data.st > num - this.layers[i].st) {\n          this.buildItem(i);\n        }\n      }\n      this.completeLayers = this.elements[i] ? this.completeLayers : false;\n    }\n    this.checkPendingElements();\n  };\n  BaseRenderer.prototype.createItem = function (layer) {\n    switch (layer.ty) {\n      case 2:\n        return this.createImage(layer);\n      case 0:\n        return this.createComp(layer);\n      case 1:\n        return this.createSolid(layer);\n      case 3:\n        return this.createNull(layer);\n      case 4:\n        return this.createShape(layer);\n      case 5:\n        return this.createText(layer);\n      case 6:\n        return this.createAudio(layer);\n      case 13:\n        return this.createCamera(layer);\n      case 15:\n        return this.createFootage(layer);\n      default:\n        return this.createNull(layer);\n    }\n  };\n  BaseRenderer.prototype.createCamera = function () {\n    throw new Error('You\\'re using a 3d camera. Try the html renderer.');\n  };\n  BaseRenderer.prototype.createAudio = function (data) {\n    return new AudioElement(data, this.globalData, this);\n  };\n  BaseRenderer.prototype.createFootage = function (data) {\n    return new FootageElement(data, this.globalData, this);\n  };\n  BaseRenderer.prototype.buildAllItems = function () {\n    var i;\n    var len = this.layers.length;\n    for (i = 0; i < len; i += 1) {\n      this.buildItem(i);\n    }\n    this.checkPendingElements();\n  };\n  BaseRenderer.prototype.includeLayers = function (newLayers) {\n    this.completeLayers = false;\n    var i;\n    var len = newLayers.length;\n    var j;\n    var jLen = this.layers.length;\n    for (i = 0; i < len; i += 1) {\n      j = 0;\n      while (j < jLen) {\n        if (this.layers[j].id === newLayers[i].id) {\n          this.layers[j] = newLayers[i];\n          break;\n        }\n        j += 1;\n      }\n    }\n  };\n  BaseRenderer.prototype.setProjectInterface = function (pInterface) {\n    this.globalData.projectInterface = pInterface;\n  };\n  BaseRenderer.prototype.initItems = function () {\n    if (!this.globalData.progressiveLoad) {\n      this.buildAllItems();\n    }\n  };\n  BaseRenderer.prototype.buildElementParenting = function (element, parentName, hierarchy) {\n    var elements = this.elements;\n    var layers = this.layers;\n    var i = 0;\n    var len = layers.length;\n    while (i < len) {\n      if (layers[i].ind == parentName) {\n        // eslint-disable-line eqeqeq\n        if (!elements[i] || elements[i] === true) {\n          this.buildItem(i);\n          this.addPendingElement(element);\n        } else {\n          hierarchy.push(elements[i]);\n          elements[i].setAsParent();\n          if (layers[i].parent !== undefined) {\n            this.buildElementParenting(element, layers[i].parent, hierarchy);\n          } else {\n            element.setHierarchy(hierarchy);\n          }\n        }\n      }\n      i += 1;\n    }\n  };\n  BaseRenderer.prototype.addPendingElement = function (element) {\n    this.pendingElements.push(element);\n  };\n  BaseRenderer.prototype.searchExtraCompositions = function (assets) {\n    var i;\n    var len = assets.length;\n    for (i = 0; i < len; i += 1) {\n      if (assets[i].xt) {\n        var comp = this.createComp(assets[i]);\n        comp.initExpressions();\n        this.globalData.projectInterface.registerComposition(comp);\n      }\n    }\n  };\n  BaseRenderer.prototype.getElementById = function (ind) {\n    var i;\n    var len = this.elements.length;\n    for (i = 0; i < len; i += 1) {\n      if (this.elements[i].data.ind === ind) {\n        return this.elements[i];\n      }\n    }\n    return null;\n  };\n  BaseRenderer.prototype.getElementByPath = function (path) {\n    var pathValue = path.shift();\n    var element;\n    if (typeof pathValue === 'number') {\n      element = this.elements[pathValue];\n    } else {\n      var i;\n      var len = this.elements.length;\n      for (i = 0; i < len; i += 1) {\n        if (this.elements[i].data.nm === pathValue) {\n          element = this.elements[i];\n          break;\n        }\n      }\n    }\n    if (path.length === 0) {\n      return element;\n    }\n    return element.getElementByPath(path);\n  };\n  BaseRenderer.prototype.setupGlobalData = function (animData, fontsContainer) {\n    this.globalData.fontManager = new FontManager();\n    this.globalData.slotManager = slotFactory(animData);\n    this.globalData.fontManager.addChars(animData.chars);\n    this.globalData.fontManager.addFonts(animData.fonts, fontsContainer);\n    this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\n    this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\n    this.globalData.imageLoader = this.animationItem.imagePreloader;\n    this.globalData.audioController = this.animationItem.audioController;\n    this.globalData.frameId = 0;\n    this.globalData.frameRate = animData.fr;\n    this.globalData.nm = animData.nm;\n    this.globalData.compSize = {\n      w: animData.w,\n      h: animData.h\n    };\n  };\n\n  var effectTypes = {\n    TRANSFORM_EFFECT: 'transformEFfect'\n  };\n\n  function TransformElement() {}\n  TransformElement.prototype = {\n    initTransform: function initTransform() {\n      var mat = new Matrix();\n      this.finalTransform = {\n        mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : {\n          o: 0\n        },\n        _matMdf: false,\n        _localMatMdf: false,\n        _opMdf: false,\n        mat: mat,\n        localMat: mat,\n        localOpacity: 1\n      };\n      if (this.data.ao) {\n        this.finalTransform.mProp.autoOriented = true;\n      }\n\n      // TODO: check TYPE 11: Guided elements\n      if (this.data.ty !== 11) {\n        // this.createElements();\n      }\n    },\n    renderTransform: function renderTransform() {\n      this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame;\n      this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame;\n      if (this.hierarchy) {\n        var mat;\n        var finalMat = this.finalTransform.mat;\n        var i = 0;\n        var len = this.hierarchy.length;\n        // Checking if any of the transformation matrices in the hierarchy chain has changed.\n        if (!this.finalTransform._matMdf) {\n          while (i < len) {\n            if (this.hierarchy[i].finalTransform.mProp._mdf) {\n              this.finalTransform._matMdf = true;\n              break;\n            }\n            i += 1;\n          }\n        }\n        if (this.finalTransform._matMdf) {\n          mat = this.finalTransform.mProp.v.props;\n          finalMat.cloneFromProps(mat);\n          for (i = 0; i < len; i += 1) {\n            finalMat.multiply(this.hierarchy[i].finalTransform.mProp.v);\n          }\n        }\n      }\n      if (!this.localTransforms || this.finalTransform._matMdf) {\n        this.finalTransform._localMatMdf = this.finalTransform._matMdf;\n      }\n      if (this.finalTransform._opMdf) {\n        this.finalTransform.localOpacity = this.finalTransform.mProp.o.v;\n      }\n    },\n    renderLocalTransform: function renderLocalTransform() {\n      if (this.localTransforms) {\n        var i = 0;\n        var len = this.localTransforms.length;\n        this.finalTransform._localMatMdf = this.finalTransform._matMdf;\n        if (!this.finalTransform._localMatMdf || !this.finalTransform._opMdf) {\n          while (i < len) {\n            if (this.localTransforms[i]._mdf) {\n              this.finalTransform._localMatMdf = true;\n            }\n            if (this.localTransforms[i]._opMdf && !this.finalTransform._opMdf) {\n              this.finalTransform.localOpacity = this.finalTransform.mProp.o.v;\n              this.finalTransform._opMdf = true;\n            }\n            i += 1;\n          }\n        }\n        if (this.finalTransform._localMatMdf) {\n          var localMat = this.finalTransform.localMat;\n          this.localTransforms[0].matrix.clone(localMat);\n          for (i = 1; i < len; i += 1) {\n            var lmat = this.localTransforms[i].matrix;\n            localMat.multiply(lmat);\n          }\n          localMat.multiply(this.finalTransform.mat);\n        }\n        if (this.finalTransform._opMdf) {\n          var localOp = this.finalTransform.localOpacity;\n          for (i = 0; i < len; i += 1) {\n            localOp *= this.localTransforms[i].opacity * 0.01;\n          }\n          this.finalTransform.localOpacity = localOp;\n        }\n      }\n    },\n    searchEffectTransforms: function searchEffectTransforms() {\n      if (this.renderableEffectsManager) {\n        var transformEffects = this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);\n        if (transformEffects.length) {\n          this.localTransforms = [];\n          this.finalTransform.localMat = new Matrix();\n          var i = 0;\n          var len = transformEffects.length;\n          for (i = 0; i < len; i += 1) {\n            this.localTransforms.push(transformEffects[i]);\n          }\n        }\n      }\n    },\n    globalToLocal: function globalToLocal(pt) {\n      var transforms = [];\n      transforms.push(this.finalTransform);\n      var flag = true;\n      var comp = this.comp;\n      while (flag) {\n        if (comp.finalTransform) {\n          if (comp.data.hasMask) {\n            transforms.splice(0, 0, comp.finalTransform);\n          }\n          comp = comp.comp;\n        } else {\n          flag = false;\n        }\n      }\n      var i;\n      var len = transforms.length;\n      var ptNew;\n      for (i = 0; i < len; i += 1) {\n        ptNew = transforms[i].mat.applyToPointArray(0, 0, 0);\n        // ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\n        pt = [pt[0] - ptNew[0], pt[1] - ptNew[1], 0];\n      }\n      return pt;\n    },\n    mHelper: new Matrix()\n  };\n\n  function MaskElement(data, element, globalData) {\n    this.data = data;\n    this.element = element;\n    this.globalData = globalData;\n    this.storedData = [];\n    this.masksProperties = this.data.masksProperties || [];\n    this.maskElement = null;\n    var defs = this.globalData.defs;\n    var i;\n    var len = this.masksProperties ? this.masksProperties.length : 0;\n    this.viewData = createSizedArray(len);\n    this.solidPath = '';\n    var path;\n    var properties = this.masksProperties;\n    var count = 0;\n    var currentMasks = [];\n    var j;\n    var jLen;\n    var layerId = createElementID();\n    var rect;\n    var expansor;\n    var feMorph;\n    var x;\n    var maskType = 'clipPath';\n    var maskRef = 'clip-path';\n    for (i = 0; i < len; i += 1) {\n      if (properties[i].mode !== 'a' && properties[i].mode !== 'n' || properties[i].inv || properties[i].o.k !== 100 || properties[i].o.x) {\n        maskType = 'mask';\n        maskRef = 'mask';\n      }\n      if ((properties[i].mode === 's' || properties[i].mode === 'i') && count === 0) {\n        rect = createNS('rect');\n        rect.setAttribute('fill', '#ffffff');\n        rect.setAttribute('width', this.element.comp.data.w || 0);\n        rect.setAttribute('height', this.element.comp.data.h || 0);\n        currentMasks.push(rect);\n      } else {\n        rect = null;\n      }\n      path = createNS('path');\n      if (properties[i].mode === 'n') {\n        // TODO move this to a factory or to a constructor\n        this.viewData[i] = {\n          op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\n          prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\n          elem: path,\n          lastPath: ''\n        };\n        defs.appendChild(path);\n      } else {\n        count += 1;\n        path.setAttribute('fill', properties[i].mode === 's' ? '#000000' : '#ffffff');\n        path.setAttribute('clip-rule', 'nonzero');\n        var filterID;\n        if (properties[i].x.k !== 0) {\n          maskType = 'mask';\n          maskRef = 'mask';\n          x = PropertyFactory.getProp(this.element, properties[i].x, 0, null, this.element);\n          filterID = createElementID();\n          expansor = createNS('filter');\n          expansor.setAttribute('id', filterID);\n          feMorph = createNS('feMorphology');\n          feMorph.setAttribute('operator', 'erode');\n          feMorph.setAttribute('in', 'SourceGraphic');\n          feMorph.setAttribute('radius', '0');\n          expansor.appendChild(feMorph);\n          defs.appendChild(expansor);\n          path.setAttribute('stroke', properties[i].mode === 's' ? '#000000' : '#ffffff');\n        } else {\n          feMorph = null;\n          x = null;\n        }\n\n        // TODO move this to a factory or to a constructor\n        this.storedData[i] = {\n          elem: path,\n          x: x,\n          expan: feMorph,\n          lastPath: '',\n          lastOperator: '',\n          filterId: filterID,\n          lastRadius: 0\n        };\n        if (properties[i].mode === 'i') {\n          jLen = currentMasks.length;\n          var g = createNS('g');\n          for (j = 0; j < jLen; j += 1) {\n            g.appendChild(currentMasks[j]);\n          }\n          var mask = createNS('mask');\n          mask.setAttribute('mask-type', 'alpha');\n          mask.setAttribute('id', layerId + '_' + count);\n          mask.appendChild(path);\n          defs.appendChild(mask);\n          g.setAttribute('mask', 'url(' + getLocationHref() + '#' + layerId + '_' + count + ')');\n          currentMasks.length = 0;\n          currentMasks.push(g);\n        } else {\n          currentMasks.push(path);\n        }\n        if (properties[i].inv && !this.solidPath) {\n          this.solidPath = this.createLayerSolidPath();\n        }\n        // TODO move this to a factory or to a constructor\n        this.viewData[i] = {\n          elem: path,\n          lastPath: '',\n          op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\n          prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\n          invRect: rect\n        };\n        if (!this.viewData[i].prop.k) {\n          this.drawPath(properties[i], this.viewData[i].prop.v, this.viewData[i]);\n        }\n      }\n    }\n    this.maskElement = createNS(maskType);\n    len = currentMasks.length;\n    for (i = 0; i < len; i += 1) {\n      this.maskElement.appendChild(currentMasks[i]);\n    }\n    if (count > 0) {\n      this.maskElement.setAttribute('id', layerId);\n      this.element.maskedElement.setAttribute(maskRef, 'url(' + getLocationHref() + '#' + layerId + ')');\n      defs.appendChild(this.maskElement);\n    }\n    if (this.viewData.length) {\n      this.element.addRenderableComponent(this);\n    }\n  }\n  MaskElement.prototype.getMaskProperty = function (pos) {\n    return this.viewData[pos].prop;\n  };\n  MaskElement.prototype.renderFrame = function (isFirstFrame) {\n    var finalMat = this.element.finalTransform.mat;\n    var i;\n    var len = this.masksProperties.length;\n    for (i = 0; i < len; i += 1) {\n      if (this.viewData[i].prop._mdf || isFirstFrame) {\n        this.drawPath(this.masksProperties[i], this.viewData[i].prop.v, this.viewData[i]);\n      }\n      if (this.viewData[i].op._mdf || isFirstFrame) {\n        this.viewData[i].elem.setAttribute('fill-opacity', this.viewData[i].op.v);\n      }\n      if (this.masksProperties[i].mode !== 'n') {\n        if (this.viewData[i].invRect && (this.element.finalTransform.mProp._mdf || isFirstFrame)) {\n          this.viewData[i].invRect.setAttribute('transform', finalMat.getInverseMatrix().to2dCSS());\n        }\n        if (this.storedData[i].x && (this.storedData[i].x._mdf || isFirstFrame)) {\n          var feMorph = this.storedData[i].expan;\n          if (this.storedData[i].x.v < 0) {\n            if (this.storedData[i].lastOperator !== 'erode') {\n              this.storedData[i].lastOperator = 'erode';\n              this.storedData[i].elem.setAttribute('filter', 'url(' + getLocationHref() + '#' + this.storedData[i].filterId + ')');\n            }\n            feMorph.setAttribute('radius', -this.storedData[i].x.v);\n          } else {\n            if (this.storedData[i].lastOperator !== 'dilate') {\n              this.storedData[i].lastOperator = 'dilate';\n              this.storedData[i].elem.setAttribute('filter', null);\n            }\n            this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v * 2);\n          }\n        }\n      }\n    }\n  };\n  MaskElement.prototype.getMaskelement = function () {\n    return this.maskElement;\n  };\n  MaskElement.prototype.createLayerSolidPath = function () {\n    var path = 'M0,0 ';\n    path += ' h' + this.globalData.compSize.w;\n    path += ' v' + this.globalData.compSize.h;\n    path += ' h-' + this.globalData.compSize.w;\n    path += ' v-' + this.globalData.compSize.h + ' ';\n    return path;\n  };\n  MaskElement.prototype.drawPath = function (pathData, pathNodes, viewData) {\n    var pathString = ' M' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\n    var i;\n    var len;\n    len = pathNodes._length;\n    for (i = 1; i < len; i += 1) {\n      // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\n      pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[i][0] + ',' + pathNodes.i[i][1] + ' ' + pathNodes.v[i][0] + ',' + pathNodes.v[i][1];\n    }\n    // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\n    if (pathNodes.c && len > 1) {\n      pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[0][0] + ',' + pathNodes.i[0][1] + ' ' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\n    }\n    // pathNodes.__renderedString = pathString;\n\n    if (viewData.lastPath !== pathString) {\n      var pathShapeValue = '';\n      if (viewData.elem) {\n        if (pathNodes.c) {\n          pathShapeValue = pathData.inv ? this.solidPath + pathString : pathString;\n        }\n        viewData.elem.setAttribute('d', pathShapeValue);\n      }\n      viewData.lastPath = pathString;\n    }\n  };\n  MaskElement.prototype.destroy = function () {\n    this.element = null;\n    this.globalData = null;\n    this.maskElement = null;\n    this.data = null;\n    this.masksProperties = null;\n  };\n\n  var filtersFactory = function () {\n    var ob = {};\n    ob.createFilter = createFilter;\n    ob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\n    function createFilter(filId, skipCoordinates) {\n      var fil = createNS('filter');\n      fil.setAttribute('id', filId);\n      if (skipCoordinates !== true) {\n        fil.setAttribute('filterUnits', 'objectBoundingBox');\n        fil.setAttribute('x', '0%');\n        fil.setAttribute('y', '0%');\n        fil.setAttribute('width', '100%');\n        fil.setAttribute('height', '100%');\n      }\n      return fil;\n    }\n    function createAlphaToLuminanceFilter() {\n      var feColorMatrix = createNS('feColorMatrix');\n      feColorMatrix.setAttribute('type', 'matrix');\n      feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\n      feColorMatrix.setAttribute('values', '0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\n      return feColorMatrix;\n    }\n    return ob;\n  }();\n\n  var featureSupport = function () {\n    var ob = {\n      maskType: true,\n      svgLumaHidden: true,\n      offscreenCanvas: typeof OffscreenCanvas !== 'undefined'\n    };\n    if (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\n      ob.maskType = false;\n    }\n    if (/firefox/i.test(navigator.userAgent)) {\n      ob.svgLumaHidden = false;\n    }\n    return ob;\n  }();\n\n  var registeredEffects$1 = {};\n  var idPrefix = 'filter_result_';\n  function SVGEffects(elem) {\n    var i;\n    var source = 'SourceGraphic';\n    var len = elem.data.ef ? elem.data.ef.length : 0;\n    var filId = createElementID();\n    var fil = filtersFactory.createFilter(filId, true);\n    var count = 0;\n    this.filters = [];\n    var filterManager;\n    for (i = 0; i < len; i += 1) {\n      filterManager = null;\n      var type = elem.data.ef[i].ty;\n      if (registeredEffects$1[type]) {\n        var Effect = registeredEffects$1[type].effect;\n        filterManager = new Effect(fil, elem.effectsManager.effectElements[i], elem, idPrefix + count, source);\n        source = idPrefix + count;\n        if (registeredEffects$1[type].countsAsEffect) {\n          count += 1;\n        }\n      }\n      if (filterManager) {\n        this.filters.push(filterManager);\n      }\n    }\n    if (count) {\n      elem.globalData.defs.appendChild(fil);\n      elem.layerElement.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\n    }\n    if (this.filters.length) {\n      elem.addRenderableComponent(this);\n    }\n  }\n  SVGEffects.prototype.renderFrame = function (_isFirstFrame) {\n    var i;\n    var len = this.filters.length;\n    for (i = 0; i < len; i += 1) {\n      this.filters[i].renderFrame(_isFirstFrame);\n    }\n  };\n  SVGEffects.prototype.getEffects = function (type) {\n    var i;\n    var len = this.filters.length;\n    var effects = [];\n    for (i = 0; i < len; i += 1) {\n      if (this.filters[i].type === type) {\n        effects.push(this.filters[i]);\n      }\n    }\n    return effects;\n  };\n  function registerEffect$1(id, effect, countsAsEffect) {\n    registeredEffects$1[id] = {\n      effect: effect,\n      countsAsEffect: countsAsEffect\n    };\n  }\n\n  function SVGBaseElement() {}\n  SVGBaseElement.prototype = {\n    initRendererElement: function initRendererElement() {\n      this.layerElement = createNS('g');\n    },\n    createContainerElements: function createContainerElements() {\n      this.matteElement = createNS('g');\n      this.transformedElement = this.layerElement;\n      this.maskedElement = this.layerElement;\n      this._sizeChanged = false;\n      var layerElementParent = null;\n      // If this layer acts as a mask for the following layer\n      if (this.data.td) {\n        this.matteMasks = {};\n        var gg = createNS('g');\n        gg.setAttribute('id', this.layerId);\n        gg.appendChild(this.layerElement);\n        layerElementParent = gg;\n        this.globalData.defs.appendChild(gg);\n      } else if (this.data.tt) {\n        this.matteElement.appendChild(this.layerElement);\n        layerElementParent = this.matteElement;\n        this.baseElement = this.matteElement;\n      } else {\n        this.baseElement = this.layerElement;\n      }\n      if (this.data.ln) {\n        this.layerElement.setAttribute('id', this.data.ln);\n      }\n      if (this.data.cl) {\n        this.layerElement.setAttribute('class', this.data.cl);\n      }\n      // Clipping compositions to hide content that exceeds boundaries. If collapsed transformations is on, component should not be clipped\n      if (this.data.ty === 0 && !this.data.hd) {\n        var cp = createNS('clipPath');\n        var pt = createNS('path');\n        pt.setAttribute('d', 'M0,0 L' + this.data.w + ',0 L' + this.data.w + ',' + this.data.h + ' L0,' + this.data.h + 'z');\n        var clipId = createElementID();\n        cp.setAttribute('id', clipId);\n        cp.appendChild(pt);\n        this.globalData.defs.appendChild(cp);\n        if (this.checkMasks()) {\n          var cpGroup = createNS('g');\n          cpGroup.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + clipId + ')');\n          cpGroup.appendChild(this.layerElement);\n          this.transformedElement = cpGroup;\n          if (layerElementParent) {\n            layerElementParent.appendChild(this.transformedElement);\n          } else {\n            this.baseElement = this.transformedElement;\n          }\n        } else {\n          this.layerElement.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + clipId + ')');\n        }\n      }\n      if (this.data.bm !== 0) {\n        this.setBlendMode();\n      }\n    },\n    renderElement: function renderElement() {\n      if (this.finalTransform._localMatMdf) {\n        this.transformedElement.setAttribute('transform', this.finalTransform.localMat.to2dCSS());\n      }\n      if (this.finalTransform._opMdf) {\n        this.transformedElement.setAttribute('opacity', this.finalTransform.localOpacity);\n      }\n    },\n    destroyBaseElement: function destroyBaseElement() {\n      this.layerElement = null;\n      this.matteElement = null;\n      this.maskManager.destroy();\n    },\n    getBaseElement: function getBaseElement() {\n      if (this.data.hd) {\n        return null;\n      }\n      return this.baseElement;\n    },\n    createRenderableComponents: function createRenderableComponents() {\n      this.maskManager = new MaskElement(this.data, this, this.globalData);\n      this.renderableEffectsManager = new SVGEffects(this);\n      this.searchEffectTransforms();\n    },\n    getMatte: function getMatte(matteType) {\n      // This should not be a common case. But for backward compatibility, we'll create the matte object.\n      // It solves animations that have two consecutive layers marked as matte masks.\n      // Which is an undefined behavior in AE.\n      if (!this.matteMasks) {\n        this.matteMasks = {};\n      }\n      if (!this.matteMasks[matteType]) {\n        var id = this.layerId + '_' + matteType;\n        var filId;\n        var fil;\n        var useElement;\n        var gg;\n        if (matteType === 1 || matteType === 3) {\n          var masker = createNS('mask');\n          masker.setAttribute('id', id);\n          masker.setAttribute('mask-type', matteType === 3 ? 'luminance' : 'alpha');\n          useElement = createNS('use');\n          useElement.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#' + this.layerId);\n          masker.appendChild(useElement);\n          this.globalData.defs.appendChild(masker);\n          if (!featureSupport.maskType && matteType === 1) {\n            masker.setAttribute('mask-type', 'luminance');\n            filId = createElementID();\n            fil = filtersFactory.createFilter(filId);\n            this.globalData.defs.appendChild(fil);\n            fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\n            gg = createNS('g');\n            gg.appendChild(useElement);\n            masker.appendChild(gg);\n            gg.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\n          }\n        } else if (matteType === 2) {\n          var maskGroup = createNS('mask');\n          maskGroup.setAttribute('id', id);\n          maskGroup.setAttribute('mask-type', 'alpha');\n          var maskGrouper = createNS('g');\n          maskGroup.appendChild(maskGrouper);\n          filId = createElementID();\n          fil = filtersFactory.createFilter(filId);\n          /// /\n          var feCTr = createNS('feComponentTransfer');\n          feCTr.setAttribute('in', 'SourceGraphic');\n          fil.appendChild(feCTr);\n          var feFunc = createNS('feFuncA');\n          feFunc.setAttribute('type', 'table');\n          feFunc.setAttribute('tableValues', '1.0 0.0');\n          feCTr.appendChild(feFunc);\n          /// /\n          this.globalData.defs.appendChild(fil);\n          var alphaRect = createNS('rect');\n          alphaRect.setAttribute('width', this.comp.data.w);\n          alphaRect.setAttribute('height', this.comp.data.h);\n          alphaRect.setAttribute('x', '0');\n          alphaRect.setAttribute('y', '0');\n          alphaRect.setAttribute('fill', '#ffffff');\n          alphaRect.setAttribute('opacity', '0');\n          maskGrouper.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\n          maskGrouper.appendChild(alphaRect);\n          useElement = createNS('use');\n          useElement.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#' + this.layerId);\n          maskGrouper.appendChild(useElement);\n          if (!featureSupport.maskType) {\n            maskGroup.setAttribute('mask-type', 'luminance');\n            fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\n            gg = createNS('g');\n            maskGrouper.appendChild(alphaRect);\n            gg.appendChild(this.layerElement);\n            maskGrouper.appendChild(gg);\n          }\n          this.globalData.defs.appendChild(maskGroup);\n        }\n        this.matteMasks[matteType] = id;\n      }\n      return this.matteMasks[matteType];\n    },\n    setMatte: function setMatte(id) {\n      if (!this.matteElement) {\n        return;\n      }\n      this.matteElement.setAttribute('mask', 'url(' + getLocationHref() + '#' + id + ')');\n    }\n  };\n\n  /**\n   * @file\n   * Handles AE's layer parenting property.\n   *\n   */\n\n  function HierarchyElement() {}\n  HierarchyElement.prototype = {\n    /**\n       * @function\n       * Initializes hierarchy properties\n       *\n       */\n    initHierarchy: function initHierarchy() {\n      // element's parent list\n      this.hierarchy = [];\n      // if element is parent of another layer _isParent will be true\n      this._isParent = false;\n      this.checkParenting();\n    },\n    /**\n       * @function\n       * Sets layer's hierarchy.\n       * @param {array} hierarch\n       * layer's parent list\n       *\n       */\n    setHierarchy: function setHierarchy(hierarchy) {\n      this.hierarchy = hierarchy;\n    },\n    /**\n       * @function\n       * Sets layer as parent.\n       *\n       */\n    setAsParent: function setAsParent() {\n      this._isParent = true;\n    },\n    /**\n       * @function\n       * Searches layer's parenting chain\n       *\n       */\n    checkParenting: function checkParenting() {\n      if (this.data.parent !== undefined) {\n        this.comp.buildElementParenting(this, this.data.parent, []);\n      }\n    }\n  };\n\n  function RenderableDOMElement() {}\n  (function () {\n    var _prototype = {\n      initElement: function initElement(data, globalData, comp) {\n        this.initFrame();\n        this.initBaseData(data, globalData, comp);\n        this.initTransform(data, globalData, comp);\n        this.initHierarchy();\n        this.initRenderable();\n        this.initRendererElement();\n        this.createContainerElements();\n        this.createRenderableComponents();\n        this.createContent();\n        this.hide();\n      },\n      hide: function hide() {\n        // console.log('HIDE', this);\n        if (!this.hidden && (!this.isInRange || this.isTransparent)) {\n          var elem = this.baseElement || this.layerElement;\n          elem.style.display = 'none';\n          this.hidden = true;\n        }\n      },\n      show: function show() {\n        // console.log('SHOW', this);\n        if (this.isInRange && !this.isTransparent) {\n          if (!this.data.hd) {\n            var elem = this.baseElement || this.layerElement;\n            elem.style.display = 'block';\n          }\n          this.hidden = false;\n          this._isFirstFrame = true;\n        }\n      },\n      renderFrame: function renderFrame() {\n        // If it is exported as hidden (data.hd === true) no need to render\n        // If it is not visible no need to render\n        if (this.data.hd || this.hidden) {\n          return;\n        }\n        this.renderTransform();\n        this.renderRenderable();\n        this.renderLocalTransform();\n        this.renderElement();\n        this.renderInnerContent();\n        if (this._isFirstFrame) {\n          this._isFirstFrame = false;\n        }\n      },\n      renderInnerContent: function renderInnerContent() {},\n      prepareFrame: function prepareFrame(num) {\n        this._mdf = false;\n        this.prepareRenderableFrame(num);\n        this.prepareProperties(num, this.isInRange);\n        this.checkTransparency();\n      },\n      destroy: function destroy() {\n        this.innerElem = null;\n        this.destroyBaseElement();\n      }\n    };\n    extendPrototype([RenderableElement, createProxyFunction(_prototype)], RenderableDOMElement);\n  })();\n\n  function IImageElement(data, globalData, comp) {\n    this.assetData = globalData.getAssetData(data.refId);\n    if (this.assetData && this.assetData.sid) {\n      this.assetData = globalData.slotManager.getProp(this.assetData);\n    }\n    this.initElement(data, globalData, comp);\n    this.sourceRect = {\n      top: 0,\n      left: 0,\n      width: this.assetData.w,\n      height: this.assetData.h\n    };\n  }\n  extendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], IImageElement);\n  IImageElement.prototype.createContent = function () {\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\n    this.innerElem = createNS('image');\n    this.innerElem.setAttribute('width', this.assetData.w + 'px');\n    this.innerElem.setAttribute('height', this.assetData.h + 'px');\n    this.innerElem.setAttribute('preserveAspectRatio', this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio);\n    this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\n    this.layerElement.appendChild(this.innerElem);\n  };\n  IImageElement.prototype.sourceRectAtTime = function () {\n    return this.sourceRect;\n  };\n\n  function ProcessedElement(element, position) {\n    this.elem = element;\n    this.pos = position;\n  }\n\n  function IShapeElement() {}\n  IShapeElement.prototype = {\n    addShapeToModifiers: function addShapeToModifiers(data) {\n      var i;\n      var len = this.shapeModifiers.length;\n      for (i = 0; i < len; i += 1) {\n        this.shapeModifiers[i].addShape(data);\n      }\n    },\n    isShapeInAnimatedModifiers: function isShapeInAnimatedModifiers(data) {\n      var i = 0;\n      var len = this.shapeModifiers.length;\n      while (i < len) {\n        if (this.shapeModifiers[i].isAnimatedWithShape(data)) {\n          return true;\n        }\n      }\n      return false;\n    },\n    renderModifiers: function renderModifiers() {\n      if (!this.shapeModifiers.length) {\n        return;\n      }\n      var i;\n      var len = this.shapes.length;\n      for (i = 0; i < len; i += 1) {\n        this.shapes[i].sh.reset();\n      }\n      len = this.shapeModifiers.length;\n      var shouldBreakProcess;\n      for (i = len - 1; i >= 0; i -= 1) {\n        shouldBreakProcess = this.shapeModifiers[i].processShapes(this._isFirstFrame);\n        // workaround to fix cases where a repeater resets the shape so the following processes get called twice\n        // TODO: find a better solution for this\n        if (shouldBreakProcess) {\n          break;\n        }\n      }\n    },\n    searchProcessedElement: function searchProcessedElement(elem) {\n      var elements = this.processedElements;\n      var i = 0;\n      var len = elements.length;\n      while (i < len) {\n        if (elements[i].elem === elem) {\n          return elements[i].pos;\n        }\n        i += 1;\n      }\n      return 0;\n    },\n    addProcessedElement: function addProcessedElement(elem, pos) {\n      var elements = this.processedElements;\n      var i = elements.length;\n      while (i) {\n        i -= 1;\n        if (elements[i].elem === elem) {\n          elements[i].pos = pos;\n          return;\n        }\n      }\n      elements.push(new ProcessedElement(elem, pos));\n    },\n    prepareFrame: function prepareFrame(num) {\n      this.prepareRenderableFrame(num);\n      this.prepareProperties(num, this.isInRange);\n    }\n  };\n\n  var lineCapEnum = {\n    1: 'butt',\n    2: 'round',\n    3: 'square'\n  };\n  var lineJoinEnum = {\n    1: 'miter',\n    2: 'round',\n    3: 'bevel'\n  };\n\n  function SVGShapeData(transformers, level, shape) {\n    this.caches = [];\n    this.styles = [];\n    this.transformers = transformers;\n    this.lStr = '';\n    this.sh = shape;\n    this.lvl = level;\n    // TODO find if there are some cases where _isAnimated can be false.\n    // For now, since shapes add up with other shapes. They have to be calculated every time.\n    // One way of finding out is checking if all styles associated to this shape depend only of this shape\n    this._isAnimated = !!shape.k;\n    // TODO: commenting this for now since all shapes are animated\n    var i = 0;\n    var len = transformers.length;\n    while (i < len) {\n      if (transformers[i].mProps.dynamicProperties.length) {\n        this._isAnimated = true;\n        break;\n      }\n      i += 1;\n    }\n  }\n  SVGShapeData.prototype.setAsAnimated = function () {\n    this._isAnimated = true;\n  };\n\n  function SVGStyleData(data, level) {\n    this.data = data;\n    this.type = data.ty;\n    this.d = '';\n    this.lvl = level;\n    this._mdf = false;\n    this.closed = data.hd === true;\n    this.pElem = createNS('path');\n    this.msElem = null;\n  }\n  SVGStyleData.prototype.reset = function () {\n    this.d = '';\n    this._mdf = false;\n  };\n\n  function DashProperty(elem, data, renderer, container) {\n    this.elem = elem;\n    this.frameId = -1;\n    this.dataProps = createSizedArray(data.length);\n    this.renderer = renderer;\n    this.k = false;\n    this.dashStr = '';\n    this.dashArray = createTypedArray('float32', data.length ? data.length - 1 : 0);\n    this.dashoffset = createTypedArray('float32', 1);\n    this.initDynamicPropertyContainer(container);\n    var i;\n    var len = data.length || 0;\n    var prop;\n    for (i = 0; i < len; i += 1) {\n      prop = PropertyFactory.getProp(elem, data[i].v, 0, 0, this);\n      this.k = prop.k || this.k;\n      this.dataProps[i] = {\n        n: data[i].n,\n        p: prop\n      };\n    }\n    if (!this.k) {\n      this.getValue(true);\n    }\n    this._isAnimated = this.k;\n  }\n  DashProperty.prototype.getValue = function (forceRender) {\n    if (this.elem.globalData.frameId === this.frameId && !forceRender) {\n      return;\n    }\n    this.frameId = this.elem.globalData.frameId;\n    this.iterateDynamicProperties();\n    this._mdf = this._mdf || forceRender;\n    if (this._mdf) {\n      var i = 0;\n      var len = this.dataProps.length;\n      if (this.renderer === 'svg') {\n        this.dashStr = '';\n      }\n      for (i = 0; i < len; i += 1) {\n        if (this.dataProps[i].n !== 'o') {\n          if (this.renderer === 'svg') {\n            this.dashStr += ' ' + this.dataProps[i].p.v;\n          } else {\n            this.dashArray[i] = this.dataProps[i].p.v;\n          }\n        } else {\n          this.dashoffset[0] = this.dataProps[i].p.v;\n        }\n      }\n    }\n  };\n  extendPrototype([DynamicPropertyContainer], DashProperty);\n\n  function SVGStrokeStyleData(elem, data, styleOb) {\n    this.initDynamicPropertyContainer(elem);\n    this.getValue = this.iterateDynamicProperties;\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\n    this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\n    this.d = new DashProperty(elem, data.d || {}, 'svg', this);\n    this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\n    this.style = styleOb;\n    this._isAnimated = !!this._isAnimated;\n  }\n  extendPrototype([DynamicPropertyContainer], SVGStrokeStyleData);\n\n  function SVGFillStyleData(elem, data, styleOb) {\n    this.initDynamicPropertyContainer(elem);\n    this.getValue = this.iterateDynamicProperties;\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\n    this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\n    this.style = styleOb;\n  }\n  extendPrototype([DynamicPropertyContainer], SVGFillStyleData);\n\n  function SVGNoStyleData(elem, data, styleOb) {\n    this.initDynamicPropertyContainer(elem);\n    this.getValue = this.iterateDynamicProperties;\n    this.style = styleOb;\n  }\n  extendPrototype([DynamicPropertyContainer], SVGNoStyleData);\n\n  function GradientProperty(elem, data, container) {\n    this.data = data;\n    this.c = createTypedArray('uint8c', data.p * 4);\n    var cLength = data.k.k[0].s ? data.k.k[0].s.length - data.p * 4 : data.k.k.length - data.p * 4;\n    this.o = createTypedArray('float32', cLength);\n    this._cmdf = false;\n    this._omdf = false;\n    this._collapsable = this.checkCollapsable();\n    this._hasOpacity = cLength;\n    this.initDynamicPropertyContainer(container);\n    this.prop = PropertyFactory.getProp(elem, data.k, 1, null, this);\n    this.k = this.prop.k;\n    this.getValue(true);\n  }\n  GradientProperty.prototype.comparePoints = function (values, points) {\n    var i = 0;\n    var len = this.o.length / 2;\n    var diff;\n    while (i < len) {\n      diff = Math.abs(values[i * 4] - values[points * 4 + i * 2]);\n      if (diff > 0.01) {\n        return false;\n      }\n      i += 1;\n    }\n    return true;\n  };\n  GradientProperty.prototype.checkCollapsable = function () {\n    if (this.o.length / 2 !== this.c.length / 4) {\n      return false;\n    }\n    if (this.data.k.k[0].s) {\n      var i = 0;\n      var len = this.data.k.k.length;\n      while (i < len) {\n        if (!this.comparePoints(this.data.k.k[i].s, this.data.p)) {\n          return false;\n        }\n        i += 1;\n      }\n    } else if (!this.comparePoints(this.data.k.k, this.data.p)) {\n      return false;\n    }\n    return true;\n  };\n  GradientProperty.prototype.getValue = function (forceRender) {\n    this.prop.getValue();\n    this._mdf = false;\n    this._cmdf = false;\n    this._omdf = false;\n    if (this.prop._mdf || forceRender) {\n      var i;\n      var len = this.data.p * 4;\n      var mult;\n      var val;\n      for (i = 0; i < len; i += 1) {\n        mult = i % 4 === 0 ? 100 : 255;\n        val = Math.round(this.prop.v[i] * mult);\n        if (this.c[i] !== val) {\n          this.c[i] = val;\n          this._cmdf = !forceRender;\n        }\n      }\n      if (this.o.length) {\n        len = this.prop.v.length;\n        for (i = this.data.p * 4; i < len; i += 1) {\n          mult = i % 2 === 0 ? 100 : 1;\n          val = i % 2 === 0 ? Math.round(this.prop.v[i] * 100) : this.prop.v[i];\n          if (this.o[i - this.data.p * 4] !== val) {\n            this.o[i - this.data.p * 4] = val;\n            this._omdf = !forceRender;\n          }\n        }\n      }\n      this._mdf = !forceRender;\n    }\n  };\n  extendPrototype([DynamicPropertyContainer], GradientProperty);\n\n  function SVGGradientFillStyleData(elem, data, styleOb) {\n    this.initDynamicPropertyContainer(elem);\n    this.getValue = this.iterateDynamicProperties;\n    this.initGradientData(elem, data, styleOb);\n  }\n  SVGGradientFillStyleData.prototype.initGradientData = function (elem, data, styleOb) {\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\n    this.s = PropertyFactory.getProp(elem, data.s, 1, null, this);\n    this.e = PropertyFactory.getProp(elem, data.e, 1, null, this);\n    this.h = PropertyFactory.getProp(elem, data.h || {\n      k: 0\n    }, 0, 0.01, this);\n    this.a = PropertyFactory.getProp(elem, data.a || {\n      k: 0\n    }, 0, degToRads, this);\n    this.g = new GradientProperty(elem, data.g, this);\n    this.style = styleOb;\n    this.stops = [];\n    this.setGradientData(styleOb.pElem, data);\n    this.setGradientOpacity(data, styleOb);\n    this._isAnimated = !!this._isAnimated;\n  };\n  SVGGradientFillStyleData.prototype.setGradientData = function (pathElement, data) {\n    var gradientId = createElementID();\n    var gfill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\n    gfill.setAttribute('id', gradientId);\n    gfill.setAttribute('spreadMethod', 'pad');\n    gfill.setAttribute('gradientUnits', 'userSpaceOnUse');\n    var stops = [];\n    var stop;\n    var j;\n    var jLen;\n    jLen = data.g.p * 4;\n    for (j = 0; j < jLen; j += 4) {\n      stop = createNS('stop');\n      gfill.appendChild(stop);\n      stops.push(stop);\n    }\n    pathElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + getLocationHref() + '#' + gradientId + ')');\n    this.gf = gfill;\n    this.cst = stops;\n  };\n  SVGGradientFillStyleData.prototype.setGradientOpacity = function (data, styleOb) {\n    if (this.g._hasOpacity && !this.g._collapsable) {\n      var stop;\n      var j;\n      var jLen;\n      var mask = createNS('mask');\n      var maskElement = createNS('path');\n      mask.appendChild(maskElement);\n      var opacityId = createElementID();\n      var maskId = createElementID();\n      mask.setAttribute('id', maskId);\n      var opFill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\n      opFill.setAttribute('id', opacityId);\n      opFill.setAttribute('spreadMethod', 'pad');\n      opFill.setAttribute('gradientUnits', 'userSpaceOnUse');\n      jLen = data.g.k.k[0].s ? data.g.k.k[0].s.length : data.g.k.k.length;\n      var stops = this.stops;\n      for (j = data.g.p * 4; j < jLen; j += 2) {\n        stop = createNS('stop');\n        stop.setAttribute('stop-color', 'rgb(255,255,255)');\n        opFill.appendChild(stop);\n        stops.push(stop);\n      }\n      maskElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + getLocationHref() + '#' + opacityId + ')');\n      if (data.ty === 'gs') {\n        maskElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\n        maskElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\n        if (data.lj === 1) {\n          maskElement.setAttribute('stroke-miterlimit', data.ml);\n        }\n      }\n      this.of = opFill;\n      this.ms = mask;\n      this.ost = stops;\n      this.maskId = maskId;\n      styleOb.msElem = maskElement;\n    }\n  };\n  extendPrototype([DynamicPropertyContainer], SVGGradientFillStyleData);\n\n  function SVGGradientStrokeStyleData(elem, data, styleOb) {\n    this.initDynamicPropertyContainer(elem);\n    this.getValue = this.iterateDynamicProperties;\n    this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\n    this.d = new DashProperty(elem, data.d || {}, 'svg', this);\n    this.initGradientData(elem, data, styleOb);\n    this._isAnimated = !!this._isAnimated;\n  }\n  extendPrototype([SVGGradientFillStyleData, DynamicPropertyContainer], SVGGradientStrokeStyleData);\n\n  function ShapeGroupData() {\n    this.it = [];\n    this.prevViewData = [];\n    this.gr = createNS('g');\n  }\n\n  function SVGTransformData(mProps, op, container) {\n    this.transform = {\n      mProps: mProps,\n      op: op,\n      container: container\n    };\n    this.elements = [];\n    this._isAnimated = this.transform.mProps.dynamicProperties.length || this.transform.op.effectsSequence.length;\n  }\n\n  var buildShapeString = function buildShapeString(pathNodes, length, closed, mat) {\n    if (length === 0) {\n      return '';\n    }\n    var _o = pathNodes.o;\n    var _i = pathNodes.i;\n    var _v = pathNodes.v;\n    var i;\n    var shapeString = ' M' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\n    for (i = 1; i < length; i += 1) {\n      shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[i][0], _i[i][1]) + ' ' + mat.applyToPointStringified(_v[i][0], _v[i][1]);\n    }\n    if (closed && length) {\n      shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[0][0], _i[0][1]) + ' ' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\n      shapeString += 'z';\n    }\n    return shapeString;\n  };\n\n  var SVGElementsRenderer = function () {\n    var _identityMatrix = new Matrix();\n    var _matrixHelper = new Matrix();\n    var ob = {\n      createRenderFunction: createRenderFunction\n    };\n    function createRenderFunction(data) {\n      switch (data.ty) {\n        case 'fl':\n          return renderFill;\n        case 'gf':\n          return renderGradient;\n        case 'gs':\n          return renderGradientStroke;\n        case 'st':\n          return renderStroke;\n        case 'sh':\n        case 'el':\n        case 'rc':\n        case 'sr':\n          return renderPath;\n        case 'tr':\n          return renderContentTransform;\n        case 'no':\n          return renderNoop;\n        default:\n          return null;\n      }\n    }\n    function renderContentTransform(styleData, itemData, isFirstFrame) {\n      if (isFirstFrame || itemData.transform.op._mdf) {\n        itemData.transform.container.setAttribute('opacity', itemData.transform.op.v);\n      }\n      if (isFirstFrame || itemData.transform.mProps._mdf) {\n        itemData.transform.container.setAttribute('transform', itemData.transform.mProps.v.to2dCSS());\n      }\n    }\n    function renderNoop() {}\n    function renderPath(styleData, itemData, isFirstFrame) {\n      var j;\n      var jLen;\n      var pathStringTransformed;\n      var redraw;\n      var pathNodes;\n      var l;\n      var lLen = itemData.styles.length;\n      var lvl = itemData.lvl;\n      var paths;\n      var mat;\n      var iterations;\n      var k;\n      for (l = 0; l < lLen; l += 1) {\n        redraw = itemData.sh._mdf || isFirstFrame;\n        if (itemData.styles[l].lvl < lvl) {\n          mat = _matrixHelper.reset();\n          iterations = lvl - itemData.styles[l].lvl;\n          k = itemData.transformers.length - 1;\n          while (!redraw && iterations > 0) {\n            redraw = itemData.transformers[k].mProps._mdf || redraw;\n            iterations -= 1;\n            k -= 1;\n          }\n          if (redraw) {\n            iterations = lvl - itemData.styles[l].lvl;\n            k = itemData.transformers.length - 1;\n            while (iterations > 0) {\n              mat.multiply(itemData.transformers[k].mProps.v);\n              iterations -= 1;\n              k -= 1;\n            }\n          }\n        } else {\n          mat = _identityMatrix;\n        }\n        paths = itemData.sh.paths;\n        jLen = paths._length;\n        if (redraw) {\n          pathStringTransformed = '';\n          for (j = 0; j < jLen; j += 1) {\n            pathNodes = paths.shapes[j];\n            if (pathNodes && pathNodes._length) {\n              pathStringTransformed += buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\n            }\n          }\n          itemData.caches[l] = pathStringTransformed;\n        } else {\n          pathStringTransformed = itemData.caches[l];\n        }\n        itemData.styles[l].d += styleData.hd === true ? '' : pathStringTransformed;\n        itemData.styles[l]._mdf = redraw || itemData.styles[l]._mdf;\n      }\n    }\n    function renderFill(styleData, itemData, isFirstFrame) {\n      var styleElem = itemData.style;\n      if (itemData.c._mdf || isFirstFrame) {\n        styleElem.pElem.setAttribute('fill', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\n      }\n      if (itemData.o._mdf || isFirstFrame) {\n        styleElem.pElem.setAttribute('fill-opacity', itemData.o.v);\n      }\n    }\n    function renderGradientStroke(styleData, itemData, isFirstFrame) {\n      renderGradient(styleData, itemData, isFirstFrame);\n      renderStroke(styleData, itemData, isFirstFrame);\n    }\n    function renderGradient(styleData, itemData, isFirstFrame) {\n      var gfill = itemData.gf;\n      var hasOpacity = itemData.g._hasOpacity;\n      var pt1 = itemData.s.v;\n      var pt2 = itemData.e.v;\n      if (itemData.o._mdf || isFirstFrame) {\n        var attr = styleData.ty === 'gf' ? 'fill-opacity' : 'stroke-opacity';\n        itemData.style.pElem.setAttribute(attr, itemData.o.v);\n      }\n      if (itemData.s._mdf || isFirstFrame) {\n        var attr1 = styleData.t === 1 ? 'x1' : 'cx';\n        var attr2 = attr1 === 'x1' ? 'y1' : 'cy';\n        gfill.setAttribute(attr1, pt1[0]);\n        gfill.setAttribute(attr2, pt1[1]);\n        if (hasOpacity && !itemData.g._collapsable) {\n          itemData.of.setAttribute(attr1, pt1[0]);\n          itemData.of.setAttribute(attr2, pt1[1]);\n        }\n      }\n      var stops;\n      var i;\n      var len;\n      var stop;\n      if (itemData.g._cmdf || isFirstFrame) {\n        stops = itemData.cst;\n        var cValues = itemData.g.c;\n        len = stops.length;\n        for (i = 0; i < len; i += 1) {\n          stop = stops[i];\n          stop.setAttribute('offset', cValues[i * 4] + '%');\n          stop.setAttribute('stop-color', 'rgb(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ')');\n        }\n      }\n      if (hasOpacity && (itemData.g._omdf || isFirstFrame)) {\n        var oValues = itemData.g.o;\n        if (itemData.g._collapsable) {\n          stops = itemData.cst;\n        } else {\n          stops = itemData.ost;\n        }\n        len = stops.length;\n        for (i = 0; i < len; i += 1) {\n          stop = stops[i];\n          if (!itemData.g._collapsable) {\n            stop.setAttribute('offset', oValues[i * 2] + '%');\n          }\n          stop.setAttribute('stop-opacity', oValues[i * 2 + 1]);\n        }\n      }\n      if (styleData.t === 1) {\n        if (itemData.e._mdf || isFirstFrame) {\n          gfill.setAttribute('x2', pt2[0]);\n          gfill.setAttribute('y2', pt2[1]);\n          if (hasOpacity && !itemData.g._collapsable) {\n            itemData.of.setAttribute('x2', pt2[0]);\n            itemData.of.setAttribute('y2', pt2[1]);\n          }\n        }\n      } else {\n        var rad;\n        if (itemData.s._mdf || itemData.e._mdf || isFirstFrame) {\n          rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\n          gfill.setAttribute('r', rad);\n          if (hasOpacity && !itemData.g._collapsable) {\n            itemData.of.setAttribute('r', rad);\n          }\n        }\n        if (itemData.s._mdf || itemData.e._mdf || itemData.h._mdf || itemData.a._mdf || isFirstFrame) {\n          if (!rad) {\n            rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\n          }\n          var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\n          var percent = itemData.h.v;\n          if (percent >= 1) {\n            percent = 0.99;\n          } else if (percent <= -1) {\n            percent = -0.99;\n          }\n          var dist = rad * percent;\n          var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\n          var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\n          gfill.setAttribute('fx', x);\n          gfill.setAttribute('fy', y);\n          if (hasOpacity && !itemData.g._collapsable) {\n            itemData.of.setAttribute('fx', x);\n            itemData.of.setAttribute('fy', y);\n          }\n        }\n        // gfill.setAttribute('fy','200');\n      }\n    }\n    function renderStroke(styleData, itemData, isFirstFrame) {\n      var styleElem = itemData.style;\n      var d = itemData.d;\n      if (d && (d._mdf || isFirstFrame) && d.dashStr) {\n        styleElem.pElem.setAttribute('stroke-dasharray', d.dashStr);\n        styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset[0]);\n      }\n      if (itemData.c && (itemData.c._mdf || isFirstFrame)) {\n        styleElem.pElem.setAttribute('stroke', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\n      }\n      if (itemData.o._mdf || isFirstFrame) {\n        styleElem.pElem.setAttribute('stroke-opacity', itemData.o.v);\n      }\n      if (itemData.w._mdf || isFirstFrame) {\n        styleElem.pElem.setAttribute('stroke-width', itemData.w.v);\n        if (styleElem.msElem) {\n          styleElem.msElem.setAttribute('stroke-width', itemData.w.v);\n        }\n      }\n    }\n    return ob;\n  }();\n\n  function SVGShapeElement(data, globalData, comp) {\n    // List of drawable elements\n    this.shapes = [];\n    // Full shape data\n    this.shapesData = data.shapes;\n    // List of styles that will be applied to shapes\n    this.stylesList = [];\n    // List of modifiers that will be applied to shapes\n    this.shapeModifiers = [];\n    // List of items in shape tree\n    this.itemsData = [];\n    // List of items in previous shape tree\n    this.processedElements = [];\n    // List of animated components\n    this.animatedContents = [];\n    this.initElement(data, globalData, comp);\n    // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\n    // List of elements that have been created\n    this.prevViewData = [];\n    // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\n  }\n  extendPrototype([BaseElement, TransformElement, SVGBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableDOMElement], SVGShapeElement);\n  SVGShapeElement.prototype.initSecondaryElement = function () {};\n  SVGShapeElement.prototype.identityMatrix = new Matrix();\n  SVGShapeElement.prototype.buildExpressionInterface = function () {};\n  SVGShapeElement.prototype.createContent = function () {\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\n    this.filterUniqueShapes();\n  };\n\n  /*\n  This method searches for multiple shapes that affect a single element and one of them is animated\n  */\n  SVGShapeElement.prototype.filterUniqueShapes = function () {\n    var i;\n    var len = this.shapes.length;\n    var shape;\n    var j;\n    var jLen = this.stylesList.length;\n    var style;\n    var tempShapes = [];\n    var areAnimated = false;\n    for (j = 0; j < jLen; j += 1) {\n      style = this.stylesList[j];\n      areAnimated = false;\n      tempShapes.length = 0;\n      for (i = 0; i < len; i += 1) {\n        shape = this.shapes[i];\n        if (shape.styles.indexOf(style) !== -1) {\n          tempShapes.push(shape);\n          areAnimated = shape._isAnimated || areAnimated;\n        }\n      }\n      if (tempShapes.length > 1 && areAnimated) {\n        this.setShapesAsAnimated(tempShapes);\n      }\n    }\n  };\n  SVGShapeElement.prototype.setShapesAsAnimated = function (shapes) {\n    var i;\n    var len = shapes.length;\n    for (i = 0; i < len; i += 1) {\n      shapes[i].setAsAnimated();\n    }\n  };\n  SVGShapeElement.prototype.createStyleElement = function (data, level) {\n    // TODO: prevent drawing of hidden styles\n    var elementData;\n    var styleOb = new SVGStyleData(data, level);\n    var pathElement = styleOb.pElem;\n    if (data.ty === 'st') {\n      elementData = new SVGStrokeStyleData(this, data, styleOb);\n    } else if (data.ty === 'fl') {\n      elementData = new SVGFillStyleData(this, data, styleOb);\n    } else if (data.ty === 'gf' || data.ty === 'gs') {\n      var GradientConstructor = data.ty === 'gf' ? SVGGradientFillStyleData : SVGGradientStrokeStyleData;\n      elementData = new GradientConstructor(this, data, styleOb);\n      this.globalData.defs.appendChild(elementData.gf);\n      if (elementData.maskId) {\n        this.globalData.defs.appendChild(elementData.ms);\n        this.globalData.defs.appendChild(elementData.of);\n        pathElement.setAttribute('mask', 'url(' + getLocationHref() + '#' + elementData.maskId + ')');\n      }\n    } else if (data.ty === 'no') {\n      elementData = new SVGNoStyleData(this, data, styleOb);\n    }\n    if (data.ty === 'st' || data.ty === 'gs') {\n      pathElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\n      pathElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\n      pathElement.setAttribute('fill-opacity', '0');\n      if (data.lj === 1) {\n        pathElement.setAttribute('stroke-miterlimit', data.ml);\n      }\n    }\n    if (data.r === 2) {\n      pathElement.setAttribute('fill-rule', 'evenodd');\n    }\n    if (data.ln) {\n      pathElement.setAttribute('id', data.ln);\n    }\n    if (data.cl) {\n      pathElement.setAttribute('class', data.cl);\n    }\n    if (data.bm) {\n      pathElement.style['mix-blend-mode'] = getBlendMode(data.bm);\n    }\n    this.stylesList.push(styleOb);\n    this.addToAnimatedContents(data, elementData);\n    return elementData;\n  };\n  SVGShapeElement.prototype.createGroupElement = function (data) {\n    var elementData = new ShapeGroupData();\n    if (data.ln) {\n      elementData.gr.setAttribute('id', data.ln);\n    }\n    if (data.cl) {\n      elementData.gr.setAttribute('class', data.cl);\n    }\n    if (data.bm) {\n      elementData.gr.style['mix-blend-mode'] = getBlendMode(data.bm);\n    }\n    return elementData;\n  };\n  SVGShapeElement.prototype.createTransformElement = function (data, container) {\n    var transformProperty = TransformPropertyFactory.getTransformProperty(this, data, this);\n    var elementData = new SVGTransformData(transformProperty, transformProperty.o, container);\n    this.addToAnimatedContents(data, elementData);\n    return elementData;\n  };\n  SVGShapeElement.prototype.createShapeElement = function (data, ownTransformers, level) {\n    var ty = 4;\n    if (data.ty === 'rc') {\n      ty = 5;\n    } else if (data.ty === 'el') {\n      ty = 6;\n    } else if (data.ty === 'sr') {\n      ty = 7;\n    }\n    var shapeProperty = ShapePropertyFactory.getShapeProp(this, data, ty, this);\n    var elementData = new SVGShapeData(ownTransformers, level, shapeProperty);\n    this.shapes.push(elementData);\n    this.addShapeToModifiers(elementData);\n    this.addToAnimatedContents(data, elementData);\n    return elementData;\n  };\n  SVGShapeElement.prototype.addToAnimatedContents = function (data, element) {\n    var i = 0;\n    var len = this.animatedContents.length;\n    while (i < len) {\n      if (this.animatedContents[i].element === element) {\n        return;\n      }\n      i += 1;\n    }\n    this.animatedContents.push({\n      fn: SVGElementsRenderer.createRenderFunction(data),\n      element: element,\n      data: data\n    });\n  };\n  SVGShapeElement.prototype.setElementStyles = function (elementData) {\n    var arr = elementData.styles;\n    var j;\n    var jLen = this.stylesList.length;\n    for (j = 0; j < jLen; j += 1) {\n      if (arr.indexOf(this.stylesList[j]) === -1 && !this.stylesList[j].closed) {\n        arr.push(this.stylesList[j]);\n      }\n    }\n  };\n  SVGShapeElement.prototype.reloadShapes = function () {\n    this._isFirstFrame = true;\n    var i;\n    var len = this.itemsData.length;\n    for (i = 0; i < len; i += 1) {\n      this.prevViewData[i] = this.itemsData[i];\n    }\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\n    this.filterUniqueShapes();\n    len = this.dynamicProperties.length;\n    for (i = 0; i < len; i += 1) {\n      this.dynamicProperties[i].getValue();\n    }\n    this.renderModifiers();\n  };\n  SVGShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, container, level, transformers, render) {\n    var ownTransformers = [].concat(transformers);\n    var i;\n    var len = arr.length - 1;\n    var j;\n    var jLen;\n    var ownStyles = [];\n    var ownModifiers = [];\n    var currentTransform;\n    var modifier;\n    var processedPos;\n    for (i = len; i >= 0; i -= 1) {\n      processedPos = this.searchProcessedElement(arr[i]);\n      if (!processedPos) {\n        arr[i]._render = render;\n      } else {\n        itemsData[i] = prevViewData[processedPos - 1];\n      }\n      if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs' || arr[i].ty === 'no') {\n        if (!processedPos) {\n          itemsData[i] = this.createStyleElement(arr[i], level);\n        } else {\n          itemsData[i].style.closed = arr[i].hd;\n        }\n        if (arr[i]._render) {\n          if (itemsData[i].style.pElem.parentNode !== container) {\n            container.appendChild(itemsData[i].style.pElem);\n          }\n        }\n        ownStyles.push(itemsData[i].style);\n      } else if (arr[i].ty === 'gr') {\n        if (!processedPos) {\n          itemsData[i] = this.createGroupElement(arr[i]);\n        } else {\n          jLen = itemsData[i].it.length;\n          for (j = 0; j < jLen; j += 1) {\n            itemsData[i].prevViewData[j] = itemsData[i].it[j];\n          }\n        }\n        this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, itemsData[i].gr, level + 1, ownTransformers, render);\n        if (arr[i]._render) {\n          if (itemsData[i].gr.parentNode !== container) {\n            container.appendChild(itemsData[i].gr);\n          }\n        }\n      } else if (arr[i].ty === 'tr') {\n        if (!processedPos) {\n          itemsData[i] = this.createTransformElement(arr[i], container);\n        }\n        currentTransform = itemsData[i].transform;\n        ownTransformers.push(currentTransform);\n      } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\n        if (!processedPos) {\n          itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level);\n        }\n        this.setElementStyles(itemsData[i]);\n      } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'ms' || arr[i].ty === 'pb' || arr[i].ty === 'zz' || arr[i].ty === 'op') {\n        if (!processedPos) {\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\n          modifier.init(this, arr[i]);\n          itemsData[i] = modifier;\n          this.shapeModifiers.push(modifier);\n        } else {\n          modifier = itemsData[i];\n          modifier.closed = false;\n        }\n        ownModifiers.push(modifier);\n      } else if (arr[i].ty === 'rp') {\n        if (!processedPos) {\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\n          itemsData[i] = modifier;\n          modifier.init(this, arr, i, itemsData);\n          this.shapeModifiers.push(modifier);\n          render = false;\n        } else {\n          modifier = itemsData[i];\n          modifier.closed = true;\n        }\n        ownModifiers.push(modifier);\n      }\n      this.addProcessedElement(arr[i], i + 1);\n    }\n    len = ownStyles.length;\n    for (i = 0; i < len; i += 1) {\n      ownStyles[i].closed = true;\n    }\n    len = ownModifiers.length;\n    for (i = 0; i < len; i += 1) {\n      ownModifiers[i].closed = true;\n    }\n  };\n  SVGShapeElement.prototype.renderInnerContent = function () {\n    this.renderModifiers();\n    var i;\n    var len = this.stylesList.length;\n    for (i = 0; i < len; i += 1) {\n      this.stylesList[i].reset();\n    }\n    this.renderShape();\n    for (i = 0; i < len; i += 1) {\n      if (this.stylesList[i]._mdf || this._isFirstFrame) {\n        if (this.stylesList[i].msElem) {\n          this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d);\n          // Adding M0 0 fixes same mask bug on all browsers\n          this.stylesList[i].d = 'M0 0' + this.stylesList[i].d;\n        }\n        this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d || 'M0 0');\n      }\n    }\n  };\n  SVGShapeElement.prototype.renderShape = function () {\n    var i;\n    var len = this.animatedContents.length;\n    var animatedContent;\n    for (i = 0; i < len; i += 1) {\n      animatedContent = this.animatedContents[i];\n      if ((this._isFirstFrame || animatedContent.element._isAnimated) && animatedContent.data !== true) {\n        animatedContent.fn(animatedContent.data, animatedContent.element, this._isFirstFrame);\n      }\n    }\n  };\n  SVGShapeElement.prototype.destroy = function () {\n    this.destroyBaseElement();\n    this.shapesData = null;\n    this.itemsData = null;\n  };\n\n  function LetterProps(o, sw, sc, fc, m, p) {\n    this.o = o;\n    this.sw = sw;\n    this.sc = sc;\n    this.fc = fc;\n    this.m = m;\n    this.p = p;\n    this._mdf = {\n      o: true,\n      sw: !!sw,\n      sc: !!sc,\n      fc: !!fc,\n      m: true,\n      p: true\n    };\n  }\n  LetterProps.prototype.update = function (o, sw, sc, fc, m, p) {\n    this._mdf.o = false;\n    this._mdf.sw = false;\n    this._mdf.sc = false;\n    this._mdf.fc = false;\n    this._mdf.m = false;\n    this._mdf.p = false;\n    var updated = false;\n    if (this.o !== o) {\n      this.o = o;\n      this._mdf.o = true;\n      updated = true;\n    }\n    if (this.sw !== sw) {\n      this.sw = sw;\n      this._mdf.sw = true;\n      updated = true;\n    }\n    if (this.sc !== sc) {\n      this.sc = sc;\n      this._mdf.sc = true;\n      updated = true;\n    }\n    if (this.fc !== fc) {\n      this.fc = fc;\n      this._mdf.fc = true;\n      updated = true;\n    }\n    if (this.m !== m) {\n      this.m = m;\n      this._mdf.m = true;\n      updated = true;\n    }\n    if (p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\n      this.p = p;\n      this._mdf.p = true;\n      updated = true;\n    }\n    return updated;\n  };\n\n  function TextProperty(elem, data) {\n    this._frameId = initialDefaultFrame;\n    this.pv = '';\n    this.v = '';\n    this.kf = false;\n    this._isFirstFrame = true;\n    this._mdf = false;\n    if (data.d && data.d.sid) {\n      data.d = elem.globalData.slotManager.getProp(data.d);\n    }\n    this.data = data;\n    this.elem = elem;\n    this.comp = this.elem.comp;\n    this.keysIndex = 0;\n    this.canResize = false;\n    this.minimumFontSize = 1;\n    this.effectsSequence = [];\n    this.currentData = {\n      ascent: 0,\n      boxWidth: this.defaultBoxWidth,\n      f: '',\n      fStyle: '',\n      fWeight: '',\n      fc: '',\n      j: '',\n      justifyOffset: '',\n      l: [],\n      lh: 0,\n      lineWidths: [],\n      ls: '',\n      of: '',\n      s: '',\n      sc: '',\n      sw: 0,\n      t: 0,\n      tr: 0,\n      sz: 0,\n      ps: null,\n      fillColorAnim: false,\n      strokeColorAnim: false,\n      strokeWidthAnim: false,\n      yOffset: 0,\n      finalSize: 0,\n      finalText: [],\n      finalLineHeight: 0,\n      __complete: false\n    };\n    this.copyData(this.currentData, this.data.d.k[0].s);\n    if (!this.searchProperty()) {\n      this.completeTextData(this.currentData);\n    }\n  }\n  TextProperty.prototype.defaultBoxWidth = [0, 0];\n  TextProperty.prototype.copyData = function (obj, data) {\n    for (var s in data) {\n      if (Object.prototype.hasOwnProperty.call(data, s)) {\n        obj[s] = data[s];\n      }\n    }\n    return obj;\n  };\n  TextProperty.prototype.setCurrentData = function (data) {\n    if (!data.__complete) {\n      this.completeTextData(data);\n    }\n    this.currentData = data;\n    this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth;\n    this._mdf = true;\n  };\n  TextProperty.prototype.searchProperty = function () {\n    return this.searchKeyframes();\n  };\n  TextProperty.prototype.searchKeyframes = function () {\n    this.kf = this.data.d.k.length > 1;\n    if (this.kf) {\n      this.addEffect(this.getKeyframeValue.bind(this));\n    }\n    return this.kf;\n  };\n  TextProperty.prototype.addEffect = function (effectFunction) {\n    this.effectsSequence.push(effectFunction);\n    this.elem.addDynamicProperty(this);\n  };\n  TextProperty.prototype.getValue = function (_finalValue) {\n    if ((this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) && !_finalValue) {\n      return;\n    }\n    this.currentData.t = this.data.d.k[this.keysIndex].s.t;\n    var currentValue = this.currentData;\n    var currentIndex = this.keysIndex;\n    if (this.lock) {\n      this.setCurrentData(this.currentData);\n      return;\n    }\n    this.lock = true;\n    this._mdf = false;\n    var i;\n    var len = this.effectsSequence.length;\n    var finalValue = _finalValue || this.data.d.k[this.keysIndex].s;\n    for (i = 0; i < len; i += 1) {\n      // Checking if index changed to prevent creating a new object every time the expression updates.\n      if (currentIndex !== this.keysIndex) {\n        finalValue = this.effectsSequence[i](finalValue, finalValue.t);\n      } else {\n        finalValue = this.effectsSequence[i](this.currentData, finalValue.t);\n      }\n    }\n    if (currentValue !== finalValue) {\n      this.setCurrentData(finalValue);\n    }\n    this.v = this.currentData;\n    this.pv = this.v;\n    this.lock = false;\n    this.frameId = this.elem.globalData.frameId;\n  };\n  TextProperty.prototype.getKeyframeValue = function () {\n    var textKeys = this.data.d.k;\n    var frameNum = this.elem.comp.renderedFrame;\n    var i = 0;\n    var len = textKeys.length;\n    while (i <= len - 1) {\n      if (i === len - 1 || textKeys[i + 1].t > frameNum) {\n        break;\n      }\n      i += 1;\n    }\n    if (this.keysIndex !== i) {\n      this.keysIndex = i;\n    }\n    return this.data.d.k[this.keysIndex].s;\n  };\n  TextProperty.prototype.buildFinalText = function (text) {\n    var charactersArray = [];\n    var i = 0;\n    var len = text.length;\n    var charCode;\n    var secondCharCode;\n    var shouldCombine = false;\n    var shouldCombineNext = false;\n    var currentChars = '';\n    while (i < len) {\n      shouldCombine = shouldCombineNext;\n      shouldCombineNext = false;\n      charCode = text.charCodeAt(i);\n      currentChars = text.charAt(i);\n      if (FontManager.isCombinedCharacter(charCode)) {\n        shouldCombine = true;\n        // It's a potential surrogate pair (this is the High surrogate)\n      } else if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n        if (FontManager.isRegionalFlag(text, i)) {\n          currentChars = text.substr(i, 14);\n        } else {\n          secondCharCode = text.charCodeAt(i + 1);\n          // It's a surrogate pair (this is the Low surrogate)\n          if (secondCharCode >= 0xDC00 && secondCharCode <= 0xDFFF) {\n            if (FontManager.isModifier(charCode, secondCharCode)) {\n              currentChars = text.substr(i, 2);\n              shouldCombine = true;\n            } else if (FontManager.isFlagEmoji(text.substr(i, 4))) {\n              currentChars = text.substr(i, 4);\n            } else {\n              currentChars = text.substr(i, 2);\n            }\n          }\n        }\n      } else if (charCode > 0xDBFF) {\n        secondCharCode = text.charCodeAt(i + 1);\n        if (FontManager.isVariationSelector(charCode)) {\n          shouldCombine = true;\n        }\n      } else if (FontManager.isZeroWidthJoiner(charCode)) {\n        shouldCombine = true;\n        shouldCombineNext = true;\n      }\n      if (shouldCombine) {\n        charactersArray[charactersArray.length - 1] += currentChars;\n        shouldCombine = false;\n      } else {\n        charactersArray.push(currentChars);\n      }\n      i += currentChars.length;\n    }\n    return charactersArray;\n  };\n  TextProperty.prototype.completeTextData = function (documentData) {\n    documentData.__complete = true;\n    var fontManager = this.elem.globalData.fontManager;\n    var data = this.data;\n    var letters = [];\n    var i;\n    var len;\n    var newLineFlag;\n    var index = 0;\n    var val;\n    var anchorGrouping = data.m.g;\n    var currentSize = 0;\n    var currentPos = 0;\n    var currentLine = 0;\n    var lineWidths = [];\n    var lineWidth = 0;\n    var maxLineWidth = 0;\n    var j;\n    var jLen;\n    var fontData = fontManager.getFontByName(documentData.f);\n    var charData;\n    var cLength = 0;\n    var fontProps = getFontProperties(fontData);\n    documentData.fWeight = fontProps.weight;\n    documentData.fStyle = fontProps.style;\n    documentData.finalSize = documentData.s;\n    documentData.finalText = this.buildFinalText(documentData.t);\n    len = documentData.finalText.length;\n    documentData.finalLineHeight = documentData.lh;\n    var trackingOffset = documentData.tr / 1000 * documentData.finalSize;\n    var charCode;\n    if (documentData.sz) {\n      var flag = true;\n      var boxWidth = documentData.sz[0];\n      var boxHeight = documentData.sz[1];\n      var currentHeight;\n      var finalText;\n      while (flag) {\n        finalText = this.buildFinalText(documentData.t);\n        currentHeight = 0;\n        lineWidth = 0;\n        len = finalText.length;\n        trackingOffset = documentData.tr / 1000 * documentData.finalSize;\n        var lastSpaceIndex = -1;\n        for (i = 0; i < len; i += 1) {\n          charCode = finalText[i].charCodeAt(0);\n          newLineFlag = false;\n          if (finalText[i] === ' ') {\n            lastSpaceIndex = i;\n          } else if (charCode === 13 || charCode === 3) {\n            lineWidth = 0;\n            newLineFlag = true;\n            currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\n          }\n          if (fontManager.chars) {\n            charData = fontManager.getCharData(finalText[i], fontData.fStyle, fontData.fFamily);\n            cLength = newLineFlag ? 0 : charData.w * documentData.finalSize / 100;\n          } else {\n            // tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\n            cLength = fontManager.measureText(finalText[i], documentData.f, documentData.finalSize);\n          }\n          if (lineWidth + cLength > boxWidth && finalText[i] !== ' ') {\n            if (lastSpaceIndex === -1) {\n              len += 1;\n            } else {\n              i = lastSpaceIndex;\n            }\n            currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\n            finalText.splice(i, lastSpaceIndex === i ? 1 : 0, '\\r');\n            // finalText = finalText.substr(0,i) + \"\\r\" + finalText.substr(i === lastSpaceIndex ? i + 1 : i);\n            lastSpaceIndex = -1;\n            lineWidth = 0;\n          } else {\n            lineWidth += cLength;\n            lineWidth += trackingOffset;\n          }\n        }\n        currentHeight += fontData.ascent * documentData.finalSize / 100;\n        if (this.canResize && documentData.finalSize > this.minimumFontSize && boxHeight < currentHeight) {\n          documentData.finalSize -= 1;\n          documentData.finalLineHeight = documentData.finalSize * documentData.lh / documentData.s;\n        } else {\n          documentData.finalText = finalText;\n          len = documentData.finalText.length;\n          flag = false;\n        }\n      }\n    }\n    lineWidth = -trackingOffset;\n    cLength = 0;\n    var uncollapsedSpaces = 0;\n    var currentChar;\n    for (i = 0; i < len; i += 1) {\n      newLineFlag = false;\n      currentChar = documentData.finalText[i];\n      charCode = currentChar.charCodeAt(0);\n      if (charCode === 13 || charCode === 3) {\n        uncollapsedSpaces = 0;\n        lineWidths.push(lineWidth);\n        maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\n        lineWidth = -2 * trackingOffset;\n        val = '';\n        newLineFlag = true;\n        currentLine += 1;\n      } else {\n        val = currentChar;\n      }\n      if (fontManager.chars) {\n        charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\n        cLength = newLineFlag ? 0 : charData.w * documentData.finalSize / 100;\n      } else {\n        // var charWidth = fontManager.measureText(val, documentData.f, documentData.finalSize);\n        // tCanvasHelper.font = documentData.finalSize + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\n        cLength = fontManager.measureText(val, documentData.f, documentData.finalSize);\n      }\n\n      //\n      if (currentChar === ' ') {\n        uncollapsedSpaces += cLength + trackingOffset;\n      } else {\n        lineWidth += cLength + trackingOffset + uncollapsedSpaces;\n        uncollapsedSpaces = 0;\n      }\n      letters.push({\n        l: cLength,\n        an: cLength,\n        add: currentSize,\n        n: newLineFlag,\n        anIndexes: [],\n        val: val,\n        line: currentLine,\n        animatorJustifyOffset: 0\n      });\n      if (anchorGrouping == 2) {\n        // eslint-disable-line eqeqeq\n        currentSize += cLength;\n        if (val === '' || val === ' ' || i === len - 1) {\n          if (val === '' || val === ' ') {\n            currentSize -= cLength;\n          }\n          while (currentPos <= i) {\n            letters[currentPos].an = currentSize;\n            letters[currentPos].ind = index;\n            letters[currentPos].extra = cLength;\n            currentPos += 1;\n          }\n          index += 1;\n          currentSize = 0;\n        }\n      } else if (anchorGrouping == 3) {\n        // eslint-disable-line eqeqeq\n        currentSize += cLength;\n        if (val === '' || i === len - 1) {\n          if (val === '') {\n            currentSize -= cLength;\n          }\n          while (currentPos <= i) {\n            letters[currentPos].an = currentSize;\n            letters[currentPos].ind = index;\n            letters[currentPos].extra = cLength;\n            currentPos += 1;\n          }\n          currentSize = 0;\n          index += 1;\n        }\n      } else {\n        letters[index].ind = index;\n        letters[index].extra = 0;\n        index += 1;\n      }\n    }\n    documentData.l = letters;\n    maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\n    lineWidths.push(lineWidth);\n    if (documentData.sz) {\n      documentData.boxWidth = documentData.sz[0];\n      documentData.justifyOffset = 0;\n    } else {\n      documentData.boxWidth = maxLineWidth;\n      switch (documentData.j) {\n        case 1:\n          documentData.justifyOffset = -documentData.boxWidth;\n          break;\n        case 2:\n          documentData.justifyOffset = -documentData.boxWidth / 2;\n          break;\n        default:\n          documentData.justifyOffset = 0;\n      }\n    }\n    documentData.lineWidths = lineWidths;\n    var animators = data.a;\n    var animatorData;\n    var letterData;\n    jLen = animators.length;\n    var based;\n    var ind;\n    var indexes = [];\n    for (j = 0; j < jLen; j += 1) {\n      animatorData = animators[j];\n      if (animatorData.a.sc) {\n        documentData.strokeColorAnim = true;\n      }\n      if (animatorData.a.sw) {\n        documentData.strokeWidthAnim = true;\n      }\n      if (animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb) {\n        documentData.fillColorAnim = true;\n      }\n      ind = 0;\n      based = animatorData.s.b;\n      for (i = 0; i < len; i += 1) {\n        letterData = letters[i];\n        letterData.anIndexes[j] = ind;\n        if (based == 1 && letterData.val !== '' || based == 2 && letterData.val !== '' && letterData.val !== ' ' || based == 3 && (letterData.n || letterData.val == ' ' || i == len - 1) || based == 4 && (letterData.n || i == len - 1)) {\n          // eslint-disable-line eqeqeq\n          if (animatorData.s.rn === 1) {\n            indexes.push(ind);\n          }\n          ind += 1;\n        }\n      }\n      data.a[j].s.totalChars = ind;\n      var currentInd = -1;\n      var newInd;\n      if (animatorData.s.rn === 1) {\n        for (i = 0; i < len; i += 1) {\n          letterData = letters[i];\n          if (currentInd != letterData.anIndexes[j]) {\n            // eslint-disable-line eqeqeq\n            currentInd = letterData.anIndexes[j];\n            newInd = indexes.splice(Math.floor(Math.random() * indexes.length), 1)[0];\n          }\n          letterData.anIndexes[j] = newInd;\n        }\n      }\n    }\n    documentData.yOffset = documentData.finalLineHeight || documentData.finalSize * 1.2;\n    documentData.ls = documentData.ls || 0;\n    documentData.ascent = fontData.ascent * documentData.finalSize / 100;\n  };\n  TextProperty.prototype.updateDocumentData = function (newData, index) {\n    index = index === undefined ? this.keysIndex : index;\n    var dData = this.copyData({}, this.data.d.k[index].s);\n    dData = this.copyData(dData, newData);\n    this.data.d.k[index].s = dData;\n    this.recalculate(index);\n    this.setCurrentData(dData);\n    this.elem.addDynamicProperty(this);\n  };\n  TextProperty.prototype.recalculate = function (index) {\n    var dData = this.data.d.k[index].s;\n    dData.__complete = false;\n    this.keysIndex = 0;\n    this._isFirstFrame = true;\n    this.getValue(dData);\n  };\n  TextProperty.prototype.canResizeFont = function (_canResize) {\n    this.canResize = _canResize;\n    this.recalculate(this.keysIndex);\n    this.elem.addDynamicProperty(this);\n  };\n  TextProperty.prototype.setMinimumFontSize = function (_fontValue) {\n    this.minimumFontSize = Math.floor(_fontValue) || 1;\n    this.recalculate(this.keysIndex);\n    this.elem.addDynamicProperty(this);\n  };\n\n  var TextSelectorProp = function () {\n    var max = Math.max;\n    var min = Math.min;\n    var floor = Math.floor;\n    function TextSelectorPropFactory(elem, data) {\n      this._currentTextLength = -1;\n      this.k = false;\n      this.data = data;\n      this.elem = elem;\n      this.comp = elem.comp;\n      this.finalS = 0;\n      this.finalE = 0;\n      this.initDynamicPropertyContainer(elem);\n      this.s = PropertyFactory.getProp(elem, data.s || {\n        k: 0\n      }, 0, 0, this);\n      if ('e' in data) {\n        this.e = PropertyFactory.getProp(elem, data.e, 0, 0, this);\n      } else {\n        this.e = {\n          v: 100\n        };\n      }\n      this.o = PropertyFactory.getProp(elem, data.o || {\n        k: 0\n      }, 0, 0, this);\n      this.xe = PropertyFactory.getProp(elem, data.xe || {\n        k: 0\n      }, 0, 0, this);\n      this.ne = PropertyFactory.getProp(elem, data.ne || {\n        k: 0\n      }, 0, 0, this);\n      this.sm = PropertyFactory.getProp(elem, data.sm || {\n        k: 100\n      }, 0, 0, this);\n      this.a = PropertyFactory.getProp(elem, data.a, 0, 0.01, this);\n      if (!this.dynamicProperties.length) {\n        this.getValue();\n      }\n    }\n    TextSelectorPropFactory.prototype = {\n      getMult: function getMult(ind) {\n        if (this._currentTextLength !== this.elem.textProperty.currentData.l.length) {\n          this.getValue();\n        }\n        var x1 = 0;\n        var y1 = 0;\n        var x2 = 1;\n        var y2 = 1;\n        if (this.ne.v > 0) {\n          x1 = this.ne.v / 100.0;\n        } else {\n          y1 = -this.ne.v / 100.0;\n        }\n        if (this.xe.v > 0) {\n          x2 = 1.0 - this.xe.v / 100.0;\n        } else {\n          y2 = 1.0 + this.xe.v / 100.0;\n        }\n        var easer = BezierFactory.getBezierEasing(x1, y1, x2, y2).get;\n        var mult = 0;\n        var s = this.finalS;\n        var e = this.finalE;\n        var type = this.data.sh;\n        if (type === 2) {\n          if (e === s) {\n            mult = ind >= e ? 1 : 0;\n          } else {\n            mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\n          }\n          mult = easer(mult);\n        } else if (type === 3) {\n          if (e === s) {\n            mult = ind >= e ? 0 : 1;\n          } else {\n            mult = 1 - max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\n          }\n          mult = easer(mult);\n        } else if (type === 4) {\n          if (e === s) {\n            mult = 0;\n          } else {\n            mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\n            if (mult < 0.5) {\n              mult *= 2;\n            } else {\n              mult = 1 - 2 * (mult - 0.5);\n            }\n          }\n          mult = easer(mult);\n        } else if (type === 5) {\n          if (e === s) {\n            mult = 0;\n          } else {\n            var tot = e - s;\n            /* ind += 0.5;\n                      mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind; */\n            ind = min(max(0, ind + 0.5 - s), e - s);\n            var x = -tot / 2 + ind;\n            var a = tot / 2;\n            mult = Math.sqrt(1 - x * x / (a * a));\n          }\n          mult = easer(mult);\n        } else if (type === 6) {\n          if (e === s) {\n            mult = 0;\n          } else {\n            ind = min(max(0, ind + 0.5 - s), e - s);\n            mult = (1 + Math.cos(Math.PI + Math.PI * 2 * ind / (e - s))) / 2; // eslint-disable-line\n          }\n          mult = easer(mult);\n        } else {\n          if (ind >= floor(s)) {\n            if (ind - s < 0) {\n              mult = max(0, min(min(e, 1) - (s - ind), 1));\n            } else {\n              mult = max(0, min(e - ind, 1));\n            }\n          }\n          mult = easer(mult);\n        }\n        // Smoothness implementation.\n        // The smoothness represents a reduced range of the original [0; 1] range.\n        // if smoothness is 25%, the new range will be [0.375; 0.625]\n        // Steps are:\n        // - find the lower value of the new range (threshold)\n        // - if multiplier is smaller than that value, floor it to 0\n        // - if it is larger,\n        //     - subtract the threshold\n        //     - divide it by the smoothness (this will return the range to [0; 1])\n        // Note: If it doesn't work on some scenarios, consider applying it before the easer.\n        if (this.sm.v !== 100) {\n          var smoothness = this.sm.v * 0.01;\n          if (smoothness === 0) {\n            smoothness = 0.00000001;\n          }\n          var threshold = 0.5 - smoothness * 0.5;\n          if (mult < threshold) {\n            mult = 0;\n          } else {\n            mult = (mult - threshold) / smoothness;\n            if (mult > 1) {\n              mult = 1;\n            }\n          }\n        }\n        return mult * this.a.v;\n      },\n      getValue: function getValue(newCharsFlag) {\n        this.iterateDynamicProperties();\n        this._mdf = newCharsFlag || this._mdf;\n        this._currentTextLength = this.elem.textProperty.currentData.l.length || 0;\n        if (newCharsFlag && this.data.r === 2) {\n          this.e.v = this._currentTextLength;\n        }\n        var divisor = this.data.r === 2 ? 1 : 100 / this.data.totalChars;\n        var o = this.o.v / divisor;\n        var s = this.s.v / divisor + o;\n        var e = this.e.v / divisor + o;\n        if (s > e) {\n          var _s = s;\n          s = e;\n          e = _s;\n        }\n        this.finalS = s;\n        this.finalE = e;\n      }\n    };\n    extendPrototype([DynamicPropertyContainer], TextSelectorPropFactory);\n    function getTextSelectorProp(elem, data, arr) {\n      return new TextSelectorPropFactory(elem, data, arr);\n    }\n    return {\n      getTextSelectorProp: getTextSelectorProp\n    };\n  }();\n\n  function TextAnimatorDataProperty(elem, animatorProps, container) {\n    var defaultData = {\n      propType: false\n    };\n    var getProp = PropertyFactory.getProp;\n    var textAnimatorAnimatables = animatorProps.a;\n    this.a = {\n      r: textAnimatorAnimatables.r ? getProp(elem, textAnimatorAnimatables.r, 0, degToRads, container) : defaultData,\n      rx: textAnimatorAnimatables.rx ? getProp(elem, textAnimatorAnimatables.rx, 0, degToRads, container) : defaultData,\n      ry: textAnimatorAnimatables.ry ? getProp(elem, textAnimatorAnimatables.ry, 0, degToRads, container) : defaultData,\n      sk: textAnimatorAnimatables.sk ? getProp(elem, textAnimatorAnimatables.sk, 0, degToRads, container) : defaultData,\n      sa: textAnimatorAnimatables.sa ? getProp(elem, textAnimatorAnimatables.sa, 0, degToRads, container) : defaultData,\n      s: textAnimatorAnimatables.s ? getProp(elem, textAnimatorAnimatables.s, 1, 0.01, container) : defaultData,\n      a: textAnimatorAnimatables.a ? getProp(elem, textAnimatorAnimatables.a, 1, 0, container) : defaultData,\n      o: textAnimatorAnimatables.o ? getProp(elem, textAnimatorAnimatables.o, 0, 0.01, container) : defaultData,\n      p: textAnimatorAnimatables.p ? getProp(elem, textAnimatorAnimatables.p, 1, 0, container) : defaultData,\n      sw: textAnimatorAnimatables.sw ? getProp(elem, textAnimatorAnimatables.sw, 0, 0, container) : defaultData,\n      sc: textAnimatorAnimatables.sc ? getProp(elem, textAnimatorAnimatables.sc, 1, 0, container) : defaultData,\n      fc: textAnimatorAnimatables.fc ? getProp(elem, textAnimatorAnimatables.fc, 1, 0, container) : defaultData,\n      fh: textAnimatorAnimatables.fh ? getProp(elem, textAnimatorAnimatables.fh, 0, 0, container) : defaultData,\n      fs: textAnimatorAnimatables.fs ? getProp(elem, textAnimatorAnimatables.fs, 0, 0.01, container) : defaultData,\n      fb: textAnimatorAnimatables.fb ? getProp(elem, textAnimatorAnimatables.fb, 0, 0.01, container) : defaultData,\n      t: textAnimatorAnimatables.t ? getProp(elem, textAnimatorAnimatables.t, 0, 0, container) : defaultData\n    };\n    this.s = TextSelectorProp.getTextSelectorProp(elem, animatorProps.s, container);\n    this.s.t = animatorProps.s.t;\n  }\n\n  function TextAnimatorProperty(textData, renderType, elem) {\n    this._isFirstFrame = true;\n    this._hasMaskedPath = false;\n    this._frameId = -1;\n    this._textData = textData;\n    this._renderType = renderType;\n    this._elem = elem;\n    this._animatorsData = createSizedArray(this._textData.a.length);\n    this._pathData = {};\n    this._moreOptions = {\n      alignment: {}\n    };\n    this.renderedLetters = [];\n    this.lettersChangedFlag = false;\n    this.initDynamicPropertyContainer(elem);\n  }\n  TextAnimatorProperty.prototype.searchProperties = function () {\n    var i;\n    var len = this._textData.a.length;\n    var animatorProps;\n    var getProp = PropertyFactory.getProp;\n    for (i = 0; i < len; i += 1) {\n      animatorProps = this._textData.a[i];\n      this._animatorsData[i] = new TextAnimatorDataProperty(this._elem, animatorProps, this);\n    }\n    if (this._textData.p && 'm' in this._textData.p) {\n      this._pathData = {\n        a: getProp(this._elem, this._textData.p.a, 0, 0, this),\n        f: getProp(this._elem, this._textData.p.f, 0, 0, this),\n        l: getProp(this._elem, this._textData.p.l, 0, 0, this),\n        r: getProp(this._elem, this._textData.p.r, 0, 0, this),\n        p: getProp(this._elem, this._textData.p.p, 0, 0, this),\n        m: this._elem.maskManager.getMaskProperty(this._textData.p.m)\n      };\n      this._hasMaskedPath = true;\n    } else {\n      this._hasMaskedPath = false;\n    }\n    this._moreOptions.alignment = getProp(this._elem, this._textData.m.a, 1, 0, this);\n  };\n  TextAnimatorProperty.prototype.getMeasures = function (documentData, lettersChangedFlag) {\n    this.lettersChangedFlag = lettersChangedFlag;\n    if (!this._mdf && !this._isFirstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m._mdf)) {\n      return;\n    }\n    this._isFirstFrame = false;\n    var alignment = this._moreOptions.alignment.v;\n    var animators = this._animatorsData;\n    var textData = this._textData;\n    var matrixHelper = this.mHelper;\n    var renderType = this._renderType;\n    var renderedLettersCount = this.renderedLetters.length;\n    var xPos;\n    var yPos;\n    var i;\n    var len;\n    var letters = documentData.l;\n    var pathInfo;\n    var currentLength;\n    var currentPoint;\n    var segmentLength;\n    var flag;\n    var pointInd;\n    var segmentInd;\n    var prevPoint;\n    var points;\n    var segments;\n    var partialLength;\n    var totalLength;\n    var perc;\n    var tanAngle;\n    var mask;\n    if (this._hasMaskedPath) {\n      mask = this._pathData.m;\n      if (!this._pathData.n || this._pathData._mdf) {\n        var paths = mask.v;\n        if (this._pathData.r.v) {\n          paths = paths.reverse();\n        }\n        // TODO: release bezier data cached from previous pathInfo: this._pathData.pi\n        pathInfo = {\n          tLength: 0,\n          segments: []\n        };\n        len = paths._length - 1;\n        var bezierData;\n        totalLength = 0;\n        for (i = 0; i < len; i += 1) {\n          bezierData = bez.buildBezierData(paths.v[i], paths.v[i + 1], [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]], [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]);\n          pathInfo.tLength += bezierData.segmentLength;\n          pathInfo.segments.push(bezierData);\n          totalLength += bezierData.segmentLength;\n        }\n        i = len;\n        if (mask.v.c) {\n          bezierData = bez.buildBezierData(paths.v[i], paths.v[0], [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]], [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]);\n          pathInfo.tLength += bezierData.segmentLength;\n          pathInfo.segments.push(bezierData);\n          totalLength += bezierData.segmentLength;\n        }\n        this._pathData.pi = pathInfo;\n      }\n      pathInfo = this._pathData.pi;\n      currentLength = this._pathData.f.v;\n      segmentInd = 0;\n      pointInd = 1;\n      segmentLength = 0;\n      flag = true;\n      segments = pathInfo.segments;\n      if (currentLength < 0 && mask.v.c) {\n        if (pathInfo.tLength < Math.abs(currentLength)) {\n          currentLength = -Math.abs(currentLength) % pathInfo.tLength;\n        }\n        segmentInd = segments.length - 1;\n        points = segments[segmentInd].points;\n        pointInd = points.length - 1;\n        while (currentLength < 0) {\n          currentLength += points[pointInd].partialLength;\n          pointInd -= 1;\n          if (pointInd < 0) {\n            segmentInd -= 1;\n            points = segments[segmentInd].points;\n            pointInd = points.length - 1;\n          }\n        }\n      }\n      points = segments[segmentInd].points;\n      prevPoint = points[pointInd - 1];\n      currentPoint = points[pointInd];\n      partialLength = currentPoint.partialLength;\n    }\n    len = letters.length;\n    xPos = 0;\n    yPos = 0;\n    var yOff = documentData.finalSize * 1.2 * 0.714;\n    var firstLine = true;\n    var animatorProps;\n    var animatorSelector;\n    var j;\n    var jLen;\n    var letterValue;\n    jLen = animators.length;\n    var mult;\n    var ind = -1;\n    var offf;\n    var xPathPos;\n    var yPathPos;\n    var initPathPos = currentLength;\n    var initSegmentInd = segmentInd;\n    var initPointInd = pointInd;\n    var currentLine = -1;\n    var elemOpacity;\n    var sc;\n    var sw;\n    var fc;\n    var k;\n    var letterSw;\n    var letterSc;\n    var letterFc;\n    var letterM = '';\n    var letterP = this.defaultPropsArray;\n    var letterO;\n\n    //\n    if (documentData.j === 2 || documentData.j === 1) {\n      var animatorJustifyOffset = 0;\n      var animatorFirstCharOffset = 0;\n      var justifyOffsetMult = documentData.j === 2 ? -0.5 : -1;\n      var lastIndex = 0;\n      var isNewLine = true;\n      for (i = 0; i < len; i += 1) {\n        if (letters[i].n) {\n          if (animatorJustifyOffset) {\n            animatorJustifyOffset += animatorFirstCharOffset;\n          }\n          while (lastIndex < i) {\n            letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\n            lastIndex += 1;\n          }\n          animatorJustifyOffset = 0;\n          isNewLine = true;\n        } else {\n          for (j = 0; j < jLen; j += 1) {\n            animatorProps = animators[j].a;\n            if (animatorProps.t.propType) {\n              if (isNewLine && documentData.j === 2) {\n                animatorFirstCharOffset += animatorProps.t.v * justifyOffsetMult;\n              }\n              animatorSelector = animators[j].s;\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n              if (mult.length) {\n                animatorJustifyOffset += animatorProps.t.v * mult[0] * justifyOffsetMult;\n              } else {\n                animatorJustifyOffset += animatorProps.t.v * mult * justifyOffsetMult;\n              }\n            }\n          }\n          isNewLine = false;\n        }\n      }\n      if (animatorJustifyOffset) {\n        animatorJustifyOffset += animatorFirstCharOffset;\n      }\n      while (lastIndex < i) {\n        letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\n        lastIndex += 1;\n      }\n    }\n    //\n\n    for (i = 0; i < len; i += 1) {\n      matrixHelper.reset();\n      elemOpacity = 1;\n      if (letters[i].n) {\n        xPos = 0;\n        yPos += documentData.yOffset;\n        yPos += firstLine ? 1 : 0;\n        currentLength = initPathPos;\n        firstLine = false;\n        if (this._hasMaskedPath) {\n          segmentInd = initSegmentInd;\n          pointInd = initPointInd;\n          points = segments[segmentInd].points;\n          prevPoint = points[pointInd - 1];\n          currentPoint = points[pointInd];\n          partialLength = currentPoint.partialLength;\n          segmentLength = 0;\n        }\n        letterM = '';\n        letterFc = '';\n        letterSw = '';\n        letterO = '';\n        letterP = this.defaultPropsArray;\n      } else {\n        if (this._hasMaskedPath) {\n          if (currentLine !== letters[i].line) {\n            switch (documentData.j) {\n              case 1:\n                currentLength += totalLength - documentData.lineWidths[letters[i].line];\n                break;\n              case 2:\n                currentLength += (totalLength - documentData.lineWidths[letters[i].line]) / 2;\n                break;\n              default:\n                break;\n            }\n            currentLine = letters[i].line;\n          }\n          if (ind !== letters[i].ind) {\n            if (letters[ind]) {\n              currentLength += letters[ind].extra;\n            }\n            currentLength += letters[i].an / 2;\n            ind = letters[i].ind;\n          }\n          currentLength += alignment[0] * letters[i].an * 0.005;\n          var animatorOffset = 0;\n          for (j = 0; j < jLen; j += 1) {\n            animatorProps = animators[j].a;\n            if (animatorProps.p.propType) {\n              animatorSelector = animators[j].s;\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n              if (mult.length) {\n                animatorOffset += animatorProps.p.v[0] * mult[0];\n              } else {\n                animatorOffset += animatorProps.p.v[0] * mult;\n              }\n            }\n            if (animatorProps.a.propType) {\n              animatorSelector = animators[j].s;\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n              if (mult.length) {\n                animatorOffset += animatorProps.a.v[0] * mult[0];\n              } else {\n                animatorOffset += animatorProps.a.v[0] * mult;\n              }\n            }\n          }\n          flag = true;\n          // Force alignment only works with a single line for now\n          if (this._pathData.a.v) {\n            currentLength = letters[0].an * 0.5 + (totalLength - this._pathData.f.v - letters[0].an * 0.5 - letters[letters.length - 1].an * 0.5) * ind / (len - 1);\n            currentLength += this._pathData.f.v;\n          }\n          while (flag) {\n            if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\n              perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\n              xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\n              yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\n              matrixHelper.translate(-alignment[0] * letters[i].an * 0.005, -(alignment[1] * yOff) * 0.01);\n              flag = false;\n            } else if (points) {\n              segmentLength += currentPoint.partialLength;\n              pointInd += 1;\n              if (pointInd >= points.length) {\n                pointInd = 0;\n                segmentInd += 1;\n                if (!segments[segmentInd]) {\n                  if (mask.v.c) {\n                    pointInd = 0;\n                    segmentInd = 0;\n                    points = segments[segmentInd].points;\n                  } else {\n                    segmentLength -= currentPoint.partialLength;\n                    points = null;\n                  }\n                } else {\n                  points = segments[segmentInd].points;\n                }\n              }\n              if (points) {\n                prevPoint = currentPoint;\n                currentPoint = points[pointInd];\n                partialLength = currentPoint.partialLength;\n              }\n            }\n          }\n          offf = letters[i].an / 2 - letters[i].add;\n          matrixHelper.translate(-offf, 0, 0);\n        } else {\n          offf = letters[i].an / 2 - letters[i].add;\n          matrixHelper.translate(-offf, 0, 0);\n\n          // Grouping alignment\n          matrixHelper.translate(-alignment[0] * letters[i].an * 0.005, -alignment[1] * yOff * 0.01, 0);\n        }\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n          if (animatorProps.t.propType) {\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n            // This condition is to prevent applying tracking to first character in each line. Might be better to use a boolean \"isNewLine\"\n            if (xPos !== 0 || documentData.j !== 0) {\n              if (this._hasMaskedPath) {\n                if (mult.length) {\n                  currentLength += animatorProps.t.v * mult[0];\n                } else {\n                  currentLength += animatorProps.t.v * mult;\n                }\n              } else if (mult.length) {\n                xPos += animatorProps.t.v * mult[0];\n              } else {\n                xPos += animatorProps.t.v * mult;\n              }\n            }\n          }\n        }\n        if (documentData.strokeWidthAnim) {\n          sw = documentData.sw || 0;\n        }\n        if (documentData.strokeColorAnim) {\n          if (documentData.sc) {\n            sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\n          } else {\n            sc = [0, 0, 0];\n          }\n        }\n        if (documentData.fillColorAnim && documentData.fc) {\n          fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\n        }\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n          if (animatorProps.a.propType) {\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n            if (mult.length) {\n              matrixHelper.translate(-animatorProps.a.v[0] * mult[0], -animatorProps.a.v[1] * mult[1], animatorProps.a.v[2] * mult[2]);\n            } else {\n              matrixHelper.translate(-animatorProps.a.v[0] * mult, -animatorProps.a.v[1] * mult, animatorProps.a.v[2] * mult);\n            }\n          }\n        }\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n          if (animatorProps.s.propType) {\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n            if (mult.length) {\n              matrixHelper.scale(1 + (animatorProps.s.v[0] - 1) * mult[0], 1 + (animatorProps.s.v[1] - 1) * mult[1], 1);\n            } else {\n              matrixHelper.scale(1 + (animatorProps.s.v[0] - 1) * mult, 1 + (animatorProps.s.v[1] - 1) * mult, 1);\n            }\n          }\n        }\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n          animatorSelector = animators[j].s;\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n          if (animatorProps.sk.propType) {\n            if (mult.length) {\n              matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\n            } else {\n              matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\n            }\n          }\n          if (animatorProps.r.propType) {\n            if (mult.length) {\n              matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\n            } else {\n              matrixHelper.rotateZ(-animatorProps.r.v * mult);\n            }\n          }\n          if (animatorProps.ry.propType) {\n            if (mult.length) {\n              matrixHelper.rotateY(animatorProps.ry.v * mult[1]);\n            } else {\n              matrixHelper.rotateY(animatorProps.ry.v * mult);\n            }\n          }\n          if (animatorProps.rx.propType) {\n            if (mult.length) {\n              matrixHelper.rotateX(animatorProps.rx.v * mult[0]);\n            } else {\n              matrixHelper.rotateX(animatorProps.rx.v * mult);\n            }\n          }\n          if (animatorProps.o.propType) {\n            if (mult.length) {\n              elemOpacity += (animatorProps.o.v * mult[0] - elemOpacity) * mult[0];\n            } else {\n              elemOpacity += (animatorProps.o.v * mult - elemOpacity) * mult;\n            }\n          }\n          if (documentData.strokeWidthAnim && animatorProps.sw.propType) {\n            if (mult.length) {\n              sw += animatorProps.sw.v * mult[0];\n            } else {\n              sw += animatorProps.sw.v * mult;\n            }\n          }\n          if (documentData.strokeColorAnim && animatorProps.sc.propType) {\n            for (k = 0; k < 3; k += 1) {\n              if (mult.length) {\n                sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult[0];\n              } else {\n                sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult;\n              }\n            }\n          }\n          if (documentData.fillColorAnim && documentData.fc) {\n            if (animatorProps.fc.propType) {\n              for (k = 0; k < 3; k += 1) {\n                if (mult.length) {\n                  fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult[0];\n                } else {\n                  fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult;\n                }\n              }\n            }\n            if (animatorProps.fh.propType) {\n              if (mult.length) {\n                fc = addHueToRGB(fc, animatorProps.fh.v * mult[0]);\n              } else {\n                fc = addHueToRGB(fc, animatorProps.fh.v * mult);\n              }\n            }\n            if (animatorProps.fs.propType) {\n              if (mult.length) {\n                fc = addSaturationToRGB(fc, animatorProps.fs.v * mult[0]);\n              } else {\n                fc = addSaturationToRGB(fc, animatorProps.fs.v * mult);\n              }\n            }\n            if (animatorProps.fb.propType) {\n              if (mult.length) {\n                fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult[0]);\n              } else {\n                fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult);\n              }\n            }\n          }\n        }\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n          if (animatorProps.p.propType) {\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n            if (this._hasMaskedPath) {\n              if (mult.length) {\n                matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\n              } else {\n                matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\n              }\n            } else if (mult.length) {\n              matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\n            } else {\n              matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\n            }\n          }\n        }\n        if (documentData.strokeWidthAnim) {\n          letterSw = sw < 0 ? 0 : sw;\n        }\n        if (documentData.strokeColorAnim) {\n          letterSc = 'rgb(' + Math.round(sc[0] * 255) + ',' + Math.round(sc[1] * 255) + ',' + Math.round(sc[2] * 255) + ')';\n        }\n        if (documentData.fillColorAnim && documentData.fc) {\n          letterFc = 'rgb(' + Math.round(fc[0] * 255) + ',' + Math.round(fc[1] * 255) + ',' + Math.round(fc[2] * 255) + ')';\n        }\n        if (this._hasMaskedPath) {\n          matrixHelper.translate(0, -documentData.ls);\n          matrixHelper.translate(0, alignment[1] * yOff * 0.01 + yPos, 0);\n          if (this._pathData.p.v) {\n            tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\n            var rot = Math.atan(tanAngle) * 180 / Math.PI;\n            if (currentPoint.point[0] < prevPoint.point[0]) {\n              rot += 180;\n            }\n            matrixHelper.rotate(-rot * Math.PI / 180);\n          }\n          matrixHelper.translate(xPathPos, yPathPos, 0);\n          currentLength -= alignment[0] * letters[i].an * 0.005;\n          if (letters[i + 1] && ind !== letters[i + 1].ind) {\n            currentLength += letters[i].an / 2;\n            currentLength += documentData.tr * 0.001 * documentData.finalSize;\n          }\n        } else {\n          matrixHelper.translate(xPos, yPos, 0);\n          if (documentData.ps) {\n            // matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\n            matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\n          }\n          switch (documentData.j) {\n            case 1:\n              matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]), 0, 0);\n              break;\n            case 2:\n              matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]) / 2, 0, 0);\n              break;\n            default:\n              break;\n          }\n          matrixHelper.translate(0, -documentData.ls);\n          matrixHelper.translate(offf, 0, 0);\n          matrixHelper.translate(alignment[0] * letters[i].an * 0.005, alignment[1] * yOff * 0.01, 0);\n          xPos += letters[i].l + documentData.tr * 0.001 * documentData.finalSize;\n        }\n        if (renderType === 'html') {\n          letterM = matrixHelper.toCSS();\n        } else if (renderType === 'svg') {\n          letterM = matrixHelper.to2dCSS();\n        } else {\n          letterP = [matrixHelper.props[0], matrixHelper.props[1], matrixHelper.props[2], matrixHelper.props[3], matrixHelper.props[4], matrixHelper.props[5], matrixHelper.props[6], matrixHelper.props[7], matrixHelper.props[8], matrixHelper.props[9], matrixHelper.props[10], matrixHelper.props[11], matrixHelper.props[12], matrixHelper.props[13], matrixHelper.props[14], matrixHelper.props[15]];\n        }\n        letterO = elemOpacity;\n      }\n      if (renderedLettersCount <= i) {\n        letterValue = new LetterProps(letterO, letterSw, letterSc, letterFc, letterM, letterP);\n        this.renderedLetters.push(letterValue);\n        renderedLettersCount += 1;\n        this.lettersChangedFlag = true;\n      } else {\n        letterValue = this.renderedLetters[i];\n        this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\n      }\n    }\n  };\n  TextAnimatorProperty.prototype.getValue = function () {\n    if (this._elem.globalData.frameId === this._frameId) {\n      return;\n    }\n    this._frameId = this._elem.globalData.frameId;\n    this.iterateDynamicProperties();\n  };\n  TextAnimatorProperty.prototype.mHelper = new Matrix();\n  TextAnimatorProperty.prototype.defaultPropsArray = [];\n  extendPrototype([DynamicPropertyContainer], TextAnimatorProperty);\n\n  function ITextElement() {}\n  ITextElement.prototype.initElement = function (data, globalData, comp) {\n    this.lettersChangedFlag = true;\n    this.initFrame();\n    this.initBaseData(data, globalData, comp);\n    this.textProperty = new TextProperty(this, data.t, this.dynamicProperties);\n    this.textAnimator = new TextAnimatorProperty(data.t, this.renderType, this);\n    this.initTransform(data, globalData, comp);\n    this.initHierarchy();\n    this.initRenderable();\n    this.initRendererElement();\n    this.createContainerElements();\n    this.createRenderableComponents();\n    this.createContent();\n    this.hide();\n    this.textAnimator.searchProperties(this.dynamicProperties);\n  };\n  ITextElement.prototype.prepareFrame = function (num) {\n    this._mdf = false;\n    this.prepareRenderableFrame(num);\n    this.prepareProperties(num, this.isInRange);\n  };\n  ITextElement.prototype.createPathShape = function (matrixHelper, shapes) {\n    var j;\n    var jLen = shapes.length;\n    var pathNodes;\n    var shapeStr = '';\n    for (j = 0; j < jLen; j += 1) {\n      if (shapes[j].ty === 'sh') {\n        pathNodes = shapes[j].ks.k;\n        shapeStr += buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\n      }\n    }\n    return shapeStr;\n  };\n  ITextElement.prototype.updateDocumentData = function (newData, index) {\n    this.textProperty.updateDocumentData(newData, index);\n  };\n  ITextElement.prototype.canResizeFont = function (_canResize) {\n    this.textProperty.canResizeFont(_canResize);\n  };\n  ITextElement.prototype.setMinimumFontSize = function (_fontSize) {\n    this.textProperty.setMinimumFontSize(_fontSize);\n  };\n  ITextElement.prototype.applyTextPropertiesToMatrix = function (documentData, matrixHelper, lineNumber, xPos, yPos) {\n    if (documentData.ps) {\n      matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\n    }\n    matrixHelper.translate(0, -documentData.ls, 0);\n    switch (documentData.j) {\n      case 1:\n        matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]), 0, 0);\n        break;\n      case 2:\n        matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]) / 2, 0, 0);\n        break;\n      default:\n        break;\n    }\n    matrixHelper.translate(xPos, yPos, 0);\n  };\n  ITextElement.prototype.buildColor = function (colorData) {\n    return 'rgb(' + Math.round(colorData[0] * 255) + ',' + Math.round(colorData[1] * 255) + ',' + Math.round(colorData[2] * 255) + ')';\n  };\n  ITextElement.prototype.emptyProp = new LetterProps();\n  ITextElement.prototype.destroy = function () {};\n  ITextElement.prototype.validateText = function () {\n    if (this.textProperty._mdf || this.textProperty._isFirstFrame) {\n      this.buildNewText();\n      this.textProperty._isFirstFrame = false;\n      this.textProperty._mdf = false;\n    }\n  };\n\n  var emptyShapeData = {\n    shapes: []\n  };\n  function SVGTextLottieElement(data, globalData, comp) {\n    this.textSpans = [];\n    this.renderType = 'svg';\n    this.initElement(data, globalData, comp);\n  }\n  extendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], SVGTextLottieElement);\n  SVGTextLottieElement.prototype.createContent = function () {\n    if (this.data.singleShape && !this.globalData.fontManager.chars) {\n      this.textContainer = createNS('text');\n    }\n  };\n  SVGTextLottieElement.prototype.buildTextContents = function (textArray) {\n    var i = 0;\n    var len = textArray.length;\n    var textContents = [];\n    var currentTextContent = '';\n    while (i < len) {\n      if (textArray[i] === String.fromCharCode(13) || textArray[i] === String.fromCharCode(3)) {\n        textContents.push(currentTextContent);\n        currentTextContent = '';\n      } else {\n        currentTextContent += textArray[i];\n      }\n      i += 1;\n    }\n    textContents.push(currentTextContent);\n    return textContents;\n  };\n  SVGTextLottieElement.prototype.buildShapeData = function (data, scale) {\n    // data should probably be cloned to apply scale separately to each instance of a text on different layers\n    // but since text internal content gets only rendered once and then it's never rerendered,\n    // it's probably safe not to clone data and reuse always the same instance even if the object is mutated.\n    // Avoiding cloning is preferred since cloning each character shape data is expensive\n    if (data.shapes && data.shapes.length) {\n      var shape = data.shapes[0];\n      if (shape.it) {\n        var shapeItem = shape.it[shape.it.length - 1];\n        if (shapeItem.s) {\n          shapeItem.s.k[0] = scale;\n          shapeItem.s.k[1] = scale;\n        }\n      }\n    }\n    return data;\n  };\n  SVGTextLottieElement.prototype.buildNewText = function () {\n    this.addDynamicProperty(this);\n    var i;\n    var len;\n    var documentData = this.textProperty.currentData;\n    this.renderedLetters = createSizedArray(documentData ? documentData.l.length : 0);\n    if (documentData.fc) {\n      this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\n    } else {\n      this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\n    }\n    if (documentData.sc) {\n      this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\n      this.layerElement.setAttribute('stroke-width', documentData.sw);\n    }\n    this.layerElement.setAttribute('font-size', documentData.finalSize);\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\n    if (fontData.fClass) {\n      this.layerElement.setAttribute('class', fontData.fClass);\n    } else {\n      this.layerElement.setAttribute('font-family', fontData.fFamily);\n      var fWeight = documentData.fWeight;\n      var fStyle = documentData.fStyle;\n      this.layerElement.setAttribute('font-style', fStyle);\n      this.layerElement.setAttribute('font-weight', fWeight);\n    }\n    this.layerElement.setAttribute('aria-label', documentData.t);\n    var letters = documentData.l || [];\n    var usesGlyphs = !!this.globalData.fontManager.chars;\n    len = letters.length;\n    var tSpan;\n    var matrixHelper = this.mHelper;\n    var shapeStr = '';\n    var singleShape = this.data.singleShape;\n    var xPos = 0;\n    var yPos = 0;\n    var firstLine = true;\n    var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\n    if (singleShape && !usesGlyphs && !documentData.sz) {\n      var tElement = this.textContainer;\n      var justify = 'start';\n      switch (documentData.j) {\n        case 1:\n          justify = 'end';\n          break;\n        case 2:\n          justify = 'middle';\n          break;\n        default:\n          justify = 'start';\n          break;\n      }\n      tElement.setAttribute('text-anchor', justify);\n      tElement.setAttribute('letter-spacing', trackingOffset);\n      var textContent = this.buildTextContents(documentData.finalText);\n      len = textContent.length;\n      yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\n      for (i = 0; i < len; i += 1) {\n        tSpan = this.textSpans[i].span || createNS('tspan');\n        tSpan.textContent = textContent[i];\n        tSpan.setAttribute('x', 0);\n        tSpan.setAttribute('y', yPos);\n        tSpan.style.display = 'inherit';\n        tElement.appendChild(tSpan);\n        if (!this.textSpans[i]) {\n          this.textSpans[i] = {\n            span: null,\n            glyph: null\n          };\n        }\n        this.textSpans[i].span = tSpan;\n        yPos += documentData.finalLineHeight;\n      }\n      this.layerElement.appendChild(tElement);\n    } else {\n      var cachedSpansLength = this.textSpans.length;\n      var charData;\n      for (i = 0; i < len; i += 1) {\n        if (!this.textSpans[i]) {\n          this.textSpans[i] = {\n            span: null,\n            childSpan: null,\n            glyph: null\n          };\n        }\n        if (!usesGlyphs || !singleShape || i === 0) {\n          tSpan = cachedSpansLength > i ? this.textSpans[i].span : createNS(usesGlyphs ? 'g' : 'text');\n          if (cachedSpansLength <= i) {\n            tSpan.setAttribute('stroke-linecap', 'butt');\n            tSpan.setAttribute('stroke-linejoin', 'round');\n            tSpan.setAttribute('stroke-miterlimit', '4');\n            this.textSpans[i].span = tSpan;\n            if (usesGlyphs) {\n              var childSpan = createNS('g');\n              tSpan.appendChild(childSpan);\n              this.textSpans[i].childSpan = childSpan;\n            }\n            this.textSpans[i].span = tSpan;\n            this.layerElement.appendChild(tSpan);\n          }\n          tSpan.style.display = 'inherit';\n        }\n        matrixHelper.reset();\n        if (singleShape) {\n          if (letters[i].n) {\n            xPos = -trackingOffset;\n            yPos += documentData.yOffset;\n            yPos += firstLine ? 1 : 0;\n            firstLine = false;\n          }\n          this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\n          xPos += letters[i].l || 0;\n          // xPos += letters[i].val === ' ' ? 0 : trackingOffset;\n          xPos += trackingOffset;\n        }\n        if (usesGlyphs) {\n          charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\n          var glyphElement;\n          // t === 1 means the character has been replaced with an animated shaped\n          if (charData.t === 1) {\n            glyphElement = new SVGCompElement(charData.data, this.globalData, this);\n          } else {\n            var data = emptyShapeData;\n            if (charData.data && charData.data.shapes) {\n              data = this.buildShapeData(charData.data, documentData.finalSize);\n            }\n            glyphElement = new SVGShapeElement(data, this.globalData, this);\n          }\n          if (this.textSpans[i].glyph) {\n            var glyph = this.textSpans[i].glyph;\n            this.textSpans[i].childSpan.removeChild(glyph.layerElement);\n            glyph.destroy();\n          }\n          this.textSpans[i].glyph = glyphElement;\n          glyphElement._debug = true;\n          glyphElement.prepareFrame(0);\n          glyphElement.renderFrame();\n          this.textSpans[i].childSpan.appendChild(glyphElement.layerElement);\n          // when using animated shapes, the layer will be scaled instead of replacing the internal scale\n          // this might have issues with strokes and might need a different solution\n          if (charData.t === 1) {\n            this.textSpans[i].childSpan.setAttribute('transform', 'scale(' + documentData.finalSize / 100 + ',' + documentData.finalSize / 100 + ')');\n          }\n        } else {\n          if (singleShape) {\n            tSpan.setAttribute('transform', 'translate(' + matrixHelper.props[12] + ',' + matrixHelper.props[13] + ')');\n          }\n          tSpan.textContent = letters[i].val;\n          tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n        }\n        //\n      }\n      if (singleShape && tSpan) {\n        tSpan.setAttribute('d', shapeStr);\n      }\n    }\n    while (i < this.textSpans.length) {\n      this.textSpans[i].span.style.display = 'none';\n      i += 1;\n    }\n    this._sizeChanged = true;\n  };\n  SVGTextLottieElement.prototype.sourceRectAtTime = function () {\n    this.prepareFrame(this.comp.renderedFrame - this.data.st);\n    this.renderInnerContent();\n    if (this._sizeChanged) {\n      this._sizeChanged = false;\n      var textBox = this.layerElement.getBBox();\n      this.bbox = {\n        top: textBox.y,\n        left: textBox.x,\n        width: textBox.width,\n        height: textBox.height\n      };\n    }\n    return this.bbox;\n  };\n  SVGTextLottieElement.prototype.getValue = function () {\n    var i;\n    var len = this.textSpans.length;\n    var glyphElement;\n    this.renderedFrame = this.comp.renderedFrame;\n    for (i = 0; i < len; i += 1) {\n      glyphElement = this.textSpans[i].glyph;\n      if (glyphElement) {\n        glyphElement.prepareFrame(this.comp.renderedFrame - this.data.st);\n        if (glyphElement._mdf) {\n          this._mdf = true;\n        }\n      }\n    }\n  };\n  SVGTextLottieElement.prototype.renderInnerContent = function () {\n    this.validateText();\n    if (!this.data.singleShape || this._mdf) {\n      this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\n      if (this.lettersChangedFlag || this.textAnimator.lettersChangedFlag) {\n        this._sizeChanged = true;\n        var i;\n        var len;\n        var renderedLetters = this.textAnimator.renderedLetters;\n        var letters = this.textProperty.currentData.l;\n        len = letters.length;\n        var renderedLetter;\n        var textSpan;\n        var glyphElement;\n        for (i = 0; i < len; i += 1) {\n          if (!letters[i].n) {\n            renderedLetter = renderedLetters[i];\n            textSpan = this.textSpans[i].span;\n            glyphElement = this.textSpans[i].glyph;\n            if (glyphElement) {\n              glyphElement.renderFrame();\n            }\n            if (renderedLetter._mdf.m) {\n              textSpan.setAttribute('transform', renderedLetter.m);\n            }\n            if (renderedLetter._mdf.o) {\n              textSpan.setAttribute('opacity', renderedLetter.o);\n            }\n            if (renderedLetter._mdf.sw) {\n              textSpan.setAttribute('stroke-width', renderedLetter.sw);\n            }\n            if (renderedLetter._mdf.sc) {\n              textSpan.setAttribute('stroke', renderedLetter.sc);\n            }\n            if (renderedLetter._mdf.fc) {\n              textSpan.setAttribute('fill', renderedLetter.fc);\n            }\n          }\n        }\n      }\n    }\n  };\n\n  function ISolidElement(data, globalData, comp) {\n    this.initElement(data, globalData, comp);\n  }\n  extendPrototype([IImageElement], ISolidElement);\n  ISolidElement.prototype.createContent = function () {\n    var rect = createNS('rect');\n    /// /rect.style.width = this.data.sw;\n    /// /rect.style.height = this.data.sh;\n    /// /rect.style.fill = this.data.sc;\n    rect.setAttribute('width', this.data.sw);\n    rect.setAttribute('height', this.data.sh);\n    rect.setAttribute('fill', this.data.sc);\n    this.layerElement.appendChild(rect);\n  };\n\n  function NullElement(data, globalData, comp) {\n    this.initFrame();\n    this.initBaseData(data, globalData, comp);\n    this.initFrame();\n    this.initTransform(data, globalData, comp);\n    this.initHierarchy();\n  }\n  NullElement.prototype.prepareFrame = function (num) {\n    this.prepareProperties(num, true);\n  };\n  NullElement.prototype.renderFrame = function () {};\n  NullElement.prototype.getBaseElement = function () {\n    return null;\n  };\n  NullElement.prototype.destroy = function () {};\n  NullElement.prototype.sourceRectAtTime = function () {};\n  NullElement.prototype.hide = function () {};\n  extendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement], NullElement);\n\n  function SVGRendererBase() {}\n  extendPrototype([BaseRenderer], SVGRendererBase);\n  SVGRendererBase.prototype.createNull = function (data) {\n    return new NullElement(data, this.globalData, this);\n  };\n  SVGRendererBase.prototype.createShape = function (data) {\n    return new SVGShapeElement(data, this.globalData, this);\n  };\n  SVGRendererBase.prototype.createText = function (data) {\n    return new SVGTextLottieElement(data, this.globalData, this);\n  };\n  SVGRendererBase.prototype.createImage = function (data) {\n    return new IImageElement(data, this.globalData, this);\n  };\n  SVGRendererBase.prototype.createSolid = function (data) {\n    return new ISolidElement(data, this.globalData, this);\n  };\n  SVGRendererBase.prototype.configAnimation = function (animData) {\n    this.svgElement.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n    this.svgElement.setAttribute('xmlns:xlink', 'http://www.w3.org/1999/xlink');\n    if (this.renderConfig.viewBoxSize) {\n      this.svgElement.setAttribute('viewBox', this.renderConfig.viewBoxSize);\n    } else {\n      this.svgElement.setAttribute('viewBox', '0 0 ' + animData.w + ' ' + animData.h);\n    }\n    if (!this.renderConfig.viewBoxOnly) {\n      this.svgElement.setAttribute('width', animData.w);\n      this.svgElement.setAttribute('height', animData.h);\n      this.svgElement.style.width = '100%';\n      this.svgElement.style.height = '100%';\n      this.svgElement.style.transform = 'translate3d(0,0,0)';\n      this.svgElement.style.contentVisibility = this.renderConfig.contentVisibility;\n    }\n    if (this.renderConfig.width) {\n      this.svgElement.setAttribute('width', this.renderConfig.width);\n    }\n    if (this.renderConfig.height) {\n      this.svgElement.setAttribute('height', this.renderConfig.height);\n    }\n    if (this.renderConfig.className) {\n      this.svgElement.setAttribute('class', this.renderConfig.className);\n    }\n    if (this.renderConfig.id) {\n      this.svgElement.setAttribute('id', this.renderConfig.id);\n    }\n    if (this.renderConfig.focusable !== undefined) {\n      this.svgElement.setAttribute('focusable', this.renderConfig.focusable);\n    }\n    this.svgElement.setAttribute('preserveAspectRatio', this.renderConfig.preserveAspectRatio);\n    // this.layerElement.style.transform = 'translate3d(0,0,0)';\n    // this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\n    this.animationItem.wrapper.appendChild(this.svgElement);\n    // Mask animation\n    var defs = this.globalData.defs;\n    this.setupGlobalData(animData, defs);\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\n    this.data = animData;\n    var maskElement = createNS('clipPath');\n    var rect = createNS('rect');\n    rect.setAttribute('width', animData.w);\n    rect.setAttribute('height', animData.h);\n    rect.setAttribute('x', 0);\n    rect.setAttribute('y', 0);\n    var maskId = createElementID();\n    maskElement.setAttribute('id', maskId);\n    maskElement.appendChild(rect);\n    this.layerElement.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + maskId + ')');\n    defs.appendChild(maskElement);\n    this.layers = animData.layers;\n    this.elements = createSizedArray(animData.layers.length);\n  };\n  SVGRendererBase.prototype.destroy = function () {\n    if (this.animationItem.wrapper) {\n      this.animationItem.wrapper.innerText = '';\n    }\n    this.layerElement = null;\n    this.globalData.defs = null;\n    var i;\n    var len = this.layers ? this.layers.length : 0;\n    for (i = 0; i < len; i += 1) {\n      if (this.elements[i] && this.elements[i].destroy) {\n        this.elements[i].destroy();\n      }\n    }\n    this.elements.length = 0;\n    this.destroyed = true;\n    this.animationItem = null;\n  };\n  SVGRendererBase.prototype.updateContainerSize = function () {};\n  SVGRendererBase.prototype.findIndexByInd = function (ind) {\n    var i = 0;\n    var len = this.layers.length;\n    for (i = 0; i < len; i += 1) {\n      if (this.layers[i].ind === ind) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  SVGRendererBase.prototype.buildItem = function (pos) {\n    var elements = this.elements;\n    if (elements[pos] || this.layers[pos].ty === 99) {\n      return;\n    }\n    elements[pos] = true;\n    var element = this.createItem(this.layers[pos]);\n    elements[pos] = element;\n    if (getExpressionsPlugin()) {\n      if (this.layers[pos].ty === 0) {\n        this.globalData.projectInterface.registerComposition(element);\n      }\n      element.initExpressions();\n    }\n    this.appendElementInPos(element, pos);\n    if (this.layers[pos].tt) {\n      var elementIndex = 'tp' in this.layers[pos] ? this.findIndexByInd(this.layers[pos].tp) : pos - 1;\n      if (elementIndex === -1) {\n        return;\n      }\n      if (!this.elements[elementIndex] || this.elements[elementIndex] === true) {\n        this.buildItem(elementIndex);\n        this.addPendingElement(element);\n      } else {\n        var matteElement = elements[elementIndex];\n        var matteMask = matteElement.getMatte(this.layers[pos].tt);\n        element.setMatte(matteMask);\n      }\n    }\n  };\n  SVGRendererBase.prototype.checkPendingElements = function () {\n    while (this.pendingElements.length) {\n      var element = this.pendingElements.pop();\n      element.checkParenting();\n      if (element.data.tt) {\n        var i = 0;\n        var len = this.elements.length;\n        while (i < len) {\n          if (this.elements[i] === element) {\n            var elementIndex = 'tp' in element.data ? this.findIndexByInd(element.data.tp) : i - 1;\n            var matteElement = this.elements[elementIndex];\n            var matteMask = matteElement.getMatte(this.layers[i].tt);\n            element.setMatte(matteMask);\n            break;\n          }\n          i += 1;\n        }\n      }\n    }\n  };\n  SVGRendererBase.prototype.renderFrame = function (num) {\n    if (this.renderedFrame === num || this.destroyed) {\n      return;\n    }\n    if (num === null) {\n      num = this.renderedFrame;\n    } else {\n      this.renderedFrame = num;\n    }\n    // console.log('-------');\n    // console.log('FRAME ',num);\n    this.globalData.frameNum = num;\n    this.globalData.frameId += 1;\n    this.globalData.projectInterface.currentFrame = num;\n    this.globalData._mdf = false;\n    var i;\n    var len = this.layers.length;\n    if (!this.completeLayers) {\n      this.checkLayers(num);\n    }\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].prepareFrame(num - this.layers[i].st);\n      }\n    }\n    if (this.globalData._mdf) {\n      for (i = 0; i < len; i += 1) {\n        if (this.completeLayers || this.elements[i]) {\n          this.elements[i].renderFrame();\n        }\n      }\n    }\n  };\n  SVGRendererBase.prototype.appendElementInPos = function (element, pos) {\n    var newElement = element.getBaseElement();\n    if (!newElement) {\n      return;\n    }\n    var i = 0;\n    var nextElement;\n    while (i < pos) {\n      if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement()) {\n        nextElement = this.elements[i].getBaseElement();\n      }\n      i += 1;\n    }\n    if (nextElement) {\n      this.layerElement.insertBefore(newElement, nextElement);\n    } else {\n      this.layerElement.appendChild(newElement);\n    }\n  };\n  SVGRendererBase.prototype.hide = function () {\n    this.layerElement.style.display = 'none';\n  };\n  SVGRendererBase.prototype.show = function () {\n    this.layerElement.style.display = 'block';\n  };\n\n  function ICompElement() {}\n  extendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement);\n  ICompElement.prototype.initElement = function (data, globalData, comp) {\n    this.initFrame();\n    this.initBaseData(data, globalData, comp);\n    this.initTransform(data, globalData, comp);\n    this.initRenderable();\n    this.initHierarchy();\n    this.initRendererElement();\n    this.createContainerElements();\n    this.createRenderableComponents();\n    if (this.data.xt || !globalData.progressiveLoad) {\n      this.buildAllItems();\n    }\n    this.hide();\n  };\n\n  /* ICompElement.prototype.hide = function(){\n      if(!this.hidden){\n          this.hideElement();\n          var i,len = this.elements.length;\n          for( i = 0; i < len; i+=1 ){\n              if(this.elements[i]){\n                  this.elements[i].hide();\n              }\n          }\n      }\n  }; */\n\n  ICompElement.prototype.prepareFrame = function (num) {\n    this._mdf = false;\n    this.prepareRenderableFrame(num);\n    this.prepareProperties(num, this.isInRange);\n    if (!this.isInRange && !this.data.xt) {\n      return;\n    }\n    if (!this.tm._placeholder) {\n      var timeRemapped = this.tm.v;\n      if (timeRemapped === this.data.op) {\n        timeRemapped = this.data.op - 1;\n      }\n      this.renderedFrame = timeRemapped;\n    } else {\n      this.renderedFrame = num / this.data.sr;\n    }\n    var i;\n    var len = this.elements.length;\n    if (!this.completeLayers) {\n      this.checkLayers(this.renderedFrame);\n    }\n    // This iteration needs to be backwards because of how expressions connect between each other\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\n        if (this.elements[i]._mdf) {\n          this._mdf = true;\n        }\n      }\n    }\n  };\n  ICompElement.prototype.renderInnerContent = function () {\n    var i;\n    var len = this.layers.length;\n    for (i = 0; i < len; i += 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].renderFrame();\n      }\n    }\n  };\n  ICompElement.prototype.setElements = function (elems) {\n    this.elements = elems;\n  };\n  ICompElement.prototype.getElements = function () {\n    return this.elements;\n  };\n  ICompElement.prototype.destroyElements = function () {\n    var i;\n    var len = this.layers.length;\n    for (i = 0; i < len; i += 1) {\n      if (this.elements[i]) {\n        this.elements[i].destroy();\n      }\n    }\n  };\n  ICompElement.prototype.destroy = function () {\n    this.destroyElements();\n    this.destroyBaseElement();\n  };\n\n  function SVGCompElement(data, globalData, comp) {\n    this.layers = data.layers;\n    this.supports3d = true;\n    this.completeLayers = false;\n    this.pendingElements = [];\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\n    this.initElement(data, globalData, comp);\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\n      _placeholder: true\n    };\n  }\n  extendPrototype([SVGRendererBase, ICompElement, SVGBaseElement], SVGCompElement);\n  SVGCompElement.prototype.createComp = function (data) {\n    return new SVGCompElement(data, this.globalData, this);\n  };\n\n  function SVGRenderer(animationItem, config) {\n    this.animationItem = animationItem;\n    this.layers = null;\n    this.renderedFrame = -1;\n    this.svgElement = createNS('svg');\n    var ariaLabel = '';\n    if (config && config.title) {\n      var titleElement = createNS('title');\n      var titleId = createElementID();\n      titleElement.setAttribute('id', titleId);\n      titleElement.textContent = config.title;\n      this.svgElement.appendChild(titleElement);\n      ariaLabel += titleId;\n    }\n    if (config && config.description) {\n      var descElement = createNS('desc');\n      var descId = createElementID();\n      descElement.setAttribute('id', descId);\n      descElement.textContent = config.description;\n      this.svgElement.appendChild(descElement);\n      ariaLabel += ' ' + descId;\n    }\n    if (ariaLabel) {\n      this.svgElement.setAttribute('aria-labelledby', ariaLabel);\n    }\n    var defs = createNS('defs');\n    this.svgElement.appendChild(defs);\n    var maskElement = createNS('g');\n    this.svgElement.appendChild(maskElement);\n    this.layerElement = maskElement;\n    this.renderConfig = {\n      preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\n      contentVisibility: config && config.contentVisibility || 'visible',\n      progressiveLoad: config && config.progressiveLoad || false,\n      hideOnTransparent: !(config && config.hideOnTransparent === false),\n      viewBoxOnly: config && config.viewBoxOnly || false,\n      viewBoxSize: config && config.viewBoxSize || false,\n      className: config && config.className || '',\n      id: config && config.id || '',\n      focusable: config && config.focusable,\n      filterSize: {\n        width: config && config.filterSize && config.filterSize.width || '100%',\n        height: config && config.filterSize && config.filterSize.height || '100%',\n        x: config && config.filterSize && config.filterSize.x || '0%',\n        y: config && config.filterSize && config.filterSize.y || '0%'\n      },\n      width: config && config.width,\n      height: config && config.height,\n      runExpressions: !config || config.runExpressions === undefined || config.runExpressions\n    };\n    this.globalData = {\n      _mdf: false,\n      frameNum: -1,\n      defs: defs,\n      renderConfig: this.renderConfig\n    };\n    this.elements = [];\n    this.pendingElements = [];\n    this.destroyed = false;\n    this.rendererType = 'svg';\n  }\n  extendPrototype([SVGRendererBase], SVGRenderer);\n  SVGRenderer.prototype.createComp = function (data) {\n    return new SVGCompElement(data, this.globalData, this);\n  };\n\n  function ShapeTransformManager() {\n    this.sequences = {};\n    this.sequenceList = [];\n    this.transform_key_count = 0;\n  }\n  ShapeTransformManager.prototype = {\n    addTransformSequence: function addTransformSequence(transforms) {\n      var i;\n      var len = transforms.length;\n      var key = '_';\n      for (i = 0; i < len; i += 1) {\n        key += transforms[i].transform.key + '_';\n      }\n      var sequence = this.sequences[key];\n      if (!sequence) {\n        sequence = {\n          transforms: [].concat(transforms),\n          finalTransform: new Matrix(),\n          _mdf: false\n        };\n        this.sequences[key] = sequence;\n        this.sequenceList.push(sequence);\n      }\n      return sequence;\n    },\n    processSequence: function processSequence(sequence, isFirstFrame) {\n      var i = 0;\n      var len = sequence.transforms.length;\n      var _mdf = isFirstFrame;\n      while (i < len && !isFirstFrame) {\n        if (sequence.transforms[i].transform.mProps._mdf) {\n          _mdf = true;\n          break;\n        }\n        i += 1;\n      }\n      if (_mdf) {\n        sequence.finalTransform.reset();\n        for (i = len - 1; i >= 0; i -= 1) {\n          sequence.finalTransform.multiply(sequence.transforms[i].transform.mProps.v);\n        }\n      }\n      sequence._mdf = _mdf;\n    },\n    processSequences: function processSequences(isFirstFrame) {\n      var i;\n      var len = this.sequenceList.length;\n      for (i = 0; i < len; i += 1) {\n        this.processSequence(this.sequenceList[i], isFirstFrame);\n      }\n    },\n    getNewKey: function getNewKey() {\n      this.transform_key_count += 1;\n      return '_' + this.transform_key_count;\n    }\n  };\n\n  var lumaLoader = function lumaLoader() {\n    var id = '__lottie_element_luma_buffer';\n    var lumaBuffer = null;\n    var lumaBufferCtx = null;\n    var svg = null;\n\n    // This alternate solution has a slight delay before the filter is applied, resulting in a flicker on the first frame.\n    // Keeping this here for reference, and in the future, if offscreen canvas supports url filters, this can be used.\n    // For now, neither of them work for offscreen canvas, so canvas workers can't support the luma track matte mask.\n    // Naming it solution 2 to mark the extra comment lines.\n    /*\n    var svgString = [\n      '<svg xmlns=\"http://www.w3.org/2000/svg\">',\n      '<filter id=\"' + id + '\">',\n      '<feColorMatrix type=\"matrix\" color-interpolation-filters=\"sRGB\" values=\"',\n      '0.3, 0.3, 0.3, 0, 0, ',\n      '0.3, 0.3, 0.3, 0, 0, ',\n      '0.3, 0.3, 0.3, 0, 0, ',\n      '0.3, 0.3, 0.3, 0, 0',\n      '\"/>',\n      '</filter>',\n      '</svg>',\n    ].join('');\n    var blob = new Blob([svgString], { type: 'image/svg+xml' });\n    var url = URL.createObjectURL(blob);\n    */\n\n    function createLumaSvgFilter() {\n      var _svg = createNS('svg');\n      var fil = createNS('filter');\n      var matrix = createNS('feColorMatrix');\n      fil.setAttribute('id', id);\n      matrix.setAttribute('type', 'matrix');\n      matrix.setAttribute('color-interpolation-filters', 'sRGB');\n      matrix.setAttribute('values', '0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0');\n      fil.appendChild(matrix);\n      _svg.appendChild(fil);\n      _svg.setAttribute('id', id + '_svg');\n      if (featureSupport.svgLumaHidden) {\n        _svg.style.display = 'none';\n      }\n      return _svg;\n    }\n    function loadLuma() {\n      if (!lumaBuffer) {\n        svg = createLumaSvgFilter();\n        document.body.appendChild(svg);\n        lumaBuffer = createTag('canvas');\n        lumaBufferCtx = lumaBuffer.getContext('2d');\n        // lumaBufferCtx.filter = `url('${url}#__lottie_element_luma_buffer')`; // part of solution 2\n        lumaBufferCtx.filter = 'url(#' + id + ')';\n        lumaBufferCtx.fillStyle = 'rgba(0,0,0,0)';\n        lumaBufferCtx.fillRect(0, 0, 1, 1);\n      }\n    }\n    function getLuma(canvas) {\n      if (!lumaBuffer) {\n        loadLuma();\n      }\n      lumaBuffer.width = canvas.width;\n      lumaBuffer.height = canvas.height;\n      // lumaBufferCtx.filter = `url('${url}#__lottie_element_luma_buffer')`; // part of solution 2\n      lumaBufferCtx.filter = 'url(#' + id + ')';\n      return lumaBuffer;\n    }\n    return {\n      load: loadLuma,\n      get: getLuma\n    };\n  };\n  function createCanvas(width, height) {\n    if (featureSupport.offscreenCanvas) {\n      return new OffscreenCanvas(width, height);\n    }\n    var canvas = createTag('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n  var assetLoader = function () {\n    return {\n      loadLumaCanvas: lumaLoader.load,\n      getLumaCanvas: lumaLoader.get,\n      createCanvas: createCanvas\n    };\n  }();\n\n  var registeredEffects = {};\n  function CVEffects(elem) {\n    var i;\n    var len = elem.data.ef ? elem.data.ef.length : 0;\n    this.filters = [];\n    var filterManager;\n    for (i = 0; i < len; i += 1) {\n      filterManager = null;\n      var type = elem.data.ef[i].ty;\n      if (registeredEffects[type]) {\n        var Effect = registeredEffects[type].effect;\n        filterManager = new Effect(elem.effectsManager.effectElements[i], elem);\n      }\n      if (filterManager) {\n        this.filters.push(filterManager);\n      }\n    }\n    if (this.filters.length) {\n      elem.addRenderableComponent(this);\n    }\n  }\n  CVEffects.prototype.renderFrame = function (_isFirstFrame) {\n    var i;\n    var len = this.filters.length;\n    for (i = 0; i < len; i += 1) {\n      this.filters[i].renderFrame(_isFirstFrame);\n    }\n  };\n  CVEffects.prototype.getEffects = function (type) {\n    var i;\n    var len = this.filters.length;\n    var effects = [];\n    for (i = 0; i < len; i += 1) {\n      if (this.filters[i].type === type) {\n        effects.push(this.filters[i]);\n      }\n    }\n    return effects;\n  };\n  function registerEffect(id, effect) {\n    registeredEffects[id] = {\n      effect: effect\n    };\n  }\n\n  function CVMaskElement(data, element) {\n    this.data = data;\n    this.element = element;\n    this.masksProperties = this.data.masksProperties || [];\n    this.viewData = createSizedArray(this.masksProperties.length);\n    var i;\n    var len = this.masksProperties.length;\n    var hasMasks = false;\n    for (i = 0; i < len; i += 1) {\n      if (this.masksProperties[i].mode !== 'n') {\n        hasMasks = true;\n      }\n      this.viewData[i] = ShapePropertyFactory.getShapeProp(this.element, this.masksProperties[i], 3);\n    }\n    this.hasMasks = hasMasks;\n    if (hasMasks) {\n      this.element.addRenderableComponent(this);\n    }\n  }\n  CVMaskElement.prototype.renderFrame = function () {\n    if (!this.hasMasks) {\n      return;\n    }\n    var transform = this.element.finalTransform.mat;\n    var ctx = this.element.canvasContext;\n    var i;\n    var len = this.masksProperties.length;\n    var pt;\n    var pts;\n    var data;\n    ctx.beginPath();\n    for (i = 0; i < len; i += 1) {\n      if (this.masksProperties[i].mode !== 'n') {\n        if (this.masksProperties[i].inv) {\n          ctx.moveTo(0, 0);\n          ctx.lineTo(this.element.globalData.compSize.w, 0);\n          ctx.lineTo(this.element.globalData.compSize.w, this.element.globalData.compSize.h);\n          ctx.lineTo(0, this.element.globalData.compSize.h);\n          ctx.lineTo(0, 0);\n        }\n        data = this.viewData[i].v;\n        pt = transform.applyToPointArray(data.v[0][0], data.v[0][1], 0);\n        ctx.moveTo(pt[0], pt[1]);\n        var j;\n        var jLen = data._length;\n        for (j = 1; j < jLen; j += 1) {\n          pts = transform.applyToTriplePoints(data.o[j - 1], data.i[j], data.v[j]);\n          ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\n        }\n        pts = transform.applyToTriplePoints(data.o[j - 1], data.i[0], data.v[0]);\n        ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\n      }\n    }\n    this.element.globalData.renderer.save(true);\n    ctx.clip();\n  };\n  CVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty;\n  CVMaskElement.prototype.destroy = function () {\n    this.element = null;\n  };\n\n  function CVBaseElement() {}\n  var operationsMap = {\n    1: 'source-in',\n    2: 'source-out',\n    3: 'source-in',\n    4: 'source-out'\n  };\n  CVBaseElement.prototype = {\n    createElements: function createElements() {},\n    initRendererElement: function initRendererElement() {},\n    createContainerElements: function createContainerElements() {\n      // If the layer is masked we will use two buffers to store each different states of the drawing\n      // This solution is not ideal for several reason. But unfortunately, because of the recursive\n      // nature of the render tree, it's the only simple way to make sure one inner mask doesn't override an outer mask.\n      // TODO: try to reduce the size of these buffers to the size of the composition contaning the layer\n      // It might be challenging because the layer most likely is transformed in some way\n      if (this.data.tt >= 1) {\n        this.buffers = [];\n        var canvasContext = this.globalData.canvasContext;\n        var bufferCanvas = assetLoader.createCanvas(canvasContext.canvas.width, canvasContext.canvas.height);\n        this.buffers.push(bufferCanvas);\n        var bufferCanvas2 = assetLoader.createCanvas(canvasContext.canvas.width, canvasContext.canvas.height);\n        this.buffers.push(bufferCanvas2);\n        if (this.data.tt >= 3 && !document._isProxy) {\n          assetLoader.loadLumaCanvas();\n        }\n      }\n      this.canvasContext = this.globalData.canvasContext;\n      this.transformCanvas = this.globalData.transformCanvas;\n      this.renderableEffectsManager = new CVEffects(this);\n      this.searchEffectTransforms();\n    },\n    createContent: function createContent() {},\n    setBlendMode: function setBlendMode() {\n      var globalData = this.globalData;\n      if (globalData.blendMode !== this.data.bm) {\n        globalData.blendMode = this.data.bm;\n        var blendModeValue = getBlendMode(this.data.bm);\n        globalData.canvasContext.globalCompositeOperation = blendModeValue;\n      }\n    },\n    createRenderableComponents: function createRenderableComponents() {\n      this.maskManager = new CVMaskElement(this.data, this);\n      this.transformEffects = this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);\n    },\n    hideElement: function hideElement() {\n      if (!this.hidden && (!this.isInRange || this.isTransparent)) {\n        this.hidden = true;\n      }\n    },\n    showElement: function showElement() {\n      if (this.isInRange && !this.isTransparent) {\n        this.hidden = false;\n        this._isFirstFrame = true;\n        this.maskManager._isFirstFrame = true;\n      }\n    },\n    clearCanvas: function clearCanvas(canvasContext) {\n      canvasContext.clearRect(this.transformCanvas.tx, this.transformCanvas.ty, this.transformCanvas.w * this.transformCanvas.sx, this.transformCanvas.h * this.transformCanvas.sy);\n    },\n    prepareLayer: function prepareLayer() {\n      if (this.data.tt >= 1) {\n        var buffer = this.buffers[0];\n        var bufferCtx = buffer.getContext('2d');\n        this.clearCanvas(bufferCtx);\n        // on the first buffer we store the current state of the global drawing\n        bufferCtx.drawImage(this.canvasContext.canvas, 0, 0);\n        // The next four lines are to clear the canvas\n        // TODO: Check if there is a way to clear the canvas without resetting the transform\n        this.currentTransform = this.canvasContext.getTransform();\n        this.canvasContext.setTransform(1, 0, 0, 1, 0, 0);\n        this.clearCanvas(this.canvasContext);\n        this.canvasContext.setTransform(this.currentTransform);\n      }\n    },\n    exitLayer: function exitLayer() {\n      if (this.data.tt >= 1) {\n        var buffer = this.buffers[1];\n        // On the second buffer we store the current state of the global drawing\n        // that only contains the content of this layer\n        // (if it is a composition, it also includes the nested layers)\n        var bufferCtx = buffer.getContext('2d');\n        this.clearCanvas(bufferCtx);\n        bufferCtx.drawImage(this.canvasContext.canvas, 0, 0);\n        // We clear the canvas again\n        this.canvasContext.setTransform(1, 0, 0, 1, 0, 0);\n        this.clearCanvas(this.canvasContext);\n        this.canvasContext.setTransform(this.currentTransform);\n        // We draw the mask\n        var mask = this.comp.getElementById('tp' in this.data ? this.data.tp : this.data.ind - 1);\n        mask.renderFrame(true);\n        // We draw the second buffer (that contains the content of this layer)\n        this.canvasContext.setTransform(1, 0, 0, 1, 0, 0);\n\n        // If the mask is a Luma matte, we need to do two extra painting operations\n        // the _isProxy check is to avoid drawing a fake canvas in workers that will throw an error\n        if (this.data.tt >= 3 && !document._isProxy) {\n          // We copy the painted mask to a buffer that has a color matrix filter applied to it\n          // that applies the rgb values to the alpha channel\n          var lumaBuffer = assetLoader.getLumaCanvas(this.canvasContext.canvas);\n          var lumaBufferCtx = lumaBuffer.getContext('2d');\n          lumaBufferCtx.drawImage(this.canvasContext.canvas, 0, 0);\n          this.clearCanvas(this.canvasContext);\n          // we repaint the context with the mask applied to it\n          this.canvasContext.drawImage(lumaBuffer, 0, 0);\n        }\n        this.canvasContext.globalCompositeOperation = operationsMap[this.data.tt];\n        this.canvasContext.drawImage(buffer, 0, 0);\n        // We finally draw the first buffer (that contains the content of the global drawing)\n        // We use destination-over to draw the global drawing below the current layer\n        this.canvasContext.globalCompositeOperation = 'destination-over';\n        this.canvasContext.drawImage(this.buffers[0], 0, 0);\n        this.canvasContext.setTransform(this.currentTransform);\n        // We reset the globalCompositeOperation to source-over, the standard type of operation\n        this.canvasContext.globalCompositeOperation = 'source-over';\n      }\n    },\n    renderFrame: function renderFrame(forceRender) {\n      if (this.hidden || this.data.hd) {\n        return;\n      }\n      if (this.data.td === 1 && !forceRender) {\n        return;\n      }\n      this.renderTransform();\n      this.renderRenderable();\n      this.renderLocalTransform();\n      this.setBlendMode();\n      var forceRealStack = this.data.ty === 0;\n      this.prepareLayer();\n      this.globalData.renderer.save(forceRealStack);\n      this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props);\n      this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity);\n      this.renderInnerContent();\n      this.globalData.renderer.restore(forceRealStack);\n      this.exitLayer();\n      if (this.maskManager.hasMasks) {\n        this.globalData.renderer.restore(true);\n      }\n      if (this._isFirstFrame) {\n        this._isFirstFrame = false;\n      }\n    },\n    destroy: function destroy() {\n      this.canvasContext = null;\n      this.data = null;\n      this.globalData = null;\n      this.maskManager.destroy();\n    },\n    mHelper: new Matrix()\n  };\n  CVBaseElement.prototype.hide = CVBaseElement.prototype.hideElement;\n  CVBaseElement.prototype.show = CVBaseElement.prototype.showElement;\n\n  function CVShapeData(element, data, styles, transformsManager) {\n    this.styledShapes = [];\n    this.tr = [0, 0, 0, 0, 0, 0];\n    var ty = 4;\n    if (data.ty === 'rc') {\n      ty = 5;\n    } else if (data.ty === 'el') {\n      ty = 6;\n    } else if (data.ty === 'sr') {\n      ty = 7;\n    }\n    this.sh = ShapePropertyFactory.getShapeProp(element, data, ty, element);\n    var i;\n    var len = styles.length;\n    var styledShape;\n    for (i = 0; i < len; i += 1) {\n      if (!styles[i].closed) {\n        styledShape = {\n          transforms: transformsManager.addTransformSequence(styles[i].transforms),\n          trNodes: []\n        };\n        this.styledShapes.push(styledShape);\n        styles[i].elements.push(styledShape);\n      }\n    }\n  }\n  CVShapeData.prototype.setAsAnimated = SVGShapeData.prototype.setAsAnimated;\n\n  function CVShapeElement(data, globalData, comp) {\n    this.shapes = [];\n    this.shapesData = data.shapes;\n    this.stylesList = [];\n    this.itemsData = [];\n    this.prevViewData = [];\n    this.shapeModifiers = [];\n    this.processedElements = [];\n    this.transformsManager = new ShapeTransformManager();\n    this.initElement(data, globalData, comp);\n  }\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableElement], CVShapeElement);\n  CVShapeElement.prototype.initElement = RenderableDOMElement.prototype.initElement;\n  CVShapeElement.prototype.transformHelper = {\n    opacity: 1,\n    _opMdf: false\n  };\n  CVShapeElement.prototype.dashResetter = [];\n  CVShapeElement.prototype.createContent = function () {\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\n  };\n  CVShapeElement.prototype.createStyleElement = function (data, transforms) {\n    var styleElem = {\n      data: data,\n      type: data.ty,\n      preTransforms: this.transformsManager.addTransformSequence(transforms),\n      transforms: [],\n      elements: [],\n      closed: data.hd === true\n    };\n    var elementData = {};\n    if (data.ty === 'fl' || data.ty === 'st') {\n      elementData.c = PropertyFactory.getProp(this, data.c, 1, 255, this);\n      if (!elementData.c.k) {\n        styleElem.co = 'rgb(' + bmFloor(elementData.c.v[0]) + ',' + bmFloor(elementData.c.v[1]) + ',' + bmFloor(elementData.c.v[2]) + ')';\n      }\n    } else if (data.ty === 'gf' || data.ty === 'gs') {\n      elementData.s = PropertyFactory.getProp(this, data.s, 1, null, this);\n      elementData.e = PropertyFactory.getProp(this, data.e, 1, null, this);\n      elementData.h = PropertyFactory.getProp(this, data.h || {\n        k: 0\n      }, 0, 0.01, this);\n      elementData.a = PropertyFactory.getProp(this, data.a || {\n        k: 0\n      }, 0, degToRads, this);\n      elementData.g = new GradientProperty(this, data.g, this);\n    }\n    elementData.o = PropertyFactory.getProp(this, data.o, 0, 0.01, this);\n    if (data.ty === 'st' || data.ty === 'gs') {\n      styleElem.lc = lineCapEnum[data.lc || 2];\n      styleElem.lj = lineJoinEnum[data.lj || 2];\n      if (data.lj == 1) {\n        // eslint-disable-line eqeqeq\n        styleElem.ml = data.ml;\n      }\n      elementData.w = PropertyFactory.getProp(this, data.w, 0, null, this);\n      if (!elementData.w.k) {\n        styleElem.wi = elementData.w.v;\n      }\n      if (data.d) {\n        var d = new DashProperty(this, data.d, 'canvas', this);\n        elementData.d = d;\n        if (!elementData.d.k) {\n          styleElem.da = elementData.d.dashArray;\n          styleElem[\"do\"] = elementData.d.dashoffset[0];\n        }\n      }\n    } else {\n      styleElem.r = data.r === 2 ? 'evenodd' : 'nonzero';\n    }\n    this.stylesList.push(styleElem);\n    elementData.style = styleElem;\n    return elementData;\n  };\n  CVShapeElement.prototype.createGroupElement = function () {\n    var elementData = {\n      it: [],\n      prevViewData: []\n    };\n    return elementData;\n  };\n  CVShapeElement.prototype.createTransformElement = function (data) {\n    var elementData = {\n      transform: {\n        opacity: 1,\n        _opMdf: false,\n        key: this.transformsManager.getNewKey(),\n        op: PropertyFactory.getProp(this, data.o, 0, 0.01, this),\n        mProps: TransformPropertyFactory.getTransformProperty(this, data, this)\n      }\n    };\n    return elementData;\n  };\n  CVShapeElement.prototype.createShapeElement = function (data) {\n    var elementData = new CVShapeData(this, data, this.stylesList, this.transformsManager);\n    this.shapes.push(elementData);\n    this.addShapeToModifiers(elementData);\n    return elementData;\n  };\n  CVShapeElement.prototype.reloadShapes = function () {\n    this._isFirstFrame = true;\n    var i;\n    var len = this.itemsData.length;\n    for (i = 0; i < len; i += 1) {\n      this.prevViewData[i] = this.itemsData[i];\n    }\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\n    len = this.dynamicProperties.length;\n    for (i = 0; i < len; i += 1) {\n      this.dynamicProperties[i].getValue();\n    }\n    this.renderModifiers();\n    this.transformsManager.processSequences(this._isFirstFrame);\n  };\n  CVShapeElement.prototype.addTransformToStyleList = function (transform) {\n    var i;\n    var len = this.stylesList.length;\n    for (i = 0; i < len; i += 1) {\n      if (!this.stylesList[i].closed) {\n        this.stylesList[i].transforms.push(transform);\n      }\n    }\n  };\n  CVShapeElement.prototype.removeTransformFromStyleList = function () {\n    var i;\n    var len = this.stylesList.length;\n    for (i = 0; i < len; i += 1) {\n      if (!this.stylesList[i].closed) {\n        this.stylesList[i].transforms.pop();\n      }\n    }\n  };\n  CVShapeElement.prototype.closeStyles = function (styles) {\n    var i;\n    var len = styles.length;\n    for (i = 0; i < len; i += 1) {\n      styles[i].closed = true;\n    }\n  };\n  CVShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, shouldRender, transforms) {\n    var i;\n    var len = arr.length - 1;\n    var j;\n    var jLen;\n    var ownStyles = [];\n    var ownModifiers = [];\n    var processedPos;\n    var modifier;\n    var currentTransform;\n    var ownTransforms = [].concat(transforms);\n    for (i = len; i >= 0; i -= 1) {\n      processedPos = this.searchProcessedElement(arr[i]);\n      if (!processedPos) {\n        arr[i]._shouldRender = shouldRender;\n      } else {\n        itemsData[i] = prevViewData[processedPos - 1];\n      }\n      if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs') {\n        if (!processedPos) {\n          itemsData[i] = this.createStyleElement(arr[i], ownTransforms);\n        } else {\n          itemsData[i].style.closed = false;\n        }\n        ownStyles.push(itemsData[i].style);\n      } else if (arr[i].ty === 'gr') {\n        if (!processedPos) {\n          itemsData[i] = this.createGroupElement(arr[i]);\n        } else {\n          jLen = itemsData[i].it.length;\n          for (j = 0; j < jLen; j += 1) {\n            itemsData[i].prevViewData[j] = itemsData[i].it[j];\n          }\n        }\n        this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, shouldRender, ownTransforms);\n      } else if (arr[i].ty === 'tr') {\n        if (!processedPos) {\n          currentTransform = this.createTransformElement(arr[i]);\n          itemsData[i] = currentTransform;\n        }\n        ownTransforms.push(itemsData[i]);\n        this.addTransformToStyleList(itemsData[i]);\n      } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\n        if (!processedPos) {\n          itemsData[i] = this.createShapeElement(arr[i]);\n        }\n      } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'pb' || arr[i].ty === 'zz' || arr[i].ty === 'op') {\n        if (!processedPos) {\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\n          modifier.init(this, arr[i]);\n          itemsData[i] = modifier;\n          this.shapeModifiers.push(modifier);\n        } else {\n          modifier = itemsData[i];\n          modifier.closed = false;\n        }\n        ownModifiers.push(modifier);\n      } else if (arr[i].ty === 'rp') {\n        if (!processedPos) {\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\n          itemsData[i] = modifier;\n          modifier.init(this, arr, i, itemsData);\n          this.shapeModifiers.push(modifier);\n          shouldRender = false;\n        } else {\n          modifier = itemsData[i];\n          modifier.closed = true;\n        }\n        ownModifiers.push(modifier);\n      }\n      this.addProcessedElement(arr[i], i + 1);\n    }\n    this.removeTransformFromStyleList();\n    this.closeStyles(ownStyles);\n    len = ownModifiers.length;\n    for (i = 0; i < len; i += 1) {\n      ownModifiers[i].closed = true;\n    }\n  };\n  CVShapeElement.prototype.renderInnerContent = function () {\n    this.transformHelper.opacity = 1;\n    this.transformHelper._opMdf = false;\n    this.renderModifiers();\n    this.transformsManager.processSequences(this._isFirstFrame);\n    this.renderShape(this.transformHelper, this.shapesData, this.itemsData, true);\n  };\n  CVShapeElement.prototype.renderShapeTransform = function (parentTransform, groupTransform) {\n    if (parentTransform._opMdf || groupTransform.op._mdf || this._isFirstFrame) {\n      groupTransform.opacity = parentTransform.opacity;\n      groupTransform.opacity *= groupTransform.op.v;\n      groupTransform._opMdf = true;\n    }\n  };\n  CVShapeElement.prototype.drawLayer = function () {\n    var i;\n    var len = this.stylesList.length;\n    var j;\n    var jLen;\n    var k;\n    var kLen;\n    var elems;\n    var nodes;\n    var renderer = this.globalData.renderer;\n    var ctx = this.globalData.canvasContext;\n    var type;\n    var currentStyle;\n    for (i = 0; i < len; i += 1) {\n      currentStyle = this.stylesList[i];\n      type = currentStyle.type;\n\n      // Skipping style when\n      // Stroke width equals 0\n      // style should not be rendered (extra unused repeaters)\n      // current opacity equals 0\n      // global opacity equals 0\n      if (!((type === 'st' || type === 'gs') && currentStyle.wi === 0 || !currentStyle.data._shouldRender || currentStyle.coOp === 0 || this.globalData.currentGlobalAlpha === 0)) {\n        renderer.save();\n        elems = currentStyle.elements;\n        if (type === 'st' || type === 'gs') {\n          renderer.ctxStrokeStyle(type === 'st' ? currentStyle.co : currentStyle.grd);\n          // ctx.strokeStyle = type === 'st' ? currentStyle.co : currentStyle.grd;\n          renderer.ctxLineWidth(currentStyle.wi);\n          // ctx.lineWidth = currentStyle.wi;\n          renderer.ctxLineCap(currentStyle.lc);\n          // ctx.lineCap = currentStyle.lc;\n          renderer.ctxLineJoin(currentStyle.lj);\n          // ctx.lineJoin = currentStyle.lj;\n          renderer.ctxMiterLimit(currentStyle.ml || 0);\n          // ctx.miterLimit = currentStyle.ml || 0;\n        } else {\n          renderer.ctxFillStyle(type === 'fl' ? currentStyle.co : currentStyle.grd);\n          // ctx.fillStyle = type === 'fl' ? currentStyle.co : currentStyle.grd;\n        }\n        renderer.ctxOpacity(currentStyle.coOp);\n        if (type !== 'st' && type !== 'gs') {\n          ctx.beginPath();\n        }\n        renderer.ctxTransform(currentStyle.preTransforms.finalTransform.props);\n        jLen = elems.length;\n        for (j = 0; j < jLen; j += 1) {\n          if (type === 'st' || type === 'gs') {\n            ctx.beginPath();\n            if (currentStyle.da) {\n              ctx.setLineDash(currentStyle.da);\n              ctx.lineDashOffset = currentStyle[\"do\"];\n            }\n          }\n          nodes = elems[j].trNodes;\n          kLen = nodes.length;\n          for (k = 0; k < kLen; k += 1) {\n            if (nodes[k].t === 'm') {\n              ctx.moveTo(nodes[k].p[0], nodes[k].p[1]);\n            } else if (nodes[k].t === 'c') {\n              ctx.bezierCurveTo(nodes[k].pts[0], nodes[k].pts[1], nodes[k].pts[2], nodes[k].pts[3], nodes[k].pts[4], nodes[k].pts[5]);\n            } else {\n              ctx.closePath();\n            }\n          }\n          if (type === 'st' || type === 'gs') {\n            // ctx.stroke();\n            renderer.ctxStroke();\n            if (currentStyle.da) {\n              ctx.setLineDash(this.dashResetter);\n            }\n          }\n        }\n        if (type !== 'st' && type !== 'gs') {\n          // ctx.fill(currentStyle.r);\n          this.globalData.renderer.ctxFill(currentStyle.r);\n        }\n        renderer.restore();\n      }\n    }\n  };\n  CVShapeElement.prototype.renderShape = function (parentTransform, items, data, isMain) {\n    var i;\n    var len = items.length - 1;\n    var groupTransform;\n    groupTransform = parentTransform;\n    for (i = len; i >= 0; i -= 1) {\n      if (items[i].ty === 'tr') {\n        groupTransform = data[i].transform;\n        this.renderShapeTransform(parentTransform, groupTransform);\n      } else if (items[i].ty === 'sh' || items[i].ty === 'el' || items[i].ty === 'rc' || items[i].ty === 'sr') {\n        this.renderPath(items[i], data[i]);\n      } else if (items[i].ty === 'fl') {\n        this.renderFill(items[i], data[i], groupTransform);\n      } else if (items[i].ty === 'st') {\n        this.renderStroke(items[i], data[i], groupTransform);\n      } else if (items[i].ty === 'gf' || items[i].ty === 'gs') {\n        this.renderGradientFill(items[i], data[i], groupTransform);\n      } else if (items[i].ty === 'gr') {\n        this.renderShape(groupTransform, items[i].it, data[i].it);\n      } else if (items[i].ty === 'tm') {\n        //\n      }\n    }\n    if (isMain) {\n      this.drawLayer();\n    }\n  };\n  CVShapeElement.prototype.renderStyledShape = function (styledShape, shape) {\n    if (this._isFirstFrame || shape._mdf || styledShape.transforms._mdf) {\n      var shapeNodes = styledShape.trNodes;\n      var paths = shape.paths;\n      var i;\n      var len;\n      var j;\n      var jLen = paths._length;\n      shapeNodes.length = 0;\n      var groupTransformMat = styledShape.transforms.finalTransform;\n      for (j = 0; j < jLen; j += 1) {\n        var pathNodes = paths.shapes[j];\n        if (pathNodes && pathNodes.v) {\n          len = pathNodes._length;\n          for (i = 1; i < len; i += 1) {\n            if (i === 1) {\n              shapeNodes.push({\n                t: 'm',\n                p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\n              });\n            }\n            shapeNodes.push({\n              t: 'c',\n              pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[i], pathNodes.v[i])\n            });\n          }\n          if (len === 1) {\n            shapeNodes.push({\n              t: 'm',\n              p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\n            });\n          }\n          if (pathNodes.c && len) {\n            shapeNodes.push({\n              t: 'c',\n              pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[0], pathNodes.v[0])\n            });\n            shapeNodes.push({\n              t: 'z'\n            });\n          }\n        }\n      }\n      styledShape.trNodes = shapeNodes;\n    }\n  };\n  CVShapeElement.prototype.renderPath = function (pathData, itemData) {\n    if (pathData.hd !== true && pathData._shouldRender) {\n      var i;\n      var len = itemData.styledShapes.length;\n      for (i = 0; i < len; i += 1) {\n        this.renderStyledShape(itemData.styledShapes[i], itemData.sh);\n      }\n    }\n  };\n  CVShapeElement.prototype.renderFill = function (styleData, itemData, groupTransform) {\n    var styleElem = itemData.style;\n    if (itemData.c._mdf || this._isFirstFrame) {\n      styleElem.co = 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')';\n    }\n    if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\n      styleElem.coOp = itemData.o.v * groupTransform.opacity;\n    }\n  };\n  CVShapeElement.prototype.renderGradientFill = function (styleData, itemData, groupTransform) {\n    var styleElem = itemData.style;\n    var grd;\n    if (!styleElem.grd || itemData.g._mdf || itemData.s._mdf || itemData.e._mdf || styleData.t !== 1 && (itemData.h._mdf || itemData.a._mdf)) {\n      var ctx = this.globalData.canvasContext;\n      var pt1 = itemData.s.v;\n      var pt2 = itemData.e.v;\n      if (styleData.t === 1) {\n        grd = ctx.createLinearGradient(pt1[0], pt1[1], pt2[0], pt2[1]);\n      } else {\n        var rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\n        var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\n        var percent = itemData.h.v;\n        if (percent >= 1) {\n          percent = 0.99;\n        } else if (percent <= -1) {\n          percent = -0.99;\n        }\n        var dist = rad * percent;\n        var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\n        var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\n        grd = ctx.createRadialGradient(x, y, 0, pt1[0], pt1[1], rad);\n      }\n      var i;\n      var len = styleData.g.p;\n      var cValues = itemData.g.c;\n      var opacity = 1;\n      for (i = 0; i < len; i += 1) {\n        if (itemData.g._hasOpacity && itemData.g._collapsable) {\n          opacity = itemData.g.o[i * 2 + 1];\n        }\n        grd.addColorStop(cValues[i * 4] / 100, 'rgba(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ',' + opacity + ')');\n      }\n      styleElem.grd = grd;\n    }\n    styleElem.coOp = itemData.o.v * groupTransform.opacity;\n  };\n  CVShapeElement.prototype.renderStroke = function (styleData, itemData, groupTransform) {\n    var styleElem = itemData.style;\n    var d = itemData.d;\n    if (d && (d._mdf || this._isFirstFrame)) {\n      styleElem.da = d.dashArray;\n      styleElem[\"do\"] = d.dashoffset[0];\n    }\n    if (itemData.c._mdf || this._isFirstFrame) {\n      styleElem.co = 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')';\n    }\n    if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\n      styleElem.coOp = itemData.o.v * groupTransform.opacity;\n    }\n    if (itemData.w._mdf || this._isFirstFrame) {\n      styleElem.wi = itemData.w.v;\n    }\n  };\n  CVShapeElement.prototype.destroy = function () {\n    this.shapesData = null;\n    this.globalData = null;\n    this.canvasContext = null;\n    this.stylesList.length = 0;\n    this.itemsData.length = 0;\n  };\n\n  function CVTextElement(data, globalData, comp) {\n    this.textSpans = [];\n    this.yOffset = 0;\n    this.fillColorAnim = false;\n    this.strokeColorAnim = false;\n    this.strokeWidthAnim = false;\n    this.stroke = false;\n    this.fill = false;\n    this.justifyOffset = 0;\n    this.currentRender = null;\n    this.renderType = 'canvas';\n    this.values = {\n      fill: 'rgba(0,0,0,0)',\n      stroke: 'rgba(0,0,0,0)',\n      sWidth: 0,\n      fValue: ''\n    };\n    this.initElement(data, globalData, comp);\n  }\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement, ITextElement], CVTextElement);\n  CVTextElement.prototype.tHelper = createTag('canvas').getContext('2d');\n  CVTextElement.prototype.buildNewText = function () {\n    var documentData = this.textProperty.currentData;\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\n    var hasFill = false;\n    if (documentData.fc) {\n      hasFill = true;\n      this.values.fill = this.buildColor(documentData.fc);\n    } else {\n      this.values.fill = 'rgba(0,0,0,0)';\n    }\n    this.fill = hasFill;\n    var hasStroke = false;\n    if (documentData.sc) {\n      hasStroke = true;\n      this.values.stroke = this.buildColor(documentData.sc);\n      this.values.sWidth = documentData.sw;\n    }\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\n    var i;\n    var len;\n    var letters = documentData.l;\n    var matrixHelper = this.mHelper;\n    this.stroke = hasStroke;\n    this.values.fValue = documentData.finalSize + 'px ' + this.globalData.fontManager.getFontByName(documentData.f).fFamily;\n    len = documentData.finalText.length;\n    // this.tHelper.font = this.values.fValue;\n    var charData;\n    var shapeData;\n    var k;\n    var kLen;\n    var shapes;\n    var j;\n    var jLen;\n    var pathNodes;\n    var commands;\n    var pathArr;\n    var singleShape = this.data.singleShape;\n    var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\n    var xPos = 0;\n    var yPos = 0;\n    var firstLine = true;\n    var cnt = 0;\n    for (i = 0; i < len; i += 1) {\n      charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\n      shapeData = charData && charData.data || {};\n      matrixHelper.reset();\n      if (singleShape && letters[i].n) {\n        xPos = -trackingOffset;\n        yPos += documentData.yOffset;\n        yPos += firstLine ? 1 : 0;\n        firstLine = false;\n      }\n      shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\n      jLen = shapes.length;\n      matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\n      if (singleShape) {\n        this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\n      }\n      commands = createSizedArray(jLen - 1);\n      var commandsCounter = 0;\n      for (j = 0; j < jLen; j += 1) {\n        if (shapes[j].ty === 'sh') {\n          kLen = shapes[j].ks.k.i.length;\n          pathNodes = shapes[j].ks.k;\n          pathArr = [];\n          for (k = 1; k < kLen; k += 1) {\n            if (k === 1) {\n              pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\n            }\n            pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToY(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToX(pathNodes.v[k][0], pathNodes.v[k][1], 0), matrixHelper.applyToY(pathNodes.v[k][0], pathNodes.v[k][1], 0));\n          }\n          pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToY(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\n          commands[commandsCounter] = pathArr;\n          commandsCounter += 1;\n        }\n      }\n      if (singleShape) {\n        xPos += letters[i].l;\n        xPos += trackingOffset;\n      }\n      if (this.textSpans[cnt]) {\n        this.textSpans[cnt].elem = commands;\n      } else {\n        this.textSpans[cnt] = {\n          elem: commands\n        };\n      }\n      cnt += 1;\n    }\n  };\n  CVTextElement.prototype.renderInnerContent = function () {\n    this.validateText();\n    var ctx = this.canvasContext;\n    ctx.font = this.values.fValue;\n    this.globalData.renderer.ctxLineCap('butt');\n    // ctx.lineCap = 'butt';\n    this.globalData.renderer.ctxLineJoin('miter');\n    // ctx.lineJoin = 'miter';\n    this.globalData.renderer.ctxMiterLimit(4);\n    // ctx.miterLimit = 4;\n\n    if (!this.data.singleShape) {\n      this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\n    }\n    var i;\n    var len;\n    var j;\n    var jLen;\n    var k;\n    var kLen;\n    var renderedLetters = this.textAnimator.renderedLetters;\n    var letters = this.textProperty.currentData.l;\n    len = letters.length;\n    var renderedLetter;\n    var lastFill = null;\n    var lastStroke = null;\n    var lastStrokeW = null;\n    var commands;\n    var pathArr;\n    var renderer = this.globalData.renderer;\n    for (i = 0; i < len; i += 1) {\n      if (!letters[i].n) {\n        renderedLetter = renderedLetters[i];\n        if (renderedLetter) {\n          renderer.save();\n          renderer.ctxTransform(renderedLetter.p);\n          renderer.ctxOpacity(renderedLetter.o);\n        }\n        if (this.fill) {\n          if (renderedLetter && renderedLetter.fc) {\n            if (lastFill !== renderedLetter.fc) {\n              renderer.ctxFillStyle(renderedLetter.fc);\n              lastFill = renderedLetter.fc;\n              // ctx.fillStyle = renderedLetter.fc;\n            }\n          } else if (lastFill !== this.values.fill) {\n            lastFill = this.values.fill;\n            renderer.ctxFillStyle(this.values.fill);\n            // ctx.fillStyle = this.values.fill;\n          }\n          commands = this.textSpans[i].elem;\n          jLen = commands.length;\n          this.globalData.canvasContext.beginPath();\n          for (j = 0; j < jLen; j += 1) {\n            pathArr = commands[j];\n            kLen = pathArr.length;\n            this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\n            for (k = 2; k < kLen; k += 6) {\n              this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\n            }\n          }\n          this.globalData.canvasContext.closePath();\n          renderer.ctxFill();\n          // this.globalData.canvasContext.fill();\n          /// ctx.fillText(this.textSpans[i].val,0,0);\n        }\n        if (this.stroke) {\n          if (renderedLetter && renderedLetter.sw) {\n            if (lastStrokeW !== renderedLetter.sw) {\n              lastStrokeW = renderedLetter.sw;\n              renderer.ctxLineWidth(renderedLetter.sw);\n              // ctx.lineWidth = renderedLetter.sw;\n            }\n          } else if (lastStrokeW !== this.values.sWidth) {\n            lastStrokeW = this.values.sWidth;\n            renderer.ctxLineWidth(this.values.sWidth);\n            // ctx.lineWidth = this.values.sWidth;\n          }\n          if (renderedLetter && renderedLetter.sc) {\n            if (lastStroke !== renderedLetter.sc) {\n              lastStroke = renderedLetter.sc;\n              renderer.ctxStrokeStyle(renderedLetter.sc);\n              // ctx.strokeStyle = renderedLetter.sc;\n            }\n          } else if (lastStroke !== this.values.stroke) {\n            lastStroke = this.values.stroke;\n            renderer.ctxStrokeStyle(this.values.stroke);\n            // ctx.strokeStyle = this.values.stroke;\n          }\n          commands = this.textSpans[i].elem;\n          jLen = commands.length;\n          this.globalData.canvasContext.beginPath();\n          for (j = 0; j < jLen; j += 1) {\n            pathArr = commands[j];\n            kLen = pathArr.length;\n            this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\n            for (k = 2; k < kLen; k += 6) {\n              this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\n            }\n          }\n          this.globalData.canvasContext.closePath();\n          renderer.ctxStroke();\n          // this.globalData.canvasContext.stroke();\n          /// ctx.strokeText(letters[i].val,0,0);\n        }\n        if (renderedLetter) {\n          this.globalData.renderer.restore();\n        }\n      }\n    }\n  };\n\n  function CVImageElement(data, globalData, comp) {\n    this.assetData = globalData.getAssetData(data.refId);\n    this.img = globalData.imageLoader.getAsset(this.assetData);\n    this.initElement(data, globalData, comp);\n  }\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVImageElement);\n  CVImageElement.prototype.initElement = SVGShapeElement.prototype.initElement;\n  CVImageElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\n  CVImageElement.prototype.createContent = function () {\n    if (this.img.width && (this.assetData.w !== this.img.width || this.assetData.h !== this.img.height)) {\n      var canvas = createTag('canvas');\n      canvas.width = this.assetData.w;\n      canvas.height = this.assetData.h;\n      var ctx = canvas.getContext('2d');\n      var imgW = this.img.width;\n      var imgH = this.img.height;\n      var imgRel = imgW / imgH;\n      var canvasRel = this.assetData.w / this.assetData.h;\n      var widthCrop;\n      var heightCrop;\n      var par = this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio;\n      if (imgRel > canvasRel && par === 'xMidYMid slice' || imgRel < canvasRel && par !== 'xMidYMid slice') {\n        heightCrop = imgH;\n        widthCrop = heightCrop * canvasRel;\n      } else {\n        widthCrop = imgW;\n        heightCrop = widthCrop / canvasRel;\n      }\n      ctx.drawImage(this.img, (imgW - widthCrop) / 2, (imgH - heightCrop) / 2, widthCrop, heightCrop, 0, 0, this.assetData.w, this.assetData.h);\n      this.img = canvas;\n    }\n  };\n  CVImageElement.prototype.renderInnerContent = function () {\n    this.canvasContext.drawImage(this.img, 0, 0);\n  };\n  CVImageElement.prototype.destroy = function () {\n    this.img = null;\n  };\n\n  function CVSolidElement(data, globalData, comp) {\n    this.initElement(data, globalData, comp);\n  }\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVSolidElement);\n  CVSolidElement.prototype.initElement = SVGShapeElement.prototype.initElement;\n  CVSolidElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\n  CVSolidElement.prototype.renderInnerContent = function () {\n    // var ctx = this.canvasContext;\n    this.globalData.renderer.ctxFillStyle(this.data.sc);\n    // ctx.fillStyle = this.data.sc;\n    this.globalData.renderer.ctxFillRect(0, 0, this.data.sw, this.data.sh);\n    // ctx.fillRect(0, 0, this.data.sw, this.data.sh);\n    //\n  };\n\n  function CanvasRendererBase() {}\n  extendPrototype([BaseRenderer], CanvasRendererBase);\n  CanvasRendererBase.prototype.createShape = function (data) {\n    return new CVShapeElement(data, this.globalData, this);\n  };\n  CanvasRendererBase.prototype.createText = function (data) {\n    return new CVTextElement(data, this.globalData, this);\n  };\n  CanvasRendererBase.prototype.createImage = function (data) {\n    return new CVImageElement(data, this.globalData, this);\n  };\n  CanvasRendererBase.prototype.createSolid = function (data) {\n    return new CVSolidElement(data, this.globalData, this);\n  };\n  CanvasRendererBase.prototype.createNull = SVGRenderer.prototype.createNull;\n  CanvasRendererBase.prototype.ctxTransform = function (props) {\n    if (props[0] === 1 && props[1] === 0 && props[4] === 0 && props[5] === 1 && props[12] === 0 && props[13] === 0) {\n      return;\n    }\n    this.canvasContext.transform(props[0], props[1], props[4], props[5], props[12], props[13]);\n  };\n  CanvasRendererBase.prototype.ctxOpacity = function (op) {\n    this.canvasContext.globalAlpha *= op < 0 ? 0 : op;\n  };\n  CanvasRendererBase.prototype.ctxFillStyle = function (value) {\n    this.canvasContext.fillStyle = value;\n  };\n  CanvasRendererBase.prototype.ctxStrokeStyle = function (value) {\n    this.canvasContext.strokeStyle = value;\n  };\n  CanvasRendererBase.prototype.ctxLineWidth = function (value) {\n    this.canvasContext.lineWidth = value;\n  };\n  CanvasRendererBase.prototype.ctxLineCap = function (value) {\n    this.canvasContext.lineCap = value;\n  };\n  CanvasRendererBase.prototype.ctxLineJoin = function (value) {\n    this.canvasContext.lineJoin = value;\n  };\n  CanvasRendererBase.prototype.ctxMiterLimit = function (value) {\n    this.canvasContext.miterLimit = value;\n  };\n  CanvasRendererBase.prototype.ctxFill = function (rule) {\n    this.canvasContext.fill(rule);\n  };\n  CanvasRendererBase.prototype.ctxFillRect = function (x, y, w, h) {\n    this.canvasContext.fillRect(x, y, w, h);\n  };\n  CanvasRendererBase.prototype.ctxStroke = function () {\n    this.canvasContext.stroke();\n  };\n  CanvasRendererBase.prototype.reset = function () {\n    if (!this.renderConfig.clearCanvas) {\n      this.canvasContext.restore();\n      return;\n    }\n    this.contextData.reset();\n  };\n  CanvasRendererBase.prototype.save = function () {\n    this.canvasContext.save();\n  };\n  CanvasRendererBase.prototype.restore = function (actionFlag) {\n    if (!this.renderConfig.clearCanvas) {\n      this.canvasContext.restore();\n      return;\n    }\n    if (actionFlag) {\n      this.globalData.blendMode = 'source-over';\n    }\n    this.contextData.restore(actionFlag);\n  };\n  CanvasRendererBase.prototype.configAnimation = function (animData) {\n    if (this.animationItem.wrapper) {\n      this.animationItem.container = createTag('canvas');\n      var containerStyle = this.animationItem.container.style;\n      containerStyle.width = '100%';\n      containerStyle.height = '100%';\n      var origin = '0px 0px 0px';\n      containerStyle.transformOrigin = origin;\n      containerStyle.mozTransformOrigin = origin;\n      containerStyle.webkitTransformOrigin = origin;\n      containerStyle['-webkit-transform'] = origin;\n      containerStyle.contentVisibility = this.renderConfig.contentVisibility;\n      this.animationItem.wrapper.appendChild(this.animationItem.container);\n      this.canvasContext = this.animationItem.container.getContext('2d');\n      if (this.renderConfig.className) {\n        this.animationItem.container.setAttribute('class', this.renderConfig.className);\n      }\n      if (this.renderConfig.id) {\n        this.animationItem.container.setAttribute('id', this.renderConfig.id);\n      }\n    } else {\n      this.canvasContext = this.renderConfig.context;\n    }\n    this.contextData.setContext(this.canvasContext);\n    this.data = animData;\n    this.layers = animData.layers;\n    this.transformCanvas = {\n      w: animData.w,\n      h: animData.h,\n      sx: 0,\n      sy: 0,\n      tx: 0,\n      ty: 0\n    };\n    this.setupGlobalData(animData, document.body);\n    this.globalData.canvasContext = this.canvasContext;\n    this.globalData.renderer = this;\n    this.globalData.isDashed = false;\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\n    this.globalData.transformCanvas = this.transformCanvas;\n    this.elements = createSizedArray(animData.layers.length);\n    this.updateContainerSize();\n  };\n  CanvasRendererBase.prototype.updateContainerSize = function (width, height) {\n    this.reset();\n    var elementWidth;\n    var elementHeight;\n    if (width) {\n      elementWidth = width;\n      elementHeight = height;\n      this.canvasContext.canvas.width = elementWidth;\n      this.canvasContext.canvas.height = elementHeight;\n    } else {\n      if (this.animationItem.wrapper && this.animationItem.container) {\n        elementWidth = this.animationItem.wrapper.offsetWidth;\n        elementHeight = this.animationItem.wrapper.offsetHeight;\n      } else {\n        elementWidth = this.canvasContext.canvas.width;\n        elementHeight = this.canvasContext.canvas.height;\n      }\n      this.canvasContext.canvas.width = elementWidth * this.renderConfig.dpr;\n      this.canvasContext.canvas.height = elementHeight * this.renderConfig.dpr;\n    }\n    var elementRel;\n    var animationRel;\n    if (this.renderConfig.preserveAspectRatio.indexOf('meet') !== -1 || this.renderConfig.preserveAspectRatio.indexOf('slice') !== -1) {\n      var par = this.renderConfig.preserveAspectRatio.split(' ');\n      var fillType = par[1] || 'meet';\n      var pos = par[0] || 'xMidYMid';\n      var xPos = pos.substr(0, 4);\n      var yPos = pos.substr(4);\n      elementRel = elementWidth / elementHeight;\n      animationRel = this.transformCanvas.w / this.transformCanvas.h;\n      if (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice') {\n        this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\n        this.transformCanvas.sy = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\n      } else {\n        this.transformCanvas.sx = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\n        this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\n      }\n      if (xPos === 'xMid' && (animationRel < elementRel && fillType === 'meet' || animationRel > elementRel && fillType === 'slice')) {\n        this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) / 2 * this.renderConfig.dpr;\n      } else if (xPos === 'xMax' && (animationRel < elementRel && fillType === 'meet' || animationRel > elementRel && fillType === 'slice')) {\n        this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) * this.renderConfig.dpr;\n      } else {\n        this.transformCanvas.tx = 0;\n      }\n      if (yPos === 'YMid' && (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice')) {\n        this.transformCanvas.ty = (elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) / 2 * this.renderConfig.dpr;\n      } else if (yPos === 'YMax' && (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice')) {\n        this.transformCanvas.ty = (elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) * this.renderConfig.dpr;\n      } else {\n        this.transformCanvas.ty = 0;\n      }\n    } else if (this.renderConfig.preserveAspectRatio === 'none') {\n      this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\n      this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\n      this.transformCanvas.tx = 0;\n      this.transformCanvas.ty = 0;\n    } else {\n      this.transformCanvas.sx = this.renderConfig.dpr;\n      this.transformCanvas.sy = this.renderConfig.dpr;\n      this.transformCanvas.tx = 0;\n      this.transformCanvas.ty = 0;\n    }\n    this.transformCanvas.props = [this.transformCanvas.sx, 0, 0, 0, 0, this.transformCanvas.sy, 0, 0, 0, 0, 1, 0, this.transformCanvas.tx, this.transformCanvas.ty, 0, 1];\n    /* var i, len = this.elements.length;\n      for(i=0;i<len;i+=1){\n          if(this.elements[i] && this.elements[i].data.ty === 0){\n              this.elements[i].resize(this.globalData.transformCanvas);\n          }\n      } */\n    this.ctxTransform(this.transformCanvas.props);\n    this.canvasContext.beginPath();\n    this.canvasContext.rect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\n    this.canvasContext.closePath();\n    this.canvasContext.clip();\n    this.renderFrame(this.renderedFrame, true);\n  };\n  CanvasRendererBase.prototype.destroy = function () {\n    if (this.renderConfig.clearCanvas && this.animationItem.wrapper) {\n      this.animationItem.wrapper.innerText = '';\n    }\n    var i;\n    var len = this.layers ? this.layers.length : 0;\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.elements[i] && this.elements[i].destroy) {\n        this.elements[i].destroy();\n      }\n    }\n    this.elements.length = 0;\n    this.globalData.canvasContext = null;\n    this.animationItem.container = null;\n    this.destroyed = true;\n  };\n  CanvasRendererBase.prototype.renderFrame = function (num, forceRender) {\n    if (this.renderedFrame === num && this.renderConfig.clearCanvas === true && !forceRender || this.destroyed || num === -1) {\n      return;\n    }\n    this.renderedFrame = num;\n    this.globalData.frameNum = num - this.animationItem._isFirstFrame;\n    this.globalData.frameId += 1;\n    this.globalData._mdf = !this.renderConfig.clearCanvas || forceRender;\n    this.globalData.projectInterface.currentFrame = num;\n\n    // console.log('--------');\n    // console.log('NEW: ',num);\n    var i;\n    var len = this.layers.length;\n    if (!this.completeLayers) {\n      this.checkLayers(num);\n    }\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].prepareFrame(num - this.layers[i].st);\n      }\n    }\n    if (this.globalData._mdf) {\n      if (this.renderConfig.clearCanvas === true) {\n        this.canvasContext.clearRect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\n      } else {\n        this.save();\n      }\n      for (i = len - 1; i >= 0; i -= 1) {\n        if (this.completeLayers || this.elements[i]) {\n          this.elements[i].renderFrame();\n        }\n      }\n      if (this.renderConfig.clearCanvas !== true) {\n        this.restore();\n      }\n    }\n  };\n  CanvasRendererBase.prototype.buildItem = function (pos) {\n    var elements = this.elements;\n    if (elements[pos] || this.layers[pos].ty === 99) {\n      return;\n    }\n    var element = this.createItem(this.layers[pos], this, this.globalData);\n    elements[pos] = element;\n    element.initExpressions();\n    /* if(this.layers[pos].ty === 0){\n          element.resize(this.globalData.transformCanvas);\n      } */\n  };\n  CanvasRendererBase.prototype.checkPendingElements = function () {\n    while (this.pendingElements.length) {\n      var element = this.pendingElements.pop();\n      element.checkParenting();\n    }\n  };\n  CanvasRendererBase.prototype.hide = function () {\n    this.animationItem.container.style.display = 'none';\n  };\n  CanvasRendererBase.prototype.show = function () {\n    this.animationItem.container.style.display = 'block';\n  };\n\n  function CanvasContext() {\n    this.opacity = -1;\n    this.transform = createTypedArray('float32', 16);\n    this.fillStyle = '';\n    this.strokeStyle = '';\n    this.lineWidth = '';\n    this.lineCap = '';\n    this.lineJoin = '';\n    this.miterLimit = '';\n    this.id = Math.random();\n  }\n  function CVContextData() {\n    this.stack = [];\n    this.cArrPos = 0;\n    this.cTr = new Matrix();\n    var i;\n    var len = 15;\n    for (i = 0; i < len; i += 1) {\n      var canvasContext = new CanvasContext();\n      this.stack[i] = canvasContext;\n    }\n    this._length = len;\n    this.nativeContext = null;\n    this.transformMat = new Matrix();\n    this.currentOpacity = 1;\n    //\n    this.currentFillStyle = '';\n    this.appliedFillStyle = '';\n    //\n    this.currentStrokeStyle = '';\n    this.appliedStrokeStyle = '';\n    //\n    this.currentLineWidth = '';\n    this.appliedLineWidth = '';\n    //\n    this.currentLineCap = '';\n    this.appliedLineCap = '';\n    //\n    this.currentLineJoin = '';\n    this.appliedLineJoin = '';\n    //\n    this.appliedMiterLimit = '';\n    this.currentMiterLimit = '';\n  }\n  CVContextData.prototype.duplicate = function () {\n    var newLength = this._length * 2;\n    var i = 0;\n    for (i = this._length; i < newLength; i += 1) {\n      this.stack[i] = new CanvasContext();\n    }\n    this._length = newLength;\n  };\n  CVContextData.prototype.reset = function () {\n    this.cArrPos = 0;\n    this.cTr.reset();\n    this.stack[this.cArrPos].opacity = 1;\n  };\n  CVContextData.prototype.restore = function (forceRestore) {\n    this.cArrPos -= 1;\n    var currentContext = this.stack[this.cArrPos];\n    var transform = currentContext.transform;\n    var i;\n    var arr = this.cTr.props;\n    for (i = 0; i < 16; i += 1) {\n      arr[i] = transform[i];\n    }\n    if (forceRestore) {\n      this.nativeContext.restore();\n      var prevStack = this.stack[this.cArrPos + 1];\n      this.appliedFillStyle = prevStack.fillStyle;\n      this.appliedStrokeStyle = prevStack.strokeStyle;\n      this.appliedLineWidth = prevStack.lineWidth;\n      this.appliedLineCap = prevStack.lineCap;\n      this.appliedLineJoin = prevStack.lineJoin;\n      this.appliedMiterLimit = prevStack.miterLimit;\n    }\n    this.nativeContext.setTransform(transform[0], transform[1], transform[4], transform[5], transform[12], transform[13]);\n    if (forceRestore || currentContext.opacity !== -1 && this.currentOpacity !== currentContext.opacity) {\n      this.nativeContext.globalAlpha = currentContext.opacity;\n      this.currentOpacity = currentContext.opacity;\n    }\n    this.currentFillStyle = currentContext.fillStyle;\n    this.currentStrokeStyle = currentContext.strokeStyle;\n    this.currentLineWidth = currentContext.lineWidth;\n    this.currentLineCap = currentContext.lineCap;\n    this.currentLineJoin = currentContext.lineJoin;\n    this.currentMiterLimit = currentContext.miterLimit;\n  };\n  CVContextData.prototype.save = function (saveOnNativeFlag) {\n    if (saveOnNativeFlag) {\n      this.nativeContext.save();\n    }\n    var props = this.cTr.props;\n    if (this._length <= this.cArrPos) {\n      this.duplicate();\n    }\n    var currentStack = this.stack[this.cArrPos];\n    var i;\n    for (i = 0; i < 16; i += 1) {\n      currentStack.transform[i] = props[i];\n    }\n    this.cArrPos += 1;\n    var newStack = this.stack[this.cArrPos];\n    newStack.opacity = currentStack.opacity;\n    newStack.fillStyle = currentStack.fillStyle;\n    newStack.strokeStyle = currentStack.strokeStyle;\n    newStack.lineWidth = currentStack.lineWidth;\n    newStack.lineCap = currentStack.lineCap;\n    newStack.lineJoin = currentStack.lineJoin;\n    newStack.miterLimit = currentStack.miterLimit;\n  };\n  CVContextData.prototype.setOpacity = function (value) {\n    this.stack[this.cArrPos].opacity = value;\n  };\n  CVContextData.prototype.setContext = function (value) {\n    this.nativeContext = value;\n  };\n  CVContextData.prototype.fillStyle = function (value) {\n    if (this.stack[this.cArrPos].fillStyle !== value) {\n      this.currentFillStyle = value;\n      this.stack[this.cArrPos].fillStyle = value;\n    }\n  };\n  CVContextData.prototype.strokeStyle = function (value) {\n    if (this.stack[this.cArrPos].strokeStyle !== value) {\n      this.currentStrokeStyle = value;\n      this.stack[this.cArrPos].strokeStyle = value;\n    }\n  };\n  CVContextData.prototype.lineWidth = function (value) {\n    if (this.stack[this.cArrPos].lineWidth !== value) {\n      this.currentLineWidth = value;\n      this.stack[this.cArrPos].lineWidth = value;\n    }\n  };\n  CVContextData.prototype.lineCap = function (value) {\n    if (this.stack[this.cArrPos].lineCap !== value) {\n      this.currentLineCap = value;\n      this.stack[this.cArrPos].lineCap = value;\n    }\n  };\n  CVContextData.prototype.lineJoin = function (value) {\n    if (this.stack[this.cArrPos].lineJoin !== value) {\n      this.currentLineJoin = value;\n      this.stack[this.cArrPos].lineJoin = value;\n    }\n  };\n  CVContextData.prototype.miterLimit = function (value) {\n    if (this.stack[this.cArrPos].miterLimit !== value) {\n      this.currentMiterLimit = value;\n      this.stack[this.cArrPos].miterLimit = value;\n    }\n  };\n  CVContextData.prototype.transform = function (props) {\n    this.transformMat.cloneFromProps(props);\n    // Taking the last transform value from the stored stack of transforms\n    var currentTransform = this.cTr;\n    // Applying the last transform value after the new transform to respect the order of transformations\n    this.transformMat.multiply(currentTransform);\n    // Storing the new transformed value in the stored transform\n    currentTransform.cloneFromProps(this.transformMat.props);\n    var trProps = currentTransform.props;\n    // Applying the new transform to the canvas\n    this.nativeContext.setTransform(trProps[0], trProps[1], trProps[4], trProps[5], trProps[12], trProps[13]);\n  };\n  CVContextData.prototype.opacity = function (op) {\n    var currentOpacity = this.stack[this.cArrPos].opacity;\n    currentOpacity *= op < 0 ? 0 : op;\n    if (this.stack[this.cArrPos].opacity !== currentOpacity) {\n      if (this.currentOpacity !== op) {\n        this.nativeContext.globalAlpha = op;\n        this.currentOpacity = op;\n      }\n      this.stack[this.cArrPos].opacity = currentOpacity;\n    }\n  };\n  CVContextData.prototype.fill = function (rule) {\n    if (this.appliedFillStyle !== this.currentFillStyle) {\n      this.appliedFillStyle = this.currentFillStyle;\n      this.nativeContext.fillStyle = this.appliedFillStyle;\n    }\n    this.nativeContext.fill(rule);\n  };\n  CVContextData.prototype.fillRect = function (x, y, w, h) {\n    if (this.appliedFillStyle !== this.currentFillStyle) {\n      this.appliedFillStyle = this.currentFillStyle;\n      this.nativeContext.fillStyle = this.appliedFillStyle;\n    }\n    this.nativeContext.fillRect(x, y, w, h);\n  };\n  CVContextData.prototype.stroke = function () {\n    if (this.appliedStrokeStyle !== this.currentStrokeStyle) {\n      this.appliedStrokeStyle = this.currentStrokeStyle;\n      this.nativeContext.strokeStyle = this.appliedStrokeStyle;\n    }\n    if (this.appliedLineWidth !== this.currentLineWidth) {\n      this.appliedLineWidth = this.currentLineWidth;\n      this.nativeContext.lineWidth = this.appliedLineWidth;\n    }\n    if (this.appliedLineCap !== this.currentLineCap) {\n      this.appliedLineCap = this.currentLineCap;\n      this.nativeContext.lineCap = this.appliedLineCap;\n    }\n    if (this.appliedLineJoin !== this.currentLineJoin) {\n      this.appliedLineJoin = this.currentLineJoin;\n      this.nativeContext.lineJoin = this.appliedLineJoin;\n    }\n    if (this.appliedMiterLimit !== this.currentMiterLimit) {\n      this.appliedMiterLimit = this.currentMiterLimit;\n      this.nativeContext.miterLimit = this.appliedMiterLimit;\n    }\n    this.nativeContext.stroke();\n  };\n\n  function CVCompElement(data, globalData, comp) {\n    this.completeLayers = false;\n    this.layers = data.layers;\n    this.pendingElements = [];\n    this.elements = createSizedArray(this.layers.length);\n    this.initElement(data, globalData, comp);\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\n      _placeholder: true\n    };\n  }\n  extendPrototype([CanvasRendererBase, ICompElement, CVBaseElement], CVCompElement);\n  CVCompElement.prototype.renderInnerContent = function () {\n    var ctx = this.canvasContext;\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(this.data.w, 0);\n    ctx.lineTo(this.data.w, this.data.h);\n    ctx.lineTo(0, this.data.h);\n    ctx.lineTo(0, 0);\n    ctx.clip();\n    var i;\n    var len = this.layers.length;\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].renderFrame();\n      }\n    }\n  };\n  CVCompElement.prototype.destroy = function () {\n    var i;\n    var len = this.layers.length;\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.elements[i]) {\n        this.elements[i].destroy();\n      }\n    }\n    this.layers = null;\n    this.elements = null;\n  };\n  CVCompElement.prototype.createComp = function (data) {\n    return new CVCompElement(data, this.globalData, this);\n  };\n\n  function CanvasRenderer(animationItem, config) {\n    this.animationItem = animationItem;\n    this.renderConfig = {\n      clearCanvas: config && config.clearCanvas !== undefined ? config.clearCanvas : true,\n      context: config && config.context || null,\n      progressiveLoad: config && config.progressiveLoad || false,\n      preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\n      contentVisibility: config && config.contentVisibility || 'visible',\n      className: config && config.className || '',\n      id: config && config.id || '',\n      runExpressions: !config || config.runExpressions === undefined || config.runExpressions\n    };\n    this.renderConfig.dpr = config && config.dpr || 1;\n    if (this.animationItem.wrapper) {\n      this.renderConfig.dpr = config && config.dpr || window.devicePixelRatio || 1;\n    }\n    this.renderedFrame = -1;\n    this.globalData = {\n      frameNum: -1,\n      _mdf: false,\n      renderConfig: this.renderConfig,\n      currentGlobalAlpha: -1\n    };\n    this.contextData = new CVContextData();\n    this.elements = [];\n    this.pendingElements = [];\n    this.transformMat = new Matrix();\n    this.completeLayers = false;\n    this.rendererType = 'canvas';\n    if (this.renderConfig.clearCanvas) {\n      this.ctxTransform = this.contextData.transform.bind(this.contextData);\n      this.ctxOpacity = this.contextData.opacity.bind(this.contextData);\n      this.ctxFillStyle = this.contextData.fillStyle.bind(this.contextData);\n      this.ctxStrokeStyle = this.contextData.strokeStyle.bind(this.contextData);\n      this.ctxLineWidth = this.contextData.lineWidth.bind(this.contextData);\n      this.ctxLineCap = this.contextData.lineCap.bind(this.contextData);\n      this.ctxLineJoin = this.contextData.lineJoin.bind(this.contextData);\n      this.ctxMiterLimit = this.contextData.miterLimit.bind(this.contextData);\n      this.ctxFill = this.contextData.fill.bind(this.contextData);\n      this.ctxFillRect = this.contextData.fillRect.bind(this.contextData);\n      this.ctxStroke = this.contextData.stroke.bind(this.contextData);\n      this.save = this.contextData.save.bind(this.contextData);\n    }\n  }\n  extendPrototype([CanvasRendererBase], CanvasRenderer);\n  CanvasRenderer.prototype.createComp = function (data) {\n    return new CVCompElement(data, this.globalData, this);\n  };\n\n  function HBaseElement() {}\n  HBaseElement.prototype = {\n    checkBlendMode: function checkBlendMode() {},\n    initRendererElement: function initRendererElement() {\n      this.baseElement = createTag(this.data.tg || 'div');\n      if (this.data.hasMask) {\n        this.svgElement = createNS('svg');\n        this.layerElement = createNS('g');\n        this.maskedElement = this.layerElement;\n        this.svgElement.appendChild(this.layerElement);\n        this.baseElement.appendChild(this.svgElement);\n      } else {\n        this.layerElement = this.baseElement;\n      }\n      styleDiv(this.baseElement);\n    },\n    createContainerElements: function createContainerElements() {\n      this.renderableEffectsManager = new CVEffects(this);\n      this.transformedElement = this.baseElement;\n      this.maskedElement = this.layerElement;\n      if (this.data.ln) {\n        this.layerElement.setAttribute('id', this.data.ln);\n      }\n      if (this.data.cl) {\n        this.layerElement.setAttribute('class', this.data.cl);\n      }\n      if (this.data.bm !== 0) {\n        this.setBlendMode();\n      }\n    },\n    renderElement: function renderElement() {\n      var transformedElementStyle = this.transformedElement ? this.transformedElement.style : {};\n      if (this.finalTransform._matMdf) {\n        var matrixValue = this.finalTransform.mat.toCSS();\n        transformedElementStyle.transform = matrixValue;\n        transformedElementStyle.webkitTransform = matrixValue;\n      }\n      if (this.finalTransform._opMdf) {\n        transformedElementStyle.opacity = this.finalTransform.mProp.o.v;\n      }\n    },\n    renderFrame: function renderFrame() {\n      // If it is exported as hidden (data.hd === true) no need to render\n      // If it is not visible no need to render\n      if (this.data.hd || this.hidden) {\n        return;\n      }\n      this.renderTransform();\n      this.renderRenderable();\n      this.renderElement();\n      this.renderInnerContent();\n      if (this._isFirstFrame) {\n        this._isFirstFrame = false;\n      }\n    },\n    destroy: function destroy() {\n      this.layerElement = null;\n      this.transformedElement = null;\n      if (this.matteElement) {\n        this.matteElement = null;\n      }\n      if (this.maskManager) {\n        this.maskManager.destroy();\n        this.maskManager = null;\n      }\n    },\n    createRenderableComponents: function createRenderableComponents() {\n      this.maskManager = new MaskElement(this.data, this, this.globalData);\n    },\n    addEffects: function addEffects() {},\n    setMatte: function setMatte() {}\n  };\n  HBaseElement.prototype.getBaseElement = SVGBaseElement.prototype.getBaseElement;\n  HBaseElement.prototype.destroyBaseElement = HBaseElement.prototype.destroy;\n  HBaseElement.prototype.buildElementParenting = BaseRenderer.prototype.buildElementParenting;\n\n  function HSolidElement(data, globalData, comp) {\n    this.initElement(data, globalData, comp);\n  }\n  extendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], HSolidElement);\n  HSolidElement.prototype.createContent = function () {\n    var rect;\n    if (this.data.hasMask) {\n      rect = createNS('rect');\n      rect.setAttribute('width', this.data.sw);\n      rect.setAttribute('height', this.data.sh);\n      rect.setAttribute('fill', this.data.sc);\n      this.svgElement.setAttribute('width', this.data.sw);\n      this.svgElement.setAttribute('height', this.data.sh);\n    } else {\n      rect = createTag('div');\n      rect.style.width = this.data.sw + 'px';\n      rect.style.height = this.data.sh + 'px';\n      rect.style.backgroundColor = this.data.sc;\n    }\n    this.layerElement.appendChild(rect);\n  };\n\n  function HShapeElement(data, globalData, comp) {\n    // List of drawable elements\n    this.shapes = [];\n    // Full shape data\n    this.shapesData = data.shapes;\n    // List of styles that will be applied to shapes\n    this.stylesList = [];\n    // List of modifiers that will be applied to shapes\n    this.shapeModifiers = [];\n    // List of items in shape tree\n    this.itemsData = [];\n    // List of items in previous shape tree\n    this.processedElements = [];\n    // List of animated components\n    this.animatedContents = [];\n    this.shapesContainer = createNS('g');\n    this.initElement(data, globalData, comp);\n    // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\n    // List of elements that have been created\n    this.prevViewData = [];\n    this.currentBBox = {\n      x: 999999,\n      y: -999999,\n      h: 0,\n      w: 0\n    };\n  }\n  extendPrototype([BaseElement, TransformElement, HSolidElement, SVGShapeElement, HBaseElement, HierarchyElement, FrameElement, RenderableElement], HShapeElement);\n  HShapeElement.prototype._renderShapeFrame = HShapeElement.prototype.renderInnerContent;\n  HShapeElement.prototype.createContent = function () {\n    var cont;\n    this.baseElement.style.fontSize = 0;\n    if (this.data.hasMask) {\n      this.layerElement.appendChild(this.shapesContainer);\n      cont = this.svgElement;\n    } else {\n      cont = createNS('svg');\n      var size = this.comp.data ? this.comp.data : this.globalData.compSize;\n      cont.setAttribute('width', size.w);\n      cont.setAttribute('height', size.h);\n      cont.appendChild(this.shapesContainer);\n      this.layerElement.appendChild(cont);\n    }\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.shapesContainer, 0, [], true);\n    this.filterUniqueShapes();\n    this.shapeCont = cont;\n  };\n  HShapeElement.prototype.getTransformedPoint = function (transformers, point) {\n    var i;\n    var len = transformers.length;\n    for (i = 0; i < len; i += 1) {\n      point = transformers[i].mProps.v.applyToPointArray(point[0], point[1], 0);\n    }\n    return point;\n  };\n  HShapeElement.prototype.calculateShapeBoundingBox = function (item, boundingBox) {\n    var shape = item.sh.v;\n    var transformers = item.transformers;\n    var i;\n    var len = shape._length;\n    var vPoint;\n    var oPoint;\n    var nextIPoint;\n    var nextVPoint;\n    if (len <= 1) {\n      return;\n    }\n    for (i = 0; i < len - 1; i += 1) {\n      vPoint = this.getTransformedPoint(transformers, shape.v[i]);\n      oPoint = this.getTransformedPoint(transformers, shape.o[i]);\n      nextIPoint = this.getTransformedPoint(transformers, shape.i[i + 1]);\n      nextVPoint = this.getTransformedPoint(transformers, shape.v[i + 1]);\n      this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\n    }\n    if (shape.c) {\n      vPoint = this.getTransformedPoint(transformers, shape.v[i]);\n      oPoint = this.getTransformedPoint(transformers, shape.o[i]);\n      nextIPoint = this.getTransformedPoint(transformers, shape.i[0]);\n      nextVPoint = this.getTransformedPoint(transformers, shape.v[0]);\n      this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\n    }\n  };\n  HShapeElement.prototype.checkBounds = function (vPoint, oPoint, nextIPoint, nextVPoint, boundingBox) {\n    this.getBoundsOfCurve(vPoint, oPoint, nextIPoint, nextVPoint);\n    var bounds = this.shapeBoundingBox;\n    boundingBox.x = bmMin(bounds.left, boundingBox.x);\n    boundingBox.xMax = bmMax(bounds.right, boundingBox.xMax);\n    boundingBox.y = bmMin(bounds.top, boundingBox.y);\n    boundingBox.yMax = bmMax(bounds.bottom, boundingBox.yMax);\n  };\n  HShapeElement.prototype.shapeBoundingBox = {\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  };\n  HShapeElement.prototype.tempBoundingBox = {\n    x: 0,\n    xMax: 0,\n    y: 0,\n    yMax: 0,\n    width: 0,\n    height: 0\n  };\n  HShapeElement.prototype.getBoundsOfCurve = function (p0, p1, p2, p3) {\n    var bounds = [[p0[0], p3[0]], [p0[1], p3[1]]];\n    for (var a, b, c, t, b2ac, t1, t2, i = 0; i < 2; ++i) {\n      // eslint-disable-line no-plusplus\n      b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\n      a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\n      c = 3 * p1[i] - 3 * p0[i];\n      b |= 0; // eslint-disable-line no-bitwise\n      a |= 0; // eslint-disable-line no-bitwise\n      c |= 0; // eslint-disable-line no-bitwise\n\n      if (a === 0 && b === 0) {\n        //\n      } else if (a === 0) {\n        t = -c / b;\n        if (t > 0 && t < 1) {\n          bounds[i].push(this.calculateF(t, p0, p1, p2, p3, i));\n        }\n      } else {\n        b2ac = b * b - 4 * c * a;\n        if (b2ac >= 0) {\n          t1 = (-b + bmSqrt(b2ac)) / (2 * a);\n          if (t1 > 0 && t1 < 1) bounds[i].push(this.calculateF(t1, p0, p1, p2, p3, i));\n          t2 = (-b - bmSqrt(b2ac)) / (2 * a);\n          if (t2 > 0 && t2 < 1) bounds[i].push(this.calculateF(t2, p0, p1, p2, p3, i));\n        }\n      }\n    }\n    this.shapeBoundingBox.left = bmMin.apply(null, bounds[0]);\n    this.shapeBoundingBox.top = bmMin.apply(null, bounds[1]);\n    this.shapeBoundingBox.right = bmMax.apply(null, bounds[0]);\n    this.shapeBoundingBox.bottom = bmMax.apply(null, bounds[1]);\n  };\n  HShapeElement.prototype.calculateF = function (t, p0, p1, p2, p3, i) {\n    return bmPow(1 - t, 3) * p0[i] + 3 * bmPow(1 - t, 2) * t * p1[i] + 3 * (1 - t) * bmPow(t, 2) * p2[i] + bmPow(t, 3) * p3[i];\n  };\n  HShapeElement.prototype.calculateBoundingBox = function (itemsData, boundingBox) {\n    var i;\n    var len = itemsData.length;\n    for (i = 0; i < len; i += 1) {\n      if (itemsData[i] && itemsData[i].sh) {\n        this.calculateShapeBoundingBox(itemsData[i], boundingBox);\n      } else if (itemsData[i] && itemsData[i].it) {\n        this.calculateBoundingBox(itemsData[i].it, boundingBox);\n      } else if (itemsData[i] && itemsData[i].style && itemsData[i].w) {\n        this.expandStrokeBoundingBox(itemsData[i].w, boundingBox);\n      }\n    }\n  };\n  HShapeElement.prototype.expandStrokeBoundingBox = function (widthProperty, boundingBox) {\n    var width = 0;\n    if (widthProperty.keyframes) {\n      for (var i = 0; i < widthProperty.keyframes.length; i += 1) {\n        var kfw = widthProperty.keyframes[i].s;\n        if (kfw > width) {\n          width = kfw;\n        }\n      }\n      width *= widthProperty.mult;\n    } else {\n      width = widthProperty.v * widthProperty.mult;\n    }\n    boundingBox.x -= width;\n    boundingBox.xMax += width;\n    boundingBox.y -= width;\n    boundingBox.yMax += width;\n  };\n  HShapeElement.prototype.currentBoxContains = function (box) {\n    return this.currentBBox.x <= box.x && this.currentBBox.y <= box.y && this.currentBBox.width + this.currentBBox.x >= box.x + box.width && this.currentBBox.height + this.currentBBox.y >= box.y + box.height;\n  };\n  HShapeElement.prototype.renderInnerContent = function () {\n    this._renderShapeFrame();\n    if (!this.hidden && (this._isFirstFrame || this._mdf)) {\n      var tempBoundingBox = this.tempBoundingBox;\n      var max = 999999;\n      tempBoundingBox.x = max;\n      tempBoundingBox.xMax = -max;\n      tempBoundingBox.y = max;\n      tempBoundingBox.yMax = -max;\n      this.calculateBoundingBox(this.itemsData, tempBoundingBox);\n      tempBoundingBox.width = tempBoundingBox.xMax < tempBoundingBox.x ? 0 : tempBoundingBox.xMax - tempBoundingBox.x;\n      tempBoundingBox.height = tempBoundingBox.yMax < tempBoundingBox.y ? 0 : tempBoundingBox.yMax - tempBoundingBox.y;\n      // var tempBoundingBox = this.shapeCont.getBBox();\n      if (this.currentBoxContains(tempBoundingBox)) {\n        return;\n      }\n      var changed = false;\n      if (this.currentBBox.w !== tempBoundingBox.width) {\n        this.currentBBox.w = tempBoundingBox.width;\n        this.shapeCont.setAttribute('width', tempBoundingBox.width);\n        changed = true;\n      }\n      if (this.currentBBox.h !== tempBoundingBox.height) {\n        this.currentBBox.h = tempBoundingBox.height;\n        this.shapeCont.setAttribute('height', tempBoundingBox.height);\n        changed = true;\n      }\n      if (changed || this.currentBBox.x !== tempBoundingBox.x || this.currentBBox.y !== tempBoundingBox.y) {\n        this.currentBBox.w = tempBoundingBox.width;\n        this.currentBBox.h = tempBoundingBox.height;\n        this.currentBBox.x = tempBoundingBox.x;\n        this.currentBBox.y = tempBoundingBox.y;\n        this.shapeCont.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\n        var shapeStyle = this.shapeCont.style;\n        var shapeTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\n        shapeStyle.transform = shapeTransform;\n        shapeStyle.webkitTransform = shapeTransform;\n      }\n    }\n  };\n\n  function HTextElement(data, globalData, comp) {\n    this.textSpans = [];\n    this.textPaths = [];\n    this.currentBBox = {\n      x: 999999,\n      y: -999999,\n      h: 0,\n      w: 0\n    };\n    this.renderType = 'svg';\n    this.isMasked = false;\n    this.initElement(data, globalData, comp);\n  }\n  extendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], HTextElement);\n  HTextElement.prototype.createContent = function () {\n    this.isMasked = this.checkMasks();\n    if (this.isMasked) {\n      this.renderType = 'svg';\n      this.compW = this.comp.data.w;\n      this.compH = this.comp.data.h;\n      this.svgElement.setAttribute('width', this.compW);\n      this.svgElement.setAttribute('height', this.compH);\n      var g = createNS('g');\n      this.maskedElement.appendChild(g);\n      this.innerElem = g;\n    } else {\n      this.renderType = 'html';\n      this.innerElem = this.layerElement;\n    }\n    this.checkParenting();\n  };\n  HTextElement.prototype.buildNewText = function () {\n    var documentData = this.textProperty.currentData;\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\n    var innerElemStyle = this.innerElem.style;\n    var textColor = documentData.fc ? this.buildColor(documentData.fc) : 'rgba(0,0,0,0)';\n    innerElemStyle.fill = textColor;\n    innerElemStyle.color = textColor;\n    if (documentData.sc) {\n      innerElemStyle.stroke = this.buildColor(documentData.sc);\n      innerElemStyle.strokeWidth = documentData.sw + 'px';\n    }\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\n    if (!this.globalData.fontManager.chars) {\n      innerElemStyle.fontSize = documentData.finalSize + 'px';\n      innerElemStyle.lineHeight = documentData.finalSize + 'px';\n      if (fontData.fClass) {\n        this.innerElem.className = fontData.fClass;\n      } else {\n        innerElemStyle.fontFamily = fontData.fFamily;\n        var fWeight = documentData.fWeight;\n        var fStyle = documentData.fStyle;\n        innerElemStyle.fontStyle = fStyle;\n        innerElemStyle.fontWeight = fWeight;\n      }\n    }\n    var i;\n    var len;\n    var letters = documentData.l;\n    len = letters.length;\n    var tSpan;\n    var tParent;\n    var tCont;\n    var matrixHelper = this.mHelper;\n    var shapes;\n    var shapeStr = '';\n    var cnt = 0;\n    for (i = 0; i < len; i += 1) {\n      if (this.globalData.fontManager.chars) {\n        if (!this.textPaths[cnt]) {\n          tSpan = createNS('path');\n          tSpan.setAttribute('stroke-linecap', lineCapEnum[1]);\n          tSpan.setAttribute('stroke-linejoin', lineJoinEnum[2]);\n          tSpan.setAttribute('stroke-miterlimit', '4');\n        } else {\n          tSpan = this.textPaths[cnt];\n        }\n        if (!this.isMasked) {\n          if (this.textSpans[cnt]) {\n            tParent = this.textSpans[cnt];\n            tCont = tParent.children[0];\n          } else {\n            tParent = createTag('div');\n            tParent.style.lineHeight = 0;\n            tCont = createNS('svg');\n            tCont.appendChild(tSpan);\n            styleDiv(tParent);\n          }\n        }\n      } else if (!this.isMasked) {\n        if (this.textSpans[cnt]) {\n          tParent = this.textSpans[cnt];\n          tSpan = this.textPaths[cnt];\n        } else {\n          tParent = createTag('span');\n          styleDiv(tParent);\n          tSpan = createTag('span');\n          styleDiv(tSpan);\n          tParent.appendChild(tSpan);\n        }\n      } else {\n        tSpan = this.textPaths[cnt] ? this.textPaths[cnt] : createNS('text');\n      }\n      // tSpan.setAttribute('visibility', 'hidden');\n      if (this.globalData.fontManager.chars) {\n        var charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\n        var shapeData;\n        if (charData) {\n          shapeData = charData.data;\n        } else {\n          shapeData = null;\n        }\n        matrixHelper.reset();\n        if (shapeData && shapeData.shapes && shapeData.shapes.length) {\n          shapes = shapeData.shapes[0].it;\n          matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\n          shapeStr = this.createPathShape(matrixHelper, shapes);\n          tSpan.setAttribute('d', shapeStr);\n        }\n        if (!this.isMasked) {\n          this.innerElem.appendChild(tParent);\n          if (shapeData && shapeData.shapes) {\n            // document.body.appendChild is needed to get exact measure of shape\n            document.body.appendChild(tCont);\n            var boundingBox = tCont.getBBox();\n            tCont.setAttribute('width', boundingBox.width + 2);\n            tCont.setAttribute('height', boundingBox.height + 2);\n            tCont.setAttribute('viewBox', boundingBox.x - 1 + ' ' + (boundingBox.y - 1) + ' ' + (boundingBox.width + 2) + ' ' + (boundingBox.height + 2));\n            var tContStyle = tCont.style;\n            var tContTranslation = 'translate(' + (boundingBox.x - 1) + 'px,' + (boundingBox.y - 1) + 'px)';\n            tContStyle.transform = tContTranslation;\n            tContStyle.webkitTransform = tContTranslation;\n            letters[i].yOffset = boundingBox.y - 1;\n          } else {\n            tCont.setAttribute('width', 1);\n            tCont.setAttribute('height', 1);\n          }\n          tParent.appendChild(tCont);\n        } else {\n          this.innerElem.appendChild(tSpan);\n        }\n      } else {\n        tSpan.textContent = letters[i].val;\n        tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n        if (!this.isMasked) {\n          this.innerElem.appendChild(tParent);\n          //\n          var tStyle = tSpan.style;\n          var tSpanTranslation = 'translate3d(0,' + -documentData.finalSize / 1.2 + 'px,0)';\n          tStyle.transform = tSpanTranslation;\n          tStyle.webkitTransform = tSpanTranslation;\n        } else {\n          this.innerElem.appendChild(tSpan);\n        }\n      }\n      //\n      if (!this.isMasked) {\n        this.textSpans[cnt] = tParent;\n      } else {\n        this.textSpans[cnt] = tSpan;\n      }\n      this.textSpans[cnt].style.display = 'block';\n      this.textPaths[cnt] = tSpan;\n      cnt += 1;\n    }\n    while (cnt < this.textSpans.length) {\n      this.textSpans[cnt].style.display = 'none';\n      cnt += 1;\n    }\n  };\n  HTextElement.prototype.renderInnerContent = function () {\n    this.validateText();\n    var svgStyle;\n    if (this.data.singleShape) {\n      if (!this._isFirstFrame && !this.lettersChangedFlag) {\n        return;\n      }\n      if (this.isMasked && this.finalTransform._matMdf) {\n        // Todo Benchmark if using this is better than getBBox\n        this.svgElement.setAttribute('viewBox', -this.finalTransform.mProp.p.v[0] + ' ' + -this.finalTransform.mProp.p.v[1] + ' ' + this.compW + ' ' + this.compH);\n        svgStyle = this.svgElement.style;\n        var translation = 'translate(' + -this.finalTransform.mProp.p.v[0] + 'px,' + -this.finalTransform.mProp.p.v[1] + 'px)';\n        svgStyle.transform = translation;\n        svgStyle.webkitTransform = translation;\n      }\n    }\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\n    if (!this.lettersChangedFlag && !this.textAnimator.lettersChangedFlag) {\n      return;\n    }\n    var i;\n    var len;\n    var count = 0;\n    var renderedLetters = this.textAnimator.renderedLetters;\n    var letters = this.textProperty.currentData.l;\n    len = letters.length;\n    var renderedLetter;\n    var textSpan;\n    var textPath;\n    for (i = 0; i < len; i += 1) {\n      if (letters[i].n) {\n        count += 1;\n      } else {\n        textSpan = this.textSpans[i];\n        textPath = this.textPaths[i];\n        renderedLetter = renderedLetters[count];\n        count += 1;\n        if (renderedLetter._mdf.m) {\n          if (!this.isMasked) {\n            textSpan.style.webkitTransform = renderedLetter.m;\n            textSpan.style.transform = renderedLetter.m;\n          } else {\n            textSpan.setAttribute('transform', renderedLetter.m);\n          }\n        }\n        /// /textSpan.setAttribute('opacity',renderedLetter.o);\n        textSpan.style.opacity = renderedLetter.o;\n        if (renderedLetter.sw && renderedLetter._mdf.sw) {\n          textPath.setAttribute('stroke-width', renderedLetter.sw);\n        }\n        if (renderedLetter.sc && renderedLetter._mdf.sc) {\n          textPath.setAttribute('stroke', renderedLetter.sc);\n        }\n        if (renderedLetter.fc && renderedLetter._mdf.fc) {\n          textPath.setAttribute('fill', renderedLetter.fc);\n          textPath.style.color = renderedLetter.fc;\n        }\n      }\n    }\n    if (this.innerElem.getBBox && !this.hidden && (this._isFirstFrame || this._mdf)) {\n      var boundingBox = this.innerElem.getBBox();\n      if (this.currentBBox.w !== boundingBox.width) {\n        this.currentBBox.w = boundingBox.width;\n        this.svgElement.setAttribute('width', boundingBox.width);\n      }\n      if (this.currentBBox.h !== boundingBox.height) {\n        this.currentBBox.h = boundingBox.height;\n        this.svgElement.setAttribute('height', boundingBox.height);\n      }\n      var margin = 1;\n      if (this.currentBBox.w !== boundingBox.width + margin * 2 || this.currentBBox.h !== boundingBox.height + margin * 2 || this.currentBBox.x !== boundingBox.x - margin || this.currentBBox.y !== boundingBox.y - margin) {\n        this.currentBBox.w = boundingBox.width + margin * 2;\n        this.currentBBox.h = boundingBox.height + margin * 2;\n        this.currentBBox.x = boundingBox.x - margin;\n        this.currentBBox.y = boundingBox.y - margin;\n        this.svgElement.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\n        svgStyle = this.svgElement.style;\n        var svgTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\n        svgStyle.transform = svgTransform;\n        svgStyle.webkitTransform = svgTransform;\n      }\n    }\n  };\n\n  function HCameraElement(data, globalData, comp) {\n    this.initFrame();\n    this.initBaseData(data, globalData, comp);\n    this.initHierarchy();\n    var getProp = PropertyFactory.getProp;\n    this.pe = getProp(this, data.pe, 0, 0, this);\n    if (data.ks.p.s) {\n      this.px = getProp(this, data.ks.p.x, 1, 0, this);\n      this.py = getProp(this, data.ks.p.y, 1, 0, this);\n      this.pz = getProp(this, data.ks.p.z, 1, 0, this);\n    } else {\n      this.p = getProp(this, data.ks.p, 1, 0, this);\n    }\n    if (data.ks.a) {\n      this.a = getProp(this, data.ks.a, 1, 0, this);\n    }\n    if (data.ks.or.k.length && data.ks.or.k[0].to) {\n      var i;\n      var len = data.ks.or.k.length;\n      for (i = 0; i < len; i += 1) {\n        data.ks.or.k[i].to = null;\n        data.ks.or.k[i].ti = null;\n      }\n    }\n    this.or = getProp(this, data.ks.or, 1, degToRads, this);\n    this.or.sh = true;\n    this.rx = getProp(this, data.ks.rx, 0, degToRads, this);\n    this.ry = getProp(this, data.ks.ry, 0, degToRads, this);\n    this.rz = getProp(this, data.ks.rz, 0, degToRads, this);\n    this.mat = new Matrix();\n    this._prevMat = new Matrix();\n    this._isFirstFrame = true;\n\n    // TODO: find a better way to make the HCamera element to be compatible with the LayerInterface and TransformInterface.\n    this.finalTransform = {\n      mProp: this\n    };\n  }\n  extendPrototype([BaseElement, FrameElement, HierarchyElement], HCameraElement);\n  HCameraElement.prototype.setup = function () {\n    var i;\n    var len = this.comp.threeDElements.length;\n    var comp;\n    var perspectiveStyle;\n    var containerStyle;\n    for (i = 0; i < len; i += 1) {\n      // [perspectiveElem,container]\n      comp = this.comp.threeDElements[i];\n      if (comp.type === '3d') {\n        perspectiveStyle = comp.perspectiveElem.style;\n        containerStyle = comp.container.style;\n        var perspective = this.pe.v + 'px';\n        var origin = '0px 0px 0px';\n        var matrix = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\n        perspectiveStyle.perspective = perspective;\n        perspectiveStyle.webkitPerspective = perspective;\n        containerStyle.transformOrigin = origin;\n        containerStyle.mozTransformOrigin = origin;\n        containerStyle.webkitTransformOrigin = origin;\n        perspectiveStyle.transform = matrix;\n        perspectiveStyle.webkitTransform = matrix;\n      }\n    }\n  };\n  HCameraElement.prototype.createElements = function () {};\n  HCameraElement.prototype.hide = function () {};\n  HCameraElement.prototype.renderFrame = function () {\n    var _mdf = this._isFirstFrame;\n    var i;\n    var len;\n    if (this.hierarchy) {\n      len = this.hierarchy.length;\n      for (i = 0; i < len; i += 1) {\n        _mdf = this.hierarchy[i].finalTransform.mProp._mdf || _mdf;\n      }\n    }\n    if (_mdf || this.pe._mdf || this.p && this.p._mdf || this.px && (this.px._mdf || this.py._mdf || this.pz._mdf) || this.rx._mdf || this.ry._mdf || this.rz._mdf || this.or._mdf || this.a && this.a._mdf) {\n      this.mat.reset();\n      if (this.hierarchy) {\n        len = this.hierarchy.length - 1;\n        for (i = len; i >= 0; i -= 1) {\n          var mTransf = this.hierarchy[i].finalTransform.mProp;\n          this.mat.translate(-mTransf.p.v[0], -mTransf.p.v[1], mTransf.p.v[2]);\n          this.mat.rotateX(-mTransf.or.v[0]).rotateY(-mTransf.or.v[1]).rotateZ(mTransf.or.v[2]);\n          this.mat.rotateX(-mTransf.rx.v).rotateY(-mTransf.ry.v).rotateZ(mTransf.rz.v);\n          this.mat.scale(1 / mTransf.s.v[0], 1 / mTransf.s.v[1], 1 / mTransf.s.v[2]);\n          this.mat.translate(mTransf.a.v[0], mTransf.a.v[1], mTransf.a.v[2]);\n        }\n      }\n      if (this.p) {\n        this.mat.translate(-this.p.v[0], -this.p.v[1], this.p.v[2]);\n      } else {\n        this.mat.translate(-this.px.v, -this.py.v, this.pz.v);\n      }\n      if (this.a) {\n        var diffVector;\n        if (this.p) {\n          diffVector = [this.p.v[0] - this.a.v[0], this.p.v[1] - this.a.v[1], this.p.v[2] - this.a.v[2]];\n        } else {\n          diffVector = [this.px.v - this.a.v[0], this.py.v - this.a.v[1], this.pz.v - this.a.v[2]];\n        }\n        var mag = Math.sqrt(Math.pow(diffVector[0], 2) + Math.pow(diffVector[1], 2) + Math.pow(diffVector[2], 2));\n        // var lookDir = getNormalizedPoint(getDiffVector(this.a.v,this.p.v));\n        var lookDir = [diffVector[0] / mag, diffVector[1] / mag, diffVector[2] / mag];\n        var lookLengthOnXZ = Math.sqrt(lookDir[2] * lookDir[2] + lookDir[0] * lookDir[0]);\n        var mRotationX = Math.atan2(lookDir[1], lookLengthOnXZ);\n        var mRotationY = Math.atan2(lookDir[0], -lookDir[2]);\n        this.mat.rotateY(mRotationY).rotateX(-mRotationX);\n      }\n      this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);\n      this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]);\n      this.mat.translate(this.globalData.compSize.w / 2, this.globalData.compSize.h / 2, 0);\n      this.mat.translate(0, 0, this.pe.v);\n      var hasMatrixChanged = !this._prevMat.equals(this.mat);\n      if ((hasMatrixChanged || this.pe._mdf) && this.comp.threeDElements) {\n        len = this.comp.threeDElements.length;\n        var comp;\n        var perspectiveStyle;\n        var containerStyle;\n        for (i = 0; i < len; i += 1) {\n          comp = this.comp.threeDElements[i];\n          if (comp.type === '3d') {\n            if (hasMatrixChanged) {\n              var matValue = this.mat.toCSS();\n              containerStyle = comp.container.style;\n              containerStyle.transform = matValue;\n              containerStyle.webkitTransform = matValue;\n            }\n            if (this.pe._mdf) {\n              perspectiveStyle = comp.perspectiveElem.style;\n              perspectiveStyle.perspective = this.pe.v + 'px';\n              perspectiveStyle.webkitPerspective = this.pe.v + 'px';\n            }\n          }\n        }\n        this.mat.clone(this._prevMat);\n      }\n    }\n    this._isFirstFrame = false;\n  };\n  HCameraElement.prototype.prepareFrame = function (num) {\n    this.prepareProperties(num, true);\n  };\n  HCameraElement.prototype.destroy = function () {};\n  HCameraElement.prototype.getBaseElement = function () {\n    return null;\n  };\n\n  function HImageElement(data, globalData, comp) {\n    this.assetData = globalData.getAssetData(data.refId);\n    this.initElement(data, globalData, comp);\n  }\n  extendPrototype([BaseElement, TransformElement, HBaseElement, HSolidElement, HierarchyElement, FrameElement, RenderableElement], HImageElement);\n  HImageElement.prototype.createContent = function () {\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\n    var img = new Image();\n    if (this.data.hasMask) {\n      this.imageElem = createNS('image');\n      this.imageElem.setAttribute('width', this.assetData.w + 'px');\n      this.imageElem.setAttribute('height', this.assetData.h + 'px');\n      this.imageElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\n      this.layerElement.appendChild(this.imageElem);\n      this.baseElement.setAttribute('width', this.assetData.w);\n      this.baseElement.setAttribute('height', this.assetData.h);\n    } else {\n      this.layerElement.appendChild(img);\n    }\n    img.crossOrigin = 'anonymous';\n    img.src = assetPath;\n    if (this.data.ln) {\n      this.baseElement.setAttribute('id', this.data.ln);\n    }\n  };\n\n  function HybridRendererBase(animationItem, config) {\n    this.animationItem = animationItem;\n    this.layers = null;\n    this.renderedFrame = -1;\n    this.renderConfig = {\n      className: config && config.className || '',\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\n      hideOnTransparent: !(config && config.hideOnTransparent === false),\n      filterSize: {\n        width: config && config.filterSize && config.filterSize.width || '400%',\n        height: config && config.filterSize && config.filterSize.height || '400%',\n        x: config && config.filterSize && config.filterSize.x || '-100%',\n        y: config && config.filterSize && config.filterSize.y || '-100%'\n      }\n    };\n    this.globalData = {\n      _mdf: false,\n      frameNum: -1,\n      renderConfig: this.renderConfig\n    };\n    this.pendingElements = [];\n    this.elements = [];\n    this.threeDElements = [];\n    this.destroyed = false;\n    this.camera = null;\n    this.supports3d = true;\n    this.rendererType = 'html';\n  }\n  extendPrototype([BaseRenderer], HybridRendererBase);\n  HybridRendererBase.prototype.buildItem = SVGRenderer.prototype.buildItem;\n  HybridRendererBase.prototype.checkPendingElements = function () {\n    while (this.pendingElements.length) {\n      var element = this.pendingElements.pop();\n      element.checkParenting();\n    }\n  };\n  HybridRendererBase.prototype.appendElementInPos = function (element, pos) {\n    var newDOMElement = element.getBaseElement();\n    if (!newDOMElement) {\n      return;\n    }\n    var layer = this.layers[pos];\n    if (!layer.ddd || !this.supports3d) {\n      if (this.threeDElements) {\n        this.addTo3dContainer(newDOMElement, pos);\n      } else {\n        var i = 0;\n        var nextDOMElement;\n        var nextLayer;\n        var tmpDOMElement;\n        while (i < pos) {\n          if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement) {\n            nextLayer = this.elements[i];\n            tmpDOMElement = this.layers[i].ddd ? this.getThreeDContainerByPos(i) : nextLayer.getBaseElement();\n            nextDOMElement = tmpDOMElement || nextDOMElement;\n          }\n          i += 1;\n        }\n        if (nextDOMElement) {\n          if (!layer.ddd || !this.supports3d) {\n            this.layerElement.insertBefore(newDOMElement, nextDOMElement);\n          }\n        } else if (!layer.ddd || !this.supports3d) {\n          this.layerElement.appendChild(newDOMElement);\n        }\n      }\n    } else {\n      this.addTo3dContainer(newDOMElement, pos);\n    }\n  };\n  HybridRendererBase.prototype.createShape = function (data) {\n    if (!this.supports3d) {\n      return new SVGShapeElement(data, this.globalData, this);\n    }\n    return new HShapeElement(data, this.globalData, this);\n  };\n  HybridRendererBase.prototype.createText = function (data) {\n    if (!this.supports3d) {\n      return new SVGTextLottieElement(data, this.globalData, this);\n    }\n    return new HTextElement(data, this.globalData, this);\n  };\n  HybridRendererBase.prototype.createCamera = function (data) {\n    this.camera = new HCameraElement(data, this.globalData, this);\n    return this.camera;\n  };\n  HybridRendererBase.prototype.createImage = function (data) {\n    if (!this.supports3d) {\n      return new IImageElement(data, this.globalData, this);\n    }\n    return new HImageElement(data, this.globalData, this);\n  };\n  HybridRendererBase.prototype.createSolid = function (data) {\n    if (!this.supports3d) {\n      return new ISolidElement(data, this.globalData, this);\n    }\n    return new HSolidElement(data, this.globalData, this);\n  };\n  HybridRendererBase.prototype.createNull = SVGRenderer.prototype.createNull;\n  HybridRendererBase.prototype.getThreeDContainerByPos = function (pos) {\n    var i = 0;\n    var len = this.threeDElements.length;\n    while (i < len) {\n      if (this.threeDElements[i].startPos <= pos && this.threeDElements[i].endPos >= pos) {\n        return this.threeDElements[i].perspectiveElem;\n      }\n      i += 1;\n    }\n    return null;\n  };\n  HybridRendererBase.prototype.createThreeDContainer = function (pos, type) {\n    var perspectiveElem = createTag('div');\n    var style;\n    var containerStyle;\n    styleDiv(perspectiveElem);\n    var container = createTag('div');\n    styleDiv(container);\n    if (type === '3d') {\n      style = perspectiveElem.style;\n      style.width = this.globalData.compSize.w + 'px';\n      style.height = this.globalData.compSize.h + 'px';\n      var center = '50% 50%';\n      style.webkitTransformOrigin = center;\n      style.mozTransformOrigin = center;\n      style.transformOrigin = center;\n      containerStyle = container.style;\n      var matrix = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\n      containerStyle.transform = matrix;\n      containerStyle.webkitTransform = matrix;\n    }\n    perspectiveElem.appendChild(container);\n    // this.resizerElem.appendChild(perspectiveElem);\n    var threeDContainerData = {\n      container: container,\n      perspectiveElem: perspectiveElem,\n      startPos: pos,\n      endPos: pos,\n      type: type\n    };\n    this.threeDElements.push(threeDContainerData);\n    return threeDContainerData;\n  };\n  HybridRendererBase.prototype.build3dContainers = function () {\n    var i;\n    var len = this.layers.length;\n    var lastThreeDContainerData;\n    var currentContainer = '';\n    for (i = 0; i < len; i += 1) {\n      if (this.layers[i].ddd && this.layers[i].ty !== 3) {\n        if (currentContainer !== '3d') {\n          currentContainer = '3d';\n          lastThreeDContainerData = this.createThreeDContainer(i, '3d');\n        }\n        lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\n      } else {\n        if (currentContainer !== '2d') {\n          currentContainer = '2d';\n          lastThreeDContainerData = this.createThreeDContainer(i, '2d');\n        }\n        lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\n      }\n    }\n    len = this.threeDElements.length;\n    for (i = len - 1; i >= 0; i -= 1) {\n      this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem);\n    }\n  };\n  HybridRendererBase.prototype.addTo3dContainer = function (elem, pos) {\n    var i = 0;\n    var len = this.threeDElements.length;\n    while (i < len) {\n      if (pos <= this.threeDElements[i].endPos) {\n        var j = this.threeDElements[i].startPos;\n        var nextElement;\n        while (j < pos) {\n          if (this.elements[j] && this.elements[j].getBaseElement) {\n            nextElement = this.elements[j].getBaseElement();\n          }\n          j += 1;\n        }\n        if (nextElement) {\n          this.threeDElements[i].container.insertBefore(elem, nextElement);\n        } else {\n          this.threeDElements[i].container.appendChild(elem);\n        }\n        break;\n      }\n      i += 1;\n    }\n  };\n  HybridRendererBase.prototype.configAnimation = function (animData) {\n    var resizerElem = createTag('div');\n    var wrapper = this.animationItem.wrapper;\n    var style = resizerElem.style;\n    style.width = animData.w + 'px';\n    style.height = animData.h + 'px';\n    this.resizerElem = resizerElem;\n    styleDiv(resizerElem);\n    style.transformStyle = 'flat';\n    style.mozTransformStyle = 'flat';\n    style.webkitTransformStyle = 'flat';\n    if (this.renderConfig.className) {\n      resizerElem.setAttribute('class', this.renderConfig.className);\n    }\n    wrapper.appendChild(resizerElem);\n    style.overflow = 'hidden';\n    var svg = createNS('svg');\n    svg.setAttribute('width', '1');\n    svg.setAttribute('height', '1');\n    styleDiv(svg);\n    this.resizerElem.appendChild(svg);\n    var defs = createNS('defs');\n    svg.appendChild(defs);\n    this.data = animData;\n    // Mask animation\n    this.setupGlobalData(animData, svg);\n    this.globalData.defs = defs;\n    this.layers = animData.layers;\n    this.layerElement = this.resizerElem;\n    this.build3dContainers();\n    this.updateContainerSize();\n  };\n  HybridRendererBase.prototype.destroy = function () {\n    if (this.animationItem.wrapper) {\n      this.animationItem.wrapper.innerText = '';\n    }\n    this.animationItem.container = null;\n    this.globalData.defs = null;\n    var i;\n    var len = this.layers ? this.layers.length : 0;\n    for (i = 0; i < len; i += 1) {\n      if (this.elements[i] && this.elements[i].destroy) {\n        this.elements[i].destroy();\n      }\n    }\n    this.elements.length = 0;\n    this.destroyed = true;\n    this.animationItem = null;\n  };\n  HybridRendererBase.prototype.updateContainerSize = function () {\n    var elementWidth = this.animationItem.wrapper.offsetWidth;\n    var elementHeight = this.animationItem.wrapper.offsetHeight;\n    var elementRel = elementWidth / elementHeight;\n    var animationRel = this.globalData.compSize.w / this.globalData.compSize.h;\n    var sx;\n    var sy;\n    var tx;\n    var ty;\n    if (animationRel > elementRel) {\n      sx = elementWidth / this.globalData.compSize.w;\n      sy = elementWidth / this.globalData.compSize.w;\n      tx = 0;\n      ty = (elementHeight - this.globalData.compSize.h * (elementWidth / this.globalData.compSize.w)) / 2;\n    } else {\n      sx = elementHeight / this.globalData.compSize.h;\n      sy = elementHeight / this.globalData.compSize.h;\n      tx = (elementWidth - this.globalData.compSize.w * (elementHeight / this.globalData.compSize.h)) / 2;\n      ty = 0;\n    }\n    var style = this.resizerElem.style;\n    style.webkitTransform = 'matrix3d(' + sx + ',0,0,0,0,' + sy + ',0,0,0,0,1,0,' + tx + ',' + ty + ',0,1)';\n    style.transform = style.webkitTransform;\n  };\n  HybridRendererBase.prototype.renderFrame = SVGRenderer.prototype.renderFrame;\n  HybridRendererBase.prototype.hide = function () {\n    this.resizerElem.style.display = 'none';\n  };\n  HybridRendererBase.prototype.show = function () {\n    this.resizerElem.style.display = 'block';\n  };\n  HybridRendererBase.prototype.initItems = function () {\n    this.buildAllItems();\n    if (this.camera) {\n      this.camera.setup();\n    } else {\n      var cWidth = this.globalData.compSize.w;\n      var cHeight = this.globalData.compSize.h;\n      var i;\n      var len = this.threeDElements.length;\n      for (i = 0; i < len; i += 1) {\n        var style = this.threeDElements[i].perspectiveElem.style;\n        style.webkitPerspective = Math.sqrt(Math.pow(cWidth, 2) + Math.pow(cHeight, 2)) + 'px';\n        style.perspective = style.webkitPerspective;\n      }\n    }\n  };\n  HybridRendererBase.prototype.searchExtraCompositions = function (assets) {\n    var i;\n    var len = assets.length;\n    var floatingContainer = createTag('div');\n    for (i = 0; i < len; i += 1) {\n      if (assets[i].xt) {\n        var comp = this.createComp(assets[i], floatingContainer, this.globalData.comp, null);\n        comp.initExpressions();\n        this.globalData.projectInterface.registerComposition(comp);\n      }\n    }\n  };\n\n  function HCompElement(data, globalData, comp) {\n    this.layers = data.layers;\n    this.supports3d = !data.hasMask;\n    this.completeLayers = false;\n    this.pendingElements = [];\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\n    this.initElement(data, globalData, comp);\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\n      _placeholder: true\n    };\n  }\n  extendPrototype([HybridRendererBase, ICompElement, HBaseElement], HCompElement);\n  HCompElement.prototype._createBaseContainerElements = HCompElement.prototype.createContainerElements;\n  HCompElement.prototype.createContainerElements = function () {\n    this._createBaseContainerElements();\n    // divElement.style.clip = 'rect(0px, '+this.data.w+'px, '+this.data.h+'px, 0px)';\n    if (this.data.hasMask) {\n      this.svgElement.setAttribute('width', this.data.w);\n      this.svgElement.setAttribute('height', this.data.h);\n      this.transformedElement = this.baseElement;\n    } else {\n      this.transformedElement = this.layerElement;\n    }\n  };\n  HCompElement.prototype.addTo3dContainer = function (elem, pos) {\n    var j = 0;\n    var nextElement;\n    while (j < pos) {\n      if (this.elements[j] && this.elements[j].getBaseElement) {\n        nextElement = this.elements[j].getBaseElement();\n      }\n      j += 1;\n    }\n    if (nextElement) {\n      this.layerElement.insertBefore(elem, nextElement);\n    } else {\n      this.layerElement.appendChild(elem);\n    }\n  };\n  HCompElement.prototype.createComp = function (data) {\n    if (!this.supports3d) {\n      return new SVGCompElement(data, this.globalData, this);\n    }\n    return new HCompElement(data, this.globalData, this);\n  };\n\n  function HybridRenderer(animationItem, config) {\n    this.animationItem = animationItem;\n    this.layers = null;\n    this.renderedFrame = -1;\n    this.renderConfig = {\n      className: config && config.className || '',\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\n      hideOnTransparent: !(config && config.hideOnTransparent === false),\n      filterSize: {\n        width: config && config.filterSize && config.filterSize.width || '400%',\n        height: config && config.filterSize && config.filterSize.height || '400%',\n        x: config && config.filterSize && config.filterSize.x || '-100%',\n        y: config && config.filterSize && config.filterSize.y || '-100%'\n      },\n      runExpressions: !config || config.runExpressions === undefined || config.runExpressions\n    };\n    this.globalData = {\n      _mdf: false,\n      frameNum: -1,\n      renderConfig: this.renderConfig\n    };\n    this.pendingElements = [];\n    this.elements = [];\n    this.threeDElements = [];\n    this.destroyed = false;\n    this.camera = null;\n    this.supports3d = true;\n    this.rendererType = 'html';\n  }\n  extendPrototype([HybridRendererBase], HybridRenderer);\n  HybridRenderer.prototype.createComp = function (data) {\n    if (!this.supports3d) {\n      return new SVGCompElement(data, this.globalData, this);\n    }\n    return new HCompElement(data, this.globalData, this);\n  };\n\n  var CompExpressionInterface = function () {\n    return function (comp) {\n      function _thisLayerFunction(name) {\n        var i = 0;\n        var len = comp.layers.length;\n        while (i < len) {\n          if (comp.layers[i].nm === name || comp.layers[i].ind === name) {\n            return comp.elements[i].layerInterface;\n          }\n          i += 1;\n        }\n        return null;\n        // return {active:false};\n      }\n      Object.defineProperty(_thisLayerFunction, '_name', {\n        value: comp.data.nm\n      });\n      _thisLayerFunction.layer = _thisLayerFunction;\n      _thisLayerFunction.pixelAspect = 1;\n      _thisLayerFunction.height = comp.data.h || comp.globalData.compSize.h;\n      _thisLayerFunction.width = comp.data.w || comp.globalData.compSize.w;\n      _thisLayerFunction.pixelAspect = 1;\n      _thisLayerFunction.frameDuration = 1 / comp.globalData.frameRate;\n      _thisLayerFunction.displayStartTime = 0;\n      _thisLayerFunction.numLayers = comp.layers.length;\n      return _thisLayerFunction;\n    };\n  }();\n\n  function _typeof$2(o) { \"@babel/helpers - typeof\"; return _typeof$2 = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof$2(o); }\n  /* eslint-disable */\n  /*\n   Copyright 2014 David Bau.\n\n   Permission is hereby granted, free of charge, to any person obtaining\n   a copy of this software and associated documentation files (the\n   \"Software\"), to deal in the Software without restriction, including\n   without limitation the rights to use, copy, modify, merge, publish,\n   distribute, sublicense, and/or sell copies of the Software, and to\n   permit persons to whom the Software is furnished to do so, subject to\n   the following conditions:\n\n   The above copyright notice and this permission notice shall be\n   included in all copies or substantial portions of the Software.\n\n   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n   CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n   TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n   SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n   */\n\n  function seedRandom(pool, math) {\n    //\n    // The following constants are related to IEEE 754 limits.\n    //\n    var global = this,\n      width = 256,\n      // each RC4 output is 0 <= x < 256\n      chunks = 6,\n      // at least six RC4 outputs for each double\n      digits = 52,\n      // there are 52 significant digits in a double\n      rngname = 'random',\n      // rngname: name for Math.random and Math.seedrandom\n      startdenom = math.pow(width, chunks),\n      significance = math.pow(2, digits),\n      overflow = significance * 2,\n      mask = width - 1,\n      nodecrypto; // node.js crypto module, initialized at the bottom.\n\n    //\n    // seedrandom()\n    // This is the seedrandom function described above.\n    //\n    function seedrandom(seed, options, callback) {\n      var key = [];\n      options = options === true ? {\n        entropy: true\n      } : options || {};\n\n      // Flatten the seed string or build one from local entropy if needed.\n      var shortseed = mixkey(flatten(options.entropy ? [seed, tostring(pool)] : seed === null ? autoseed() : seed, 3), key);\n\n      // Use the seed to initialize an ARC4 generator.\n      var arc4 = new ARC4(key);\n\n      // This function returns a random double in [0, 1) that contains\n      // randomness in every bit of the mantissa of the IEEE 754 value.\n      var prng = function prng() {\n        var n = arc4.g(chunks),\n          // Start with a numerator n < 2 ^ 48\n          d = startdenom,\n          //   and denominator d = 2 ^ 48.\n          x = 0; //   and no 'extra last byte'.\n        while (n < significance) {\n          // Fill up all significant digits by\n          n = (n + x) * width; //   shifting numerator and\n          d *= width; //   denominator and generating a\n          x = arc4.g(1); //   new least-significant-byte.\n        }\n        while (n >= overflow) {\n          // To avoid rounding up, before adding\n          n /= 2; //   last byte, shift everything\n          d /= 2; //   right using integer math until\n          x >>>= 1; //   we have exactly the desired bits.\n        }\n        return (n + x) / d; // Form the number within [0, 1).\n      };\n      prng.int32 = function () {\n        return arc4.g(4) | 0;\n      };\n      prng.quick = function () {\n        return arc4.g(4) / 0x100000000;\n      };\n      prng[\"double\"] = prng;\n\n      // Mix the randomness into accumulated entropy.\n      mixkey(tostring(arc4.S), pool);\n\n      // Calling convention: what to return as a function of prng, seed, is_math.\n      return (options.pass || callback || function (prng, seed, is_math_call, state) {\n        if (state) {\n          // Load the arc4 state from the given state if it has an S array.\n          if (state.S) {\n            copy(state, arc4);\n          }\n          // Only provide the .state method if requested via options.state.\n          prng.state = function () {\n            return copy(arc4, {});\n          };\n        }\n\n        // If called as a method of Math (Math.seedrandom()), mutate\n        // Math.random because that is how seedrandom.js has worked since v1.0.\n        if (is_math_call) {\n          math[rngname] = prng;\n          return seed;\n        }\n\n        // Otherwise, it is a newer calling convention, so return the\n        // prng directly.\n        else return prng;\n      })(prng, shortseed, 'global' in options ? options.global : this == math, options.state);\n    }\n    math['seed' + rngname] = seedrandom;\n\n    //\n    // ARC4\n    //\n    // An ARC4 implementation.  The constructor takes a key in the form of\n    // an array of at most (width) integers that should be 0 <= x < (width).\n    //\n    // The g(count) method returns a pseudorandom integer that concatenates\n    // the next (count) outputs from ARC4.  Its return value is a number x\n    // that is in the range 0 <= x < (width ^ count).\n    //\n    function ARC4(key) {\n      var t,\n        keylen = key.length,\n        me = this,\n        i = 0,\n        j = me.i = me.j = 0,\n        s = me.S = [];\n\n      // The empty key [] is treated as [0].\n      if (!keylen) {\n        key = [keylen++];\n      }\n\n      // Set up S using the standard key scheduling algorithm.\n      while (i < width) {\n        s[i] = i++;\n      }\n      for (i = 0; i < width; i++) {\n        s[i] = s[j = mask & j + key[i % keylen] + (t = s[i])];\n        s[j] = t;\n      }\n\n      // The \"g\" method returns the next (count) outputs as one number.\n      me.g = function (count) {\n        // Using instance members instead of closure state nearly doubles speed.\n        var t,\n          r = 0,\n          i = me.i,\n          j = me.j,\n          s = me.S;\n        while (count--) {\n          t = s[i = mask & i + 1];\n          r = r * width + s[mask & (s[i] = s[j = mask & j + t]) + (s[j] = t)];\n        }\n        me.i = i;\n        me.j = j;\n        return r;\n        // For robust unpredictability, the function call below automatically\n        // discards an initial batch of values.  This is called RC4-drop[256].\n        // See http://google.com/search?q=rsa+fluhrer+response&btnI\n      };\n    }\n\n    //\n    // copy()\n    // Copies internal state of ARC4 to or from a plain object.\n    //\n    function copy(f, t) {\n      t.i = f.i;\n      t.j = f.j;\n      t.S = f.S.slice();\n      return t;\n    }\n\n    //\n    // flatten()\n    // Converts an object tree to nested arrays of strings.\n    //\n    function flatten(obj, depth) {\n      var result = [],\n        typ = _typeof$2(obj),\n        prop;\n      if (depth && typ == 'object') {\n        for (prop in obj) {\n          try {\n            result.push(flatten(obj[prop], depth - 1));\n          } catch (e) {}\n        }\n      }\n      return result.length ? result : typ == 'string' ? obj : obj + '\\0';\n    }\n\n    //\n    // mixkey()\n    // Mixes a string seed into a key that is an array of integers, and\n    // returns a shortened string seed that is equivalent to the result key.\n    //\n    function mixkey(seed, key) {\n      var stringseed = seed + '',\n        smear,\n        j = 0;\n      while (j < stringseed.length) {\n        key[mask & j] = mask & (smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++);\n      }\n      return tostring(key);\n    }\n\n    //\n    // autoseed()\n    // Returns an object for autoseeding, using window.crypto and Node crypto\n    // module if available.\n    //\n    function autoseed() {\n      try {\n        if (nodecrypto) {\n          return tostring(nodecrypto.randomBytes(width));\n        }\n        var out = new Uint8Array(width);\n        (global.crypto || global.msCrypto).getRandomValues(out);\n        return tostring(out);\n      } catch (e) {\n        var browser = global.navigator,\n          plugins = browser && browser.plugins;\n        return [+new Date(), global, plugins, global.screen, tostring(pool)];\n      }\n    }\n\n    //\n    // tostring()\n    // Converts an array of charcodes to a string\n    //\n    function tostring(a) {\n      return String.fromCharCode.apply(0, a);\n    }\n\n    //\n    // When seedrandom.js is loaded, we immediately mix a few bits\n    // from the built-in RNG into the entropy pool.  Because we do\n    // not want to interfere with deterministic PRNG state later,\n    // seedrandom will not call math.random on its own again after\n    // initialization.\n    //\n    mixkey(math.random(), pool);\n\n    //\n    // Nodejs and AMD support: export the implementation as a module using\n    // either convention.\n    //\n\n    // End anonymous scope, and pass initial values.\n  }\n  ;\n  function initialize$2(BMMath) {\n    seedRandom([], BMMath);\n  }\n\n  var propTypes = {\n    SHAPE: 'shape'\n  };\n\n  function _typeof$1(o) { \"@babel/helpers - typeof\"; return _typeof$1 = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof$1(o); }\n  var ExpressionManager = function () {\n    'use strict';\n\n    var ob = {};\n    var Math = BMMath;\n    var window = null;\n    var document = null;\n    var XMLHttpRequest = null;\n    var fetch = null;\n    var frames = null;\n    var _lottieGlobal = {};\n    initialize$2(BMMath);\n    function resetFrame() {\n      _lottieGlobal = {};\n    }\n    function $bm_isInstanceOfArray(arr) {\n      return arr.constructor === Array || arr.constructor === Float32Array;\n    }\n    function isNumerable(tOfV, v) {\n      return tOfV === 'number' || v instanceof Number || tOfV === 'boolean' || tOfV === 'string';\n    }\n    function $bm_neg(a) {\n      var tOfA = _typeof$1(a);\n      if (tOfA === 'number' || a instanceof Number || tOfA === 'boolean') {\n        return -a;\n      }\n      if ($bm_isInstanceOfArray(a)) {\n        var i;\n        var lenA = a.length;\n        var retArr = [];\n        for (i = 0; i < lenA; i += 1) {\n          retArr[i] = -a[i];\n        }\n        return retArr;\n      }\n      if (a.propType) {\n        return a.v;\n      }\n      return -a;\n    }\n    var easeInBez = BezierFactory.getBezierEasing(0.333, 0, 0.833, 0.833, 'easeIn').get;\n    var easeOutBez = BezierFactory.getBezierEasing(0.167, 0.167, 0.667, 1, 'easeOut').get;\n    var easeInOutBez = BezierFactory.getBezierEasing(0.33, 0, 0.667, 1, 'easeInOut').get;\n    function sum(a, b) {\n      var tOfA = _typeof$1(a);\n      var tOfB = _typeof$1(b);\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b) || tOfA === 'string' || tOfB === 'string') {\n        return a + b;\n      }\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n        a = a.slice(0);\n        a[0] += b;\n        return a;\n      }\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n        b = b.slice(0);\n        b[0] = a + b[0];\n        return b;\n      }\n      if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\n        var i = 0;\n        var lenA = a.length;\n        var lenB = b.length;\n        var retArr = [];\n        while (i < lenA || i < lenB) {\n          if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\n            retArr[i] = a[i] + b[i];\n          } else {\n            retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\n          }\n          i += 1;\n        }\n        return retArr;\n      }\n      return 0;\n    }\n    var add = sum;\n    function sub(a, b) {\n      var tOfA = _typeof$1(a);\n      var tOfB = _typeof$1(b);\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\n        if (tOfA === 'string') {\n          a = parseInt(a, 10);\n        }\n        if (tOfB === 'string') {\n          b = parseInt(b, 10);\n        }\n        return a - b;\n      }\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n        a = a.slice(0);\n        a[0] -= b;\n        return a;\n      }\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n        b = b.slice(0);\n        b[0] = a - b[0];\n        return b;\n      }\n      if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\n        var i = 0;\n        var lenA = a.length;\n        var lenB = b.length;\n        var retArr = [];\n        while (i < lenA || i < lenB) {\n          if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\n            retArr[i] = a[i] - b[i];\n          } else {\n            retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\n          }\n          i += 1;\n        }\n        return retArr;\n      }\n      return 0;\n    }\n    function mul(a, b) {\n      var tOfA = _typeof$1(a);\n      var tOfB = _typeof$1(b);\n      var arr;\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\n        return a * b;\n      }\n      var i;\n      var len;\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n        len = a.length;\n        arr = createTypedArray('float32', len);\n        for (i = 0; i < len; i += 1) {\n          arr[i] = a[i] * b;\n        }\n        return arr;\n      }\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n        len = b.length;\n        arr = createTypedArray('float32', len);\n        for (i = 0; i < len; i += 1) {\n          arr[i] = a * b[i];\n        }\n        return arr;\n      }\n      return 0;\n    }\n    function div(a, b) {\n      var tOfA = _typeof$1(a);\n      var tOfB = _typeof$1(b);\n      var arr;\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\n        return a / b;\n      }\n      var i;\n      var len;\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n        len = a.length;\n        arr = createTypedArray('float32', len);\n        for (i = 0; i < len; i += 1) {\n          arr[i] = a[i] / b;\n        }\n        return arr;\n      }\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n        len = b.length;\n        arr = createTypedArray('float32', len);\n        for (i = 0; i < len; i += 1) {\n          arr[i] = a / b[i];\n        }\n        return arr;\n      }\n      return 0;\n    }\n    function mod(a, b) {\n      if (typeof a === 'string') {\n        a = parseInt(a, 10);\n      }\n      if (typeof b === 'string') {\n        b = parseInt(b, 10);\n      }\n      return a % b;\n    }\n    var $bm_sum = sum;\n    var $bm_sub = sub;\n    var $bm_mul = mul;\n    var $bm_div = div;\n    var $bm_mod = mod;\n    function clamp(num, min, max) {\n      if (min > max) {\n        var mm = max;\n        max = min;\n        min = mm;\n      }\n      return Math.min(Math.max(num, min), max);\n    }\n    function radiansToDegrees(val) {\n      return val / degToRads;\n    }\n    var radians_to_degrees = radiansToDegrees;\n    function degreesToRadians(val) {\n      return val * degToRads;\n    }\n    var degrees_to_radians = radiansToDegrees;\n    var helperLengthArray = [0, 0, 0, 0, 0, 0];\n    function length(arr1, arr2) {\n      if (typeof arr1 === 'number' || arr1 instanceof Number) {\n        arr2 = arr2 || 0;\n        return Math.abs(arr1 - arr2);\n      }\n      if (!arr2) {\n        arr2 = helperLengthArray;\n      }\n      var i;\n      var len = Math.min(arr1.length, arr2.length);\n      var addedLength = 0;\n      for (i = 0; i < len; i += 1) {\n        addedLength += Math.pow(arr2[i] - arr1[i], 2);\n      }\n      return Math.sqrt(addedLength);\n    }\n    function normalize(vec) {\n      return div(vec, length(vec));\n    }\n    function rgbToHsl(val) {\n      var r = val[0];\n      var g = val[1];\n      var b = val[2];\n      var max = Math.max(r, g, b);\n      var min = Math.min(r, g, b);\n      var h;\n      var s;\n      var l = (max + min) / 2;\n      if (max === min) {\n        h = 0; // achromatic\n        s = 0; // achromatic\n      } else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n          case r:\n            h = (g - b) / d + (g < b ? 6 : 0);\n            break;\n          case g:\n            h = (b - r) / d + 2;\n            break;\n          case b:\n            h = (r - g) / d + 4;\n            break;\n          default:\n            break;\n        }\n        h /= 6;\n      }\n      return [h, s, l, val[3]];\n    }\n    function hue2rgb(p, q, t) {\n      if (t < 0) t += 1;\n      if (t > 1) t -= 1;\n      if (t < 1 / 6) return p + (q - p) * 6 * t;\n      if (t < 1 / 2) return q;\n      if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n      return p;\n    }\n    function hslToRgb(val) {\n      var h = val[0];\n      var s = val[1];\n      var l = val[2];\n      var r;\n      var g;\n      var b;\n      if (s === 0) {\n        r = l; // achromatic\n        b = l; // achromatic\n        g = l; // achromatic\n      } else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n      }\n      return [r, g, b, val[3]];\n    }\n    function linear(t, tMin, tMax, value1, value2) {\n      if (value1 === undefined || value2 === undefined) {\n        value1 = tMin;\n        value2 = tMax;\n        tMin = 0;\n        tMax = 1;\n      }\n      if (tMax < tMin) {\n        var _tMin = tMax;\n        tMax = tMin;\n        tMin = _tMin;\n      }\n      if (t <= tMin) {\n        return value1;\n      }\n      if (t >= tMax) {\n        return value2;\n      }\n      var perc = tMax === tMin ? 0 : (t - tMin) / (tMax - tMin);\n      if (!value1.length) {\n        return value1 + (value2 - value1) * perc;\n      }\n      var i;\n      var len = value1.length;\n      var arr = createTypedArray('float32', len);\n      for (i = 0; i < len; i += 1) {\n        arr[i] = value1[i] + (value2[i] - value1[i]) * perc;\n      }\n      return arr;\n    }\n    function random(min, max) {\n      if (max === undefined) {\n        if (min === undefined) {\n          min = 0;\n          max = 1;\n        } else {\n          max = min;\n          min = undefined;\n        }\n      }\n      if (max.length) {\n        var i;\n        var len = max.length;\n        if (!min) {\n          min = createTypedArray('float32', len);\n        }\n        var arr = createTypedArray('float32', len);\n        var rnd = BMMath.random();\n        for (i = 0; i < len; i += 1) {\n          arr[i] = min[i] + rnd * (max[i] - min[i]);\n        }\n        return arr;\n      }\n      if (min === undefined) {\n        min = 0;\n      }\n      var rndm = BMMath.random();\n      return min + rndm * (max - min);\n    }\n    function createPath(points, inTangents, outTangents, closed) {\n      var i;\n      var len = points.length;\n      var path = shapePool.newElement();\n      path.setPathData(!!closed, len);\n      var arrPlaceholder = [0, 0];\n      var inVertexPoint;\n      var outVertexPoint;\n      for (i = 0; i < len; i += 1) {\n        inVertexPoint = inTangents && inTangents[i] ? inTangents[i] : arrPlaceholder;\n        outVertexPoint = outTangents && outTangents[i] ? outTangents[i] : arrPlaceholder;\n        path.setTripleAt(points[i][0], points[i][1], outVertexPoint[0] + points[i][0], outVertexPoint[1] + points[i][1], inVertexPoint[0] + points[i][0], inVertexPoint[1] + points[i][1], i, true);\n      }\n      return path;\n    }\n    function initiateExpression(elem, data, property) {\n      // Bail out if we don't want expressions\n      function noOp(_value) {\n        return _value;\n      }\n      if (!elem.globalData.renderConfig.runExpressions) {\n        return noOp;\n      }\n      var val = data.x;\n      var needsVelocity = /velocity(?![\\w\\d])/.test(val);\n      var _needsRandom = val.indexOf('random') !== -1;\n      var elemType = elem.data.ty;\n      var transform;\n      var $bm_transform;\n      var content;\n      var effect;\n      var thisProperty = property;\n      thisProperty._name = elem.data.nm;\n      thisProperty.valueAtTime = thisProperty.getValueAtTime;\n      Object.defineProperty(thisProperty, 'value', {\n        get: function get() {\n          return thisProperty.v;\n        }\n      });\n      elem.comp.frameDuration = 1 / elem.comp.globalData.frameRate;\n      elem.comp.displayStartTime = 0;\n      var inPoint = elem.data.ip / elem.comp.globalData.frameRate;\n      var outPoint = elem.data.op / elem.comp.globalData.frameRate;\n      var width = elem.data.sw ? elem.data.sw : 0;\n      var height = elem.data.sh ? elem.data.sh : 0;\n      var name = elem.data.nm;\n      var loopIn;\n      var loop_in;\n      var loopOut;\n      var loop_out;\n      var smooth;\n      var toWorld;\n      var fromWorld;\n      var fromComp;\n      var toComp;\n      var fromCompToSurface;\n      var position;\n      var rotation;\n      var anchorPoint;\n      var scale;\n      var thisLayer;\n      var thisComp;\n      var mask;\n      var valueAtTime;\n      var velocityAtTime;\n      var scoped_bm_rt;\n      // val = val.replace(/(\\\\?\"|')((http)(s)?(:\\/))?\\/.*?(\\\\?\"|')/g, \"\\\"\\\"\"); // deter potential network calls\n      var expression_function = eval('[function _expression_function(){' + val + ';scoped_bm_rt=$bm_rt}]')[0]; // eslint-disable-line no-eval\n      var numKeys = property.kf ? data.k.length : 0;\n      var active = !this.data || this.data.hd !== true;\n      var wiggle = function wiggle(freq, amp) {\n        var iWiggle;\n        var j;\n        var lenWiggle = this.pv.length ? this.pv.length : 1;\n        var addedAmps = createTypedArray('float32', lenWiggle);\n        freq = 5;\n        var iterations = Math.floor(time * freq);\n        iWiggle = 0;\n        j = 0;\n        while (iWiggle < iterations) {\n          // var rnd = BMMath.random();\n          for (j = 0; j < lenWiggle; j += 1) {\n            addedAmps[j] += -amp + amp * 2 * BMMath.random();\n            // addedAmps[j] += -amp + amp*2*rnd;\n          }\n          iWiggle += 1;\n        }\n        // var rnd2 = BMMath.random();\n        var periods = time * freq;\n        var perc = periods - Math.floor(periods);\n        var arr = createTypedArray('float32', lenWiggle);\n        if (lenWiggle > 1) {\n          for (j = 0; j < lenWiggle; j += 1) {\n            arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp * 2 * BMMath.random()) * perc;\n            // arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*rnd)*perc;\n            // arr[i] = this.pv[i] + addedAmp + amp1*perc + amp2*(1-perc);\n          }\n          return arr;\n        }\n        return this.pv + addedAmps[0] + (-amp + amp * 2 * BMMath.random()) * perc;\n      }.bind(this);\n      if (thisProperty.loopIn) {\n        loopIn = thisProperty.loopIn.bind(thisProperty);\n        loop_in = loopIn;\n      }\n      if (thisProperty.loopOut) {\n        loopOut = thisProperty.loopOut.bind(thisProperty);\n        loop_out = loopOut;\n      }\n      if (thisProperty.smooth) {\n        smooth = thisProperty.smooth.bind(thisProperty);\n      }\n      function loopInDuration(type, duration) {\n        return loopIn(type, duration, true);\n      }\n      function loopOutDuration(type, duration) {\n        return loopOut(type, duration, true);\n      }\n      if (this.getValueAtTime) {\n        valueAtTime = this.getValueAtTime.bind(this);\n      }\n      if (this.getVelocityAtTime) {\n        velocityAtTime = this.getVelocityAtTime.bind(this);\n      }\n      var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);\n      function lookAt(elem1, elem2) {\n        var fVec = [elem2[0] - elem1[0], elem2[1] - elem1[1], elem2[2] - elem1[2]];\n        var pitch = Math.atan2(fVec[0], Math.sqrt(fVec[1] * fVec[1] + fVec[2] * fVec[2])) / degToRads;\n        var yaw = -Math.atan2(fVec[1], fVec[2]) / degToRads;\n        return [yaw, pitch, 0];\n      }\n      function easeOut(t, tMin, tMax, val1, val2) {\n        return applyEase(easeOutBez, t, tMin, tMax, val1, val2);\n      }\n      function easeIn(t, tMin, tMax, val1, val2) {\n        return applyEase(easeInBez, t, tMin, tMax, val1, val2);\n      }\n      function ease(t, tMin, tMax, val1, val2) {\n        return applyEase(easeInOutBez, t, tMin, tMax, val1, val2);\n      }\n      function applyEase(fn, t, tMin, tMax, val1, val2) {\n        if (val1 === undefined) {\n          val1 = tMin;\n          val2 = tMax;\n        } else {\n          t = (t - tMin) / (tMax - tMin);\n        }\n        if (t > 1) {\n          t = 1;\n        } else if (t < 0) {\n          t = 0;\n        }\n        var mult = fn(t);\n        if ($bm_isInstanceOfArray(val1)) {\n          var iKey;\n          var lenKey = val1.length;\n          var arr = createTypedArray('float32', lenKey);\n          for (iKey = 0; iKey < lenKey; iKey += 1) {\n            arr[iKey] = (val2[iKey] - val1[iKey]) * mult + val1[iKey];\n          }\n          return arr;\n        }\n        return (val2 - val1) * mult + val1;\n      }\n      function nearestKey(time) {\n        var iKey;\n        var lenKey = data.k.length;\n        var index;\n        var keyTime;\n        if (!data.k.length || typeof data.k[0] === 'number') {\n          index = 0;\n          keyTime = 0;\n        } else {\n          index = -1;\n          time *= elem.comp.globalData.frameRate;\n          if (time < data.k[0].t) {\n            index = 1;\n            keyTime = data.k[0].t;\n          } else {\n            for (iKey = 0; iKey < lenKey - 1; iKey += 1) {\n              if (time === data.k[iKey].t) {\n                index = iKey + 1;\n                keyTime = data.k[iKey].t;\n                break;\n              } else if (time > data.k[iKey].t && time < data.k[iKey + 1].t) {\n                if (time - data.k[iKey].t > data.k[iKey + 1].t - time) {\n                  index = iKey + 2;\n                  keyTime = data.k[iKey + 1].t;\n                } else {\n                  index = iKey + 1;\n                  keyTime = data.k[iKey].t;\n                }\n                break;\n              }\n            }\n            if (index === -1) {\n              index = iKey + 1;\n              keyTime = data.k[iKey].t;\n            }\n          }\n        }\n        var obKey = {};\n        obKey.index = index;\n        obKey.time = keyTime / elem.comp.globalData.frameRate;\n        return obKey;\n      }\n      function key(ind) {\n        var obKey;\n        var iKey;\n        var lenKey;\n        if (!data.k.length || typeof data.k[0] === 'number') {\n          throw new Error('The property has no keyframe at index ' + ind);\n        }\n        ind -= 1;\n        obKey = {\n          time: data.k[ind].t / elem.comp.globalData.frameRate,\n          value: []\n        };\n        var arr = Object.prototype.hasOwnProperty.call(data.k[ind], 's') ? data.k[ind].s : data.k[ind - 1].e;\n        lenKey = arr.length;\n        for (iKey = 0; iKey < lenKey; iKey += 1) {\n          obKey[iKey] = arr[iKey];\n          obKey.value[iKey] = arr[iKey];\n        }\n        return obKey;\n      }\n      function framesToTime(fr, fps) {\n        if (!fps) {\n          fps = elem.comp.globalData.frameRate;\n        }\n        return fr / fps;\n      }\n      function timeToFrames(t, fps) {\n        if (!t && t !== 0) {\n          t = time;\n        }\n        if (!fps) {\n          fps = elem.comp.globalData.frameRate;\n        }\n        return t * fps;\n      }\n      function seedRandom(seed) {\n        BMMath.seedrandom(randSeed + seed);\n      }\n      function sourceRectAtTime() {\n        return elem.sourceRectAtTime();\n      }\n      function substring(init, end) {\n        if (typeof value === 'string') {\n          if (end === undefined) {\n            return value.substring(init);\n          }\n          return value.substring(init, end);\n        }\n        return '';\n      }\n      function substr(init, end) {\n        if (typeof value === 'string') {\n          if (end === undefined) {\n            return value.substr(init);\n          }\n          return value.substr(init, end);\n        }\n        return '';\n      }\n      function posterizeTime(framesPerSecond) {\n        time = framesPerSecond === 0 ? 0 : Math.floor(time * framesPerSecond) / framesPerSecond;\n        value = valueAtTime(time);\n      }\n      var time;\n      var velocity;\n      var value;\n      var text;\n      var textIndex;\n      var textTotal;\n      var selectorValue;\n      var index = elem.data.ind;\n      var hasParent = !!(elem.hierarchy && elem.hierarchy.length);\n      var parent;\n      var randSeed = Math.floor(Math.random() * 1000000);\n      var globalData = elem.globalData;\n      function executeExpression(_value) {\n        // globalData.pushExpression();\n        value = _value;\n        if (this.frameExpressionId === elem.globalData.frameId && this.propType !== 'textSelector') {\n          return value;\n        }\n        if (this.propType === 'textSelector') {\n          textIndex = this.textIndex;\n          textTotal = this.textTotal;\n          selectorValue = this.selectorValue;\n        }\n        if (!thisLayer) {\n          text = elem.layerInterface.text;\n          thisLayer = elem.layerInterface;\n          thisComp = elem.comp.compInterface;\n          toWorld = thisLayer.toWorld.bind(thisLayer);\n          fromWorld = thisLayer.fromWorld.bind(thisLayer);\n          fromComp = thisLayer.fromComp.bind(thisLayer);\n          toComp = thisLayer.toComp.bind(thisLayer);\n          mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null;\n          fromCompToSurface = fromComp;\n        }\n        if (!transform) {\n          transform = elem.layerInterface('ADBE Transform Group');\n          $bm_transform = transform;\n          if (transform) {\n            anchorPoint = transform.anchorPoint;\n            /* position = transform.position;\n                      rotation = transform.rotation;\n                      scale = transform.scale; */\n          }\n        }\n        if (elemType === 4 && !content) {\n          content = thisLayer('ADBE Root Vectors Group');\n        }\n        if (!effect) {\n          effect = thisLayer(4);\n        }\n        hasParent = !!(elem.hierarchy && elem.hierarchy.length);\n        if (hasParent && !parent) {\n          parent = elem.hierarchy[0].layerInterface;\n        }\n        time = this.comp.renderedFrame / this.comp.globalData.frameRate;\n        if (_needsRandom) {\n          seedRandom(randSeed + time);\n        }\n        if (needsVelocity) {\n          velocity = velocityAtTime(time);\n        }\n        expression_function();\n        this.frameExpressionId = elem.globalData.frameId;\n\n        // TODO: Check if it's possible to return on ShapeInterface the .v value\n        // Changed this to a ternary operation because Rollup failed compiling it correctly\n        scoped_bm_rt = scoped_bm_rt.propType === propTypes.SHAPE ? scoped_bm_rt.v : scoped_bm_rt;\n        return scoped_bm_rt;\n      }\n      // Bundlers will see these as dead code and unless we reference them\n      executeExpression.__preventDeadCodeRemoval = [$bm_transform, anchorPoint, time, velocity, inPoint, outPoint, width, height, name, loop_in, loop_out, smooth, toComp, fromCompToSurface, toWorld, fromWorld, mask, position, rotation, scale, thisComp, numKeys, active, wiggle, loopInDuration, loopOutDuration, comp, lookAt, easeOut, easeIn, ease, nearestKey, key, text, textIndex, textTotal, selectorValue, framesToTime, timeToFrames, sourceRectAtTime, substring, substr, posterizeTime, index, globalData];\n      return executeExpression;\n    }\n    ob.initiateExpression = initiateExpression;\n    ob.__preventDeadCodeRemoval = [window, document, XMLHttpRequest, fetch, frames, $bm_neg, add, $bm_sum, $bm_sub, $bm_mul, $bm_div, $bm_mod, clamp, radians_to_degrees, degreesToRadians, degrees_to_radians, normalize, rgbToHsl, hslToRgb, linear, random, createPath, _lottieGlobal];\n    ob.resetFrame = resetFrame;\n    return ob;\n  }();\n\n  var Expressions = function () {\n    var ob = {};\n    ob.initExpressions = initExpressions;\n    ob.resetFrame = ExpressionManager.resetFrame;\n    function initExpressions(animation) {\n      var stackCount = 0;\n      var registers = [];\n      function pushExpression() {\n        stackCount += 1;\n      }\n      function popExpression() {\n        stackCount -= 1;\n        if (stackCount === 0) {\n          releaseInstances();\n        }\n      }\n      function registerExpressionProperty(expression) {\n        if (registers.indexOf(expression) === -1) {\n          registers.push(expression);\n        }\n      }\n      function releaseInstances() {\n        var i;\n        var len = registers.length;\n        for (i = 0; i < len; i += 1) {\n          registers[i].release();\n        }\n        registers.length = 0;\n      }\n      animation.renderer.compInterface = CompExpressionInterface(animation.renderer);\n      animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);\n      animation.renderer.globalData.pushExpression = pushExpression;\n      animation.renderer.globalData.popExpression = popExpression;\n      animation.renderer.globalData.registerExpressionProperty = registerExpressionProperty;\n    }\n    return ob;\n  }();\n\n  var MaskManagerInterface = function () {\n    function MaskInterface(mask, data) {\n      this._mask = mask;\n      this._data = data;\n    }\n    Object.defineProperty(MaskInterface.prototype, 'maskPath', {\n      get: function get() {\n        if (this._mask.prop.k) {\n          this._mask.prop.getValue();\n        }\n        return this._mask.prop;\n      }\n    });\n    Object.defineProperty(MaskInterface.prototype, 'maskOpacity', {\n      get: function get() {\n        if (this._mask.op.k) {\n          this._mask.op.getValue();\n        }\n        return this._mask.op.v * 100;\n      }\n    });\n    var MaskManager = function MaskManager(maskManager) {\n      var _masksInterfaces = createSizedArray(maskManager.viewData.length);\n      var i;\n      var len = maskManager.viewData.length;\n      for (i = 0; i < len; i += 1) {\n        _masksInterfaces[i] = new MaskInterface(maskManager.viewData[i], maskManager.masksProperties[i]);\n      }\n      var maskFunction = function maskFunction(name) {\n        i = 0;\n        while (i < len) {\n          if (maskManager.masksProperties[i].nm === name) {\n            return _masksInterfaces[i];\n          }\n          i += 1;\n        }\n        return null;\n      };\n      return maskFunction;\n    };\n    return MaskManager;\n  }();\n\n  var ExpressionPropertyInterface = function () {\n    var defaultUnidimensionalValue = {\n      pv: 0,\n      v: 0,\n      mult: 1\n    };\n    var defaultMultidimensionalValue = {\n      pv: [0, 0, 0],\n      v: [0, 0, 0],\n      mult: 1\n    };\n    function completeProperty(expressionValue, property, type) {\n      Object.defineProperty(expressionValue, 'velocity', {\n        get: function get() {\n          return property.getVelocityAtTime(property.comp.currentFrame);\n        }\n      });\n      expressionValue.numKeys = property.keyframes ? property.keyframes.length : 0;\n      expressionValue.key = function (pos) {\n        if (!expressionValue.numKeys) {\n          return 0;\n        }\n        var value = '';\n        if ('s' in property.keyframes[pos - 1]) {\n          value = property.keyframes[pos - 1].s;\n        } else if ('e' in property.keyframes[pos - 2]) {\n          value = property.keyframes[pos - 2].e;\n        } else {\n          value = property.keyframes[pos - 2].s;\n        }\n        var valueProp = type === 'unidimensional' ? new Number(value) : Object.assign({}, value); // eslint-disable-line no-new-wrappers\n        valueProp.time = property.keyframes[pos - 1].t / property.elem.comp.globalData.frameRate;\n        valueProp.value = type === 'unidimensional' ? value[0] : value;\n        return valueProp;\n      };\n      expressionValue.valueAtTime = property.getValueAtTime;\n      expressionValue.speedAtTime = property.getSpeedAtTime;\n      expressionValue.velocityAtTime = property.getVelocityAtTime;\n      expressionValue.propertyGroup = property.propertyGroup;\n    }\n    function UnidimensionalPropertyInterface(property) {\n      if (!property || !('pv' in property)) {\n        property = defaultUnidimensionalValue;\n      }\n      var mult = 1 / property.mult;\n      var val = property.pv * mult;\n      var expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\n      expressionValue.value = val;\n      completeProperty(expressionValue, property, 'unidimensional');\n      return function () {\n        if (property.k) {\n          property.getValue();\n        }\n        val = property.v * mult;\n        if (expressionValue.value !== val) {\n          expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\n          expressionValue.value = val;\n          expressionValue[0] = val;\n          completeProperty(expressionValue, property, 'unidimensional');\n        }\n        return expressionValue;\n      };\n    }\n    function MultidimensionalPropertyInterface(property) {\n      if (!property || !('pv' in property)) {\n        property = defaultMultidimensionalValue;\n      }\n      var mult = 1 / property.mult;\n      var len = property.data && property.data.l || property.pv.length;\n      var expressionValue = createTypedArray('float32', len);\n      var arrValue = createTypedArray('float32', len);\n      expressionValue.value = arrValue;\n      completeProperty(expressionValue, property, 'multidimensional');\n      return function () {\n        if (property.k) {\n          property.getValue();\n        }\n        for (var i = 0; i < len; i += 1) {\n          arrValue[i] = property.v[i] * mult;\n          expressionValue[i] = arrValue[i];\n        }\n        return expressionValue;\n      };\n    }\n\n    // TODO: try to avoid using this getter\n    function defaultGetter() {\n      return defaultUnidimensionalValue;\n    }\n    return function (property) {\n      if (!property) {\n        return defaultGetter;\n      }\n      if (property.propType === 'unidimensional') {\n        return UnidimensionalPropertyInterface(property);\n      }\n      return MultidimensionalPropertyInterface(property);\n    };\n  }();\n\n  var TransformExpressionInterface = function () {\n    return function (transform) {\n      function _thisFunction(name) {\n        switch (name) {\n          case 'scale':\n          case 'Scale':\n          case 'ADBE Scale':\n          case 6:\n            return _thisFunction.scale;\n          case 'rotation':\n          case 'Rotation':\n          case 'ADBE Rotation':\n          case 'ADBE Rotate Z':\n          case 10:\n            return _thisFunction.rotation;\n          case 'ADBE Rotate X':\n            return _thisFunction.xRotation;\n          case 'ADBE Rotate Y':\n            return _thisFunction.yRotation;\n          case 'position':\n          case 'Position':\n          case 'ADBE Position':\n          case 2:\n            return _thisFunction.position;\n          case 'ADBE Position_0':\n            return _thisFunction.xPosition;\n          case 'ADBE Position_1':\n            return _thisFunction.yPosition;\n          case 'ADBE Position_2':\n            return _thisFunction.zPosition;\n          case 'anchorPoint':\n          case 'AnchorPoint':\n          case 'Anchor Point':\n          case 'ADBE AnchorPoint':\n          case 1:\n            return _thisFunction.anchorPoint;\n          case 'opacity':\n          case 'Opacity':\n          case 11:\n            return _thisFunction.opacity;\n          default:\n            return null;\n        }\n      }\n      Object.defineProperty(_thisFunction, 'rotation', {\n        get: ExpressionPropertyInterface(transform.r || transform.rz)\n      });\n      Object.defineProperty(_thisFunction, 'zRotation', {\n        get: ExpressionPropertyInterface(transform.rz || transform.r)\n      });\n      Object.defineProperty(_thisFunction, 'xRotation', {\n        get: ExpressionPropertyInterface(transform.rx)\n      });\n      Object.defineProperty(_thisFunction, 'yRotation', {\n        get: ExpressionPropertyInterface(transform.ry)\n      });\n      Object.defineProperty(_thisFunction, 'scale', {\n        get: ExpressionPropertyInterface(transform.s)\n      });\n      var _px;\n      var _py;\n      var _pz;\n      var _transformFactory;\n      if (transform.p) {\n        _transformFactory = ExpressionPropertyInterface(transform.p);\n      } else {\n        _px = ExpressionPropertyInterface(transform.px);\n        _py = ExpressionPropertyInterface(transform.py);\n        if (transform.pz) {\n          _pz = ExpressionPropertyInterface(transform.pz);\n        }\n      }\n      Object.defineProperty(_thisFunction, 'position', {\n        get: function get() {\n          if (transform.p) {\n            return _transformFactory();\n          }\n          return [_px(), _py(), _pz ? _pz() : 0];\n        }\n      });\n      Object.defineProperty(_thisFunction, 'xPosition', {\n        get: ExpressionPropertyInterface(transform.px)\n      });\n      Object.defineProperty(_thisFunction, 'yPosition', {\n        get: ExpressionPropertyInterface(transform.py)\n      });\n      Object.defineProperty(_thisFunction, 'zPosition', {\n        get: ExpressionPropertyInterface(transform.pz)\n      });\n      Object.defineProperty(_thisFunction, 'anchorPoint', {\n        get: ExpressionPropertyInterface(transform.a)\n      });\n      Object.defineProperty(_thisFunction, 'opacity', {\n        get: ExpressionPropertyInterface(transform.o)\n      });\n      Object.defineProperty(_thisFunction, 'skew', {\n        get: ExpressionPropertyInterface(transform.sk)\n      });\n      Object.defineProperty(_thisFunction, 'skewAxis', {\n        get: ExpressionPropertyInterface(transform.sa)\n      });\n      Object.defineProperty(_thisFunction, 'orientation', {\n        get: ExpressionPropertyInterface(transform.or)\n      });\n      return _thisFunction;\n    };\n  }();\n\n  var LayerExpressionInterface = function () {\n    function getMatrix(time) {\n      var toWorldMat = new Matrix();\n      if (time !== undefined) {\n        var propMatrix = this._elem.finalTransform.mProp.getValueAtTime(time);\n        propMatrix.clone(toWorldMat);\n      } else {\n        var transformMat = this._elem.finalTransform.mProp;\n        transformMat.applyToMatrix(toWorldMat);\n      }\n      return toWorldMat;\n    }\n    function toWorldVec(arr, time) {\n      var toWorldMat = this.getMatrix(time);\n      toWorldMat.props[12] = 0;\n      toWorldMat.props[13] = 0;\n      toWorldMat.props[14] = 0;\n      return this.applyPoint(toWorldMat, arr);\n    }\n    function toWorld(arr, time) {\n      var toWorldMat = this.getMatrix(time);\n      return this.applyPoint(toWorldMat, arr);\n    }\n    function fromWorldVec(arr, time) {\n      var toWorldMat = this.getMatrix(time);\n      toWorldMat.props[12] = 0;\n      toWorldMat.props[13] = 0;\n      toWorldMat.props[14] = 0;\n      return this.invertPoint(toWorldMat, arr);\n    }\n    function fromWorld(arr, time) {\n      var toWorldMat = this.getMatrix(time);\n      return this.invertPoint(toWorldMat, arr);\n    }\n    function applyPoint(matrix, arr) {\n      if (this._elem.hierarchy && this._elem.hierarchy.length) {\n        var i;\n        var len = this._elem.hierarchy.length;\n        for (i = 0; i < len; i += 1) {\n          this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\n        }\n      }\n      return matrix.applyToPointArray(arr[0], arr[1], arr[2] || 0);\n    }\n    function invertPoint(matrix, arr) {\n      if (this._elem.hierarchy && this._elem.hierarchy.length) {\n        var i;\n        var len = this._elem.hierarchy.length;\n        for (i = 0; i < len; i += 1) {\n          this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\n        }\n      }\n      return matrix.inversePoint(arr);\n    }\n    function fromComp(arr) {\n      var toWorldMat = new Matrix();\n      toWorldMat.reset();\n      this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);\n      if (this._elem.hierarchy && this._elem.hierarchy.length) {\n        var i;\n        var len = this._elem.hierarchy.length;\n        for (i = 0; i < len; i += 1) {\n          this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\n        }\n        return toWorldMat.inversePoint(arr);\n      }\n      return toWorldMat.inversePoint(arr);\n    }\n    function sampleImage() {\n      return [1, 1, 1, 1];\n    }\n    return function (elem) {\n      var transformInterface;\n      function _registerMaskInterface(maskManager) {\n        _thisLayerFunction.mask = new MaskManagerInterface(maskManager, elem);\n      }\n      function _registerEffectsInterface(effects) {\n        _thisLayerFunction.effect = effects;\n      }\n      function _thisLayerFunction(name) {\n        switch (name) {\n          case 'ADBE Root Vectors Group':\n          case 'Contents':\n          case 2:\n            return _thisLayerFunction.shapeInterface;\n          case 1:\n          case 6:\n          case 'Transform':\n          case 'transform':\n          case 'ADBE Transform Group':\n            return transformInterface;\n          case 4:\n          case 'ADBE Effect Parade':\n          case 'effects':\n          case 'Effects':\n            return _thisLayerFunction.effect;\n          case 'ADBE Text Properties':\n            return _thisLayerFunction.textInterface;\n          default:\n            return null;\n        }\n      }\n      _thisLayerFunction.getMatrix = getMatrix;\n      _thisLayerFunction.invertPoint = invertPoint;\n      _thisLayerFunction.applyPoint = applyPoint;\n      _thisLayerFunction.toWorld = toWorld;\n      _thisLayerFunction.toWorldVec = toWorldVec;\n      _thisLayerFunction.fromWorld = fromWorld;\n      _thisLayerFunction.fromWorldVec = fromWorldVec;\n      _thisLayerFunction.toComp = toWorld;\n      _thisLayerFunction.fromComp = fromComp;\n      _thisLayerFunction.sampleImage = sampleImage;\n      _thisLayerFunction.sourceRectAtTime = elem.sourceRectAtTime.bind(elem);\n      _thisLayerFunction._elem = elem;\n      transformInterface = TransformExpressionInterface(elem.finalTransform.mProp);\n      var anchorPointDescriptor = getDescriptor(transformInterface, 'anchorPoint');\n      Object.defineProperties(_thisLayerFunction, {\n        hasParent: {\n          get: function get() {\n            return elem.hierarchy.length;\n          }\n        },\n        parent: {\n          get: function get() {\n            return elem.hierarchy[0].layerInterface;\n          }\n        },\n        rotation: getDescriptor(transformInterface, 'rotation'),\n        scale: getDescriptor(transformInterface, 'scale'),\n        position: getDescriptor(transformInterface, 'position'),\n        opacity: getDescriptor(transformInterface, 'opacity'),\n        anchorPoint: anchorPointDescriptor,\n        anchor_point: anchorPointDescriptor,\n        transform: {\n          get: function get() {\n            return transformInterface;\n          }\n        },\n        active: {\n          get: function get() {\n            return elem.isInRange;\n          }\n        }\n      });\n      _thisLayerFunction.startTime = elem.data.st;\n      _thisLayerFunction.index = elem.data.ind;\n      _thisLayerFunction.source = elem.data.refId;\n      _thisLayerFunction.height = elem.data.ty === 0 ? elem.data.h : 100;\n      _thisLayerFunction.width = elem.data.ty === 0 ? elem.data.w : 100;\n      _thisLayerFunction.inPoint = elem.data.ip / elem.comp.globalData.frameRate;\n      _thisLayerFunction.outPoint = elem.data.op / elem.comp.globalData.frameRate;\n      _thisLayerFunction._name = elem.data.nm;\n      _thisLayerFunction.registerMaskInterface = _registerMaskInterface;\n      _thisLayerFunction.registerEffectsInterface = _registerEffectsInterface;\n      return _thisLayerFunction;\n    };\n  }();\n\n  var propertyGroupFactory = function () {\n    return function (interfaceFunction, parentPropertyGroup) {\n      return function (val) {\n        val = val === undefined ? 1 : val;\n        if (val <= 0) {\n          return interfaceFunction;\n        }\n        return parentPropertyGroup(val - 1);\n      };\n    };\n  }();\n\n  var PropertyInterface = function () {\n    return function (propertyName, propertyGroup) {\n      var interfaceFunction = {\n        _name: propertyName\n      };\n      function _propertyGroup(val) {\n        val = val === undefined ? 1 : val;\n        if (val <= 0) {\n          return interfaceFunction;\n        }\n        return propertyGroup(val - 1);\n      }\n      return _propertyGroup;\n    };\n  }();\n\n  var EffectsExpressionInterface = function () {\n    var ob = {\n      createEffectsInterface: createEffectsInterface\n    };\n    function createEffectsInterface(elem, propertyGroup) {\n      if (elem.effectsManager) {\n        var effectElements = [];\n        var effectsData = elem.data.ef;\n        var i;\n        var len = elem.effectsManager.effectElements.length;\n        for (i = 0; i < len; i += 1) {\n          effectElements.push(createGroupInterface(effectsData[i], elem.effectsManager.effectElements[i], propertyGroup, elem));\n        }\n        var effects = elem.data.ef || [];\n        var groupInterface = function groupInterface(name) {\n          i = 0;\n          len = effects.length;\n          while (i < len) {\n            if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\n              return effectElements[i];\n            }\n            i += 1;\n          }\n          return null;\n        };\n        Object.defineProperty(groupInterface, 'numProperties', {\n          get: function get() {\n            return effects.length;\n          }\n        });\n        return groupInterface;\n      }\n      return null;\n    }\n    function createGroupInterface(data, elements, propertyGroup, elem) {\n      function groupInterface(name) {\n        var effects = data.ef;\n        var i = 0;\n        var len = effects.length;\n        while (i < len) {\n          if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\n            if (effects[i].ty === 5) {\n              return effectElements[i];\n            }\n            return effectElements[i]();\n          }\n          i += 1;\n        }\n        throw new Error();\n      }\n      var _propertyGroup = propertyGroupFactory(groupInterface, propertyGroup);\n      var effectElements = [];\n      var i;\n      var len = data.ef.length;\n      for (i = 0; i < len; i += 1) {\n        if (data.ef[i].ty === 5) {\n          effectElements.push(createGroupInterface(data.ef[i], elements.effectElements[i], elements.effectElements[i].propertyGroup, elem));\n        } else {\n          effectElements.push(createValueInterface(elements.effectElements[i], data.ef[i].ty, elem, _propertyGroup));\n        }\n      }\n      if (data.mn === 'ADBE Color Control') {\n        Object.defineProperty(groupInterface, 'color', {\n          get: function get() {\n            return effectElements[0]();\n          }\n        });\n      }\n      Object.defineProperties(groupInterface, {\n        numProperties: {\n          get: function get() {\n            return data.np;\n          }\n        },\n        _name: {\n          value: data.nm\n        },\n        propertyGroup: {\n          value: _propertyGroup\n        }\n      });\n      groupInterface.enabled = data.en !== 0;\n      groupInterface.active = groupInterface.enabled;\n      return groupInterface;\n    }\n    function createValueInterface(element, type, elem, propertyGroup) {\n      var expressionProperty = ExpressionPropertyInterface(element.p);\n      function interfaceFunction() {\n        if (type === 10) {\n          return elem.comp.compInterface(element.p.v);\n        }\n        return expressionProperty();\n      }\n      if (element.p.setGroupProperty) {\n        element.p.setGroupProperty(PropertyInterface('', propertyGroup));\n      }\n      return interfaceFunction;\n    }\n    return ob;\n  }();\n\n  var ShapePathInterface = function () {\n    return function pathInterfaceFactory(shape, view, propertyGroup) {\n      var prop = view.sh;\n      function interfaceFunction(val) {\n        if (val === 'Shape' || val === 'shape' || val === 'Path' || val === 'path' || val === 'ADBE Vector Shape' || val === 2) {\n          return interfaceFunction.path;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      prop.setGroupProperty(PropertyInterface('Path', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        path: {\n          get: function get() {\n            if (prop.k) {\n              prop.getValue();\n            }\n            return prop;\n          }\n        },\n        shape: {\n          get: function get() {\n            if (prop.k) {\n              prop.getValue();\n            }\n            return prop;\n          }\n        },\n        _name: {\n          value: shape.nm\n        },\n        ix: {\n          value: shape.ix\n        },\n        propertyIndex: {\n          value: shape.ix\n        },\n        mn: {\n          value: shape.mn\n        },\n        propertyGroup: {\n          value: propertyGroup\n        }\n      });\n      return interfaceFunction;\n    };\n  }();\n\n  var ShapeExpressionInterface = function () {\n    function iterateElements(shapes, view, propertyGroup) {\n      var arr = [];\n      var i;\n      var len = shapes ? shapes.length : 0;\n      for (i = 0; i < len; i += 1) {\n        if (shapes[i].ty === 'gr') {\n          arr.push(groupInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'fl') {\n          arr.push(fillInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'st') {\n          arr.push(strokeInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'tm') {\n          arr.push(trimInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'tr') {\n          // arr.push(transformInterfaceFactory(shapes[i],view[i],propertyGroup));\n        } else if (shapes[i].ty === 'el') {\n          arr.push(ellipseInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'sr') {\n          arr.push(starInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'sh') {\n          arr.push(ShapePathInterface(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'rc') {\n          arr.push(rectInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'rd') {\n          arr.push(roundedInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'rp') {\n          arr.push(repeaterInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'gf') {\n          arr.push(gradientFillInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else {\n          arr.push(defaultInterfaceFactory(shapes[i], view[i], propertyGroup));\n        }\n      }\n      return arr;\n    }\n    function contentsInterfaceFactory(shape, view, propertyGroup) {\n      var interfaces;\n      var interfaceFunction = function _interfaceFunction(value) {\n        var i = 0;\n        var len = interfaces.length;\n        while (i < len) {\n          if (interfaces[i]._name === value || interfaces[i].mn === value || interfaces[i].propertyIndex === value || interfaces[i].ix === value || interfaces[i].ind === value) {\n            return interfaces[i];\n          }\n          i += 1;\n        }\n        if (typeof value === 'number') {\n          return interfaces[value - 1];\n        }\n        return null;\n      };\n      interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      interfaces = iterateElements(shape.it, view.it, interfaceFunction.propertyGroup);\n      interfaceFunction.numProperties = interfaces.length;\n      var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\n      interfaceFunction.transform = transformInterface;\n      interfaceFunction.propertyIndex = shape.cix;\n      interfaceFunction._name = shape.nm;\n      return interfaceFunction;\n    }\n    function groupInterfaceFactory(shape, view, propertyGroup) {\n      var interfaceFunction = function _interfaceFunction(value) {\n        switch (value) {\n          case 'ADBE Vectors Group':\n          case 'Contents':\n          case 2:\n            return interfaceFunction.content;\n          // Not necessary for now. Keeping them here in case a new case appears\n          // case 'ADBE Vector Transform Group':\n          // case 3:\n          default:\n            return interfaceFunction.transform;\n        }\n      };\n      interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      var content = contentsInterfaceFactory(shape, view, interfaceFunction.propertyGroup);\n      var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\n      interfaceFunction.content = content;\n      interfaceFunction.transform = transformInterface;\n      Object.defineProperty(interfaceFunction, '_name', {\n        get: function get() {\n          return shape.nm;\n        }\n      });\n      // interfaceFunction.content = interfaceFunction;\n      interfaceFunction.numProperties = shape.np;\n      interfaceFunction.propertyIndex = shape.ix;\n      interfaceFunction.nm = shape.nm;\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n    function fillInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(val) {\n        if (val === 'Color' || val === 'color') {\n          return interfaceFunction.color;\n        }\n        if (val === 'Opacity' || val === 'opacity') {\n          return interfaceFunction.opacity;\n        }\n        return null;\n      }\n      Object.defineProperties(interfaceFunction, {\n        color: {\n          get: ExpressionPropertyInterface(view.c)\n        },\n        opacity: {\n          get: ExpressionPropertyInterface(view.o)\n        },\n        _name: {\n          value: shape.nm\n        },\n        mn: {\n          value: shape.mn\n        }\n      });\n      view.c.setGroupProperty(PropertyInterface('Color', propertyGroup));\n      view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\n      return interfaceFunction;\n    }\n    function gradientFillInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(val) {\n        if (val === 'Start Point' || val === 'start point') {\n          return interfaceFunction.startPoint;\n        }\n        if (val === 'End Point' || val === 'end point') {\n          return interfaceFunction.endPoint;\n        }\n        if (val === 'Opacity' || val === 'opacity') {\n          return interfaceFunction.opacity;\n        }\n        return null;\n      }\n      Object.defineProperties(interfaceFunction, {\n        startPoint: {\n          get: ExpressionPropertyInterface(view.s)\n        },\n        endPoint: {\n          get: ExpressionPropertyInterface(view.e)\n        },\n        opacity: {\n          get: ExpressionPropertyInterface(view.o)\n        },\n        type: {\n          get: function get() {\n            return 'a';\n          }\n        },\n        _name: {\n          value: shape.nm\n        },\n        mn: {\n          value: shape.mn\n        }\n      });\n      view.s.setGroupProperty(PropertyInterface('Start Point', propertyGroup));\n      view.e.setGroupProperty(PropertyInterface('End Point', propertyGroup));\n      view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\n      return interfaceFunction;\n    }\n    function defaultInterfaceFactory() {\n      function interfaceFunction() {\n        return null;\n      }\n      return interfaceFunction;\n    }\n    function strokeInterfaceFactory(shape, view, propertyGroup) {\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      var _dashPropertyGroup = propertyGroupFactory(dashOb, _propertyGroup);\n      function addPropertyToDashOb(i) {\n        Object.defineProperty(dashOb, shape.d[i].nm, {\n          get: ExpressionPropertyInterface(view.d.dataProps[i].p)\n        });\n      }\n      var i;\n      var len = shape.d ? shape.d.length : 0;\n      var dashOb = {};\n      for (i = 0; i < len; i += 1) {\n        addPropertyToDashOb(i);\n        view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);\n      }\n      function interfaceFunction(val) {\n        if (val === 'Color' || val === 'color') {\n          return interfaceFunction.color;\n        }\n        if (val === 'Opacity' || val === 'opacity') {\n          return interfaceFunction.opacity;\n        }\n        if (val === 'Stroke Width' || val === 'stroke width') {\n          return interfaceFunction.strokeWidth;\n        }\n        return null;\n      }\n      Object.defineProperties(interfaceFunction, {\n        color: {\n          get: ExpressionPropertyInterface(view.c)\n        },\n        opacity: {\n          get: ExpressionPropertyInterface(view.o)\n        },\n        strokeWidth: {\n          get: ExpressionPropertyInterface(view.w)\n        },\n        dash: {\n          get: function get() {\n            return dashOb;\n          }\n        },\n        _name: {\n          value: shape.nm\n        },\n        mn: {\n          value: shape.mn\n        }\n      });\n      view.c.setGroupProperty(PropertyInterface('Color', _propertyGroup));\n      view.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\n      view.w.setGroupProperty(PropertyInterface('Stroke Width', _propertyGroup));\n      return interfaceFunction;\n    }\n    function trimInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(val) {\n        if (val === shape.e.ix || val === 'End' || val === 'end') {\n          return interfaceFunction.end;\n        }\n        if (val === shape.s.ix) {\n          return interfaceFunction.start;\n        }\n        if (val === shape.o.ix) {\n          return interfaceFunction.offset;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      interfaceFunction.propertyIndex = shape.ix;\n      view.s.setGroupProperty(PropertyInterface('Start', _propertyGroup));\n      view.e.setGroupProperty(PropertyInterface('End', _propertyGroup));\n      view.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\n      interfaceFunction.propertyIndex = shape.ix;\n      interfaceFunction.propertyGroup = propertyGroup;\n      Object.defineProperties(interfaceFunction, {\n        start: {\n          get: ExpressionPropertyInterface(view.s)\n        },\n        end: {\n          get: ExpressionPropertyInterface(view.e)\n        },\n        offset: {\n          get: ExpressionPropertyInterface(view.o)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n    function transformInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.a.ix === value || value === 'Anchor Point') {\n          return interfaceFunction.anchorPoint;\n        }\n        if (shape.o.ix === value || value === 'Opacity') {\n          return interfaceFunction.opacity;\n        }\n        if (shape.p.ix === value || value === 'Position') {\n          return interfaceFunction.position;\n        }\n        if (shape.r.ix === value || value === 'Rotation' || value === 'ADBE Vector Rotation') {\n          return interfaceFunction.rotation;\n        }\n        if (shape.s.ix === value || value === 'Scale') {\n          return interfaceFunction.scale;\n        }\n        if (shape.sk && shape.sk.ix === value || value === 'Skew') {\n          return interfaceFunction.skew;\n        }\n        if (shape.sa && shape.sa.ix === value || value === 'Skew Axis') {\n          return interfaceFunction.skewAxis;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      view.transform.mProps.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\n      view.transform.mProps.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n      view.transform.mProps.a.setGroupProperty(PropertyInterface('Anchor Point', _propertyGroup));\n      view.transform.mProps.s.setGroupProperty(PropertyInterface('Scale', _propertyGroup));\n      view.transform.mProps.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\n      if (view.transform.mProps.sk) {\n        view.transform.mProps.sk.setGroupProperty(PropertyInterface('Skew', _propertyGroup));\n        view.transform.mProps.sa.setGroupProperty(PropertyInterface('Skew Angle', _propertyGroup));\n      }\n      view.transform.op.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        opacity: {\n          get: ExpressionPropertyInterface(view.transform.mProps.o)\n        },\n        position: {\n          get: ExpressionPropertyInterface(view.transform.mProps.p)\n        },\n        anchorPoint: {\n          get: ExpressionPropertyInterface(view.transform.mProps.a)\n        },\n        scale: {\n          get: ExpressionPropertyInterface(view.transform.mProps.s)\n        },\n        rotation: {\n          get: ExpressionPropertyInterface(view.transform.mProps.r)\n        },\n        skew: {\n          get: ExpressionPropertyInterface(view.transform.mProps.sk)\n        },\n        skewAxis: {\n          get: ExpressionPropertyInterface(view.transform.mProps.sa)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.ty = 'tr';\n      interfaceFunction.mn = shape.mn;\n      interfaceFunction.propertyGroup = propertyGroup;\n      return interfaceFunction;\n    }\n    function ellipseInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.p.ix === value) {\n          return interfaceFunction.position;\n        }\n        if (shape.s.ix === value) {\n          return interfaceFunction.size;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      interfaceFunction.propertyIndex = shape.ix;\n      var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\n      prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\n      prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        size: {\n          get: ExpressionPropertyInterface(prop.s)\n        },\n        position: {\n          get: ExpressionPropertyInterface(prop.p)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n    function starInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.p.ix === value) {\n          return interfaceFunction.position;\n        }\n        if (shape.r.ix === value) {\n          return interfaceFunction.rotation;\n        }\n        if (shape.pt.ix === value) {\n          return interfaceFunction.points;\n        }\n        if (shape.or.ix === value || value === 'ADBE Vector Star Outer Radius') {\n          return interfaceFunction.outerRadius;\n        }\n        if (shape.os.ix === value) {\n          return interfaceFunction.outerRoundness;\n        }\n        if (shape.ir && (shape.ir.ix === value || value === 'ADBE Vector Star Inner Radius')) {\n          return interfaceFunction.innerRadius;\n        }\n        if (shape.is && shape.is.ix === value) {\n          return interfaceFunction.innerRoundness;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\n      interfaceFunction.propertyIndex = shape.ix;\n      prop.or.setGroupProperty(PropertyInterface('Outer Radius', _propertyGroup));\n      prop.os.setGroupProperty(PropertyInterface('Outer Roundness', _propertyGroup));\n      prop.pt.setGroupProperty(PropertyInterface('Points', _propertyGroup));\n      prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n      prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\n      if (shape.ir) {\n        prop.ir.setGroupProperty(PropertyInterface('Inner Radius', _propertyGroup));\n        prop.is.setGroupProperty(PropertyInterface('Inner Roundness', _propertyGroup));\n      }\n      Object.defineProperties(interfaceFunction, {\n        position: {\n          get: ExpressionPropertyInterface(prop.p)\n        },\n        rotation: {\n          get: ExpressionPropertyInterface(prop.r)\n        },\n        points: {\n          get: ExpressionPropertyInterface(prop.pt)\n        },\n        outerRadius: {\n          get: ExpressionPropertyInterface(prop.or)\n        },\n        outerRoundness: {\n          get: ExpressionPropertyInterface(prop.os)\n        },\n        innerRadius: {\n          get: ExpressionPropertyInterface(prop.ir)\n        },\n        innerRoundness: {\n          get: ExpressionPropertyInterface(prop.is)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n    function rectInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.p.ix === value) {\n          return interfaceFunction.position;\n        }\n        if (shape.r.ix === value) {\n          return interfaceFunction.roundness;\n        }\n        if (shape.s.ix === value || value === 'Size' || value === 'ADBE Vector Rect Size') {\n          return interfaceFunction.size;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\n      interfaceFunction.propertyIndex = shape.ix;\n      prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n      prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\n      prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        position: {\n          get: ExpressionPropertyInterface(prop.p)\n        },\n        roundness: {\n          get: ExpressionPropertyInterface(prop.r)\n        },\n        size: {\n          get: ExpressionPropertyInterface(prop.s)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n    function roundedInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.r.ix === value || value === 'Round Corners 1') {\n          return interfaceFunction.radius;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      var prop = view;\n      interfaceFunction.propertyIndex = shape.ix;\n      prop.rd.setGroupProperty(PropertyInterface('Radius', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        radius: {\n          get: ExpressionPropertyInterface(prop.rd)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n    function repeaterInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.c.ix === value || value === 'Copies') {\n          return interfaceFunction.copies;\n        }\n        if (shape.o.ix === value || value === 'Offset') {\n          return interfaceFunction.offset;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      var prop = view;\n      interfaceFunction.propertyIndex = shape.ix;\n      prop.c.setGroupProperty(PropertyInterface('Copies', _propertyGroup));\n      prop.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        copies: {\n          get: ExpressionPropertyInterface(prop.c)\n        },\n        offset: {\n          get: ExpressionPropertyInterface(prop.o)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n    return function (shapes, view, propertyGroup) {\n      var interfaces;\n      function _interfaceFunction(value) {\n        if (typeof value === 'number') {\n          value = value === undefined ? 1 : value;\n          if (value === 0) {\n            return propertyGroup;\n          }\n          return interfaces[value - 1];\n        }\n        var i = 0;\n        var len = interfaces.length;\n        while (i < len) {\n          if (interfaces[i]._name === value) {\n            return interfaces[i];\n          }\n          i += 1;\n        }\n        return null;\n      }\n      function parentGroupWrapper() {\n        return propertyGroup;\n      }\n      _interfaceFunction.propertyGroup = propertyGroupFactory(_interfaceFunction, parentGroupWrapper);\n      interfaces = iterateElements(shapes, view, _interfaceFunction.propertyGroup);\n      _interfaceFunction.numProperties = interfaces.length;\n      _interfaceFunction._name = 'Contents';\n      return _interfaceFunction;\n    };\n  }();\n\n  var TextExpressionInterface = function () {\n    return function (elem) {\n      var _sourceText;\n      function _thisLayerFunction(name) {\n        switch (name) {\n          case 'ADBE Text Document':\n            return _thisLayerFunction.sourceText;\n          default:\n            return null;\n        }\n      }\n      Object.defineProperty(_thisLayerFunction, 'sourceText', {\n        get: function get() {\n          elem.textProperty.getValue();\n          var stringValue = elem.textProperty.currentData.t;\n          if (!_sourceText || stringValue !== _sourceText.value) {\n            _sourceText = new String(stringValue); // eslint-disable-line no-new-wrappers\n            // If stringValue is an empty string, eval returns undefined, so it has to be returned as a String primitive\n            _sourceText.value = stringValue || new String(stringValue); // eslint-disable-line no-new-wrappers\n            Object.defineProperty(_sourceText, 'style', {\n              get: function get() {\n                return {\n                  fillColor: elem.textProperty.currentData.fc\n                };\n              }\n            });\n          }\n          return _sourceText;\n        }\n      });\n      return _thisLayerFunction;\n    };\n  }();\n\n  function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n  var FootageInterface = function () {\n    var outlineInterfaceFactory = function outlineInterfaceFactory(elem) {\n      var currentPropertyName = '';\n      var currentProperty = elem.getFootageData();\n      function init() {\n        currentPropertyName = '';\n        currentProperty = elem.getFootageData();\n        return searchProperty;\n      }\n      function searchProperty(value) {\n        if (currentProperty[value]) {\n          currentPropertyName = value;\n          currentProperty = currentProperty[value];\n          if (_typeof(currentProperty) === 'object') {\n            return searchProperty;\n          }\n          return currentProperty;\n        }\n        var propertyNameIndex = value.indexOf(currentPropertyName);\n        if (propertyNameIndex !== -1) {\n          var index = parseInt(value.substr(propertyNameIndex + currentPropertyName.length), 10);\n          currentProperty = currentProperty[index];\n          if (_typeof(currentProperty) === 'object') {\n            return searchProperty;\n          }\n          return currentProperty;\n        }\n        return '';\n      }\n      return init;\n    };\n    var dataInterfaceFactory = function dataInterfaceFactory(elem) {\n      function interfaceFunction(value) {\n        if (value === 'Outline') {\n          return interfaceFunction.outlineInterface();\n        }\n        return null;\n      }\n      interfaceFunction._name = 'Outline';\n      interfaceFunction.outlineInterface = outlineInterfaceFactory(elem);\n      return interfaceFunction;\n    };\n    return function (elem) {\n      function _interfaceFunction(value) {\n        if (value === 'Data') {\n          return _interfaceFunction.dataInterface;\n        }\n        return null;\n      }\n      _interfaceFunction._name = 'Data';\n      _interfaceFunction.dataInterface = dataInterfaceFactory(elem);\n      return _interfaceFunction;\n    };\n  }();\n\n  var interfaces = {\n    layer: LayerExpressionInterface,\n    effects: EffectsExpressionInterface,\n    comp: CompExpressionInterface,\n    shape: ShapeExpressionInterface,\n    text: TextExpressionInterface,\n    footage: FootageInterface\n  };\n  function getInterface(type) {\n    return interfaces[type] || null;\n  }\n\n  var expressionHelpers = function () {\n    function searchExpressions(elem, data, prop) {\n      if (data.x) {\n        prop.k = true;\n        prop.x = true;\n        prop.initiateExpression = ExpressionManager.initiateExpression;\n        prop.effectsSequence.push(prop.initiateExpression(elem, data, prop).bind(prop));\n      }\n    }\n    function getValueAtTime(frameNum) {\n      frameNum *= this.elem.globalData.frameRate;\n      frameNum -= this.offsetTime;\n      if (frameNum !== this._cachingAtTime.lastFrame) {\n        this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < frameNum ? this._cachingAtTime.lastIndex : 0;\n        this._cachingAtTime.value = this.interpolateValue(frameNum, this._cachingAtTime);\n        this._cachingAtTime.lastFrame = frameNum;\n      }\n      return this._cachingAtTime.value;\n    }\n    function getSpeedAtTime(frameNum) {\n      var delta = -0.01;\n      var v1 = this.getValueAtTime(frameNum);\n      var v2 = this.getValueAtTime(frameNum + delta);\n      var speed = 0;\n      if (v1.length) {\n        var i;\n        for (i = 0; i < v1.length; i += 1) {\n          speed += Math.pow(v2[i] - v1[i], 2);\n        }\n        speed = Math.sqrt(speed) * 100;\n      } else {\n        speed = 0;\n      }\n      return speed;\n    }\n    function getVelocityAtTime(frameNum) {\n      if (this.vel !== undefined) {\n        return this.vel;\n      }\n      var delta = -0.001;\n      // frameNum += this.elem.data.st;\n      var v1 = this.getValueAtTime(frameNum);\n      var v2 = this.getValueAtTime(frameNum + delta);\n      var velocity;\n      if (v1.length) {\n        velocity = createTypedArray('float32', v1.length);\n        var i;\n        for (i = 0; i < v1.length; i += 1) {\n          // removing frameRate\n          // if needed, don't add it here\n          // velocity[i] = this.elem.globalData.frameRate*((v2[i] - v1[i])/delta);\n          velocity[i] = (v2[i] - v1[i]) / delta;\n        }\n      } else {\n        velocity = (v2 - v1) / delta;\n      }\n      return velocity;\n    }\n    function getStaticValueAtTime() {\n      return this.pv;\n    }\n    function setGroupProperty(propertyGroup) {\n      this.propertyGroup = propertyGroup;\n    }\n    return {\n      searchExpressions: searchExpressions,\n      getSpeedAtTime: getSpeedAtTime,\n      getVelocityAtTime: getVelocityAtTime,\n      getValueAtTime: getValueAtTime,\n      getStaticValueAtTime: getStaticValueAtTime,\n      setGroupProperty: setGroupProperty\n    };\n  }();\n\n  function addPropertyDecorator() {\n    function loopOut(type, duration, durationFlag) {\n      if (!this.k || !this.keyframes) {\n        return this.pv;\n      }\n      type = type ? type.toLowerCase() : '';\n      var currentFrame = this.comp.renderedFrame;\n      var keyframes = this.keyframes;\n      var lastKeyFrame = keyframes[keyframes.length - 1].t;\n      if (currentFrame <= lastKeyFrame) {\n        return this.pv;\n      }\n      var cycleDuration;\n      var firstKeyFrame;\n      if (!durationFlag) {\n        if (!duration || duration > keyframes.length - 1) {\n          duration = keyframes.length - 1;\n        }\n        firstKeyFrame = keyframes[keyframes.length - 1 - duration].t;\n        cycleDuration = lastKeyFrame - firstKeyFrame;\n      } else {\n        if (!duration) {\n          cycleDuration = Math.max(0, lastKeyFrame - this.elem.data.ip);\n        } else {\n          cycleDuration = Math.abs(lastKeyFrame - this.elem.comp.globalData.frameRate * duration);\n        }\n        firstKeyFrame = lastKeyFrame - cycleDuration;\n      }\n      var i;\n      var len;\n      var ret;\n      if (type === 'pingpong') {\n        var iterations = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\n        if (iterations % 2 !== 0) {\n          return this.getValueAtTime((cycleDuration - (currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n        }\n      } else if (type === 'offset') {\n        var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\n        var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\n        var current = this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n        var repeats = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\n        if (this.pv.length) {\n          ret = new Array(initV.length);\n          len = ret.length;\n          for (i = 0; i < len; i += 1) {\n            ret[i] = (endV[i] - initV[i]) * repeats + current[i];\n          }\n          return ret;\n        }\n        return (endV - initV) * repeats + current;\n      } else if (type === 'continue') {\n        var lastValue = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\n        var nextLastValue = this.getValueAtTime((lastKeyFrame - 0.001) / this.comp.globalData.frameRate, 0);\n        if (this.pv.length) {\n          ret = new Array(lastValue.length);\n          len = ret.length;\n          for (i = 0; i < len; i += 1) {\n            ret[i] = lastValue[i] + (lastValue[i] - nextLastValue[i]) * ((currentFrame - lastKeyFrame) / this.comp.globalData.frameRate) / 0.0005; // eslint-disable-line\n          }\n          return ret;\n        }\n        return lastValue + (lastValue - nextLastValue) * ((currentFrame - lastKeyFrame) / 0.001);\n      }\n      return this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n    }\n    function loopIn(type, duration, durationFlag) {\n      if (!this.k) {\n        return this.pv;\n      }\n      type = type ? type.toLowerCase() : '';\n      var currentFrame = this.comp.renderedFrame;\n      var keyframes = this.keyframes;\n      var firstKeyFrame = keyframes[0].t;\n      if (currentFrame >= firstKeyFrame) {\n        return this.pv;\n      }\n      var cycleDuration;\n      var lastKeyFrame;\n      if (!durationFlag) {\n        if (!duration || duration > keyframes.length - 1) {\n          duration = keyframes.length - 1;\n        }\n        lastKeyFrame = keyframes[duration].t;\n        cycleDuration = lastKeyFrame - firstKeyFrame;\n      } else {\n        if (!duration) {\n          cycleDuration = Math.max(0, this.elem.data.op - firstKeyFrame);\n        } else {\n          cycleDuration = Math.abs(this.elem.comp.globalData.frameRate * duration);\n        }\n        lastKeyFrame = firstKeyFrame + cycleDuration;\n      }\n      var i;\n      var len;\n      var ret;\n      if (type === 'pingpong') {\n        var iterations = Math.floor((firstKeyFrame - currentFrame) / cycleDuration);\n        if (iterations % 2 === 0) {\n          return this.getValueAtTime(((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n        }\n      } else if (type === 'offset') {\n        var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\n        var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\n        var current = this.getValueAtTime((cycleDuration - (firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0);\n        var repeats = Math.floor((firstKeyFrame - currentFrame) / cycleDuration) + 1;\n        if (this.pv.length) {\n          ret = new Array(initV.length);\n          len = ret.length;\n          for (i = 0; i < len; i += 1) {\n            ret[i] = current[i] - (endV[i] - initV[i]) * repeats;\n          }\n          return ret;\n        }\n        return current - (endV - initV) * repeats;\n      } else if (type === 'continue') {\n        var firstValue = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\n        var nextFirstValue = this.getValueAtTime((firstKeyFrame + 0.001) / this.comp.globalData.frameRate, 0);\n        if (this.pv.length) {\n          ret = new Array(firstValue.length);\n          len = ret.length;\n          for (i = 0; i < len; i += 1) {\n            ret[i] = firstValue[i] + (firstValue[i] - nextFirstValue[i]) * (firstKeyFrame - currentFrame) / 0.001;\n          }\n          return ret;\n        }\n        return firstValue + (firstValue - nextFirstValue) * (firstKeyFrame - currentFrame) / 0.001;\n      }\n      return this.getValueAtTime((cycleDuration - ((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n    }\n    function smooth(width, samples) {\n      if (!this.k) {\n        return this.pv;\n      }\n      width = (width || 0.4) * 0.5;\n      samples = Math.floor(samples || 5);\n      if (samples <= 1) {\n        return this.pv;\n      }\n      var currentTime = this.comp.renderedFrame / this.comp.globalData.frameRate;\n      var initFrame = currentTime - width;\n      var endFrame = currentTime + width;\n      var sampleFrequency = samples > 1 ? (endFrame - initFrame) / (samples - 1) : 1;\n      var i = 0;\n      var j = 0;\n      var value;\n      if (this.pv.length) {\n        value = createTypedArray('float32', this.pv.length);\n      } else {\n        value = 0;\n      }\n      var sampleValue;\n      while (i < samples) {\n        sampleValue = this.getValueAtTime(initFrame + i * sampleFrequency);\n        if (this.pv.length) {\n          for (j = 0; j < this.pv.length; j += 1) {\n            value[j] += sampleValue[j];\n          }\n        } else {\n          value += sampleValue;\n        }\n        i += 1;\n      }\n      if (this.pv.length) {\n        for (j = 0; j < this.pv.length; j += 1) {\n          value[j] /= samples;\n        }\n      } else {\n        value /= samples;\n      }\n      return value;\n    }\n    function getTransformValueAtTime(time) {\n      if (!this._transformCachingAtTime) {\n        this._transformCachingAtTime = {\n          v: new Matrix()\n        };\n      }\n      /// /\n      var matrix = this._transformCachingAtTime.v;\n      matrix.cloneFromProps(this.pre.props);\n      if (this.appliedTransformations < 1) {\n        var anchor = this.a.getValueAtTime(time);\n        matrix.translate(-anchor[0] * this.a.mult, -anchor[1] * this.a.mult, anchor[2] * this.a.mult);\n      }\n      if (this.appliedTransformations < 2) {\n        var scale = this.s.getValueAtTime(time);\n        matrix.scale(scale[0] * this.s.mult, scale[1] * this.s.mult, scale[2] * this.s.mult);\n      }\n      if (this.sk && this.appliedTransformations < 3) {\n        var skew = this.sk.getValueAtTime(time);\n        var skewAxis = this.sa.getValueAtTime(time);\n        matrix.skewFromAxis(-skew * this.sk.mult, skewAxis * this.sa.mult);\n      }\n      if (this.r && this.appliedTransformations < 4) {\n        var rotation = this.r.getValueAtTime(time);\n        matrix.rotate(-rotation * this.r.mult);\n      } else if (!this.r && this.appliedTransformations < 4) {\n        var rotationZ = this.rz.getValueAtTime(time);\n        var rotationY = this.ry.getValueAtTime(time);\n        var rotationX = this.rx.getValueAtTime(time);\n        var orientation = this.or.getValueAtTime(time);\n        matrix.rotateZ(-rotationZ * this.rz.mult).rotateY(rotationY * this.ry.mult).rotateX(rotationX * this.rx.mult).rotateZ(-orientation[2] * this.or.mult).rotateY(orientation[1] * this.or.mult).rotateX(orientation[0] * this.or.mult);\n      }\n      if (this.data.p && this.data.p.s) {\n        var positionX = this.px.getValueAtTime(time);\n        var positionY = this.py.getValueAtTime(time);\n        if (this.data.p.z) {\n          var positionZ = this.pz.getValueAtTime(time);\n          matrix.translate(positionX * this.px.mult, positionY * this.py.mult, -positionZ * this.pz.mult);\n        } else {\n          matrix.translate(positionX * this.px.mult, positionY * this.py.mult, 0);\n        }\n      } else {\n        var position = this.p.getValueAtTime(time);\n        matrix.translate(position[0] * this.p.mult, position[1] * this.p.mult, -position[2] * this.p.mult);\n      }\n      return matrix;\n      /// /\n    }\n    function getTransformStaticValueAtTime() {\n      return this.v.clone(new Matrix());\n    }\n    var getTransformProperty = TransformPropertyFactory.getTransformProperty;\n    TransformPropertyFactory.getTransformProperty = function (elem, data, container) {\n      var prop = getTransformProperty(elem, data, container);\n      if (prop.dynamicProperties.length) {\n        prop.getValueAtTime = getTransformValueAtTime.bind(prop);\n      } else {\n        prop.getValueAtTime = getTransformStaticValueAtTime.bind(prop);\n      }\n      prop.setGroupProperty = expressionHelpers.setGroupProperty;\n      return prop;\n    };\n    var propertyGetProp = PropertyFactory.getProp;\n    PropertyFactory.getProp = function (elem, data, type, mult, container) {\n      var prop = propertyGetProp(elem, data, type, mult, container);\n      // prop.getVelocityAtTime = getVelocityAtTime;\n      // prop.loopOut = loopOut;\n      // prop.loopIn = loopIn;\n      if (prop.kf) {\n        prop.getValueAtTime = expressionHelpers.getValueAtTime.bind(prop);\n      } else {\n        prop.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(prop);\n      }\n      prop.setGroupProperty = expressionHelpers.setGroupProperty;\n      prop.loopOut = loopOut;\n      prop.loopIn = loopIn;\n      prop.smooth = smooth;\n      prop.getVelocityAtTime = expressionHelpers.getVelocityAtTime.bind(prop);\n      prop.getSpeedAtTime = expressionHelpers.getSpeedAtTime.bind(prop);\n      prop.numKeys = data.a === 1 ? data.k.length : 0;\n      prop.propertyIndex = data.ix;\n      var value = 0;\n      if (type !== 0) {\n        value = createTypedArray('float32', data.a === 1 ? data.k[0].s.length : data.k.length);\n      }\n      prop._cachingAtTime = {\n        lastFrame: initialDefaultFrame,\n        lastIndex: 0,\n        value: value\n      };\n      expressionHelpers.searchExpressions(elem, data, prop);\n      if (prop.k) {\n        container.addDynamicProperty(prop);\n      }\n      return prop;\n    };\n    function getShapeValueAtTime(frameNum) {\n      // For now this caching object is created only when needed instead of creating it when the shape is initialized.\n      if (!this._cachingAtTime) {\n        this._cachingAtTime = {\n          shapeValue: shapePool.clone(this.pv),\n          lastIndex: 0,\n          lastTime: initialDefaultFrame\n        };\n      }\n      frameNum *= this.elem.globalData.frameRate;\n      frameNum -= this.offsetTime;\n      if (frameNum !== this._cachingAtTime.lastTime) {\n        this._cachingAtTime.lastIndex = this._cachingAtTime.lastTime < frameNum ? this._caching.lastIndex : 0;\n        this._cachingAtTime.lastTime = frameNum;\n        this.interpolateShape(frameNum, this._cachingAtTime.shapeValue, this._cachingAtTime);\n      }\n      return this._cachingAtTime.shapeValue;\n    }\n    var ShapePropertyConstructorFunction = ShapePropertyFactory.getConstructorFunction();\n    var KeyframedShapePropertyConstructorFunction = ShapePropertyFactory.getKeyframedConstructorFunction();\n    function ShapeExpressions() {}\n    ShapeExpressions.prototype = {\n      vertices: function vertices(prop, time) {\n        if (this.k) {\n          this.getValue();\n        }\n        var shapePath = this.v;\n        if (time !== undefined) {\n          shapePath = this.getValueAtTime(time, 0);\n        }\n        var i;\n        var len = shapePath._length;\n        var vertices = shapePath[prop];\n        var points = shapePath.v;\n        var arr = createSizedArray(len);\n        for (i = 0; i < len; i += 1) {\n          if (prop === 'i' || prop === 'o') {\n            arr[i] = [vertices[i][0] - points[i][0], vertices[i][1] - points[i][1]];\n          } else {\n            arr[i] = [vertices[i][0], vertices[i][1]];\n          }\n        }\n        return arr;\n      },\n      points: function points(time) {\n        return this.vertices('v', time);\n      },\n      inTangents: function inTangents(time) {\n        return this.vertices('i', time);\n      },\n      outTangents: function outTangents(time) {\n        return this.vertices('o', time);\n      },\n      isClosed: function isClosed() {\n        return this.v.c;\n      },\n      pointOnPath: function pointOnPath(perc, time) {\n        var shapePath = this.v;\n        if (time !== undefined) {\n          shapePath = this.getValueAtTime(time, 0);\n        }\n        if (!this._segmentsLength) {\n          this._segmentsLength = bez.getSegmentsLength(shapePath);\n        }\n        var segmentsLength = this._segmentsLength;\n        var lengths = segmentsLength.lengths;\n        var lengthPos = segmentsLength.totalLength * perc;\n        var i = 0;\n        var len = lengths.length;\n        var accumulatedLength = 0;\n        var pt;\n        while (i < len) {\n          if (accumulatedLength + lengths[i].addedLength > lengthPos) {\n            var initIndex = i;\n            var endIndex = shapePath.c && i === len - 1 ? 0 : i + 1;\n            var segmentPerc = (lengthPos - accumulatedLength) / lengths[i].addedLength;\n            pt = bez.getPointInSegment(shapePath.v[initIndex], shapePath.v[endIndex], shapePath.o[initIndex], shapePath.i[endIndex], segmentPerc, lengths[i]);\n            break;\n          } else {\n            accumulatedLength += lengths[i].addedLength;\n          }\n          i += 1;\n        }\n        if (!pt) {\n          pt = shapePath.c ? [shapePath.v[0][0], shapePath.v[0][1]] : [shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1]];\n        }\n        return pt;\n      },\n      vectorOnPath: function vectorOnPath(perc, time, vectorType) {\n        // perc doesn't use triple equality because it can be a Number object as well as a primitive.\n        if (perc == 1) {\n          // eslint-disable-line eqeqeq\n          perc = this.v.c;\n        } else if (perc == 0) {\n          // eslint-disable-line eqeqeq\n          perc = 0.999;\n        }\n        var pt1 = this.pointOnPath(perc, time);\n        var pt2 = this.pointOnPath(perc + 0.001, time);\n        var xLength = pt2[0] - pt1[0];\n        var yLength = pt2[1] - pt1[1];\n        var magnitude = Math.sqrt(Math.pow(xLength, 2) + Math.pow(yLength, 2));\n        if (magnitude === 0) {\n          return [0, 0];\n        }\n        var unitVector = vectorType === 'tangent' ? [xLength / magnitude, yLength / magnitude] : [-yLength / magnitude, xLength / magnitude];\n        return unitVector;\n      },\n      tangentOnPath: function tangentOnPath(perc, time) {\n        return this.vectorOnPath(perc, time, 'tangent');\n      },\n      normalOnPath: function normalOnPath(perc, time) {\n        return this.vectorOnPath(perc, time, 'normal');\n      },\n      setGroupProperty: expressionHelpers.setGroupProperty,\n      getValueAtTime: expressionHelpers.getStaticValueAtTime\n    };\n    extendPrototype([ShapeExpressions], ShapePropertyConstructorFunction);\n    extendPrototype([ShapeExpressions], KeyframedShapePropertyConstructorFunction);\n    KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime = getShapeValueAtTime;\n    KeyframedShapePropertyConstructorFunction.prototype.initiateExpression = ExpressionManager.initiateExpression;\n    var propertyGetShapeProp = ShapePropertyFactory.getShapeProp;\n    ShapePropertyFactory.getShapeProp = function (elem, data, type, arr, trims) {\n      var prop = propertyGetShapeProp(elem, data, type, arr, trims);\n      prop.propertyIndex = data.ix;\n      prop.lock = false;\n      if (type === 3) {\n        expressionHelpers.searchExpressions(elem, data.pt, prop);\n      } else if (type === 4) {\n        expressionHelpers.searchExpressions(elem, data.ks, prop);\n      }\n      if (prop.k) {\n        elem.addDynamicProperty(prop);\n      }\n      return prop;\n    };\n  }\n  function initialize$1() {\n    addPropertyDecorator();\n  }\n\n  function addDecorator() {\n    function searchExpressions() {\n      if (this.data.d.x) {\n        this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem, this.data.d, this);\n        this.addEffect(this.getExpressionValue.bind(this));\n        return true;\n      }\n      return null;\n    }\n    TextProperty.prototype.getExpressionValue = function (currentValue, text) {\n      var newValue = this.calculateExpression(text);\n      if (currentValue.t !== newValue) {\n        var newData = {};\n        this.copyData(newData, currentValue);\n        newData.t = newValue.toString();\n        newData.__complete = false;\n        return newData;\n      }\n      return currentValue;\n    };\n    TextProperty.prototype.searchProperty = function () {\n      var isKeyframed = this.searchKeyframes();\n      var hasExpressions = this.searchExpressions();\n      this.kf = isKeyframed || hasExpressions;\n      return this.kf;\n    };\n    TextProperty.prototype.searchExpressions = searchExpressions;\n  }\n  function initialize() {\n    addDecorator();\n  }\n\n  function SVGComposableEffect() {}\n  SVGComposableEffect.prototype = {\n    createMergeNode: function createMergeNode(resultId, ins) {\n      var feMerge = createNS('feMerge');\n      feMerge.setAttribute('result', resultId);\n      var feMergeNode;\n      var i;\n      for (i = 0; i < ins.length; i += 1) {\n        feMergeNode = createNS('feMergeNode');\n        feMergeNode.setAttribute('in', ins[i]);\n        feMerge.appendChild(feMergeNode);\n        feMerge.appendChild(feMergeNode);\n      }\n      return feMerge;\n    }\n  };\n\n  var linearFilterValue = '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0';\n  function SVGTintFilter(filter, filterManager, elem, id, source) {\n    this.filterManager = filterManager;\n    var feColorMatrix = createNS('feColorMatrix');\n    feColorMatrix.setAttribute('type', 'matrix');\n    feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\n    feColorMatrix.setAttribute('values', linearFilterValue + ' 1 0');\n    this.linearFilter = feColorMatrix;\n    feColorMatrix.setAttribute('result', id + '_tint_1');\n    filter.appendChild(feColorMatrix);\n    feColorMatrix = createNS('feColorMatrix');\n    feColorMatrix.setAttribute('type', 'matrix');\n    feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\n    feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\n    feColorMatrix.setAttribute('result', id + '_tint_2');\n    filter.appendChild(feColorMatrix);\n    this.matrixFilter = feColorMatrix;\n    var feMerge = this.createMergeNode(id, [source, id + '_tint_1', id + '_tint_2']);\n    filter.appendChild(feMerge);\n  }\n  extendPrototype([SVGComposableEffect], SVGTintFilter);\n  SVGTintFilter.prototype.renderFrame = function (forceRender) {\n    if (forceRender || this.filterManager._mdf) {\n      var colorBlack = this.filterManager.effectElements[0].p.v;\n      var colorWhite = this.filterManager.effectElements[1].p.v;\n      var opacity = this.filterManager.effectElements[2].p.v / 100;\n      this.linearFilter.setAttribute('values', linearFilterValue + ' ' + opacity + ' 0');\n      this.matrixFilter.setAttribute('values', colorWhite[0] - colorBlack[0] + ' 0 0 0 ' + colorBlack[0] + ' ' + (colorWhite[1] - colorBlack[1]) + ' 0 0 0 ' + colorBlack[1] + ' ' + (colorWhite[2] - colorBlack[2]) + ' 0 0 0 ' + colorBlack[2] + ' 0 0 0 1 0');\n    }\n  };\n\n  function SVGFillFilter(filter, filterManager, elem, id) {\n    this.filterManager = filterManager;\n    var feColorMatrix = createNS('feColorMatrix');\n    feColorMatrix.setAttribute('type', 'matrix');\n    feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\n    feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\n    feColorMatrix.setAttribute('result', id);\n    filter.appendChild(feColorMatrix);\n    this.matrixFilter = feColorMatrix;\n  }\n  SVGFillFilter.prototype.renderFrame = function (forceRender) {\n    if (forceRender || this.filterManager._mdf) {\n      var color = this.filterManager.effectElements[2].p.v;\n      var opacity = this.filterManager.effectElements[6].p.v;\n      this.matrixFilter.setAttribute('values', '0 0 0 0 ' + color[0] + ' 0 0 0 0 ' + color[1] + ' 0 0 0 0 ' + color[2] + ' 0 0 0 ' + opacity + ' 0');\n    }\n  };\n\n  function SVGStrokeEffect(fil, filterManager, elem) {\n    this.initialized = false;\n    this.filterManager = filterManager;\n    this.elem = elem;\n    this.paths = [];\n  }\n  SVGStrokeEffect.prototype.initialize = function () {\n    var elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\n    var path;\n    var groupPath;\n    var i;\n    var len;\n    if (this.filterManager.effectElements[1].p.v === 1) {\n      len = this.elem.maskManager.masksProperties.length;\n      i = 0;\n    } else {\n      i = this.filterManager.effectElements[0].p.v - 1;\n      len = i + 1;\n    }\n    groupPath = createNS('g');\n    groupPath.setAttribute('fill', 'none');\n    groupPath.setAttribute('stroke-linecap', 'round');\n    groupPath.setAttribute('stroke-dashoffset', 1);\n    for (i; i < len; i += 1) {\n      path = createNS('path');\n      groupPath.appendChild(path);\n      this.paths.push({\n        p: path,\n        m: i\n      });\n    }\n    if (this.filterManager.effectElements[10].p.v === 3) {\n      var mask = createNS('mask');\n      var id = createElementID();\n      mask.setAttribute('id', id);\n      mask.setAttribute('mask-type', 'alpha');\n      mask.appendChild(groupPath);\n      this.elem.globalData.defs.appendChild(mask);\n      var g = createNS('g');\n      g.setAttribute('mask', 'url(' + getLocationHref() + '#' + id + ')');\n      while (elemChildren[0]) {\n        g.appendChild(elemChildren[0]);\n      }\n      this.elem.layerElement.appendChild(g);\n      this.masker = mask;\n      groupPath.setAttribute('stroke', '#fff');\n    } else if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\n      if (this.filterManager.effectElements[10].p.v === 2) {\n        elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\n        while (elemChildren.length) {\n          this.elem.layerElement.removeChild(elemChildren[0]);\n        }\n      }\n      this.elem.layerElement.appendChild(groupPath);\n      this.elem.layerElement.removeAttribute('mask');\n      groupPath.setAttribute('stroke', '#fff');\n    }\n    this.initialized = true;\n    this.pathMasker = groupPath;\n  };\n  SVGStrokeEffect.prototype.renderFrame = function (forceRender) {\n    if (!this.initialized) {\n      this.initialize();\n    }\n    var i;\n    var len = this.paths.length;\n    var mask;\n    var path;\n    for (i = 0; i < len; i += 1) {\n      if (this.paths[i].m !== -1) {\n        mask = this.elem.maskManager.viewData[this.paths[i].m];\n        path = this.paths[i].p;\n        if (forceRender || this.filterManager._mdf || mask.prop._mdf) {\n          path.setAttribute('d', mask.lastPath);\n        }\n        if (forceRender || this.filterManager.effectElements[9].p._mdf || this.filterManager.effectElements[4].p._mdf || this.filterManager.effectElements[7].p._mdf || this.filterManager.effectElements[8].p._mdf || mask.prop._mdf) {\n          var dasharrayValue;\n          if (this.filterManager.effectElements[7].p.v !== 0 || this.filterManager.effectElements[8].p.v !== 100) {\n            var s = Math.min(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) * 0.01;\n            var e = Math.max(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) * 0.01;\n            var l = path.getTotalLength();\n            dasharrayValue = '0 0 0 ' + l * s + ' ';\n            var lineLength = l * (e - s);\n            var segment = 1 + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01;\n            var units = Math.floor(lineLength / segment);\n            var j;\n            for (j = 0; j < units; j += 1) {\n              dasharrayValue += '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01 + ' ';\n            }\n            dasharrayValue += '0 ' + l * 10 + ' 0 0';\n          } else {\n            dasharrayValue = '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01;\n          }\n          path.setAttribute('stroke-dasharray', dasharrayValue);\n        }\n      }\n    }\n    if (forceRender || this.filterManager.effectElements[4].p._mdf) {\n      this.pathMasker.setAttribute('stroke-width', this.filterManager.effectElements[4].p.v * 2);\n    }\n    if (forceRender || this.filterManager.effectElements[6].p._mdf) {\n      this.pathMasker.setAttribute('opacity', this.filterManager.effectElements[6].p.v);\n    }\n    if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\n      if (forceRender || this.filterManager.effectElements[3].p._mdf) {\n        var color = this.filterManager.effectElements[3].p.v;\n        this.pathMasker.setAttribute('stroke', 'rgb(' + bmFloor(color[0] * 255) + ',' + bmFloor(color[1] * 255) + ',' + bmFloor(color[2] * 255) + ')');\n      }\n    }\n  };\n\n  function SVGTritoneFilter(filter, filterManager, elem, id) {\n    this.filterManager = filterManager;\n    var feColorMatrix = createNS('feColorMatrix');\n    feColorMatrix.setAttribute('type', 'matrix');\n    feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\n    feColorMatrix.setAttribute('values', '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\n    filter.appendChild(feColorMatrix);\n    var feComponentTransfer = createNS('feComponentTransfer');\n    feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\n    feComponentTransfer.setAttribute('result', id);\n    this.matrixFilter = feComponentTransfer;\n    var feFuncR = createNS('feFuncR');\n    feFuncR.setAttribute('type', 'table');\n    feComponentTransfer.appendChild(feFuncR);\n    this.feFuncR = feFuncR;\n    var feFuncG = createNS('feFuncG');\n    feFuncG.setAttribute('type', 'table');\n    feComponentTransfer.appendChild(feFuncG);\n    this.feFuncG = feFuncG;\n    var feFuncB = createNS('feFuncB');\n    feFuncB.setAttribute('type', 'table');\n    feComponentTransfer.appendChild(feFuncB);\n    this.feFuncB = feFuncB;\n    filter.appendChild(feComponentTransfer);\n  }\n  SVGTritoneFilter.prototype.renderFrame = function (forceRender) {\n    if (forceRender || this.filterManager._mdf) {\n      var color1 = this.filterManager.effectElements[0].p.v;\n      var color2 = this.filterManager.effectElements[1].p.v;\n      var color3 = this.filterManager.effectElements[2].p.v;\n      var tableR = color3[0] + ' ' + color2[0] + ' ' + color1[0];\n      var tableG = color3[1] + ' ' + color2[1] + ' ' + color1[1];\n      var tableB = color3[2] + ' ' + color2[2] + ' ' + color1[2];\n      this.feFuncR.setAttribute('tableValues', tableR);\n      this.feFuncG.setAttribute('tableValues', tableG);\n      this.feFuncB.setAttribute('tableValues', tableB);\n    }\n  };\n\n  function SVGProLevelsFilter(filter, filterManager, elem, id) {\n    this.filterManager = filterManager;\n    var effectElements = this.filterManager.effectElements;\n    var feComponentTransfer = createNS('feComponentTransfer');\n\n    // Red\n    if (effectElements[10].p.k || effectElements[10].p.v !== 0 || effectElements[11].p.k || effectElements[11].p.v !== 1 || effectElements[12].p.k || effectElements[12].p.v !== 1 || effectElements[13].p.k || effectElements[13].p.v !== 0 || effectElements[14].p.k || effectElements[14].p.v !== 1) {\n      this.feFuncR = this.createFeFunc('feFuncR', feComponentTransfer);\n    }\n    // Green\n    if (effectElements[17].p.k || effectElements[17].p.v !== 0 || effectElements[18].p.k || effectElements[18].p.v !== 1 || effectElements[19].p.k || effectElements[19].p.v !== 1 || effectElements[20].p.k || effectElements[20].p.v !== 0 || effectElements[21].p.k || effectElements[21].p.v !== 1) {\n      this.feFuncG = this.createFeFunc('feFuncG', feComponentTransfer);\n    }\n    // Blue\n    if (effectElements[24].p.k || effectElements[24].p.v !== 0 || effectElements[25].p.k || effectElements[25].p.v !== 1 || effectElements[26].p.k || effectElements[26].p.v !== 1 || effectElements[27].p.k || effectElements[27].p.v !== 0 || effectElements[28].p.k || effectElements[28].p.v !== 1) {\n      this.feFuncB = this.createFeFunc('feFuncB', feComponentTransfer);\n    }\n    // Alpha\n    if (effectElements[31].p.k || effectElements[31].p.v !== 0 || effectElements[32].p.k || effectElements[32].p.v !== 1 || effectElements[33].p.k || effectElements[33].p.v !== 1 || effectElements[34].p.k || effectElements[34].p.v !== 0 || effectElements[35].p.k || effectElements[35].p.v !== 1) {\n      this.feFuncA = this.createFeFunc('feFuncA', feComponentTransfer);\n    }\n    // RGB\n    if (this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA) {\n      feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\n      filter.appendChild(feComponentTransfer);\n    }\n    if (effectElements[3].p.k || effectElements[3].p.v !== 0 || effectElements[4].p.k || effectElements[4].p.v !== 1 || effectElements[5].p.k || effectElements[5].p.v !== 1 || effectElements[6].p.k || effectElements[6].p.v !== 0 || effectElements[7].p.k || effectElements[7].p.v !== 1) {\n      feComponentTransfer = createNS('feComponentTransfer');\n      feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\n      feComponentTransfer.setAttribute('result', id);\n      filter.appendChild(feComponentTransfer);\n      this.feFuncRComposed = this.createFeFunc('feFuncR', feComponentTransfer);\n      this.feFuncGComposed = this.createFeFunc('feFuncG', feComponentTransfer);\n      this.feFuncBComposed = this.createFeFunc('feFuncB', feComponentTransfer);\n    }\n  }\n  SVGProLevelsFilter.prototype.createFeFunc = function (type, feComponentTransfer) {\n    var feFunc = createNS(type);\n    feFunc.setAttribute('type', 'table');\n    feComponentTransfer.appendChild(feFunc);\n    return feFunc;\n  };\n  SVGProLevelsFilter.prototype.getTableValue = function (inputBlack, inputWhite, gamma, outputBlack, outputWhite) {\n    var cnt = 0;\n    var segments = 256;\n    var perc;\n    var min = Math.min(inputBlack, inputWhite);\n    var max = Math.max(inputBlack, inputWhite);\n    var table = Array.call(null, {\n      length: segments\n    });\n    var colorValue;\n    var pos = 0;\n    var outputDelta = outputWhite - outputBlack;\n    var inputDelta = inputWhite - inputBlack;\n    while (cnt <= 256) {\n      perc = cnt / 256;\n      if (perc <= min) {\n        colorValue = inputDelta < 0 ? outputWhite : outputBlack;\n      } else if (perc >= max) {\n        colorValue = inputDelta < 0 ? outputBlack : outputWhite;\n      } else {\n        colorValue = outputBlack + outputDelta * Math.pow((perc - inputBlack) / inputDelta, 1 / gamma);\n      }\n      table[pos] = colorValue;\n      pos += 1;\n      cnt += 256 / (segments - 1);\n    }\n    return table.join(' ');\n  };\n  SVGProLevelsFilter.prototype.renderFrame = function (forceRender) {\n    if (forceRender || this.filterManager._mdf) {\n      var val;\n      var effectElements = this.filterManager.effectElements;\n      if (this.feFuncRComposed && (forceRender || effectElements[3].p._mdf || effectElements[4].p._mdf || effectElements[5].p._mdf || effectElements[6].p._mdf || effectElements[7].p._mdf)) {\n        val = this.getTableValue(effectElements[3].p.v, effectElements[4].p.v, effectElements[5].p.v, effectElements[6].p.v, effectElements[7].p.v);\n        this.feFuncRComposed.setAttribute('tableValues', val);\n        this.feFuncGComposed.setAttribute('tableValues', val);\n        this.feFuncBComposed.setAttribute('tableValues', val);\n      }\n      if (this.feFuncR && (forceRender || effectElements[10].p._mdf || effectElements[11].p._mdf || effectElements[12].p._mdf || effectElements[13].p._mdf || effectElements[14].p._mdf)) {\n        val = this.getTableValue(effectElements[10].p.v, effectElements[11].p.v, effectElements[12].p.v, effectElements[13].p.v, effectElements[14].p.v);\n        this.feFuncR.setAttribute('tableValues', val);\n      }\n      if (this.feFuncG && (forceRender || effectElements[17].p._mdf || effectElements[18].p._mdf || effectElements[19].p._mdf || effectElements[20].p._mdf || effectElements[21].p._mdf)) {\n        val = this.getTableValue(effectElements[17].p.v, effectElements[18].p.v, effectElements[19].p.v, effectElements[20].p.v, effectElements[21].p.v);\n        this.feFuncG.setAttribute('tableValues', val);\n      }\n      if (this.feFuncB && (forceRender || effectElements[24].p._mdf || effectElements[25].p._mdf || effectElements[26].p._mdf || effectElements[27].p._mdf || effectElements[28].p._mdf)) {\n        val = this.getTableValue(effectElements[24].p.v, effectElements[25].p.v, effectElements[26].p.v, effectElements[27].p.v, effectElements[28].p.v);\n        this.feFuncB.setAttribute('tableValues', val);\n      }\n      if (this.feFuncA && (forceRender || effectElements[31].p._mdf || effectElements[32].p._mdf || effectElements[33].p._mdf || effectElements[34].p._mdf || effectElements[35].p._mdf)) {\n        val = this.getTableValue(effectElements[31].p.v, effectElements[32].p.v, effectElements[33].p.v, effectElements[34].p.v, effectElements[35].p.v);\n        this.feFuncA.setAttribute('tableValues', val);\n      }\n    }\n  };\n\n  function SVGDropShadowEffect(filter, filterManager, elem, id, source) {\n    var globalFilterSize = filterManager.container.globalData.renderConfig.filterSize;\n    var filterSize = filterManager.data.fs || globalFilterSize;\n    filter.setAttribute('x', filterSize.x || globalFilterSize.x);\n    filter.setAttribute('y', filterSize.y || globalFilterSize.y);\n    filter.setAttribute('width', filterSize.width || globalFilterSize.width);\n    filter.setAttribute('height', filterSize.height || globalFilterSize.height);\n    this.filterManager = filterManager;\n    var feGaussianBlur = createNS('feGaussianBlur');\n    feGaussianBlur.setAttribute('in', 'SourceAlpha');\n    feGaussianBlur.setAttribute('result', id + '_drop_shadow_1');\n    feGaussianBlur.setAttribute('stdDeviation', '0');\n    this.feGaussianBlur = feGaussianBlur;\n    filter.appendChild(feGaussianBlur);\n    var feOffset = createNS('feOffset');\n    feOffset.setAttribute('dx', '25');\n    feOffset.setAttribute('dy', '0');\n    feOffset.setAttribute('in', id + '_drop_shadow_1');\n    feOffset.setAttribute('result', id + '_drop_shadow_2');\n    this.feOffset = feOffset;\n    filter.appendChild(feOffset);\n    var feFlood = createNS('feFlood');\n    feFlood.setAttribute('flood-color', '#00ff00');\n    feFlood.setAttribute('flood-opacity', '1');\n    feFlood.setAttribute('result', id + '_drop_shadow_3');\n    this.feFlood = feFlood;\n    filter.appendChild(feFlood);\n    var feComposite = createNS('feComposite');\n    feComposite.setAttribute('in', id + '_drop_shadow_3');\n    feComposite.setAttribute('in2', id + '_drop_shadow_2');\n    feComposite.setAttribute('operator', 'in');\n    feComposite.setAttribute('result', id + '_drop_shadow_4');\n    filter.appendChild(feComposite);\n    var feMerge = this.createMergeNode(id, [id + '_drop_shadow_4', source]);\n    filter.appendChild(feMerge);\n    //\n  }\n  extendPrototype([SVGComposableEffect], SVGDropShadowEffect);\n  SVGDropShadowEffect.prototype.renderFrame = function (forceRender) {\n    if (forceRender || this.filterManager._mdf) {\n      if (forceRender || this.filterManager.effectElements[4].p._mdf) {\n        this.feGaussianBlur.setAttribute('stdDeviation', this.filterManager.effectElements[4].p.v / 4);\n      }\n      if (forceRender || this.filterManager.effectElements[0].p._mdf) {\n        var col = this.filterManager.effectElements[0].p.v;\n        this.feFlood.setAttribute('flood-color', rgbToHex(Math.round(col[0] * 255), Math.round(col[1] * 255), Math.round(col[2] * 255)));\n      }\n      if (forceRender || this.filterManager.effectElements[1].p._mdf) {\n        this.feFlood.setAttribute('flood-opacity', this.filterManager.effectElements[1].p.v / 255);\n      }\n      if (forceRender || this.filterManager.effectElements[2].p._mdf || this.filterManager.effectElements[3].p._mdf) {\n        var distance = this.filterManager.effectElements[3].p.v;\n        var angle = (this.filterManager.effectElements[2].p.v - 90) * degToRads;\n        var x = distance * Math.cos(angle);\n        var y = distance * Math.sin(angle);\n        this.feOffset.setAttribute('dx', x);\n        this.feOffset.setAttribute('dy', y);\n      }\n    }\n  };\n\n  var _svgMatteSymbols = [];\n  function SVGMatte3Effect(filterElem, filterManager, elem) {\n    this.initialized = false;\n    this.filterManager = filterManager;\n    this.filterElem = filterElem;\n    this.elem = elem;\n    elem.matteElement = createNS('g');\n    elem.matteElement.appendChild(elem.layerElement);\n    elem.matteElement.appendChild(elem.transformedElement);\n    elem.baseElement = elem.matteElement;\n  }\n  SVGMatte3Effect.prototype.findSymbol = function (mask) {\n    var i = 0;\n    var len = _svgMatteSymbols.length;\n    while (i < len) {\n      if (_svgMatteSymbols[i] === mask) {\n        return _svgMatteSymbols[i];\n      }\n      i += 1;\n    }\n    return null;\n  };\n  SVGMatte3Effect.prototype.replaceInParent = function (mask, symbolId) {\n    var parentNode = mask.layerElement.parentNode;\n    if (!parentNode) {\n      return;\n    }\n    var children = parentNode.children;\n    var i = 0;\n    var len = children.length;\n    while (i < len) {\n      if (children[i] === mask.layerElement) {\n        break;\n      }\n      i += 1;\n    }\n    var nextChild;\n    if (i <= len - 2) {\n      nextChild = children[i + 1];\n    }\n    var useElem = createNS('use');\n    useElem.setAttribute('href', '#' + symbolId);\n    if (nextChild) {\n      parentNode.insertBefore(useElem, nextChild);\n    } else {\n      parentNode.appendChild(useElem);\n    }\n  };\n  SVGMatte3Effect.prototype.setElementAsMask = function (elem, mask) {\n    if (!this.findSymbol(mask)) {\n      var symbolId = createElementID();\n      var masker = createNS('mask');\n      masker.setAttribute('id', mask.layerId);\n      masker.setAttribute('mask-type', 'alpha');\n      _svgMatteSymbols.push(mask);\n      var defs = elem.globalData.defs;\n      defs.appendChild(masker);\n      var symbol = createNS('symbol');\n      symbol.setAttribute('id', symbolId);\n      this.replaceInParent(mask, symbolId);\n      symbol.appendChild(mask.layerElement);\n      defs.appendChild(symbol);\n      var useElem = createNS('use');\n      useElem.setAttribute('href', '#' + symbolId);\n      masker.appendChild(useElem);\n      mask.data.hd = false;\n      mask.show();\n    }\n    elem.setMatte(mask.layerId);\n  };\n  SVGMatte3Effect.prototype.initialize = function () {\n    var ind = this.filterManager.effectElements[0].p.v;\n    var elements = this.elem.comp.elements;\n    var i = 0;\n    var len = elements.length;\n    while (i < len) {\n      if (elements[i] && elements[i].data.ind === ind) {\n        this.setElementAsMask(this.elem, elements[i]);\n      }\n      i += 1;\n    }\n    this.initialized = true;\n  };\n  SVGMatte3Effect.prototype.renderFrame = function () {\n    if (!this.initialized) {\n      this.initialize();\n    }\n  };\n\n  function SVGGaussianBlurEffect(filter, filterManager, elem, id) {\n    // Outset the filter region by 100% on all sides to accommodate blur expansion.\n    filter.setAttribute('x', '-100%');\n    filter.setAttribute('y', '-100%');\n    filter.setAttribute('width', '300%');\n    filter.setAttribute('height', '300%');\n    this.filterManager = filterManager;\n    var feGaussianBlur = createNS('feGaussianBlur');\n    feGaussianBlur.setAttribute('result', id);\n    filter.appendChild(feGaussianBlur);\n    this.feGaussianBlur = feGaussianBlur;\n  }\n  SVGGaussianBlurEffect.prototype.renderFrame = function (forceRender) {\n    if (forceRender || this.filterManager._mdf) {\n      // Empirical value, matching AE's blur appearance.\n      var kBlurrinessToSigma = 0.3;\n      var sigma = this.filterManager.effectElements[0].p.v * kBlurrinessToSigma;\n\n      // Dimensions mapping:\n      //\n      //   1 -> horizontal & vertical\n      //   2 -> horizontal only\n      //   3 -> vertical only\n      //\n      var dimensions = this.filterManager.effectElements[1].p.v;\n      var sigmaX = dimensions == 3 ? 0 : sigma; // eslint-disable-line eqeqeq\n      var sigmaY = dimensions == 2 ? 0 : sigma; // eslint-disable-line eqeqeq\n\n      this.feGaussianBlur.setAttribute('stdDeviation', sigmaX + ' ' + sigmaY);\n\n      // Repeat edges mapping:\n      //\n      //   0 -> off -> duplicate\n      //   1 -> on  -> wrap\n      var edgeMode = this.filterManager.effectElements[2].p.v == 1 ? 'wrap' : 'duplicate'; // eslint-disable-line eqeqeq\n      this.feGaussianBlur.setAttribute('edgeMode', edgeMode);\n    }\n  };\n\n  function TransformEffect() {}\n  TransformEffect.prototype.init = function (effectsManager) {\n    this.effectsManager = effectsManager;\n    this.type = effectTypes.TRANSFORM_EFFECT;\n    this.matrix = new Matrix();\n    this.opacity = -1;\n    this._mdf = false;\n    this._opMdf = false;\n  };\n  TransformEffect.prototype.renderFrame = function (forceFrame) {\n    this._opMdf = false;\n    this._mdf = false;\n    if (forceFrame || this.effectsManager._mdf) {\n      var effectElements = this.effectsManager.effectElements;\n      var anchor = effectElements[0].p.v;\n      var position = effectElements[1].p.v;\n      var isUniformScale = effectElements[2].p.v === 1;\n      var scaleHeight = effectElements[3].p.v;\n      var scaleWidth = isUniformScale ? scaleHeight : effectElements[4].p.v;\n      var skew = effectElements[5].p.v;\n      var skewAxis = effectElements[6].p.v;\n      var rotation = effectElements[7].p.v;\n      this.matrix.reset();\n      this.matrix.translate(-anchor[0], -anchor[1], anchor[2]);\n      this.matrix.scale(scaleWidth * 0.01, scaleHeight * 0.01, 1);\n      this.matrix.rotate(-rotation * degToRads);\n      this.matrix.skewFromAxis(-skew * degToRads, (skewAxis + 90) * degToRads);\n      this.matrix.translate(position[0], position[1], 0);\n      this._mdf = true;\n      if (this.opacity !== effectElements[8].p.v) {\n        this.opacity = effectElements[8].p.v;\n        this._opMdf = true;\n      }\n    }\n  };\n\n  function SVGTransformEffect(_, filterManager) {\n    this.init(filterManager);\n  }\n  extendPrototype([TransformEffect], SVGTransformEffect);\n\n  function CVTransformEffect(effectsManager) {\n    this.init(effectsManager);\n  }\n  extendPrototype([TransformEffect], CVTransformEffect);\n\n  // Registering renderers\n  registerRenderer('canvas', CanvasRenderer);\n  registerRenderer('html', HybridRenderer);\n  registerRenderer('svg', SVGRenderer);\n\n  // Registering shape modifiers\n  ShapeModifiers.registerModifier('tm', TrimModifier);\n  ShapeModifiers.registerModifier('pb', PuckerAndBloatModifier);\n  ShapeModifiers.registerModifier('rp', RepeaterModifier);\n  ShapeModifiers.registerModifier('rd', RoundCornersModifier);\n  ShapeModifiers.registerModifier('zz', ZigZagModifier);\n  ShapeModifiers.registerModifier('op', OffsetPathModifier);\n\n  // Registering expression plugin\n  setExpressionsPlugin(Expressions);\n  setExpressionInterfaces(getInterface);\n  initialize$1();\n  initialize();\n\n  // Registering svg effects\n  registerEffect$1(20, SVGTintFilter, true);\n  registerEffect$1(21, SVGFillFilter, true);\n  registerEffect$1(22, SVGStrokeEffect, false);\n  registerEffect$1(23, SVGTritoneFilter, true);\n  registerEffect$1(24, SVGProLevelsFilter, true);\n  registerEffect$1(25, SVGDropShadowEffect, true);\n  registerEffect$1(28, SVGMatte3Effect, false);\n  registerEffect$1(29, SVGGaussianBlurEffect, true);\n  registerEffect$1(35, SVGTransformEffect, false);\n  registerEffect(35, CVTransformEffect);\n\n  return lottie;\n\n}));\n","module.exports = __WEBPACK_EXTERNAL_MODULE__478__;","module.exports = __WEBPACK_EXTERNAL_MODULE__283__;","module.exports = __WEBPACK_EXTERNAL_MODULE__639__;","module.exports = __WEBPACK_EXTERNAL_MODULE__346__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var inProgress = {};\nvar dataWebpackPrefix = \"Onairos:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t981: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = this[\"webpackChunkOnairos\"] = this[\"webpackChunkOnairos\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","'use client'\nimport React, { useState, useRef, useEffect, createContext, useMemo, useContext, useCallback } from 'react';\n\nfunction useLoadGsiScript(options = {}) {\r\n    const { nonce, onScriptLoadSuccess, onScriptLoadError } = options;\r\n    const [scriptLoadedSuccessfully, setScriptLoadedSuccessfully] = useState(false);\r\n    const onScriptLoadSuccessRef = useRef(onScriptLoadSuccess);\r\n    onScriptLoadSuccessRef.current = onScriptLoadSuccess;\r\n    const onScriptLoadErrorRef = useRef(onScriptLoadError);\r\n    onScriptLoadErrorRef.current = onScriptLoadError;\r\n    useEffect(() => {\r\n        const scriptTag = document.createElement('script');\r\n        scriptTag.src = 'https://accounts.google.com/gsi/client';\r\n        scriptTag.async = true;\r\n        scriptTag.defer = true;\r\n        scriptTag.nonce = nonce;\r\n        scriptTag.onload = () => {\r\n            var _a;\r\n            setScriptLoadedSuccessfully(true);\r\n            (_a = onScriptLoadSuccessRef.current) === null || _a === void 0 ? void 0 : _a.call(onScriptLoadSuccessRef);\r\n        };\r\n        scriptTag.onerror = () => {\r\n            var _a;\r\n            setScriptLoadedSuccessfully(false);\r\n            (_a = onScriptLoadErrorRef.current) === null || _a === void 0 ? void 0 : _a.call(onScriptLoadErrorRef);\r\n        };\r\n        document.body.appendChild(scriptTag);\r\n        return () => {\r\n            document.body.removeChild(scriptTag);\r\n        };\r\n    }, [nonce]);\r\n    return scriptLoadedSuccessfully;\r\n}\n\nconst GoogleOAuthContext = createContext(null);\r\nfunction GoogleOAuthProvider({ clientId, nonce, onScriptLoadSuccess, onScriptLoadError, children, }) {\r\n    const scriptLoadedSuccessfully = useLoadGsiScript({\r\n        nonce,\r\n        onScriptLoadSuccess,\r\n        onScriptLoadError,\r\n    });\r\n    const contextValue = useMemo(() => ({\r\n        clientId,\r\n        scriptLoadedSuccessfully,\r\n    }), [clientId, scriptLoadedSuccessfully]);\r\n    return (React.createElement(GoogleOAuthContext.Provider, { value: contextValue }, children));\r\n}\r\nfunction useGoogleOAuth() {\r\n    const context = useContext(GoogleOAuthContext);\r\n    if (!context) {\r\n        throw new Error('Google OAuth components must be used within GoogleOAuthProvider');\r\n    }\r\n    return context;\r\n}\n\nfunction extractClientId(credentialResponse) {\r\n    var _a;\r\n    const clientId = (_a = credentialResponse === null || credentialResponse === void 0 ? void 0 : credentialResponse.clientId) !== null && _a !== void 0 ? _a : credentialResponse === null || credentialResponse === void 0 ? void 0 : credentialResponse.client_id;\r\n    return clientId;\r\n}\n\nconst containerHeightMap = { large: 40, medium: 32, small: 20 };\r\nfunction GoogleLogin({ onSuccess, onError, useOneTap, promptMomentNotification, type = 'standard', theme = 'outline', size = 'large', text, shape, logo_alignment, width, locale, click_listener, containerProps, ...props }) {\r\n    const btnContainerRef = useRef(null);\r\n    const { clientId, scriptLoadedSuccessfully } = useGoogleOAuth();\r\n    const onSuccessRef = useRef(onSuccess);\r\n    onSuccessRef.current = onSuccess;\r\n    const onErrorRef = useRef(onError);\r\n    onErrorRef.current = onError;\r\n    const promptMomentNotificationRef = useRef(promptMomentNotification);\r\n    promptMomentNotificationRef.current = promptMomentNotification;\r\n    useEffect(() => {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\r\n        if (!scriptLoadedSuccessfully)\r\n            return;\r\n        (_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.id) === null || _c === void 0 ? void 0 : _c.initialize({\r\n            client_id: clientId,\r\n            callback: (credentialResponse) => {\r\n                var _a;\r\n                if (!(credentialResponse === null || credentialResponse === void 0 ? void 0 : credentialResponse.credential)) {\r\n                    return (_a = onErrorRef.current) === null || _a === void 0 ? void 0 : _a.call(onErrorRef);\r\n                }\r\n                const { credential, select_by } = credentialResponse;\r\n                onSuccessRef.current({\r\n                    credential,\r\n                    clientId: extractClientId(credentialResponse),\r\n                    select_by,\r\n                });\r\n            },\r\n            ...props,\r\n        });\r\n        (_f = (_e = (_d = window === null || window === void 0 ? void 0 : window.google) === null || _d === void 0 ? void 0 : _d.accounts) === null || _e === void 0 ? void 0 : _e.id) === null || _f === void 0 ? void 0 : _f.renderButton(btnContainerRef.current, {\r\n            type,\r\n            theme,\r\n            size,\r\n            text,\r\n            shape,\r\n            logo_alignment,\r\n            width,\r\n            locale,\r\n            click_listener,\r\n        });\r\n        if (useOneTap)\r\n            (_j = (_h = (_g = window === null || window === void 0 ? void 0 : window.google) === null || _g === void 0 ? void 0 : _g.accounts) === null || _h === void 0 ? void 0 : _h.id) === null || _j === void 0 ? void 0 : _j.prompt(promptMomentNotificationRef.current);\r\n        return () => {\r\n            var _a, _b, _c;\r\n            if (useOneTap)\r\n                (_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.id) === null || _c === void 0 ? void 0 : _c.cancel();\r\n        };\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [\r\n        clientId,\r\n        scriptLoadedSuccessfully,\r\n        useOneTap,\r\n        type,\r\n        theme,\r\n        size,\r\n        text,\r\n        shape,\r\n        logo_alignment,\r\n        width,\r\n        locale,\r\n    ]);\r\n    return (React.createElement(\"div\", { ...containerProps, ref: btnContainerRef, style: { height: containerHeightMap[size], ...containerProps === null || containerProps === void 0 ? void 0 : containerProps.style } }));\r\n}\n\nfunction googleLogout() {\r\n    var _a, _b, _c;\r\n    (_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.id) === null || _c === void 0 ? void 0 : _c.disableAutoSelect();\r\n}\n\n/* eslint-disable import/export */\r\nfunction useGoogleLogin({ flow = 'implicit', scope = '', onSuccess, onError, onNonOAuthError, overrideScope, state, ...props }) {\r\n    const { clientId, scriptLoadedSuccessfully } = useGoogleOAuth();\r\n    const clientRef = useRef();\r\n    const onSuccessRef = useRef(onSuccess);\r\n    onSuccessRef.current = onSuccess;\r\n    const onErrorRef = useRef(onError);\r\n    onErrorRef.current = onError;\r\n    const onNonOAuthErrorRef = useRef(onNonOAuthError);\r\n    onNonOAuthErrorRef.current = onNonOAuthError;\r\n    useEffect(() => {\r\n        var _a, _b;\r\n        if (!scriptLoadedSuccessfully)\r\n            return;\r\n        const clientMethod = flow === 'implicit' ? 'initTokenClient' : 'initCodeClient';\r\n        const client = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.oauth2[clientMethod]({\r\n            client_id: clientId,\r\n            scope: overrideScope ? scope : `openid profile email ${scope}`,\r\n            callback: (response) => {\r\n                var _a, _b;\r\n                if (response.error)\r\n                    return (_a = onErrorRef.current) === null || _a === void 0 ? void 0 : _a.call(onErrorRef, response);\r\n                (_b = onSuccessRef.current) === null || _b === void 0 ? void 0 : _b.call(onSuccessRef, response);\r\n            },\r\n            error_callback: (nonOAuthError) => {\r\n                var _a;\r\n                (_a = onNonOAuthErrorRef.current) === null || _a === void 0 ? void 0 : _a.call(onNonOAuthErrorRef, nonOAuthError);\r\n            },\r\n            state,\r\n            ...props,\r\n        });\r\n        clientRef.current = client;\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [clientId, scriptLoadedSuccessfully, flow, scope, state]);\r\n    const loginImplicitFlow = useCallback((overrideConfig) => { var _a; return (_a = clientRef.current) === null || _a === void 0 ? void 0 : _a.requestAccessToken(overrideConfig); }, []);\r\n    const loginAuthCodeFlow = useCallback(() => { var _a; return (_a = clientRef.current) === null || _a === void 0 ? void 0 : _a.requestCode(); }, []);\r\n    return flow === 'implicit' ? loginImplicitFlow : loginAuthCodeFlow;\r\n}\n\nfunction useGoogleOneTapLogin({ onSuccess, onError, promptMomentNotification, cancel_on_tap_outside, prompt_parent_id, state_cookie_domain, hosted_domain, use_fedcm_for_prompt = false, use_fedcm_for_button = false, disabled, auto_select, }) {\r\n    const { clientId, scriptLoadedSuccessfully } = useGoogleOAuth();\r\n    const onSuccessRef = useRef(onSuccess);\r\n    onSuccessRef.current = onSuccess;\r\n    const onErrorRef = useRef(onError);\r\n    onErrorRef.current = onError;\r\n    const promptMomentNotificationRef = useRef(promptMomentNotification);\r\n    promptMomentNotificationRef.current = promptMomentNotification;\r\n    useEffect(() => {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\r\n        if (!scriptLoadedSuccessfully)\r\n            return;\r\n        if (disabled) {\r\n            (_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.id) === null || _c === void 0 ? void 0 : _c.cancel();\r\n            return;\r\n        }\r\n        (_f = (_e = (_d = window === null || window === void 0 ? void 0 : window.google) === null || _d === void 0 ? void 0 : _d.accounts) === null || _e === void 0 ? void 0 : _e.id) === null || _f === void 0 ? void 0 : _f.initialize({\r\n            client_id: clientId,\r\n            callback: (credentialResponse) => {\r\n                var _a;\r\n                if (!(credentialResponse === null || credentialResponse === void 0 ? void 0 : credentialResponse.credential)) {\r\n                    return (_a = onErrorRef.current) === null || _a === void 0 ? void 0 : _a.call(onErrorRef);\r\n                }\r\n                const { credential, select_by } = credentialResponse;\r\n                onSuccessRef.current({\r\n                    credential,\r\n                    clientId: extractClientId(credentialResponse),\r\n                    select_by,\r\n                });\r\n            },\r\n            hosted_domain,\r\n            cancel_on_tap_outside,\r\n            prompt_parent_id,\r\n            state_cookie_domain,\r\n            use_fedcm_for_prompt,\r\n            use_fedcm_for_button,\r\n            auto_select,\r\n        });\r\n        (_j = (_h = (_g = window === null || window === void 0 ? void 0 : window.google) === null || _g === void 0 ? void 0 : _g.accounts) === null || _h === void 0 ? void 0 : _h.id) === null || _j === void 0 ? void 0 : _j.prompt(promptMomentNotificationRef.current);\r\n        return () => {\r\n            var _a, _b, _c;\r\n            (_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.id) === null || _c === void 0 ? void 0 : _c.cancel();\r\n        };\r\n    }, [\r\n        clientId,\r\n        scriptLoadedSuccessfully,\r\n        cancel_on_tap_outside,\r\n        prompt_parent_id,\r\n        state_cookie_domain,\r\n        hosted_domain,\r\n        use_fedcm_for_prompt,\r\n        use_fedcm_for_button,\r\n        disabled,\r\n        auto_select,\r\n    ]);\r\n}\n\n/**\r\n * Checks if the user granted all the specified scope or scopes\r\n * @returns True if all the scopes are granted\r\n */\r\nfunction hasGrantedAllScopesGoogle(tokenResponse, firstScope, ...restScopes) {\r\n    var _a, _b, _c;\r\n    if (!(window === null || window === void 0 ? void 0 : window.google))\r\n        return false;\r\n    return (((_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.oauth2) === null || _c === void 0 ? void 0 : _c.hasGrantedAllScopes(tokenResponse, firstScope, ...restScopes)) || false);\r\n}\n\n/**\r\n * Checks if the user granted any of the specified scope or scopes.\r\n * @returns True if any of the scopes are granted\r\n */\r\nfunction hasGrantedAnyScopeGoogle(tokenResponse, firstScope, ...restScopes) {\r\n    var _a, _b, _c;\r\n    if (!(window === null || window === void 0 ? void 0 : window.google))\r\n        return false;\r\n    return (((_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.oauth2) === null || _c === void 0 ? void 0 : _c.hasGrantedAnyScope(tokenResponse, firstScope, ...restScopes)) || false);\r\n}\n\nexport { GoogleLogin, GoogleOAuthProvider, googleLogout, hasGrantedAllScopesGoogle, hasGrantedAnyScopeGoogle, useGoogleLogin, useGoogleOAuth, useGoogleOneTapLogin };\n","import { registerPlugin } from '@capacitor/core';\nconst App = registerPlugin('App', {\n    web: () => import('./web').then((m) => new m.AppWeb()),\n});\nexport * from './definitions';\nexport { App };\n//# sourceMappingURL=index.js.map","import React, { useEffect } from 'react';\r\nimport { COLORS } from '../theme/colors.js';\r\n\r\nexport default function WelcomeScreen({ onContinue, onClose }) {\r\n  // Load Sirv script for responsive images\r\n  useEffect(() => {\r\n    const script = document.createElement('script');\r\n    script.src = 'https://scripts.sirv.com/sirvjs/v3/sirv.js';\r\n    script.async = true;\r\n    document.head.appendChild(script);\r\n    \r\n    return () => {\r\n      const existingScript = document.querySelector('script[src=\"https://scripts.sirv.com/sirvjs/v3/sirv.js\"]');\r\n      if (existingScript) {\r\n        document.head.removeChild(existingScript);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"w-full flex flex-col\" style={{ height: '100%' }}>\r\n      {/* Content - Flexible center area */}\r\n      <div className=\"px-6 pt-16 text-center flex-1 flex flex-col\">\r\n        {/* Logo */}\r\n        <div className=\"mb-8 flex justify-center\">\r\n          <div className=\"w-20 h-20 flex items-center justify-center\">\r\n            <img \r\n              className=\"Sirv w-full h-full object-contain\" \r\n              data-src=\"https://anushkasirv.sirv.com/OnairosBlack.png\" \r\n              alt=\"Onairos Logo\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Welcome Text */}\r\n        <p className=\"text-gray-500 text-sm mb-2\">Welcome to</p>\r\n\r\n        {/* Main Title */}\r\n        <h1 className=\"text-4xl font-bold text-gray-900 mb-6 text-balance\">Onairos</h1>\r\n\r\n        {/* Description */}\r\n        <p className=\"text-gray-600 text-base leading-relaxed mb-12 text-pretty px-2\">\r\n          OnairOS personalizes your digital experience on every app so you can just enjoy being you!\r\n        </p>\r\n      </div>\r\n\r\n      {/* Get Started Button - Fixed at bottom */}\r\n      <div className=\"px-6 pb-8 flex-shrink-0\">\r\n        <button\r\n          className=\"w-full bg-gray-900 hover:bg-gray-800 text-white rounded-full py-4 text-base font-medium flex items-center justify-center gap-2 transition-colors\"\r\n          onClick={onContinue}\r\n        >\r\n          Get Started\r\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\n * @license lucide-react v0.503.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\nconst hasA11yProp = (props) => {\n  for (const prop in props) {\n    if (prop.startsWith(\"aria-\") || prop === \"role\" || prop === \"title\") {\n      return true;\n    }\n  }\n};\n\nexport { hasA11yProp, mergeClasses, toCamelCase, toKebabCase, toPascalCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-react v0.503.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.503.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\nimport { mergeClasses, hasA11yProp } from './shared/src/utils.js';\n\nconst Icon = forwardRef(\n  ({\n    color = \"currentColor\",\n    size = 24,\n    strokeWidth = 2,\n    absoluteStrokeWidth,\n    className = \"\",\n    children,\n    iconNode,\n    ...rest\n  }, ref) => {\n    return createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: mergeClasses(\"lucide\", className),\n        ...!children && !hasA11yProp(rest) && { \"aria-hidden\": \"true\" },\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...Array.isArray(children) ? children : [children]\n      ]\n    );\n  }\n);\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-react v0.503.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]];\nconst Check = createLucideIcon(\"check\", __iconNode);\n\nexport { __iconNode, Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-react v0.503.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport { mergeClasses, toKebabCase, toPascalCase } from './shared/src/utils.js';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ className, ...props }, ref) => createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(\n        `lucide-${toKebabCase(toPascalCase(iconName))}`,\n        `lucide-${iconName}`,\n        className\n      ),\n      ...props\n    })\n  );\n  Component.displayName = toPascalCase(iconName);\n  return Component;\n};\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","// Theme colors for Onairos SDK - derived from mobile design\r\nexport const COLORS = {\r\n  // Button gradient colors\r\n  btnGradStart: '#1A1A1A',\r\n  btnGradEnd: '#000000',\r\n  \r\n  // Button text and icon colors\r\n  btnLabel: '#FFFFFF',\r\n  btnBorder: 'rgba(0, 0, 0, 0.2)',\r\n  \r\n  // Icon circle gradient colors\r\n  iconCircleGradientStart: '#333333',\r\n  iconCircleGradientEnd: '#1A1A1A',\r\n  \r\n  // Background colors\r\n  background: '#FFFFFF',\r\n  backgroundSecondary: '#F8F9FA',\r\n  \r\n  // Text colors\r\n  textPrimary: '#1A1A1A',\r\n  textSecondary: '#6B7280',\r\n  textMuted: '#9CA3AF',\r\n  \r\n  // Border colors\r\n  border: '#E5E7EB',\r\n  borderLight: '#F3F4F6',\r\n  \r\n  // Status colors\r\n  success: '#10B981',\r\n  error: '#EF4444',\r\n  warning: '#F59E0B',\r\n  info: '#3B82F6',\r\n  \r\n  // Interactive states\r\n  hover: 'rgba(0, 0, 0, 0.05)',\r\n  pressed: 'rgba(0, 0, 0, 0.1)',\r\n  focus: 'rgba(59, 130, 246, 0.1)',\r\n};\r\n\r\nexport default COLORS; ","import React, { useState } from 'react';\r\nimport { COLORS } from '../../theme/colors.js';\r\n\r\n// Icon Circle component matching the React Native version\r\nconst IconCircle = ({ \r\n  size = 40, \r\n  children,\r\n  className = ''\r\n}) => {\r\n  return (\r\n    <div \r\n      className={`relative flex items-center justify-center border border-black border-opacity-25 ${className}`}\r\n      style={{\r\n        width: size,\r\n        height: size,\r\n        borderRadius: size / 2,\r\n        background: `linear-gradient(to bottom, ${COLORS.iconCircleGradientStart}, ${COLORS.iconCircleGradientEnd})`\r\n      }}\r\n    >\r\n      {children || (\r\n        <span \r\n          className=\"font-semibold opacity-95\"\r\n          style={{\r\n            fontSize: '20px',\r\n            color: COLORS.btnLabel,\r\n            backgroundColor: 'transparent'\r\n          }}\r\n        >\r\n          \r\n        </span>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Primary Button component matching the React Native design\r\nconst PrimaryButton = ({\r\n  label = \"Get Started\",\r\n  onClick,\r\n  iconRight,\r\n  loading = false,\r\n  disabled = false,\r\n  testId,\r\n  className = '',\r\n  style = {},\r\n  textStyle = {},\r\n  centered = false,\r\n  ...props\r\n}) => {\r\n  const [pressed, setPressed] = useState(false);\r\n\r\n  const handleMouseDown = () => setPressed(true);\r\n  const handleMouseUp = () => setPressed(false);\r\n  const handleMouseLeave = () => setPressed(false);\r\n\r\n  const buttonStyle = {\r\n    height: '48px',\r\n    borderRadius: '100px',\r\n    border: `1px solid ${COLORS.btnBorder}`,\r\n    background: `linear-gradient(to bottom, ${COLORS.btnGradStart}, ${COLORS.btnGradEnd})`,\r\n    position: 'relative',\r\n    overflow: 'hidden',\r\n    width: centered ? 'auto' : '100%',\r\n    minWidth: centered ? '250px' : 'auto',\r\n    maxWidth: centered ? '350px' : 'none',\r\n    margin: centered ? '0 auto' : '0',\r\n    cursor: disabled ? 'not-allowed' : 'pointer',\r\n    opacity: disabled ? 0.65 : 1,\r\n    boxShadow: disabled ? 'none' : '20px 30px 40px rgba(0,0,0,0.10)',\r\n    transition: 'all 0.2s ease',\r\n    ...style\r\n  };\r\n\r\n  const pressedOverlayStyle = {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: 'rgba(0,0,0,0.1)',\r\n    borderRadius: '100px',\r\n    opacity: pressed ? 1 : 0,\r\n    transition: 'opacity 0.1s ease'\r\n  };\r\n\r\n  const textContainerStyle = {\r\n    position: 'absolute',\r\n    left: 0,\r\n    right: 0,\r\n    top: 0,\r\n    bottom: 0,\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: 'transparent'\r\n  };\r\n\r\n  const iconPositionStyle = {\r\n    position: 'absolute',\r\n    right: '4px',\r\n    top: '4px',\r\n    bottom: '4px',\r\n    width: '40px',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: 'transparent'\r\n  };\r\n\r\n  const labelStyle = {\r\n    fontFamily: 'Inter, system-ui, sans-serif',\r\n    fontWeight: '600',\r\n    fontSize: '16px',\r\n    color: COLORS.btnLabel,\r\n    textAlign: 'center',\r\n    backgroundColor: 'transparent',\r\n    ...textStyle\r\n  };\r\n\r\n  return (\r\n    <button\r\n      className={`relative ${className}`}\r\n      style={buttonStyle}\r\n      onClick={onClick}\r\n      onMouseDown={handleMouseDown}\r\n      onMouseUp={handleMouseUp}\r\n      onMouseLeave={handleMouseLeave}\r\n      disabled={disabled || loading}\r\n      data-testid={testId}\r\n      aria-label={label}\r\n      {...props}\r\n    >\r\n      {/* Pressed state overlay */}\r\n      <div style={pressedOverlayStyle} />\r\n\r\n      {/* Centered text container */}\r\n      <div style={textContainerStyle}>\r\n        {loading ? (\r\n          <div \r\n            className=\"animate-spin rounded-full border-2 border-white border-t-transparent\"\r\n            style={{ width: '20px', height: '20px' }}\r\n          />\r\n        ) : (\r\n          <span style={labelStyle}>{label}</span>\r\n        )}\r\n      </div>\r\n\r\n      {/* Icon in fixed position on right */}\r\n      <div style={iconPositionStyle}>\r\n        {!loading && (iconRight || <IconCircle />)}\r\n      </div>\r\n    </button>\r\n  );\r\n};\r\n\r\nexport { IconCircle };\r\nexport default PrimaryButton; ","import React, { useState, useEffect } from 'react';\r\nimport { Mail, ArrowRight, Check } from 'lucide-react';\r\nimport { GoogleLogin } from '@react-oauth/google';\r\nimport PrimaryButton from './ui/PrimaryButton.jsx';\r\nimport { COLORS } from '../theme/colors.js';\r\n\r\nexport default function EmailAuth({ onSuccess, testMode = true }) {\r\n  const [email, setEmail] = useState('');\r\n  // Store verification code as per-digit state to avoid losing position when users click/paste/autofill.\r\n  const [codeDigits, setCodeDigits] = useState(() => Array(6).fill(''));\r\n  const [step, setStep] = useState('email'); // 'email' | 'code' | 'success'\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [emailSent, setEmailSent] = useState(true); // Track if email was actually sent\r\n  const [emailServiceMessage, setEmailServiceMessage] = useState(''); // Store service message\r\n  const code = codeDigits.join('');\r\n  const isCodeComplete = codeDigits.every((d) => typeof d === 'string' && d.length === 1);\r\n  const resetCodeDigits = () => setCodeDigits(Array(6).fill(''));\r\n\r\n  const sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\r\n\r\n  const postJson = async (url, apiKey, body) => {\r\n    const response = await fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'x-api-key': apiKey,\r\n        'Authorization': `Bearer ${apiKey}`,\r\n      },\r\n      body: JSON.stringify(body),\r\n    });\r\n    return response;\r\n  };\r\n\r\n  // Prefer the newer single-endpoint API: POST /email/verification { action: 'request'|'verify' }\r\n  // Fall back to legacy /email/verify and /email/verify/confirm if needed.\r\n  const requestEmailVerification = async ({ baseUrl, apiKey, email: rawEmail }) => {\r\n    const normalizedEmail = (rawEmail || '').trim().toLowerCase();\r\n\r\n    // New endpoint\r\n    try {\r\n      const res = await postJson(`${baseUrl}/email/verification`, apiKey, {\r\n        email: normalizedEmail,\r\n        action: 'request',\r\n      });\r\n      if (res.ok) return await res.json();\r\n    } catch {\r\n      // ignore and fall back\r\n    }\r\n\r\n    // Legacy endpoint\r\n    const legacyRes = await postJson(`${baseUrl}/email/verify`, apiKey, { email: normalizedEmail });\r\n    if (!legacyRes.ok) {\r\n      let msg = 'Failed to send verification code';\r\n      try {\r\n        const err = await legacyRes.json();\r\n        if (err?.error) msg = err.error;\r\n      } catch {}\r\n      throw new Error(msg);\r\n    }\r\n    return await legacyRes.json();\r\n  };\r\n\r\n  const verifyEmailCode = async ({ baseUrl, apiKey, email: rawEmail, code: rawCode }) => {\r\n    const normalizedEmail = (rawEmail || '').trim().toLowerCase();\r\n    const normalizedCode = String(rawCode || '').trim();\r\n\r\n    // New endpoint\r\n    try {\r\n      const res = await postJson(`${baseUrl}/email/verification`, apiKey, {\r\n        email: normalizedEmail,\r\n        action: 'verify',\r\n        code: normalizedCode,\r\n      });\r\n      if (res.ok) return await res.json();\r\n      // If it's a hard failure, surface its message\r\n      try {\r\n        const err = await res.json();\r\n        throw new Error(err?.error || err?.message || 'Verification failed');\r\n      } catch (e) {\r\n        // If parsing fails, fall through to legacy retry below\r\n        if (e instanceof Error) throw e;\r\n      }\r\n    } catch (e) {\r\n      // If server doesn't support /email/verification or network hiccup, try legacy below.\r\n      // If it's a real \"invalid code\" error, we rethrow and don't spam retries.\r\n      const msg = e?.message || '';\r\n      if (msg && !msg.toLowerCase().includes('not found') && !msg.toLowerCase().includes('cannot')) {\r\n        // Keep going to legacy; it might be the only supported path.\r\n      }\r\n    }\r\n\r\n    // Legacy endpoint with light retry for multi-instance deployments:\r\n    // \"No verification code found\" often means request+confirm hit different servers.\r\n    const maxAttempts = 5;\r\n    for (let attempt = 1; attempt <= maxAttempts; attempt++) {\r\n      const res = await postJson(`${baseUrl}/email/verify/confirm`, apiKey, {\r\n        email: normalizedEmail,\r\n        code: normalizedCode,\r\n      });\r\n\r\n      if (res.ok) return await res.json();\r\n\r\n      let errMsg = 'Invalid verification code';\r\n      try {\r\n        const err = await res.json();\r\n        if (err?.error) errMsg = err.error;\r\n        if (typeof err?.attemptsRemaining === 'number') {\r\n          errMsg = `${errMsg} (attempts remaining: ${err.attemptsRemaining})`;\r\n        }\r\n      } catch {}\r\n\r\n      // Retry only for the \"code missing\" case\r\n      if (errMsg.toLowerCase().includes('no verification code found') && attempt < maxAttempts) {\r\n        await sleep(150 * attempt);\r\n        continue;\r\n      }\r\n\r\n      throw new Error(errMsg);\r\n    }\r\n\r\n    throw new Error('Verification failed');\r\n  };\r\n\r\n  // Helper function to handle OAuth success (Gmail) - defined early for useEffect\r\n  const handleOAuthSuccess = async (gmailEmail) => {\r\n    try {\r\n      setIsLoading(true);\r\n      console.log(' Google OAuth completed successfully, email:', gmailEmail);\r\n\r\n      const normalizedEmail = (gmailEmail || '').trim().toLowerCase();\r\n      setEmail(normalizedEmail);\r\n\r\n      // Check if this email already has an account in the backend\r\n      const baseUrl = (typeof window !== 'undefined' && window.onairosBaseUrl) || 'https://api2.onairos.uk';\r\n      const apiKey = (typeof window !== 'undefined' && window.onairosApiKey) || 'ona_VvoHNg1fdCCUa9eBy4Iz3IfvXdgLfMFI7TNcyHLDKEadPogkbjAeE2iDOs6M7Aey';\r\n\r\n      let accountInfo = null;\r\n      let accountStatus = null;\r\n      let existingUser = false;\r\n\r\n      try {\r\n        console.log(' Checking if account exists for:', normalizedEmail);\r\n        const accountCheckResponse = await fetch(`${baseUrl}/getAccountInfo/email`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'x-api-key': apiKey,\r\n          },\r\n          body: JSON.stringify({\r\n            Info: {\r\n              identifier: normalizedEmail\r\n            }\r\n          })\r\n        });\r\n\r\n        if (accountCheckResponse.ok) {\r\n          const accountData = await accountCheckResponse.json();\r\n          \r\n          if (accountData.AccountInfo) {\r\n            accountInfo = accountData.AccountInfo;\r\n            accountStatus = accountData.accountStatus;\r\n            existingUser = accountStatus?.exists || false;\r\n            \r\n            console.log(' Existing account found:', {\r\n              exists: existingUser,\r\n              hasTrainedModel: accountStatus?.hasTrainedModel,\r\n              hasPersonalityTraits: accountStatus?.hasPersonalityTraits,\r\n              connectedPlatforms: accountStatus?.connectedPlatforms,\r\n              needsDataConnection: accountStatus?.needsDataConnection,\r\n              needsTraining: accountStatus?.needsTraining,\r\n              canUseInference: accountStatus?.canUseInference\r\n            });\r\n          } else {\r\n            console.log(' No existing account found - new user');\r\n          }\r\n        } else {\r\n          console.log(' Account check returned non-OK status - treating as new user');\r\n        }\r\n      } catch (accountCheckError) {\r\n        console.warn(' Could not check account status, treating as new user:', accountCheckError);\r\n      }\r\n\r\n      setStep('success');\r\n      setIsLoading(false);\r\n\r\n      setTimeout(() => {\r\n        onSuccess({\r\n          email: normalizedEmail,\r\n          verified: true,\r\n          token: null,\r\n          userName: normalizedEmail.split('@')[0],\r\n          existingUser: existingUser,\r\n          accountInfo: accountInfo,\r\n          accountStatus: accountStatus, // NEW: Pass the accountStatus object\r\n          isNewUser: !existingUser,\r\n          flowType: existingUser ? 'dataRequest' : 'onboarding',\r\n          adminMode: false,\r\n          userCreated: !existingUser,\r\n          accountDetails: existingUser ? accountInfo : {\r\n            email: normalizedEmail,\r\n            createdAt: new Date().toISOString(),\r\n            ssoProvider: 'gmail'\r\n          }\r\n        });\r\n      }, 400);\r\n    \r\n    } catch (error) {\r\n      console.error(' Error handling OAuth success:', error);\r\n      setError('Failed to continue with Google authentication. Please try again.');\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Check for Gmail OAuth success on mount (after redirect back)\r\n  useEffect(() => {\r\n    const checkGmailOAuthSuccess = () => {\r\n      const gmailSuccess = localStorage.getItem('onairos_gmail_success');\r\n      const gmailTimestamp = localStorage.getItem('onairos_gmail_timestamp');\r\n      const oauthContext = localStorage.getItem('onairos_oauth_context');\r\n      \r\n      // Only process if we're coming back from Gmail auth flow\r\n      if (gmailSuccess === 'true' && gmailTimestamp && oauthContext === 'gmail-auth') {\r\n        const timestampNum = parseInt(gmailTimestamp, 10);\r\n        const now = Date.now();\r\n        \r\n        // Only process if timestamp is recent (within last 30 seconds)\r\n        if (now - timestampNum < 30000) {\r\n          console.log(' Gmail OAuth completed - processing redirect back');\r\n          \r\n          // Get email from localStorage\r\n          const gmailEmail = localStorage.getItem('onairos_gmail_email') || \r\n                           localStorage.getItem('onairos_oauth_email');\r\n          \r\n          // Clean up localStorage\r\n          localStorage.removeItem('onairos_gmail_success');\r\n          localStorage.removeItem('onairos_gmail_timestamp');\r\n          localStorage.removeItem('onairos_oauth_context');\r\n          localStorage.removeItem('onairos_return_url');\r\n          \r\n          if (gmailEmail) {\r\n            // Process OAuth success\r\n            handleOAuthSuccess(gmailEmail);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    checkGmailOAuthSuccess();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // Only run once on mount\r\n\r\n  // Check for OAuth completion on mount (for same-page redirect flow)\r\n  useEffect(() => {\r\n    const checkOAuthCompletion = () => {\r\n      // Check URL params for OAuth completion\r\n      const urlParams = new URLSearchParams(window.location.search);\r\n      const oauthSuccess = urlParams.get('onairos_oauth_success');\r\n      const oauthPlatform = urlParams.get('onairos_oauth_platform');\r\n      const oauthEmail = urlParams.get('onairos_oauth_email');\r\n\r\n      if (oauthSuccess === 'true' && oauthPlatform === 'gmail' && oauthEmail) {\r\n        console.log(' Gmail OAuth completion detected on page load');\r\n        // Clean up URL\r\n        const newUrl = window.location.pathname;\r\n        window.history.replaceState({}, '', newUrl);\r\n        // Handle OAuth success\r\n        handleOAuthSuccess(oauthEmail);\r\n      } else {\r\n        // Check localStorage for OAuth completion (fallback)\r\n        const success = localStorage.getItem('onairos_gmail_success');\r\n        const timestamp = localStorage.getItem('onairos_gmail_timestamp');\r\n        const gmailEmail = localStorage.getItem('onairos_gmail_email');\r\n\r\n        if (success === 'true' && timestamp && gmailEmail) {\r\n          const timestampNum = parseInt(timestamp, 10);\r\n          const now = Date.now();\r\n          \r\n          // Only process if timestamp is recent (within last 60 seconds)\r\n          if (now - timestampNum < 60000) {\r\n            console.log(' Gmail OAuth completion detected via localStorage');\r\n            // Clean up localStorage\r\n            localStorage.removeItem('onairos_gmail_success');\r\n            localStorage.removeItem('onairos_gmail_timestamp');\r\n            // Handle OAuth success\r\n            handleOAuthSuccess(gmailEmail);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    checkOAuthCompletion();\r\n  }, []); // Run once on mount\r\n\r\n  // Auto-focus first PIN input when code step loads\r\n  useEffect(() => {\r\n    if (step === 'code') {\r\n      // Small delay to ensure DOM is ready\r\n      setTimeout(() => {\r\n        const firstInput = document.querySelector('input.onairos-verification-digit');\r\n        if (firstInput) {\r\n          firstInput.focus();\r\n        }\r\n      }, 100);\r\n    }\r\n  }, [step]);\r\n\r\n  const validateEmail = (email) => {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    return emailRegex.test(email);\r\n  };\r\n\r\n  const handleEmailSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setEmailSent(true); // Reset email status\r\n    setEmailServiceMessage(''); // Reset service message\r\n    resetCodeDigits();\r\n\r\n    if (!validateEmail(email)) {\r\n      setError('Please enter a valid email address');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      if (testMode) {\r\n        // Test mode: Skip API call completely, simulate instant success\r\n        console.log(' Test mode: Simulating email verification request for:', email);\r\n        setTimeout(() => {\r\n          setStep('code');\r\n          setIsLoading(false);\r\n          console.log(' Test mode: Email verification simulated successfully');\r\n        }, 800); // Shorter delay for faster testing\r\n      } else {\r\n        // Production mode: Use proper email verification API from schema\r\n        const baseUrl = (typeof window !== 'undefined' && window.onairosBaseUrl) || 'https://api2.onairos.uk';\r\n        const apiKey = (typeof window !== 'undefined' && window.onairosApiKey) || 'ona_VvoHNg1fdCCUa9eBy4Iz3IfvXdgLfMFI7TNcyHLDKEadPogkbjAeE2iDOs6M7Aey';\r\n        const data = await requestEmailVerification({ baseUrl, apiKey, email });\r\n\r\n        console.log(' Email request response:', data);\r\n\r\n        // Store email service status\r\n        // /email/verify returns emailSent, /email/verification typically does not.\r\n        setEmailSent(data.emailSent !== false);\r\n        setEmailServiceMessage(data.message || '');\r\n\r\n        setStep('code');\r\n        setIsLoading(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Email request error:', error);\r\n      setError(error.message);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Handle Google Sign-In success (using official GoogleLogin component)\r\n  const handleGoogleSuccess = async (credentialResponse) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError('');\r\n      console.log(' Google Sign-In successful, received credential');\r\n\r\n      // Decode the JWT credential to get user info\r\n      const credential = credentialResponse.credential;\r\n      const base64Url = credential.split('.')[1];\r\n      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n      const jsonPayload = decodeURIComponent(\r\n        atob(base64)\r\n          .split('')\r\n          .map((c) => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))\r\n          .join('')\r\n      );\r\n\r\n      const userInfo = JSON.parse(jsonPayload);\r\n      const gmailEmail = userInfo.email;\r\n      \r\n      console.log(' Decoded user email from Google:', gmailEmail);\r\n      console.log(' User info:', { \r\n        email: userInfo.email, \r\n        name: userInfo.name,\r\n        picture: userInfo.picture,\r\n        email_verified: userInfo.email_verified\r\n      });\r\n\r\n      // Optional: Send to backend for verification/storage\r\n      try {\r\n        const sdkConfig = {\r\n          baseUrl: 'https://api2.onairos.uk',\r\n          apiKey: window.onairosApiKey || 'test-key',\r\n        };\r\n\r\n        await fetch(`${sdkConfig.baseUrl}/auth/google`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'x-api-key': sdkConfig.apiKey,\r\n          },\r\n          body: JSON.stringify({\r\n            credential: credential,\r\n            email: gmailEmail,\r\n            userInfo: userInfo,\r\n          }),\r\n        });\r\n      } catch (backendError) {\r\n        console.warn(' Backend verification failed, continuing anyway:', backendError);\r\n      }\r\n\r\n      // Continue with the OAuth success flow\r\n      handleOAuthSuccess(gmailEmail);\r\n\r\n    } catch (error) {\r\n      console.error(' Google Sign-In processing failed:', error);\r\n      setError('Google authentication failed. Please try again.');\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGoogleError = () => {\r\n    console.error(' Google Sign-In failed');\r\n    setError('Google authentication failed. Please try again.');\r\n    setIsLoading(false);\r\n  };\r\n\r\n  // handleOAuthSuccess is defined at the top of the component for use in useEffect\r\n\r\n  const handleCodeSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      if (testMode) {\r\n        // Test mode: Skip API call completely, simulate verification\r\n        console.log(' Test mode: Simulating code verification for:', email, 'with code:', code);\r\n        \r\n        if (code === '123456' || isCodeComplete) {\r\n          setStep('success');\r\n          setTimeout(() => {\r\n            // Simulate new user for design testing\r\n            const simulatedResponse = { \r\n              email, \r\n              verified: true, \r\n              token: 'test-token-' + Date.now(),\r\n              userName: email.split('@')[0],\r\n              existingUser: false, // Always simulate new user for full flow testing\r\n              accountInfo: null,\r\n              isNewUser: true,\r\n              flowType: 'onboarding',\r\n              adminMode: false,\r\n              userCreated: true,\r\n              accountDetails: {\r\n                email: email,\r\n                createdAt: new Date().toISOString(),\r\n                testAccount: true\r\n              }\r\n            };\r\n            console.log(' Test mode: Simulated verification successful, user data:', simulatedResponse);\r\n            onSuccess(simulatedResponse);\r\n          }, 600); // Faster for design testing\r\n        } else {\r\n          setError('Invalid code. Use any 6-digit code (e.g., 123456) for testing.');\r\n          setIsLoading(false);\r\n        }\r\n      } else {\r\n        // Production mode: Use real email verification API from schema\r\n        const baseUrl = (typeof window !== 'undefined' && window.onairosBaseUrl) || 'https://api2.onairos.uk';\r\n        const apiKey = (typeof window !== 'undefined' && window.onairosApiKey) || 'ona_VvoHNg1fdCCUa9eBy4Iz3IfvXdgLfMFI7TNcyHLDKEadPogkbjAeE2iDOs6M7Aey';\r\n        const codeToSubmit = codeDigits.join('');\r\n\r\n        if (!isCodeComplete) {\r\n          throw new Error('Please enter the full 6-digit code.');\r\n        }\r\n        \r\n        const data = await verifyEmailCode({ baseUrl, apiKey, email, code: codeToSubmit.trim() });\r\n        \r\n        if (!data.success) {\r\n          throw new Error(data.error || 'Verification failed');\r\n        }\r\n\r\n        console.log(' Email verification response:', data);\r\n\r\n        // NEW: Check account status explicitly, same as Google sign-in flow\r\n        // This ensures consistent behavior between Google and email auth\r\n        let accountInfo = data.accountInfo || null;\r\n        let accountStatus = data.accountStatus || null;\r\n        let existingUser = data.existingUser || false;\r\n\r\n        try {\r\n          console.log(' Checking account status for:', email);\r\n          const accountCheckResponse = await fetch(`${baseUrl}/getAccountInfo/email`, {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'x-api-key': apiKey,\r\n            },\r\n            body: JSON.stringify({\r\n              Info: {\r\n                identifier: email.trim().toLowerCase()\r\n              }\r\n            })\r\n          });\r\n\r\n          if (accountCheckResponse.ok) {\r\n            const accountData = await accountCheckResponse.json();\r\n            \r\n            if (accountData.AccountInfo) {\r\n              accountInfo = accountData.AccountInfo;\r\n              accountStatus = accountData.accountStatus;\r\n              existingUser = accountStatus?.exists || false;\r\n              \r\n              console.log(' Account status from explicit check:', {\r\n                exists: existingUser,\r\n                hasTrainedModel: accountStatus?.hasTrainedModel,\r\n                hasPersonalityTraits: accountStatus?.hasPersonalityTraits,\r\n                connectedPlatforms: accountStatus?.connectedPlatforms,\r\n                needsDataConnection: accountStatus?.needsDataConnection,\r\n                needsTraining: accountStatus?.needsTraining,\r\n                canUseInference: accountStatus?.canUseInference\r\n              });\r\n            } else {\r\n              console.log(' No existing account found - new user');\r\n            }\r\n          } else {\r\n            console.log(' Account check returned non-OK status - using verification response data');\r\n          }\r\n        } catch (accountCheckError) {\r\n          console.warn(' Could not check account status, using verification response data:', accountCheckError);\r\n        }\r\n\r\n        setStep('success');\r\n        setTimeout(() => {\r\n          // Pass complete API response with explicit account check data\r\n          onSuccess({ \r\n            email, \r\n            verified: true, \r\n            token: data.token || data.jwtToken,\r\n            userName: data.userName,\r\n            existingUser: existingUser,\r\n            accountInfo: accountInfo,\r\n            accountStatus: accountStatus, // Now includes explicit account check\r\n            isNewUser: !existingUser, // Based on explicit account check\r\n            flowType: existingUser ? 'dataRequest' : 'onboarding',\r\n            adminMode: data.adminMode,\r\n            userCreated: data.userCreated,\r\n            accountDetails: accountInfo || data.accountDetails || {\r\n              email: email,\r\n              createdAt: data.createdAt || new Date().toISOString(),\r\n              provider: 'email'\r\n            }\r\n          });\r\n        }, 1000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Email verification error:', error);\r\n      setError(error.message || 'Invalid code. Please try again.');\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const renderEmailStep = () => (\r\n    <div className=\"w-full flex flex-col\" style={{ height: '100%' }}>\r\n      {/* Content - Flexible center area */}\r\n      <div className=\"px-12 pt-16 pb-8 text-center flex-1 flex flex-col\">\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2 text-balance leading-tight\">\r\n            Use pre-existing Persona or create a new one in seconds\r\n          </h1>\r\n          <p className=\"text-gray-600 text-base\">Sign in or create an account</p>\r\n        </div>\r\n\r\n        <div className=\"mb-6\">\r\n          <input\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            placeholder=\"Enter your email\"\r\n            className=\"w-full max-w-sm mx-auto px-4 py-4 text-base bg-gray-50 border-0 rounded-xl !text-black placeholder:text-gray-400 focus:bg-white focus:ring-2 focus:ring-gray-200 outline-none transition-all duration-200\"\r\n            style={{ \r\n              fontFamily: 'Inter, system-ui, sans-serif',\r\n              WebkitTextFillColor: '#000000'\r\n            }}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-6 text-center\">\r\n          <span className=\"text-gray-500 text-sm\">Or</span>\r\n        </div>\r\n\r\n        <div className=\"mb-8 flex justify-center\">\r\n          <GoogleLogin\r\n            onSuccess={handleGoogleSuccess}\r\n            onError={handleGoogleError}\r\n            text=\"continue_with\"\r\n            size=\"large\"\r\n            shape=\"rectangular\"\r\n            width=\"384\"\r\n            logo_alignment=\"left\"\r\n          />\r\n        </div>\r\n\r\n        {/* Error Display */}\r\n        {error && (\r\n          <div className=\"mb-6\">\r\n            <p className=\"text-sm text-center\" style={{ color: COLORS.error }}>{error}</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Continue Button - Fixed at bottom */}\r\n      <div className=\"px-12 pb-8 flex-shrink-0\">\r\n        <button\r\n          className=\"w-full max-w-sm mx-auto bg-gray-900 hover:bg-gray-800 text-white rounded-full py-4 text-base font-medium flex items-center justify-center gap-2 transition-colors disabled:opacity-50\"\r\n          onClick={handleEmailSubmit}\r\n          disabled={isLoading || !email.trim()}\r\n          style={{ \r\n            fontFamily: 'Inter, system-ui, sans-serif'\r\n          }}\r\n        >\r\n          {isLoading ? 'Loading...' : 'Continue'}\r\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderCodeStep = () => (\r\n    <div className=\"w-full flex flex-col\" style={{ height: '100%' }}>\r\n      {/* Ensure verification code inputs always render black text (host apps may inject global input styles) */}\r\n      <style>{`\r\n        /* High-specificity + !important so consuming apps can't easily override text color */\r\n        input.onairos-verification-digit {\r\n          color: #000000 !important;\r\n          caret-color: #000000 !important;\r\n          -webkit-text-fill-color: #000000 !important; /* Safari/iOS */\r\n        }\r\n      `}</style>\r\n      {/* Heading - matching VerificationStep.tsx */}\r\n      <div className=\"w-full pt-16 px-12 mb-10 text-center\">\r\n        <h1 \r\n          className=\"font-bold mb-2\"\r\n          style={{ \r\n            fontFamily: 'IBM Plex Sans, system-ui, sans-serif',\r\n            fontWeight: '700',\r\n            fontSize: '24px',\r\n            lineHeight: '32px',\r\n            color: COLORS.textPrimary\r\n          }}\r\n        >\r\n          Enter verification code\r\n        </h1>\r\n        <p \r\n          className=\"mb-2\"\r\n          style={{ \r\n            fontFamily: 'Inter, system-ui, sans-serif',\r\n            fontWeight: '400',\r\n            fontSize: '16px',\r\n            lineHeight: '24px',\r\n            color: COLORS.textSecondary\r\n          }}\r\n        >\r\n          {emailSent ? `We've sent a 6-digit code to ${email}` : `A verification code has been generated for ${email}`}\r\n        </p>\r\n        {!emailSent && (\r\n          <div \r\n            className=\"mb-4 mx-auto max-w-sm px-4 py-3 rounded-lg border\"\r\n            style={{ \r\n              backgroundColor: '#FEF3C7',\r\n              borderColor: '#FCD34D',\r\n              fontFamily: 'Inter, system-ui, sans-serif',\r\n              fontSize: '14px',\r\n              lineHeight: '20px',\r\n              color: '#92400E'\r\n            }}\r\n          >\r\n            <p className=\"font-medium mb-1\"> Email service unavailable</p>\r\n            <p className=\"text-sm\">\r\n              {emailServiceMessage.includes('testing mode') || emailServiceMessage.includes('server logs') \r\n                ? 'Any 6-digit code will be accepted. Check server logs for the actual code.'\r\n                : 'The verification code was generated but could not be sent. Please check server logs or contact support.'}\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n\r\n      {/* Code Input - matching VerificationStep design with individual digit boxes */}\r\n      <div className=\"px-12 mb-6\">\r\n        <div className=\"flex justify-center space-x-3\">\r\n          {Array.from({ length: 6 }, (_, index) => (\r\n            <input\r\n              key={index}\r\n              type=\"text\"\r\n              inputMode=\"numeric\"\r\n              pattern=\"[0-9]*\"\r\n              maxLength=\"1\"\r\n              autoComplete={index === 0 ? \"one-time-code\" : \"off\"}\r\n              value={codeDigits[index] || ''}\r\n              onPaste={(e) => {\r\n                const pasted = (e.clipboardData?.getData('text') || '').replace(/\\D/g, '');\r\n                if (!pasted) return;\r\n                e.preventDefault();\r\n\r\n                const nextDigits = [...codeDigits];\r\n                for (let i = 0; i < pasted.length && index + i < 6; i++) {\r\n                  nextDigits[index + i] = pasted[i];\r\n                }\r\n                setCodeDigits(nextDigits);\r\n\r\n                const focusIndex = Math.min(index + pasted.length, 5);\r\n                const nextInput = e.currentTarget.parentElement?.children?.[focusIndex];\r\n                if (nextInput && typeof nextInput.focus === 'function') nextInput.focus();\r\n              }}\r\n              onChange={(e) => {\r\n                const raw = e.target.value || '';\r\n                const digitsOnly = raw.replace(/\\D/g, '');\r\n\r\n                // Clear\r\n                if (!digitsOnly) {\r\n                  const nextDigits = [...codeDigits];\r\n                  nextDigits[index] = '';\r\n                  setCodeDigits(nextDigits);\r\n                  return;\r\n                }\r\n\r\n                // Some browsers/OTP autofill can inject multiple digits at once\r\n                const nextDigits = [...codeDigits];\r\n                for (let i = 0; i < digitsOnly.length && index + i < 6; i++) {\r\n                  nextDigits[index + i] = digitsOnly[i];\r\n                }\r\n                setCodeDigits(nextDigits);\r\n\r\n                const focusIndex = Math.min(index + digitsOnly.length, 5);\r\n                if (focusIndex !== index) {\r\n                  const nextInput = e.target.parentElement?.children?.[focusIndex];\r\n                  if (nextInput && typeof nextInput.focus === 'function') nextInput.focus();\r\n                } else if (index < 5) {\r\n                  const nextInput = e.target.parentElement?.children?.[index + 1];\r\n                  if (nextInput && typeof nextInput.focus === 'function') nextInput.focus();\r\n                }\r\n              }}\r\n              onKeyDown={(e) => {\r\n                // Handle backspace to focus previous input\r\n                if (e.key === 'Backspace') {\r\n                  // If current has a digit, clear it first (common OTP UX)\r\n                  if (codeDigits[index]) {\r\n                    const nextDigits = [...codeDigits];\r\n                    nextDigits[index] = '';\r\n                    setCodeDigits(nextDigits);\r\n                    e.preventDefault();\r\n                    return;\r\n                  }\r\n                  // Otherwise move focus left\r\n                  if (index > 0) {\r\n                    const prevInput = e.currentTarget.parentElement?.children?.[index - 1];\r\n                    if (prevInput && typeof prevInput.focus === 'function') prevInput.focus();\r\n                  }\r\n                }\r\n              }}\r\n              className=\"onairos-verification-digit w-12 h-12 border rounded-lg text-center text-lg font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none !text-black\"\r\n              style={{ \r\n                borderColor: COLORS.border,\r\n                backgroundColor: COLORS.background,\r\n                fontFamily: 'Inter, system-ui, sans-serif',\r\n                color: '#000000',\r\n                caretColor: '#000000',\r\n                WebkitTextFillColor: '#000000',\r\n              }}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Error Display */}\r\n      {error && (\r\n        <div className=\"px-12 mb-6\">\r\n          <p className=\"text-sm text-center\" style={{ color: COLORS.error }}>{error}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Continue Button - positioned right below code inputs */}\r\n      <div className=\"px-12 mb-6\">\r\n        <div className=\"max-w-sm mx-auto\">\r\n          <PrimaryButton\r\n            label=\"Continue\"\r\n            onClick={handleCodeSubmit}\r\n            loading={isLoading}\r\n            disabled={isLoading || !isCodeComplete}\r\n            testId=\"verify-code-button\"\r\n            className=\"!text-white\"\r\n            textStyle={{ color: '#FFFFFF' }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Spacer */}\r\n      <div style={{ flex: 1, minHeight: '20px' }} />\r\n\r\n      {/* Back to email option */}\r\n      <div className=\"px-12 w-full\">\r\n        <div className=\"max-w-sm mx-auto\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => {\r\n              resetCodeDigits();\r\n              setStep('email');\r\n            }}\r\n            className=\"w-full py-2 px-4 font-medium transition-colors text-sm\"\r\n            style={{ color: COLORS.textSecondary }}\r\n          >\r\n            Use a different email\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderSuccessStep = () => (\r\n    <div className=\"w-full flex flex-col items-center space-y-6 pt-16 px-12\">\r\n      <div \r\n        className=\"flex items-center justify-center w-16 h-16 rounded-full\"\r\n        style={{ backgroundColor: '#D1FAE5' }}\r\n      >\r\n        <Check className=\"w-8 h-8\" style={{ color: COLORS.success }} />\r\n      </div>\r\n      \r\n      <div className=\"text-center space-y-2\">\r\n        <h2 \r\n          className=\"text-xl font-semibold\"\r\n          style={{ color: COLORS.textPrimary }}\r\n        >\r\n          Email verified!\r\n        </h2>\r\n        <p style={{ color: COLORS.textSecondary }}>Setting up your account...</p>\r\n      </div>\r\n\r\n      <div className=\"w-8 h-8\">\r\n        <div className=\"animate-spin h-8 w-8 border-2 border-blue-600 rounded-full border-t-transparent\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      {step === 'email' && renderEmailStep()}\r\n      {step === 'code' && renderCodeStep()}\r\n      {step === 'success' && renderSuccessStep()}\r\n    </div>\r\n  );\r\n} \r\n","/**\r\n * Capacitor/Mobile Environment Detection Utility\r\n * \r\n * Detects if the app is running in a Capacitor environment\r\n * and provides mobile-specific functionality\r\n */\r\n\r\n/**\r\n * Detect if running in Capacitor environment\r\n * @returns {boolean} True if running in Capacitor\r\n */\r\nexport const isCapacitor = () => {\r\n  // Check for Capacitor global object\r\n  if (typeof window !== 'undefined' && window.Capacitor) {\r\n    return true;\r\n  }\r\n  \r\n  // Check for Capacitor plugins\r\n  if (typeof window !== 'undefined' && window.Capacitor?.Plugins) {\r\n    return true;\r\n  }\r\n  \r\n  // Check for Capacitor native bridge\r\n  if (typeof window !== 'undefined' && window.webkit?.messageHandlers?.bridge) {\r\n    return true;\r\n  }\r\n  \r\n  return false;\r\n};\r\n\r\n/**\r\n * Detect if running in React Native environment\r\n * @returns {boolean} True if running in React Native\r\n */\r\nexport const isReactNative = () => {\r\n  return typeof navigator !== 'undefined' && navigator.product === 'ReactNative' ||\r\n         typeof global !== 'undefined' && global.nativeModuleProxy !== undefined;\r\n};\r\n\r\n/**\r\n * Detect if running in any mobile app environment (Capacitor or React Native)\r\n * @returns {boolean} True if running in a mobile app\r\n */\r\nexport const isMobileApp = () => {\r\n  return isCapacitor() || isReactNative();\r\n};\r\n\r\n/**\r\n * Detect if running on iOS\r\n * @returns {boolean} True if running on iOS\r\n */\r\nexport const isIOS = () => {\r\n  if (typeof window !== 'undefined' && window.Capacitor) {\r\n    return window.Capacitor.getPlatform() === 'ios';\r\n  }\r\n  \r\n  // Fallback to user agent detection\r\n  return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n};\r\n\r\n/**\r\n * Detect if running on Android\r\n * @returns {boolean} True if running on Android\r\n */\r\nexport const isAndroid = () => {\r\n  if (typeof window !== 'undefined' && window.Capacitor) {\r\n    return window.Capacitor.getPlatform() === 'android';\r\n  }\r\n  \r\n  // Fallback to user agent detection\r\n  return /Android/.test(navigator.userAgent);\r\n};\r\n\r\n/**\r\n * Get platform information\r\n * @returns {Object} Platform details\r\n */\r\nexport const getPlatformInfo = () => {\r\n  return {\r\n    isCapacitor: isCapacitor(),\r\n    isReactNative: isReactNative(),\r\n    isMobileApp: isMobileApp(),\r\n    isIOS: isIOS(),\r\n    isAndroid: isAndroid(),\r\n    platform: window.Capacitor ? window.Capacitor.getPlatform() : 'web',\r\n    userAgent: navigator.userAgent\r\n  };\r\n};\r\n\r\n/**\r\n * Detect if mobile browser (not Capacitor, just mobile web browser)\r\n * @returns {boolean} True if mobile browser\r\n */\r\nexport const isMobileBrowser = () => {\r\n  if (isMobileApp()) {\r\n    return false; // Capacitor/RN apps are not browsers\r\n  }\r\n  \r\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\r\n         (window.innerWidth <= 768);\r\n};\r\n\r\n/**\r\n * Get environment type\r\n * @returns {string} Environment type: 'capacitor', 'react-native', 'mobile-browser', 'desktop-browser'\r\n */\r\nexport const getEnvironmentType = () => {\r\n  if (isCapacitor()) return 'capacitor';\r\n  if (isReactNative()) return 'react-native';\r\n  if (isMobileBrowser()) return 'mobile-browser';\r\n  return 'desktop-browser';\r\n};\r\n\r\n/**\r\n * Check if browser extension support is available\r\n * Browser extensions don't work in Capacitor/React Native\r\n * @returns {boolean} True if browser extensions are supported\r\n */\r\nexport const supportsBrowserExtensions = () => {\r\n  return !isMobileApp();\r\n};\r\n\r\n/**\r\n * Log platform information for debugging\r\n */\r\nexport const logPlatformInfo = () => {\r\n  const info = getPlatformInfo();\r\n  console.log(' Platform Detection:', info);\r\n  console.log(' Environment Type:', getEnvironmentType());\r\n  console.log(' Browser Extensions Supported:', supportsBrowserExtensions());\r\n  return info;\r\n};\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst BOOKMARKLET_HREF =\r\n  \"javascript:(async()=>{let loader=null;function showLoader(msg){if(!loader){loader=document.createElement('div');loader.style.cssText='position:fixed;top:20px;right:20px;width:280px;background:rgba(15,23,42,0.95);color:white;padding:14px 20px;border-radius:12px;font-family:-apple-system,BlinkMacSystemFont,\\\"Segoe UI\\\",Roboto,sans-serif;font-size:13px;font-weight:500;z-index:999999;box-shadow:0 8px 24px rgba(0,0,0,0.4),0 2px 8px rgba(0,0,0,0.2);border:1px solid rgba(255,255,255,0.1);backdrop-filter:blur(12px);line-height:1.4;text-align:center';document.body.appendChild(loader)}loader.textContent=msg}function hideLoader(){if(loader){loader.remove();loader=null}}function h(){try{const e=window.location.hostname||'';return e==='chat.openai.com'||e==='chatgpt.com'||e.endsWith('.chatgpt.com')}catch{return false}}function getDeviceId(){try{const c=document.cookie.match(/oai-did=([^;]+)/);return c?c[1]:null}catch{return null}}async function getAccessToken(){const url=`${window.location.origin}/api/auth/session`;const r=await fetch(url,{method:'GET',credentials:'include',headers:{'Accept':'application/json','Referer':window.location.origin}});if(!r.ok)return null;const data=await r.json();return data?.accessToken||null}async function fetchList(token,deviceId){const url=`${window.location.origin}/backend-api/conversations?offset=0&limit=10`;const headers={'Accept':'*/*','oai-language':'en-US'};if(token)headers['Authorization']=`Bearer ${token}`;if(deviceId)headers['oai-device-id']=deviceId;const r=await fetch(url,{method:'GET',credentials:'include',headers});if(!r.ok)throw new Error(`HTTP ${r.status}`);return r.json()}async function fetchConvo(id,token,deviceId){const url=`${window.location.origin}/backend-api/conversation/${id}`;const headers={'Accept':'*/*','oai-language':'en-US','Referer':window.location.origin};if(token)headers['Authorization']=`Bearer ${token}`;if(deviceId)headers['oai-device-id']=deviceId;const r=await fetch(url,{method:'GET',credentials:'include',headers});if(!r.ok)throw new Error(`HTTP ${r.status}`);return r.json()}async function fetchMemories(token,deviceId){const url=`${window.location.origin}/backend-api/memories?include_memory_entries=true&memory_entries_filter=all`;const headers={'Accept':'application/json','Referer':window.location.origin};if(token)headers['Authorization']=`Bearer ${token}`;if(deviceId)headers['oai-device-id']=deviceId;try{const r=await fetch(url,{method:'GET',credentials:'include',headers});if(!r.ok)return null;return r.json()}catch{return null}}function extractUserMessages(data){const mapping=data?.mapping||{};const msgs=[];for(const node of Object.values(mapping)){const msg=node?.message;if(!msg||!msg.author)continue;if(msg.author.role!=='user')continue;const time=msg.create_time?new Date(msg.create_time*1000).toISOString():null;let text='';const content=msg.content||{};if(Array.isArray(content.parts)){text=content.parts.join('\\\\n').trim()}else if(content.text){text=content.text.trim()}if(text){msgs.push({content:text,timestamp:time})}}return msgs}if(!h()){alert(' Please open ChatGPT and try again.');return}const popup=window.open('about:blank','OnairosSync','width=500,height=600');if(!popup){alert(' Please allow popups for ChatGPT to sync with Onairos!\\\\n\\\\nEnable popups and try again.');return}popup.document.write('<html><head><title>Onairos Sync</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:\\\"Shne\\\",-apple-system,BlinkMacSystemFont,\\\"Segoe UI\\\",Helvetica,Arial,sans-serif;background:#0D0D0D;color:#ECECEC;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px}.container{max-width:450px;width:100%;background:#212121;border-radius:16px;padding:32px;box-shadow:0 4px 24px rgba(0,0,0,0.4)}h1{font-size:24px;font-weight:600;text-align:center;margin-bottom:8px}.subtitle{font-size:14px;color:#8E8EA0;text-align:center;margin-bottom:32px}.status-text{text-align:center;font-size:16px;margin-bottom:16px}.spinner{width:40px;height:40px;border:3px solid #2F2F2F;border-top-color:#10A37F;border-radius:50%;animation:spin 0.6s linear infinite;margin:0 auto 16px}@keyframes spin{to{transform:rotate(360deg)}}</style></head><body><div class=\\\"container\\\"><h1> Onairos Sync</h1><p class=\\\"subtitle\\\">Collecting your ChatGPT data</p><div class=\\\"spinner\\\"></div><div class=\\\"status-text\\\" id=\\\"status\\\">Starting...</div></div></body></html>');popup.document.close();function updatePopup(msg){try{if(popup&&!popup.closed){popup.document.getElementById('status').textContent=msg}}catch(e){}}showLoader(' Starting export...');console.log('[Onairos]  Starting export...');(async()=>{try{updatePopup(' Getting access token...');showLoader(' Getting access token...');const token=await getAccessToken();const deviceId=getDeviceId();if(!token){hideLoader();updatePopup(' Could not get access token. Make sure you\\\\'re logged into ChatGPT.');setTimeout(()=>popup.close(),5000);return}updatePopup(' Fetching conversations...');showLoader(' Fetching conversations...');let list;try{list=await fetchList(token,deviceId)}catch(err){hideLoader();updatePopup(' Failed: '+err.message);setTimeout(()=>popup.close(),5000);return}const items=(list?.items||[]).slice(0,10);if(items.length===0){hideLoader();updatePopup(' No conversations found');setTimeout(()=>popup.close(),3000);return}const convos=[];for(let i=0;i<items.length;i++){const c=items[i];updatePopup(` ${i+1}/${items.length}: ${c.title||'Untitled'}...`);showLoader(` ${i+1}/${items.length}: ${c.title||'Untitled'}...`);try{const data=await fetchConvo(c.id,token,deviceId);const userMsgs=extractUserMessages(data);convos.push({id:c.id,title:c.title||'Untitled',url:`${window.location.origin}/c/${c.id}`,messageCount:userMsgs.length,messages:userMsgs})}catch(err){convos.push({id:c.id,title:c.title||'Untitled',error:err.message})}}updatePopup(' Fetching memories...');showLoader(' Fetching memories...');const memories=await fetchMemories(token,deviceId);updatePopup(' Syncing to Onairos...');showLoader(' Syncing to Onairos...');const userData=JSON.parse(localStorage.getItem('onairosUser')||'{}');let jwtToken=userData.token||localStorage.getItem('onairos_user_token');if(!jwtToken){hideLoader();updatePopup(' Please log into Onairos first');setTimeout(()=>popup.close(),5000);return}const syncData={convos,memories,token:jwtToken};updatePopup(' Opening sync page...');const form=popup.document.createElement('form');form.method='POST';form.action='https://api2.onairos.uk/chatgpt-sync';form.style.display='none';const input=popup.document.createElement('input');input.type='hidden';input.name='data';input.value=JSON.stringify(syncData);form.appendChild(input);popup.document.body.appendChild(form);form.submit();hideLoader();console.log(' [Onairos] Submitting sync form')}catch(e){hideLoader();updatePopup(' Error: '+e.message);console.error(e);setTimeout(()=>popup.close(),5000)}})()})();\";\r\n\r\nexport const getOnairosChatGPTBookmarklet = () => BOOKMARKLET_HREF;\r\n\r\nexport default function ConnectChatGPTModal({ open, onClose, onConnected }) {\r\n  // Debug log to confirm render attempt\r\n  if (open) {\r\n    console.log(' ConnectChatGPTModal rendering! Open:', open);\r\n  }\r\n\r\n  if (!open) return null;\r\n\r\n  // Get user token from localStorage to embed in bookmarklet\r\n  const getUserToken = () => {\r\n    try {\r\n      // Try onairos_user_token first\r\n      const directToken = localStorage.getItem('onairos_user_token');\r\n      if (directToken) return directToken;\r\n      \r\n      // Try onairosUser.token\r\n      const userData = JSON.parse(localStorage.getItem('onairosUser') || '{}');\r\n      if (userData.token) return userData.token;\r\n      \r\n      return null;\r\n    } catch (e) {\r\n      console.error('Error getting token:', e);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const userToken = getUserToken();\r\n  console.log(' User token for bookmarklet:', userToken ? userToken.substring(0, 20) + '...' : 'NOT FOUND');\r\n\r\n  // Create bookmarklet with embedded token\r\n  const createBookmarkletWithToken = (token) => {\r\n    if (!token) {\r\n      // Fallback to original bookmarklet that checks localStorage\r\n      return BOOKMARKLET_HREF;\r\n    }\r\n    \r\n    // Embed the token directly in the bookmarklet\r\n    return BOOKMARKLET_HREF.replace(\r\n      'const userData=JSON.parse(localStorage.getItem(\\'onairosUser\\')||\\'{}\\')',\r\n      `const userData={token:'${token}'}`\r\n    );\r\n  };\r\n\r\n  const bookmarkletHref = createBookmarkletWithToken(userToken);\r\n\r\n  const handleGotIt = () => {\r\n    if (typeof onConnected === 'function') {\r\n      onConnected();\r\n    }\r\n    if (typeof onClose === 'function') {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  // Use a portal to break out of any parent transforms/overflows\r\n  return createPortal(\r\n    <div style={{ position: 'fixed', inset: 0, zIndex: 2147483647, pointerEvents: 'auto' }}>\r\n      <style>{`\r\n        @keyframes gentlePulse {\r\n          0%, 100% {\r\n            box-shadow: 0 0 0 0 rgba(148, 163, 184, 0.35);\r\n          }\r\n          50% {\r\n            box-shadow: 0 0 0 10px rgba(148, 163, 184, 0);\r\n          }\r\n        }\r\n        .bookmarklet-button {\r\n          background: rgba(15, 23, 42, 0.85);\r\n          border-radius: 9999px;\r\n          border: 1px solid rgba(255,255,255,0.16);\r\n          backdrop-filter: blur(18px);\r\n        }\r\n        .bookmarklet-button:hover {\r\n          background: rgba(15, 23, 42, 0.92);\r\n        }\r\n        @keyframes fadeInScale {\r\n          0% { opacity: 0; transform: translateY(8px) scale(0.96); }\r\n          100% { opacity: 1; transform: translateY(0) scale(1); }\r\n        }\r\n        .chatgpt-modal-card {\r\n          animation: fadeInScale 200ms cubic-bezier(0.16, 1, 0.3, 1);\r\n        }\r\n        .step-circle {\r\n          background: rgba(15, 23, 42, 0.9);\r\n          min-width: 28px;\r\n          width: 28px;\r\n          height: 28px;\r\n        }\r\n        .chatgpt-got-it-button {\r\n          color: #FFFFFF !important;\r\n          background-color: rgba(15, 23, 42, 0.8) !important;\r\n        }\r\n        .chatgpt-got-it-button:hover {\r\n          background-color: rgba(15, 23, 42, 0.9) !important;\r\n        }\r\n        .chatgpt-got-it-button * {\r\n          color: #FFFFFF !important;\r\n        }\r\n        .chatgpt-got-it-button span {\r\n          color: #FFFFFF !important;\r\n        }\r\n        /* Mobile browser specific styling */\r\n        @media (max-width: 768px) {\r\n          .chatgpt-modal-backdrop {\r\n            align-items: flex-end !important;\r\n            padding: 0 !important;\r\n          }\r\n          .chatgpt-modal-card {\r\n            max-width: 100% !important;\r\n            height: 100% !important;\r\n            max-height: 100% !important;\r\n            border-radius: 24px 24px 0 0 !important;\r\n            animation: slideUpFromBottom 300ms cubic-bezier(0.16, 1, 0.3, 1) !important;\r\n          }\r\n        }\r\n        @keyframes slideUpFromBottom {\r\n          0% { transform: translateY(100%); }\r\n          100% { transform: translateY(0); }\r\n        }\r\n      `}</style>\r\n\r\n      <div \r\n        className=\"chatgpt-modal-backdrop fixed inset-0 flex items-center justify-center p-4 bg-black/60\" \r\n        style={{ zIndex: 2147483647 }}\r\n      >\r\n        <div \r\n          className=\"chatgpt-modal-card w-full max-w-md rounded-3xl shadow-2xl border border-white/10 overflow-hidden text-white relative\"\r\n          style={{\r\n            background: 'linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(30, 41, 59, 0.92) 50%, rgba(15, 23, 42, 0.95) 100%)',\r\n            boxShadow: 'inset 0 1px 0 0 rgba(255, 255, 255, 0.1), 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 100px rgba(148, 163, 184, 0.15)'\r\n          }}\r\n        >\r\n            <div className=\"relative px-5 py-4 border-b border-white/10 bg-white/5\">\r\n              <button\r\n                onClick={onClose}\r\n                className=\"absolute right-4 top-4 p-2 hover:bg-white/10 rounded-full transition-colors z-50 cursor-pointer\"\r\n                aria-label=\"Close\"\r\n              >\r\n                <svg\r\n                  className=\"w-5 h-5 text-slate-300\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M6 18L18 6M6 6l12 12\"\r\n                  />\r\n                </svg>\r\n              </button>\r\n\r\n              <h2 className=\"text-xl font-semibold pr-8 text-white\">\r\n                Connect ChatGPT\r\n              </h2>\r\n              <p className=\"text-sm mt-0.5 text-white\">\r\n                Three quick steps to import your conversations\r\n              </p>\r\n\r\n              <div className=\"mt-3 flex items-start gap-2 bg-white/12 rounded-2xl px-3 py-2\">\r\n                <svg\r\n                  className=\"w-4 h-4 text-emerald-300 mt-0.5 flex-shrink-0\"\r\n                  fill=\"currentColor\"\r\n                  viewBox=\"0 0 20 20\"\r\n                >\r\n                  <path\r\n                    fillRule=\"evenodd\"\r\n                    d=\"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\r\n                    clipRule=\"evenodd\"\r\n                  />\r\n                </svg>\r\n                <p className=\"text-xs leading-relaxed text-white\">\r\n                  <strong className=\"font-semibold\">Private &amp; secure.</strong>{' '}\r\n                  We only access your chat history. No one else sees this data.\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"px-5 py-4 space-y-4\">\r\n              <div className=\"flex gap-3\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <div className=\"step-circle rounded-full flex items-center justify-center\">\r\n                    <span className=\"text-white font-bold text-sm\">1</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex-1 pt-0.5\">\r\n                  <h3 className=\"text-sm font-semibold mb-1 text-white\">\r\n                    Drag this button to your bookmarks bar\r\n                  </h3>\r\n                  <div className=\"relative inline-block mt-2\">\r\n                    <div\r\n                      className=\"absolute inset-0 rounded-full\"\r\n                      style={{ animation: 'gentlePulse 2s ease-in-out infinite' }}\r\n                    />\r\n                    <a\r\n                      href={bookmarkletHref}\r\n                      title=\" Onairos ChatGPT Sync\"\r\n                      draggable=\"true\"\r\n                      onDragStart={(e) => {\r\n                        try {\r\n                          // Set the bookmark URL\r\n                          e.dataTransfer.setData('text/uri-list', bookmarkletHref);\r\n                          e.dataTransfer.setData('text/plain', bookmarkletHref);\r\n                          \r\n                          // IMPORTANT: Set bookmark title for different browsers\r\n                          // Firefox uses text/x-moz-url format: URL\\nTitle\r\n                          e.dataTransfer.setData('text/x-moz-url', `${bookmarkletHref}\\n Onairos ChatGPT`);\r\n                          \r\n                          // Chrome/Safari: Set via DownloadURL\r\n                          e.dataTransfer.setData('DownloadURL', `application/javascript: Onairos ChatGPT:${bookmarkletHref}`);\r\n                          \r\n                          e.dataTransfer.effectAllowed = 'copy';\r\n                          console.log(' Bookmarklet drag started with title:  Onairos ChatGPT');\r\n                        } catch (err) {\r\n                          console.warn('Drag start error:', err);\r\n                        }\r\n                      }}\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        alert(' Please drag this button to your bookmarks bar!\\n\\nTip: Press Ctrl+Shift+B (or Cmd+Shift+B on Mac) to show your bookmarks bar.');\r\n                      }}\r\n                      className=\"bookmarklet-button relative inline-flex items-center gap-1.5 px-4 py-2 font-medium cursor-move select-none transition-all hover:scale-[1.03]\"\r\n                      suppressHydrationWarning\r\n                    >\r\n                      <span className=\"text-base\"></span>\r\n                      <span className=\"text-sm\">Onairos ChatGPT</span>\r\n                    </a>\r\n                  </div>\r\n                  <p className=\"text-xs mt-2 text-slate-200\">\r\n                    <kbd className=\"px-1.5 py-0.5 bg-white/10 rounded-full text-[10px] font-mono border border-white/10 text-slate-50\">\r\n                      Ctrl+Shift+B\r\n                    </kbd>{' '}\r\n                    (or{' '}\r\n                    <kbd className=\"px-1.5 py-0.5 bg-white/10 rounded-full text-[10px] font-mono border border-white/10 text-slate-50\">\r\n                      Cmd+Shift+B\r\n                    </kbd>{' '}\r\n                    on Mac) to show bookmarks bar\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"border-t border-white/10 ml-10\" />\r\n\r\n              <div className=\"flex gap-3\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <div className=\"step-circle rounded-full flex items-center justify-center\">\r\n                    <span className=\"text-white font-bold text-sm\">2</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex-1 pt-0.5\">\r\n                  <h3 className=\"text-sm font-semibold mb-1 text-white\">\r\n                    Open ChatGPT and log in\r\n                  </h3>\r\n                  <p className=\"text-xs mb-2 text-slate-200\">\r\n                    Make sure you're logged into your ChatGPT account\r\n                  </p>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      window.open('https://chat.openai.com', '_blank', 'noopener,noreferrer');\r\n                    }}\r\n                    className=\"inline-flex items-center gap-1.5 px-4 py-2 rounded-full text-xs font-medium transition-all hover:scale-[1.02] active:scale-[0.98]\"\r\n                    style={{\r\n                      background: 'linear-gradient(135deg, #10a37f 0%, #0d9270 100%)',\r\n                      color: '#ffffff',\r\n                      boxShadow: '0 0 25px rgba(16, 163, 127, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)'\r\n                    }}\r\n                  >\r\n                    <svg\r\n                      className=\"w-3.5 h-3.5\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      viewBox=\"0 0 24 24\"\r\n                    >\r\n                      <path\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                        strokeWidth={2}\r\n                        d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\"\r\n                      />\r\n                    </svg>\r\n                    Open ChatGPT\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"border-t border-white/10 ml-10\" />\r\n\r\n              <div className=\"flex gap-3\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <div className=\"step-circle rounded-full flex items-center justify-center\">\r\n                    <span className=\"text-white font-bold text-sm\">3</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex-1 pt-0.5\">\r\n                  <h3 className=\"text-sm font-semibold mb-1 text-white\">\r\n                    Click the bookmark on ChatGPT\r\n                  </h3>\r\n                  <p className=\"text-xs text-slate-200\">\r\n                    Click the <strong className=\"text-white\">&quot;Onairos ChatGPT&quot;</strong>{' '}\r\n                    bookmark you added. We&apos;ll securely import your last 10 conversations.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"px-5 py-4 bg-white/5 border-t border-white/10\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleGotIt}\r\n                className=\"w-full px-4 py-2.5 rounded-full font-medium text-sm transition-all hover:scale-[1.01] active:scale-[0.99] shadow-[0_10px_30px_rgba(15,23,42,0.45)] border border-white/40 chatgpt-got-it-button\"\r\n              >\r\n                <span>Got it! </span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n    </div>,\r\n    document.body\r\n  );\r\n}\r\n\r\n\r\n","import React, { useEffect, useId, useState, useRef } from 'react';\nimport { Browser } from '@capacitor/browser';\nimport Lottie from 'lottie-react';\nimport personaAnim from '../../public/persona-anim.json';\nimport { isMobileApp, isMobileBrowser } from '../utils/capacitorDetection';\nimport ConnectChatGPTModal from './ConnectChatGPTModal.jsx';\n\n// Mobile detection\nconst isMobile = () => {\n  if (typeof window === 'undefined') return false;\n  return isMobileApp() || isMobileBrowser() || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n};\nconst chatgptIcon = 'https://anushkasirv.sirv.com/openai.png';\nconst claudeIcon = 'https://anushkasirv.sirv.com/claude-color.png';\nconst geminiIcon = 'https://anushkasirv.sirv.com/gemini-color.png';\nconst grokIcon = 'https://anushkasirv.sirv.com/grok.png';\n\nconst sdkConfig = {\n  apiKey: process.env.REACT_APP_ONAIROS_API_KEY || 'ona_VvoHNg1fdCCUa9eBy4Iz3IfvXdgLfMFI7TNcyHLDKEadPogkbjAeE2iDOs6M7Aey',\n  baseUrl: process.env.REACT_APP_ONAIROS_BASE_URL || 'https://api2.onairos.uk',\n  sdkType: 'web',\n  enableHealthMonitoring: true,\n  enableAutoRefresh: true,\n  enableConnectionValidation: true,\n};\n\nconst fadeSlideInKeyframes = `\n@keyframes fadeSlideIn {\n  from { opacity: 0; transform: translateX(var(--slide-x)); }\n  to { opacity: 1; transform: translateX(0); }\n}\n`;\n\nexport default function UniversalOnboarding({ onComplete, onBack, appIcon, appName, username, testMode, priorityPlatform, rawMemoriesOnly, rawMemoriesConfig, isMobile: isMobileProp = false }) {\n  const lottieRef = useRef(null);\n  const lastFrameRef = useRef(0);\n  const rafRef = useRef(null);\n\n  const [connectedAccounts, setConnectedAccounts] = useState({});\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [connectingPlatform, setConnectingPlatform] = useState(null);\n  const [selected, setSelected] = useState('Instagram');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [showChatGPTModal, setShowChatGPTModal] = useState(false);\n\n  // swipe state\n  const touchStartX = useRef(0);\n  const touchDeltaX = useRef(0);\n\n  // Mobile detection - use prop if provided (from layout), else detect\n  // Only use actual mobile device detection, not window width (to avoid false positives from dev tools)\n  const isActualMobileDevice = typeof navigator !== 'undefined' && \n    /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n  const isNativePlatform = typeof window !== 'undefined' && \n    window.Capacitor?.isNativePlatform?.() === true;\n  const isMobile = isMobileProp || isNativePlatform || isActualMobileDevice;\n\n  const [vh, setVh] = useState(() => (typeof window !== 'undefined' ? window.innerHeight : 800));\n  useEffect(() => {\n    const onResize = () => setVh(window.innerHeight);\n    window.addEventListener('resize', onResize);\n    return () => window.removeEventListener('resize', onResize);\n  }, []);\n\n  const FOOTER_H = 88;\n\n  // MOBILE ONLY: persona placement / sizing - GIVE MORE SPACE TO PERSONA\n  const isSmallMobile = isMobile && vh < 700;\n  // Desktop adjustments: Reduce persona size and top position to fit modal without scroll\n  // We allow overlap on desktop if needed\n  const personaSide = isMobile \n    ? (isSmallMobile ? Math.min(vh * 0.46, 420) : Math.min(vh * 0.52, 480))\n    : Math.min(vh * 0.45, 420); // Desktop: allow larger size, will position absolutely\n  \n  const PERSONA_TOP = isMobile \n    ? (isSmallMobile ? 28 : 44) \n    : 40; // Desktop: Higher up\n\n  // MOBILE ONLY: icon layout - PUSH ICONS DOWN significantly\n  // Desktop: Adjust spacing to fit\n  const SLOT = isMobile \n    ? Math.max(50, Math.min(60, Math.floor(vh * 0.07)))\n    : 60; // Desktop: fixed reasonable size\n  const CIRCLE = isMobile \n    ? (isSmallMobile ? 36 : 40)\n    : 40; // Desktop: fixed reasonable size\n  const GAP_PAGE1 = isMobile ? 10 : 12; // Desktop: original\n  const GAP_PAGE2 = isMobile ? 18 : 20; // Desktop: original\n  const ACTIVE_SCALE = isMobile \n    ? (vh < 760 ? 1.15 : 1.25)\n    : 1.2; // Desktop: standard scale\n\n  const ICONS_H = isMobile \n    ? (isSmallMobile ? 70 : 80)\n    : 76; // Desktop: tighter height\n  const ICONS_TOP_OFFSET = isMobile \n    ? Math.max(200, Math.min(280, Math.round(vh * 0.32)))\n    : 200; // Desktop: unused but kept for ref\n\n  const igGradId = useId();\n\n  // ---- official brand SVGs (compact, consistent viewboxes) ----\n  const Brand = {\n    ChatGPT: <img src={chatgptIcon} alt=\"ChatGPT\" style={{ width: 20, height: 20, objectFit: 'contain' }} />,\n    Claude: <img src={claudeIcon} alt=\"Claude\" style={{ width: 20, height: 20, objectFit: 'contain' }} />,\n    Gemini: <img src={geminiIcon} alt=\"Gemini\" style={{ width: 20, height: 20, objectFit: 'contain' }} />,\n    Grok: <img src={grokIcon} alt=\"Grok\" style={{ width: 20, height: 20, objectFit: 'contain' }} />,\n    Instagram: (\n      <svg viewBox=\"0 0 24 24\" aria-hidden width=\"100%\" height=\"100%\">\n        <defs>\n          <radialGradient id={igGradId} cx=\"0.5\" cy=\"1\" r=\"1\">\n            <stop offset=\"0%\" stopColor=\"#FDBB4B\"/>\n            <stop offset=\"40%\" stopColor=\"#E95950\"/>\n            <stop offset=\"70%\" stopColor=\"#BC2A8D\"/>\n            <stop offset=\"100%\" stopColor=\"#4C68D7\"/>\n          </radialGradient>\n        </defs>\n        <path fill={`url(#${igGradId})`} d=\"M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 5.5A4.5 4.5 0 1 0 16.5 12 4.5 4.5 0 0 0 12 7.5zm0 7.4A2.9 2.9 0 1 1 14.9 12 2.9 2.9 0 0 1 12 14.9Zm5.35-8.25a1.15 1.15 0 1 0 1.15 1.15 1.15 1.15 0 0 0-1.15-1.15Z\"/>\n      </svg>\n    ),\n    YouTube: (\n      <svg viewBox=\"0 0 24 24\" aria-hidden width=\"100%\" height=\"100%\">\n        <path fill=\"#FF0000\" d=\"M22.54 6.42a3 3 0 0 0-2.11-2.12C18.49 3.75 12 3.75 12 3.75s-6.49 0-8.43.55A3 3 0 0 0 1.46 6.42 31.63 31.63 0 0 0 1 12a31.63 31.63 0 0 0 .46 5.58 3 3 0 0 0 2.11 2.12C5.51 20.25 12 20.25 12 20.25s6.49 0 8.43-.55a3 3 0 0 0 2.11-2.12A31.63 31.63 0 0 0 23 12a31.63 31.63 0 0 0-.46-5.58z\"/>\n        <path fill=\"#FFF\" d=\"M10 8.75v6.5l6-3.25-6-3.25z\"/>\n        </svg>\n      ),\n    Reddit: (\n      <img src=\"https://upload.wikimedia.org/wikipedia/en/b/bd/Reddit_Logo_Icon.svg\" alt=\"Reddit\" width=\"100%\" height=\"100%\" />\n      ),\n    LinkedIn: (\n      <img src=\"https://upload.wikimedia.org/wikipedia/commons/c/ca/LinkedIn_logo_initials.png\" alt=\"LinkedIn\" width=\"100%\" height=\"100%\" />\n      ),\n    Twitter: (\n      <svg viewBox=\"0 0 24 24\" aria-hidden width=\"100%\" height=\"100%\">\n        <path fill=\"#1DA1F2\" d=\"M23.643 4.937c-.835.37-1.732.62-2.675.733.962-.576 1.7-1.49 2.048-2.578-.9.534-1.897.922-2.958 1.13-.85-.904-2.06-1.47-3.4-1.47-2.572 0-4.658 2.086-4.658 4.66 0 .364.042.718.12 1.06-3.873-.195-7.304-2.05-9.602-4.868-.4.69-.63 1.49-.63 2.342 0 1.616.823 3.043 2.072 3.878-.764-.025-1.482-.234-2.11-.583v.06c0 2.257 1.605 4.14 3.737 4.568-.392.106-.803.162-1.227.162-.3 0-.593-.028-.877-.082.593 1.85 2.313 3.198 4.352 3.234-1.595 1.25-3.604 1.995-5.786 1.995-.376 0-.747-.022-1.112-.065 2.062 1.323 4.51 2.093 7.14 2.093 8.57 0 13.255-7.098 13.255-13.254 0-.2-.005-.402-.014-.602.91-.658 1.7-1.477 2.323-2.41z\"/>\n        </svg>\n      ),\n  };\n\n  const aiLinks = {\n    ChatGPT: 'https://chat.openai.com',\n    Claude: 'https://claude.ai',\n    Gemini: 'https://gemini.google.com',\n    Grok: 'https://grok.x.ai',\n  };\n\n  const descriptions = {\n    ChatGPT: <>We analyze your <strong className=\"font-semibold\">prompt style</strong> and <strong className=\"font-semibold\">chat history</strong> to match your writing and thinking patterns.</>,\n    Claude: <>We learn your <strong className=\"font-semibold\">document workflow</strong> and <strong className=\"font-semibold\">reasoning preferences</strong> to tune output format and detail.</>,\n    Gemini: <>We study your <strong className=\"font-semibold\">search patterns</strong> and <strong className=\"font-semibold\">multimodal usage</strong> to improve response accuracy.</>,\n    Grok: <>We adapt to your <strong className=\"font-semibold\">X posting style</strong> and <strong className=\"font-semibold\">meme literacy</strong> to match your tone.</>,\n    Twitter: <>We analyze your <strong className=\"font-semibold\">tweets</strong> and <strong className=\"font-semibold\">interests</strong> to understand your preferences.</>,\n    YouTube: <>We study your <strong className=\"font-semibold\">watch history</strong> and <strong className=\"font-semibold\">interactions</strong> to learn your interests.</>,\n    Reddit: <>We examine your <strong className=\"font-semibold\">search history</strong> and <strong className=\"font-semibold\">discussions</strong> to understand your interests.</>,\n    Instagram: <>We analyze your <strong className=\"font-semibold\">photos</strong> and <strong className=\"font-semibold\">interactions</strong> to learn visual preferences.</>,\n    LinkedIn: <>We study your <strong className=\"font-semibold\">professional graph</strong> and <strong className=\"font-semibold\">content</strong> to understand career interests.</>,\n  };\n\n  const allPlatforms = [\n    // Page 1\n    { name: 'Instagram', connector: 'instagram', icon: Brand.Instagram },\n    { name: 'YouTube', connector: 'youtube', icon: Brand.YouTube },\n    { name: 'ChatGPT', connector: 'chatgpt', icon: Brand.ChatGPT, directLink: aiLinks.ChatGPT },\n    // Page 2\n    { name: 'Claude', connector: 'claude', icon: Brand.Claude, directLink: aiLinks.Claude },\n    { name: 'Gemini', connector: 'gemini', icon: Brand.Gemini, directLink: aiLinks.Gemini },\n    { name: 'Twitter', connector: 'twitter', icon: Brand.Twitter },\n    // Page 3\n    { name: 'LinkedIn', connector: 'linkedin', icon: Brand.LinkedIn },\n    { name: 'Reddit', connector: 'reddit', icon: Brand.Reddit },\n    { name: 'Grok', connector: 'grok', icon: Brand.Grok, directLink: aiLinks.Grok },\n  ];\n\n  const getPlatformsForPage = (page) => {\n    if (page === 1) return allPlatforms.slice(0, 3);\n    if (page === 2) return allPlatforms.slice(3, 6);\n    return allPlatforms.slice(6);\n  };\n\n  const platforms = getPlatformsForPage(currentPage);\n\n  useEffect(() => {\n    // Listener for immediate UI update from deep link (when component is already mounted)\n    const handleAuthSuccess = (e) => {\n       const { platform } = e.detail;\n       console.log(` Event received: OAuth success for ${platform}`);\n       const plat = allPlatforms.find((p) => p.connector === platform);\n       if (plat) {\n          setConnectedAccounts((s) => {\n            // Read existing connections from localStorage, not from stale state\n            const userData = JSON.parse(localStorage.getItem('onairosUser') || '{}');\n            const existingArray = userData.connectedAccounts || [];\n            const existingObj = Array.isArray(existingArray) \n              ? existingArray.reduce((acc, p) => ({ ...acc, [p]: true }), {})\n              : {};\n            \n            // Merge with new connection\n            const updated = { ...existingObj, [plat.name]: true };\n            const connectedArray = Object.entries(updated).filter(([, v]) => v).map(([k]) => k);\n            userData.connectedAccounts = connectedArray;\n            localStorage.setItem('onairosUser', JSON.stringify(userData));\n            console.log(` Saved ${plat.name} to localStorage (event):`, connectedArray);\n            return updated;\n          });\n       }\n    };\n    if (typeof window !== 'undefined') {\n      window.addEventListener('onairos-oauth-success', handleAuthSuccess);\n    }\n\n    // Check for OAuth success on mount (after redirect back from mobile)\n    const checkOAuthSuccess = () => {\n      // 1. Check URL-based return signal (from OnairosButton or direct URL params)\n      // Note: OnairosButton cleans up URL params, so we might check sessionStorage set by it\n      const sessionSuccess = sessionStorage.getItem('onairos_oauth_return_success');\n      const sessionPlatform = sessionStorage.getItem('onairos_oauth_return_platform');\n      \n      if (sessionSuccess === 'true' && sessionPlatform) {\n        console.log(` ${sessionPlatform} OAuth detected via session signal`);\n        const plat = allPlatforms.find((p) => p.connector === sessionPlatform);\n        if (plat) {\n          setConnectedAccounts((s) => {\n            // Read existing connections from localStorage, not from stale state\n            const userData = JSON.parse(localStorage.getItem('onairosUser') || '{}');\n            const existingArray = userData.connectedAccounts || [];\n            const existingObj = Array.isArray(existingArray) \n              ? existingArray.reduce((acc, p) => ({ ...acc, [p]: true }), {})\n              : {};\n            \n            // Merge with new connection\n            const updated = { ...existingObj, [plat.name]: true };\n            const connectedArray = Object.entries(updated).filter(([, v]) => v).map(([k]) => k);\n            userData.connectedAccounts = connectedArray;\n            localStorage.setItem('onairosUser', JSON.stringify(userData));\n            console.log(` Saved ${plat.name} to localStorage (session):`, connectedArray);\n            return updated;\n          });\n        }\n        // Clean up\n        sessionStorage.removeItem('onairos_oauth_return_success');\n        sessionStorage.removeItem('onairos_oauth_return_platform');\n        return;\n      }\n\n      // 2. Fallback to existing localStorage logic (same-domain or preserved state)\n      const oauthContext = localStorage.getItem('onairos_oauth_context');\n      const platformConnector = localStorage.getItem('onairos_oauth_platform');\n      \n      // Only process if we're coming back from platform connector flow\n      if (oauthContext === 'platform-connector' && platformConnector) {\n        const localStorageKey = `onairos_${platformConnector}_success`;\n        const timestampKey = `onairos_${platformConnector}_timestamp`;\n        const success = localStorage.getItem(localStorageKey);\n        const timestamp = localStorage.getItem(timestampKey);\n        \n        if (success === 'true' && timestamp) {\n          const timestampNum = parseInt(timestamp, 10);\n          const now = Date.now();\n          \n          // Only process if timestamp is recent (within last 30 seconds)\n          if (now - timestampNum < 30000) {\n            console.log(` ${platformConnector} OAuth completed - processing redirect back`);\n            \n            // Find platform by connector\n            const plat = allPlatforms.find((p) => p.connector === platformConnector);\n            if (plat) {\n              // Mark as connected\n              setConnectedAccounts((s) => {\n                // Read existing connections from localStorage, not from stale state\n                const userData = JSON.parse(localStorage.getItem('onairosUser') || '{}');\n                const existingArray = userData.connectedAccounts || [];\n                const existingObj = Array.isArray(existingArray) \n                  ? existingArray.reduce((acc, p) => ({ ...acc, [p]: true }), {})\n                  : {};\n                \n                // Merge with new connection\n                const updated = { ...existingObj, [plat.name]: true };\n                const connectedArray = Object.entries(updated).filter(([, v]) => v).map(([k]) => k);\n                userData.connectedAccounts = connectedArray;\n                localStorage.setItem('onairosUser', JSON.stringify(userData));\n                console.log(` Saved ${plat.name} to localStorage (context):`, connectedArray);\n                return updated;\n              });\n            }\n            \n            // Clean up localStorage\n            localStorage.removeItem(localStorageKey);\n            localStorage.removeItem(timestampKey);\n            localStorage.removeItem('onairos_oauth_context');\n            localStorage.removeItem('onairos_oauth_platform');\n            localStorage.removeItem('onairos_return_url');\n          }\n        }\n      }\n    };\n\n    checkOAuthSuccess();\n    \n    // Legacy: Load OAuth platform returns (for backward compatibility)\n    const p = localStorage.getItem('onairos_oauth_platform');\n    if (p && !localStorage.getItem('onairos_oauth_context')) {\n      localStorage.removeItem('onairos_oauth_platform');\n      localStorage.removeItem('onairos_oauth_return');\n      setConnectedAccounts((s) => {\n        // Read existing connections from localStorage, not from stale state\n        const userData = JSON.parse(localStorage.getItem('onairosUser') || '{}');\n        const existingArray = userData.connectedAccounts || [];\n        const existingObj = Array.isArray(existingArray) \n          ? existingArray.reduce((acc, platform) => ({ ...acc, [platform]: true }), {})\n          : {};\n        \n        // Merge with new connection\n        const updated = { ...existingObj, [p]: true };\n        const connectedArray = Object.entries(updated).filter(([, v]) => v).map(([k]) => k);\n        userData.connectedAccounts = connectedArray;\n        localStorage.setItem('onairosUser', JSON.stringify(userData));\n        console.log(` Saved ${p} to localStorage (legacy):`, connectedArray);\n        return updated;\n      });\n    }\n    \n    // Load persisted connected accounts from user data\n    try {\n      const userData = JSON.parse(localStorage.getItem('onairosUser') || '{}');\n      console.log(' UniversalOnboarding mount: Loading persisted accounts from localStorage:', userData.connectedAccounts);\n      if (userData.connectedAccounts && Array.isArray(userData.connectedAccounts)) {\n        // Convert array to object format\n        const accountsObj = userData.connectedAccounts.reduce((acc, platform) => {\n          acc[platform] = true;\n          return acc;\n        }, {});\n        console.log(' Converted to object format:', accountsObj);\n        setConnectedAccounts(accountsObj);\n      } else {\n        console.log(' No valid connectedAccounts in localStorage');\n      }\n    } catch (error) {\n      console.error(' Failed to load persisted connected accounts:', error);\n    }\n    \n    return () => {\n      if (typeof window !== 'undefined') {\n        window.removeEventListener('onairos-oauth-success', handleAuthSuccess);\n      }\n    };\n  }, []);\n\n  async function connectToPlatform(name) {\n    const plat = allPlatforms.find((p) => p.name === name);\n    if (!plat) return false;\n    try {\n      // For direct-link platforms (no OAuth), mark connected immediately and return\n      if (plat.directLink) {\n        setConnectedAccounts((s) => ({ ...s, [name]: true }));\n        setIsConnecting(false);\n        setConnectingPlatform(null);\n        return true;\n      }\n\n      // Immediately reflect selection in UI without spinner while starting OAuth\n      console.log(` Connecting to ${name} - updating connectedAccounts state`);\n      setConnectedAccounts((s) => {\n        const updated = { ...s, [name]: true };\n        console.log(' Updated connectedAccounts:', updated);\n        return updated;\n      });\n      setIsConnecting(true);\n      setConnectingPlatform(name);\n      \n      // BYPASS: Twitter endpoint is 404, so just keep toggle ON without API call\n      if (name === 'Twitter') {\n        console.log(' Twitter: Bypassing API call (endpoint not available), keeping toggle ON');\n        setIsConnecting(false);\n        setConnectingPlatform(null);\n        return true;\n      }\n      \n      const username = localStorage.getItem('username') || (JSON.parse(localStorage.getItem('onairosUser') || '{}')?.email) || 'user@example.com';\n\n      // Determine return URL based on platform\n      // For Desktop/Web: Send empty string/null to prevent backend from generating a redirect URL\n      // This forces oauth-callback.html to NOT redirect, allowing the popup/iframe to close naturally via postMessage or window.close()\n      const isCapacitorNative = typeof window !== 'undefined' && \n        window.Capacitor && \n        typeof window.Capacitor.isNativePlatform === 'function' && \n        window.Capacitor.isNativePlatform();\n      \n      const isMobileBrowser = typeof navigator !== 'undefined' &&\n        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\n      // Effective mobile check for flow control (use prop or detection)\n      const effectiveMobile = isMobileProp || isMobileBrowser;\n\n      let returnUrl = ''; // Default to empty for Desktop Web\n      \n      if (isCapacitorNative) {\n        returnUrl = `mobiletest://oauth-callback?success=true&platform=${plat.connector}`;\n      } else if (effectiveMobile) {\n        // Mobile Web needs redirect back to self\n        // Sanitize URL to prevent recursive params if user is already on a return URL\n        const cleanUrl = window.location.origin + window.location.pathname;\n        returnUrl = cleanUrl;\n      }\n\n      console.log(` Authorizing ${plat.connector} with returnUrl:`, returnUrl || '(none/desktop)');\n\n      // Build session payload for backend (SDK-aware)\n      const sessionPayload = {\n        username,\n      };\n\n      // For mobile web flows, let backend know this is coming from the web SDK\n      // and pass returnUrl inside session for connectors that use parseEnhancedSession (e.g. Reddit)\n      if (effectiveMobile) {\n        sessionPayload.sdkType = 'web';\n        sessionPayload.returnUrl = returnUrl;\n      }\n\n      const bodyPayload = {\n        session: sessionPayload,\n      };\n\n      // Backward compatibility for YouTube route which currently reads req.body.returnUrl\n      // Desktop flows don't need a returnUrl; only send it for mobile web\n      if (!isCapacitorNative && effectiveMobile) {\n        bodyPayload.returnUrl = returnUrl;\n      }\n\n      const res = await fetch(`${sdkConfig.baseUrl}/${plat.connector}/authorize`, {\n        method: 'POST',\n        headers: { 'x-api-key': sdkConfig.apiKey, 'Content-Type': 'application/json' },\n        body: JSON.stringify(bodyPayload),\n      });\n      if (!res.ok) throw new Error('auth failed');\n      const data = await res.json();\n\n      const candidates = (\n        {\n          youtube: ['youtubeURL','youtubeUrl','youtube_url'],\n          linkedin: ['linkedinURL','linkedinUrl','linkedin_url'],\n          reddit: ['redditURL','redditUrl','reddit_url'],\n          pinterest: ['pinterestURL','pinterestUrl','pinterest_url'],\n          instagram: ['instagramURL','instagramUrl','instagram_url'],\n          github: ['githubURL','githubUrl','github_url'],\n          facebook: ['facebookURL','facebookUrl','facebook_url'],\n          gmail: ['gmailURL','gmailUrl','gmail_url'],\n        }[plat.connector]\n      ) || [`${plat.connector}URL`, `${plat.connector}Url`, `${plat.connector}_url`, 'platformURL', 'authUrl', 'url'];\n\n      let oauthUrl = null;\n      console.log(` [DEBUG] ${plat.connector} candidates:`, candidates, 'Response keys:', Object.keys(data));\n      \n      // Fallback: Check for URL in data object (case-insensitive)\n      if (!oauthUrl) {\n         const keys = Object.keys(data);\n         const candidateLower = candidates.map(c => c.toLowerCase());\n         for (const key of keys) {\n            if (candidateLower.includes(key.toLowerCase()) && data[key]) {\n               console.log(` [DEBUG] Found fuzzy match for ${plat.connector}: ${key}`);\n               oauthUrl = data[key];\n               break;\n            }\n         }\n      }\n\n      for (const k of candidates) {\n        if (data[k]) {\n          oauthUrl = data[k];\n          break;\n        }\n      }\n      \n      if (!oauthUrl) {\n        console.error(` No URL found for ${plat.connector} in response:`, data);\n        throw new Error('no url');\n      }\n\n      // PRIORITY 1: Use Capacitor Browser for native apps\n\n      if (isCapacitorNative) {\n        console.log(` Capacitor Native: opening ${plat.connector} OAuth with Browser plugin`);\n        try {\n          // Store context for when user returns\n          const localStorageKey = `onairos_${plat.connector}_success`;\n          localStorage.setItem('onairos_oauth_context', 'platform-connector');\n          localStorage.setItem('onairos_oauth_platform', plat.connector);\n          \n          // Try to set up listener, but don't let it block\n          // Note: 'browserFinished' is fired when the browser is closed by the user or programmatically\n          try {\n            await Browser.addListener('browserFinished', () => {\n              console.log(` Browser closed for ${plat.connector}`);\n              // Only reset if we haven't already detected success\n              if (!localStorage.getItem(localStorageKey)) {\n                 setIsConnecting(false);\n                 setConnectingPlatform(null);\n              }\n            });\n          } catch (listenerError) {\n             console.warn('Browser listener setup failed:', listenerError);\n          }\n          \n          // Ensure Browser.open is awaited and errors caught\n          await Browser.open({ \n            url: oauthUrl,\n            windowName: '_blank',\n            presentationStyle: 'fullscreen'\n          });\n          console.log(` Opened ${plat.connector} OAuth URL in Capacitor Browser`);\n          \n          return true;\n        } catch (err) {\n          console.error(` Capacitor Browser failed for ${plat.connector}:`, err);\n          // Fall through to mobile browser redirect if plugin fails\n        }\n      }\n\n      // PRIORITY 2: Mobile browser - use same-page redirect\n      if (effectiveMobile) {\n        console.log(` Mobile browser/view: redirecting to ${plat.connector} OAuth in same page`);\n        \n        // Store return URL and context for redirect back\n        const returnUrl = window.location.href;\n        localStorage.setItem('onairos_return_url', returnUrl);\n        localStorage.setItem('onairos_oauth_context', 'platform-connector');\n        localStorage.setItem('onairos_oauth_platform', plat.connector);\n        console.log(` Stored return URL for ${plat.connector}:`, returnUrl);\n        \n        // Use same-page redirect on mobile\n        setIsConnecting(false);\n        setConnectingPlatform(null);\n        window.location.href = oauthUrl;\n        return true;\n      }\n\n      // Desktop: open popup\n      const popup = window.open(\n        oauthUrl,\n        'onairos_oauth_popup', \n        'width=500,height=600,scrollbars=yes,resizable=yes'\n      );\n\n      if (!popup || popup.closed || typeof popup.closed === 'undefined') {\n        console.warn(` ${plat.connector} popup blocked, falling back to full-page redirect`);\n        setIsConnecting(false);\n        setConnectingPlatform(null);\n        window.location.href = oauthUrl;\n        return true;\n      }\n\n      // Set up postMessage listener for cross-origin communication\n      const messageHandler = (event) => {\n        // Only accept messages from onairos.uk origin\n        if (event.origin !== 'https://api2.onairos.uk' && \n            event.origin !== 'https://onairos.uk' &&\n            !event.origin.includes('onairos.uk')) {\n          return;\n        }\n\n        if (event.data && event.data.type === 'oauth-success' && event.data.platform === plat.connector) {\n          console.log(` ${plat.connector} OAuth success received via postMessage:`, event.data);\n          window.removeEventListener('message', messageHandler);\n          clearInterval(pollInterval);\n          setIsConnecting(false);\n          setConnectingPlatform(null);\n          // Toggle is already ON from optimistic update\n          \n          // Close popup immediately\n          try {\n            if (popup && !popup.closed) {\n              popup.close();\n            }\n          } catch (e) {\n            // Ignore errors closing popup\n          }\n        }\n      };\n\n      window.addEventListener('message', messageHandler);\n\n      // Poll localStorage for OAuth completion (oauth-callback.html sets this)\n      const localStorageKey = `onairos_${plat.connector}_success`;\n      const timestampKey = `onairos_${plat.connector}_timestamp`;\n      let pollCount = 0;\n      const maxPolls = 300; // 5 minutes max\n\n      const pollInterval = setInterval(() => {\n        pollCount++;\n        \n        try {\n          // Check if popup is closed (works for popups, not tabs)\n          if (popup.closed && pollCount > 10) {\n            clearInterval(pollInterval);\n            window.removeEventListener('message', messageHandler);\n            setIsConnecting(false);\n            setConnectingPlatform(null);\n            console.log(` ${plat.connector} popup was closed`);\n            return;\n          }\n\n          // Check localStorage for success signal\n          const success = localStorage.getItem(localStorageKey);\n          const timestamp = localStorage.getItem(timestampKey);\n          \n          if (success === 'true' && timestamp) {\n            const timestampNum = parseInt(timestamp, 10);\n            const now = Date.now();\n            \n            // Only process if timestamp is recent (within last 30 seconds)\n            if (now - timestampNum < 30000) {\n              console.log(` ${plat.connector} OAuth completed successfully`);\n              clearInterval(pollInterval);\n              window.removeEventListener('message', messageHandler);\n              setIsConnecting(false);\n              setConnectingPlatform(null);\n              // Toggle is already ON from optimistic update\n              \n              // Close popup immediately\n              try {\n                if (!popup.closed) {\n                  popup.close();\n                }\n              } catch (e) {\n                // Ignore errors closing popup\n              }\n              return;\n            }\n          }\n\n          // Timeout after max polls\n          if (pollCount >= maxPolls) {\n            clearInterval(pollInterval);\n            window.removeEventListener('message', messageHandler);\n            setIsConnecting(false);\n            setConnectingPlatform(null);\n            console.log(` [TIMEOUT] ${plat.connector} OAuth polling timed out after 5 minutes`);\n            \n            // Try to close popup if still open\n            try {\n              if (!popup.closed) {\n                popup.close();\n              }\n            } catch (e) {\n              // Ignore errors closing popup\n            }\n          }\n        } catch (error) {\n          console.error(`Error in ${plat.connector} OAuth polling:`, error);\n        }\n      }, 1000);\n\n      return true;\n    } catch (e) {\n      console.error(` Error connecting to ${name}:`, e);\n      // On failure, revert the optimistic toggle\n      setConnectedAccounts((s) => ({ ...s, [name]: false }));\n      setIsConnecting(false); setConnectingPlatform(null); return false;\n    }\n  }\n\n  const handleSwitch = async (name) => {\n    // Mobile: AI direct-link platforms are display-only (no-op on tap)\n    const aiNoopOnMobile = ['ChatGPT', 'Claude', 'Gemini', 'Grok'];\n    if (isMobile && aiNoopOnMobile.includes(name)) {\n      console.log(` ${name} disabled on mobile - no action`);\n      return;\n    }\n    if (isConnecting && connectingPlatform !== name) return;\n    const on = !!connectedAccounts[name];\n    if (on) setConnectedAccounts((s) => ({ ...s, [name]: false }));\n    else await connectToPlatform(name);\n  };\n\n  const connectedCount = Object.values(connectedAccounts).filter(Boolean).length;\n\n  useEffect(() => {\n    if (!lottieRef.current) return;\n    const totalFrames = (personaAnim.op || 0) - (personaAnim.ip || 0);\n    const TOTAL_PLATFORMS = 9; // Total number of platforms across all pages\n    const progress = connectedCount / TOTAL_PLATFORMS;\n    const target = Math.max(0, Math.floor(progress * totalFrames));\n    const start = lastFrameRef.current || 0;\n    const duration = 420; const startTs = performance.now();\n    const step = (now) => {\n      const t = Math.min(1, (now - startTs) / duration);\n      const eased = t < 0.5 ? 2*t*t : -1 + (4 - 2*t)*t;\n      const frame = Math.floor(start + (target - start) * eased);\n      lottieRef.current.goToAndStop(frame, true);\n      if (t < 1) rafRef.current = requestAnimationFrame(step); else lastFrameRef.current = target;\n    };\n    if (rafRef.current) cancelAnimationFrame(rafRef.current);\n    rafRef.current = requestAnimationFrame(step);\n    return () => { if (rafRef.current) cancelAnimationFrame(rafRef.current); };\n  }, [connectedCount]);\n\n  // swipe handlers for smooth paging\n  const onTouchStart = (e) => { touchStartX.current = e.touches[0].clientX; touchDeltaX.current = 0; };\n  const onTouchMove  = (e) => { touchDeltaX.current = e.touches[0].clientX - touchStartX.current; };\n  const onTouchEnd   = () => {\n    const dx = touchDeltaX.current; const THRESH = 40;\n    if (dx < -THRESH && currentPage < 3) setCurrentPage(currentPage + 1);\n    else if (dx > THRESH && currentPage > 1) setCurrentPage(currentPage - 1);\n  };\n\n  return (\n    <div className=\"w-full h-full relative\" style={{ \n      height: '100%',\n      // Hide scrollbars for mobile browser only\n      ...(isMobile && {\n        scrollbarWidth: 'none', /* Firefox */\n        msOverflowStyle: 'none', /* IE/Edge */\n      })\n    }}>\n      <style>\n        {fadeSlideInKeyframes}\n        {/* Hide scrollbar for webkit browsers on mobile */}\n        {isMobile && `\n          .w-full::-webkit-scrollbar,\n          *::-webkit-scrollbar {\n            display: none;\n            width: 0;\n            height: 0;\n          }\n        `}\n      </style>\n\n      {/* persona as background (unchanged) */}\n      <div aria-hidden style={{ \n        position: 'absolute', \n        left: '50%', \n        top: PERSONA_TOP, \n        transform: 'translateX(-50%)', \n        width: personaSide, \n        height: personaSide, \n        zIndex: 0, \n        pointerEvents: 'none', \n        opacity: 0.95 \n      }}>\n        <div className=\"overflow-hidden rounded-[28px] w-full h-full\">\n          <Lottie lottieRef={lottieRef} animationData={personaAnim} autoplay={false} loop={false} style={{ width: '100%', height: '100%' }} />\n        </div>\n      </div>\n\n      {/* content above persona */}\n      <div className=\"relative z-10 h-full flex flex-col\" style={{\n        // Hide scrollbars for mobile browser only\n        ...(isMobile && {\n          scrollbarWidth: 'none', /* Firefox */\n          msOverflowStyle: 'none', /* IE/Edge */\n        })\n      }}>\n        {/* header - MOBILE ONLY: smaller top padding to give persona space */}\n        {/* Desktop: Reduced padding to fit everything */}\n        <div className=\"px-6 text-center flex-shrink-0\" style={{ paddingTop: isMobile ? (isSmallMobile ? '2.0rem' : '2.25rem') : '1.5rem', paddingBottom: isMobile ? '0.5rem' : '0.25rem' }}>\n          {/* Web-only: lift header text slightly so it doesn't overlap the persona head */}\n          <div style={{ transform: isMobile ? 'none' : 'translateY(-10px)' }}>\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2 leading-tight\">Connect App Data</h1>\n            <p className=\"text-gray-600 text-base\">More Connections, Better Personalization.</p>\n          </div>\n        </div>\n\n        {/* Spacer - MOBILE ONLY: push icons/card WAY down so PERSONA SHINES */}\n        {/* Desktop: Increased spacer to push content lower on page */}\n        {isMobile && <div className=\"flex-1\" style={{ minHeight: isSmallMobile ? 120 : 150 }} />}\n        {!isMobile && <div className=\"flex-1\" style={{ minHeight: 80 }} />}\n\n        {/* icons band */}\n        <div className=\"px-6 flex-shrink-0\" style={{ height: ICONS_H }}>\n          {/* Web-only: nudge icon band down slightly without affecting layout below */}\n          <div className=\"h-full flex items-center justify-center\" style={{ transform: isMobile ? 'none' : 'translateY(8px)' }}>\n            <div\n              className=\"grid w-full box-border relative\"\n              onTouchStart={onTouchStart}\n              onTouchMove={onTouchMove}\n              onTouchEnd={onTouchEnd}\n                    style={{\n                gridAutoFlow: 'column',\n                gridTemplateColumns: `repeat(${platforms.length}, minmax(0,1fr))`,\n                columnGap: currentPage === 1 ? GAP_PAGE1 : GAP_PAGE2,\n                alignItems: 'center',\n                justifyItems: 'center',\n                paddingInline: 8,\n                overflow: 'hidden',\n              }}\n            >\n              {platforms.map((p, idx) => {\n                const on = !!connectedAccounts[p.name];\n                const busy = false; // keep icon static visually per request\n                const isSel = selected === p.name;\n                const shift = (currentPage === 1 ? idx : idx - 2) * 14;\n                return (\n                  <div key={p.name} className=\"transition-all duration-300\" style={{ opacity: 0, transform: `translateX(${shift}px)`, animation: 'fadeSlideIn 0.28s forwards', ['--slide-x']: `${shift}px` }}>\n                    <button\n                      type=\"button\"\n                      onClick={() => { \n                        // Mobile: AI direct-link platforms are display-only (no-op on tap)\n                        const aiNoopOnMobile = ['chatgpt', 'claude', 'gemini', 'grok'];\n                        if (isMobile && aiNoopOnMobile.includes(p.connector)) {\n                          console.log(` ${p.name} disabled on mobile - no action`);\n                          return;\n                        }\n\n                        setSelected(p.name);\n                        \n                        // Properly detect native platform (not just Capacitor presence)\n                        const isNativePlatform = typeof window !== 'undefined' && \n                          window.Capacitor?.isNativePlatform?.() === true;\n                        \n                        // Detect mobile browser (not Capacitor native)\n                        const isMobileBrowser = typeof window !== 'undefined' && \n                          window.innerWidth <= 768 && \n                          !isNativePlatform;\n                        \n                        // Debug logging\n                        console.log('UniversalOnboarding Click:', { \n                          platform: p.name, \n                          isMobile, \n                          isMobileProp, \n                          isNativePlatform,\n                          isMobileBrowser,\n                          hasCapacitor: typeof window !== 'undefined' && !!window.Capacitor,\n                          userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : 'unknown'\n                        });\n\n                        // MOBILE BROWSER ONLY: Disable Instagram clicks (show visual selection but don't connect)\n                        if (p.name === 'Instagram' && isMobileBrowser) {\n                          console.log(' Instagram disabled on mobile browser - visual selection only');\n                          return;\n                        }\n\n                        // For ChatGPT, show modal ONLY on DESKTOP (not mobile browser or native app)\n                        if (p.connector === 'chatgpt' && !isNativePlatform && !isMobileBrowser) {\n                          console.log(' Opening ChatGPT Connect Modal (Desktop Only)');\n                          setShowChatGPTModal(true);\n                          return;\n                        }\n                        \n                        // On mobile browser, ChatGPT card is visible but clicking does nothing (like Instagram)\n                        if (p.connector === 'chatgpt' && isMobileBrowser) {\n                          console.log(' ChatGPT disabled on mobile browser - visual selection only');\n                          return;\n                        }\n\n                        if (p.directLink) {\n                          // For direct-link AI tools, just select (don't open)\n                          console.log(`Selecting ${p.name} (direct link platform)`);\n                          setSelected(p.name);\n                        } else {\n                          // For all platforms, icon click should ONLY select, not toggle\n                          console.log(`Selecting ${p.name}`);\n                          setSelected(p.name);\n                        }\n                      }}\n                      className=\"relative grid place-items-center outline-none\"\n                      style={{ width: SLOT, height: SLOT }}\n                      title={p.name}\n                    >\n                      <div \n                        className={`rounded-full transition-all duration-200 ease-out flex items-center justify-center shadow-lg ${on ? 'ring-4 ring-blue-600 border-2 border-white bg-white text-black' : 'border-2 border-gray-300 hover:border-gray-400 bg-white text-black'}`}\n                        style={{ \n                          width: CIRCLE, \n                          height: CIRCLE, \n                          transform: `scale(${isSel ? ACTIVE_SCALE : 1})`, \n                          transformOrigin: 'center',\n                          boxShadow: on ? '0 0 0 4px rgb(37 99 235), 0 4px 6px -1px rgba(0, 0, 0, 0.1)' : undefined\n                        }}\n                      >\n                        <div className=\"flex items-center justify-center\" style={{ width: 20, height: 20 }}>\n                          {p.icon}\n                        </div>\n                      </div>\n                    </button>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n\n        {/* dots navigation (no numbers) - directly under icons, above card */}\n        <div className=\"relative flex items-center justify-center gap-3 select-none flex-shrink-0\" style={{ marginTop: isMobile ? 12 : 24, marginBottom: isMobile ? 20 : 20, zIndex: 25 }}>\n          {[1,2,3].map(n => (\n            <button key={n} onClick={() => setCurrentPage(n)} aria-label={`page ${n}`} className=\"relative\" style={{ width: isMobile ? 6 : 8, height: isMobile ? 6 : 8 }}>\n              <span className={`block rounded-full ${currentPage === n ? 'bg-blue-600 scale-125' : 'bg-gray-300'} transition-transform`} style={{ width: isMobile ? 6 : 8, height: isMobile ? 6 : 8 }} />\n            </button>\n          ))}\n        </div>\n\n        {/* info sheet  positioned using flex, MOBILE ONLY: LOWER */}\n        <div className=\"px-6 flex-shrink-0\" style={{ marginBottom: isMobile ? 24 : 28, zIndex: 20 }}>\n          <div className=\"mx-auto rounded-2xl bg-white shadow-sm border border-gray-200 px-4 py-2.5\" style={{ width: 'min(680px,92%)', maxHeight: isMobile ? (vh * 0.18) : (vh * 0.2) }}>\n            <div className=\"flex items-center justify-between\">\n              <div className=\"text-gray-900 font-medium\">{selected}</div>\n              <button\n                type=\"button\"\n                role=\"switch\"\n                aria-checked={!!connectedAccounts[selected]}\n                aria-label={`toggle ${selected}`}\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  handleSwitch(selected);\n                }}\n                onTouchEnd={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  handleSwitch(selected);\n                }}\n                disabled={isConnecting && connectingPlatform !== selected}\n                className={`relative inline-flex items-center transition-colors disabled:opacity-50 ${connectedAccounts[selected] ? 'bg-black' : 'bg-gray-200'} rounded-full touch-manipulation`}\n                style={{ width: 56, height: 32, WebkitTapHighlightColor: 'transparent', userSelect: 'none', touchAction: 'manipulation' }}\n              >\n                <span\n                  className=\"absolute bg-white rounded-full shadow pointer-events-none\"\n                  style={{\n                    width: 24,\n                    height: 24,\n                    transform: connectedAccounts[selected] ? 'translateX(26px)' : 'translateX(6px)',\n                    transition: 'transform 160ms ease',\n                  }}\n                />\n              </button>\n            </div>\n            <div className=\"mt-3\">\n              <div className=\"rounded-2xl bg-gray-50 text-gray-700 text-sm leading-6 px-4 py-3 shadow-[inset_0_0_0_1px_rgba(0,0,0,0.04)]\">\n                {descriptions[selected] || null}\n              </div>\n              {!isMobileBrowser && !isNativePlatform && selected === 'ChatGPT' && (\n                <div className=\"mt-3 flex justify-end\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowChatGPTModal(true)}\n                    className=\"inline-flex items-center gap-2 rounded-full bg-slate-900 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-900\"\n                  >\n                    <span>Connect ChatGPT</span>\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"16\"\n                      height=\"16\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M10 6h8m0 0v8m0-8L6 18\"\n                      />\n                    </svg>\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* footer  anchored at bottom using flex */}\n        <div className=\"px-6 flex-shrink-0\" style={{ paddingBottom: isMobile ? 12 : 16, background: isMobile ? 'transparent' : 'linear-gradient(to top, white 60%, rgba(255,255,255,0.9) 85%, rgba(255,255,255,0))', zIndex: 30 }}>\n          <div className=\"w-full bg-gray-900 hover:bg-gray-800 rounded-full text-base font-medium flex items-center justify-center gap-2 cursor-pointer transition-colors\"\n            style={{ paddingTop: isSmallMobile ? 12 : 16, paddingBottom: isSmallMobile ? 12 : 16, color: '#ffffff' }}\n            onClick={() => {\n            console.log(' UniversalOnboarding: Update clicked');\n            console.log(' Current connectedAccounts state:', connectedAccounts);\n            const connected = Object.entries(connectedAccounts).filter(([, v]) => v).map(([k]) => k);\n            console.log(' Sending to onComplete:', { connectedAccounts: connected, totalConnections: connected.length });\n            onComplete?.({ connectedAccounts: connected, totalConnections: connected.length });\n          }}>\n            Update\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"none\" stroke=\"#ffffff\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" /></svg>\n          </div>\n          <div onClick={() => onComplete?.({ connectedAccounts: [], totalConnections: 0 })} className=\"w-full text-gray-600 text-base font-medium py-2 text-center cursor-pointer hover:text-gray-800 transition-colors\" style={{ paddingTop: isSmallMobile ? 6 : 8, paddingBottom: isSmallMobile ? 6 : 8 }}>Skip</div>\n        </div>\n      </div>\n      {/* Modal - Always render if state is true, regardless of isMobile prop */}\n      <ConnectChatGPTModal\n        open={showChatGPTModal}\n        onClose={() => setShowChatGPTModal(false)}\n        onConnected={() => {\n          setConnectedAccounts((s) => ({ ...s, ChatGPT: true }));\n        }}\n      />\n    </div>\n  );\n}","import React, { useState, useEffect } from 'react';\r\n\r\nexport default function PinSetup({ onComplete, onBack, userEmail }) {\r\n  const [pin, setPin] = useState('');\r\n  const [pinRequirements, setPinRequirements] = useState({\r\n    length: false,\r\n    uppercase: false,\r\n    number: false,\r\n  });\r\n\r\n  // Check PIN requirements\r\n  useEffect(() => {\r\n    setPinRequirements({\r\n      length: pin.length >= 6,\r\n      uppercase: /[A-Z]/.test(pin),\r\n      number: /\\d/.test(pin),\r\n    });\r\n  }, [pin]);\r\n\r\n  const allRequirementsMet = pinRequirements.length && pinRequirements.uppercase && pinRequirements.number;\r\n\r\n  const handleSubmit = () => {\r\n    if (allRequirementsMet) {\r\n      onComplete({\r\n        pin: pin, // This should be hashed in production\r\n        pinCreated: true,\r\n        timestamp: new Date().toISOString()\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full h-full flex flex-col\" style={{ height: '100%', minHeight: 0 }}>\r\n      {/* Content - Flexible center area */}\r\n      <div className=\"px-6 pt-16 flex-1 flex flex-col\" style={{ minHeight: 0, overflow: 'hidden' }}>\r\n        <div className=\"mb-6 flex-shrink-0\">\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Create a PIN</h1>\r\n          <p className=\"text-gray-600 text-base\">A PIN so only you have the access to your data</p>\r\n        </div>\r\n\r\n        <div className=\"mb-6 flex-shrink-0\">\r\n          <input\r\n            type=\"password\"\r\n            value={pin}\r\n            onChange={(e) => setPin(e.target.value)}\r\n            className=\"w-full px-4 py-4 border-2 border-gray-300 rounded-xl text-center text-lg font-medium focus:border-gray-900 focus:outline-none bg-white !text-black\"\r\n            placeholder=\"Enter your PIN\"\r\n            maxLength={20}\r\n            style={{\r\n              WebkitTextFillColor: '#000000',\r\n              backgroundColor: '#FFFFFF',\r\n              color: '#000000'\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        {/* Scrollable requirements list */}\r\n        <div className=\"flex-1 overflow-y-auto\" style={{ minHeight: 0 }}>\r\n          <div className=\"space-y-3 pb-4\">\r\n            <p className=\"text-gray-900 font-medium mb-4\">Your PIN must:</p>\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div\r\n                  className={`w-5 h-5 rounded-full border-2 ${pinRequirements.length ? \"border-green-500 bg-green-500\" : \"border-gray-300 bg-white\"}`}\r\n                >\r\n                  {pinRequirements.length && (\r\n                    <svg className=\"w-3 h-3 text-white m-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                    </svg>\r\n                  )}\r\n                </div>\r\n                <span className=\"text-gray-700\">Be at least 6 characters in length.</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-3\">\r\n                <div\r\n                  className={`w-5 h-5 rounded-full border-2 ${pinRequirements.uppercase ? \"border-green-500 bg-green-500\" : \"border-gray-300 bg-white\"}`}\r\n                >\r\n                  {pinRequirements.uppercase && (\r\n                    <svg className=\"w-3 h-3 text-white m-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                    </svg>\r\n                  )}\r\n                </div>\r\n                <span className=\"text-gray-700\">Contain an uppercase letter.</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-3\">\r\n                <div\r\n                  className={`w-5 h-5 rounded-full border-2 ${pinRequirements.number ? \"border-green-500 bg-green-500\" : \"border-gray-300 bg-white\"}`}\r\n                >\r\n                  {pinRequirements.number && (\r\n                    <svg className=\"w-3 h-3 text-white m-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                    </svg>\r\n                  )}\r\n                </div>\r\n                <span className=\"text-gray-700\">Contain a number.</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Buttons - Fixed at bottom */}\r\n      <div className=\"px-6 pb-6 pt-4 flex-shrink-0 space-y-3\" style={{ minHeight: 'auto' }}>\r\n        <div\r\n          className={`w-full rounded-full py-4 text-base font-medium flex items-center justify-center gap-2 transition-colors ${\r\n            allRequirementsMet \r\n              ? \"bg-gray-900 hover:bg-gray-800 cursor-pointer\" \r\n              : \"bg-gray-300 text-gray-500 cursor-not-allowed\"\r\n          }`}\r\n          style={allRequirementsMet ? { color: '#ffffff' } : {}}\r\n          onClick={allRequirementsMet ? handleSubmit : undefined}\r\n        >\r\n          Continue\r\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} ","import React, { useState } from \"react\";\r\n\r\n/* -------------------------\r\n   ICON COMPONENTS\r\n-------------------------- */\r\nconst Icon = ({ type }) => {\r\n  const base = \"w-4 h-4 text-gray-700\";\r\n\r\n  switch (type) {\r\n    case \"User\":\r\n      return (\r\n        <svg className={base} viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4\r\n           1.79-4 4 1.79 4 4 4zm0 2c-2.67\r\n           0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"/>\r\n        </svg>\r\n      );\r\n    case \"Memory\":\r\n      return (\r\n        <svg className={base} viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M12 2C6.48 2 2 6.48 2\r\n           12s4.48 10 10 10 10-4.48 10-10S17.52\r\n           2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z\"/>\r\n        </svg>\r\n      );\r\n    case \"Grid3X3\":\r\n      return (\r\n        <svg className={base} viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10\r\n           0h8V11h-8v10zm0-18v6h8V3h-8z\"/>\r\n        </svg>\r\n      );\r\n    case \"Brain\":\r\n      return (\r\n        <svg className={base} viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M11.99 2C6.47 2 2 6.48 2\r\n           12s4.47 10 9.99 10C17.52\r\n           22 22 17.52 22 12S17.52\r\n           2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8\r\n           8-8 8 3.58 8 8-3.58 8-8\r\n           8zm3.5-9c.83 0 1.5-.67\r\n           1.5-1.5S16.33 8 15.5\r\n           8 14 8.67 14 9.5s.67 1.5\r\n           1.5 1.5zm-7 0c.83 0 1.5-.67\r\n           1.5-1.5S9.33 8 8.5\r\n           8 7 8.67 7 9.5s.67 1.5\r\n           1.5 1.5zm3.5 6.5c2.33\r\n           0 4.31-1.46 5.11-3.5H6.89c.8\r\n           2.04 2.78 3.5 5.11 3.5z\"/>\r\n        </svg>\r\n      );\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n\r\n/* -------------------------\r\n   TOGGLE (soft apple style)\r\n-------------------------- */\r\nconst DataTypeToggle = ({ dataType, enabled, onToggle, isNative }) => {\r\n  const handle = () => {\r\n    if (dataType.required) return;\r\n    onToggle(dataType.id, !enabled);\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={handle}\r\n      className=\"\r\n        w-full flex items-center justify-between\r\n        py-2.5 px-2\r\n        bg-white/40 backdrop-blur-sm\r\n        hover:bg-white/70\r\n        transition rounded-xl shadow-sm\r\n      \"\r\n    >\r\n      <div className=\"flex items-center gap-3\">\r\n        <div className=\"w-7 h-7 flex items-center justify-center rounded-full bg-gray-100\">\r\n          <Icon type={dataType.icon} />\r\n        </div>\r\n        <span className={`${isNative ? 'text-[15px]' : 'text-[14px]'} text-gray-900 font-medium`}>\r\n          {dataType.name}\r\n        </span>\r\n      </div>\r\n\r\n      <div\r\n        className={`w-5 h-5 rounded-md border flex items-center justify-center shadow-sm\r\n          transition\r\n          ${enabled\r\n            ? \"bg-gray-900 border-gray-900\"\r\n            : \"bg-white border-gray-300\"\r\n          }`}\r\n      >\r\n        {enabled && (\r\n          <svg className=\"w-3 h-3 text-white\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n            <path d=\"M16.707 5.293a1 1 0 010\r\n            1.414l-8 8a1 1 0 01-1.414\r\n            0l-4-4a1 1 0 011.414-1.414L8\r\n            12.586l7.293-7.293a1 1 0\r\n            011.414 0z\"/>\r\n          </svg>\r\n        )}\r\n      </div>\r\n    </button>\r\n  );\r\n};\r\n\r\n/* -------------------------\r\n   MAIN COMPONENT\r\n-------------------------- */\r\n\r\nconst options = [\r\n  { id: \"basic\", name: \"Basic Profile\", icon: \"User\", required: true },\r\n  { id: \"rawMemories\", name: \"Raw Memory Data\", icon: \"Memory\" },\r\n  { id: \"preferences\", name: \"User Preferences\", icon: \"Grid3X3\" },\r\n  { id: \"personality\", name: \"Personality Traits\", icon: \"Brain\" },\r\n];\r\n\r\nconst DataRequest = ({ appName = \"My App\", onComplete, onConnectMoreApps, connectedPlatforms = [], showTime = false }) => {\r\n  const [selected, setSelected] = useState({\r\n    basic: true,\r\n    rawMemories: false,\r\n    preferences: false,\r\n    personality: false,\r\n  });\r\n\r\n  const [freq, setFreq] = useState(\"weekly\");\r\n\r\n  const isWrappedApp = typeof appName === 'string' && appName.toLowerCase().includes('wrapped');\r\n\r\n  const toggle = (id, val) =>\r\n    setSelected((p) => ({ ...p, [id]: val }));\r\n\r\n  const selectedCount = Object.values(selected).filter(Boolean).length;\r\n\r\n  // Ensure we actually show connected platforms even if prop isn't passed\r\n  const getConnected = () => {\r\n    console.log(' DataRequest getConnected:', { \r\n      connectedPlatforms, \r\n      isArray: Array.isArray(connectedPlatforms),\r\n      type: typeof connectedPlatforms \r\n    });\r\n    \r\n    // If array provided, use it\r\n    if (Array.isArray(connectedPlatforms) && connectedPlatforms.length > 0) {\r\n      console.log(' Using connectedPlatforms prop (array):', connectedPlatforms);\r\n      return connectedPlatforms;\r\n    }\r\n    \r\n    // If object provided, map truthy keys\r\n    if (connectedPlatforms && typeof connectedPlatforms === \"object\" && !Array.isArray(connectedPlatforms)) {\r\n      const mapped = Object.entries(connectedPlatforms).filter(([_, v]) => Boolean(v)).map(([k]) => k);\r\n      console.log(' Using connectedPlatforms prop (object):', mapped);\r\n      return mapped;\r\n    }\r\n    \r\n    // Fallback: try localStorage onairosUser\r\n    try {\r\n      const u = JSON.parse(localStorage.getItem(\"onairosUser\") || \"{}\");\r\n      if (u && u.connectedAccounts) {\r\n        // Check if it's an array\r\n        if (Array.isArray(u.connectedAccounts) && u.connectedAccounts.length > 0) {\r\n          console.log(' Using localStorage connectedAccounts (array):', u.connectedAccounts);\r\n          return u.connectedAccounts;\r\n        }\r\n        // Check if it's an object\r\n        if (typeof u.connectedAccounts === \"object\") {\r\n          const mapped = Object.entries(u.connectedAccounts).filter(([_, v]) => Boolean(v)).map(([k]) => k);\r\n          console.log(' Using localStorage connectedAccounts (object):', mapped);\r\n          return mapped;\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error(' Failed to read localStorage:', e);\r\n    }\r\n    \r\n    console.log(' No connected platforms found');\r\n    return [];\r\n  };\r\n  const platforms = getConnected();\r\n  console.log(' Final platforms to display:', platforms);\r\n\r\n  const isCapacitorNative = typeof window !== 'undefined' && \r\n    window.Capacitor && \r\n    typeof window.Capacitor.isNativePlatform === 'function' && \r\n    window.Capacitor.isNativePlatform();\r\n\r\n  // Check if user has any LLM connections\r\n  const hasLLMConnections = () => {\r\n    const llmPlatforms = ['chatgpt', 'claude', 'gemini', 'grok', 'ChatGPT', 'Claude', 'Gemini', 'Grok'];\r\n    return platforms.some(p => llmPlatforms.includes(p));\r\n  };\r\n\r\n  // Filter options based on LLM connections\r\n  const availableOptions = options.filter(opt => {\r\n    if (opt.id === 'rawMemories') {\r\n      return hasLLMConnections();\r\n    }\r\n    return true;\r\n  });\r\n\r\n  const freqToPercent = (f) => (f === \"once\" ? 0 : f === \"weekly\" ? 50 : 100);\r\n  const handleRailClick = (e) => {\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    const x = Math.max(0, Math.min(rect.width, e.clientX - rect.left));\r\n    const ratio = x / rect.width;\r\n    if (ratio < 1 / 3) setFreq(\"once\");\r\n    else if (ratio < 2 / 3) setFreq(\"weekly\");\r\n    else setFreq(\"daily\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full max-h-full md:max-h-[90vh] bg-white/70 backdrop-blur-2xl rounded-3xl overflow-hidden\">\r\n\r\n      {/* CONTENT */}\r\n      <div className=\"flex-1 overflow-y-auto px-6 pt-6 md:pt-10 pb-4\">\r\n\r\n        {/* ICONS */}\r\n        <div className=\"flex justify-center items-center gap-4 mb-5 md:mb-6\">\r\n          {/* Wrapped: brain -> Onairos. Non-wrapped: Onairos -> app placeholder */}\r\n          <div className={`${isCapacitorNative ? 'w-14 h-14' : 'w-12 h-12'} rounded-2xl bg-white shadow flex items-center justify-center`}>\r\n            {isWrappedApp ? (\r\n              <span className={`${isCapacitorNative ? 'text-3xl' : 'text-2xl'}`} aria-label=\"Brain\"></span>\r\n            ) : (\r\n              <img \r\n                src=\"https://onairos.sirv.com/Images/OnairosBlack.png\" \r\n                alt=\"Onairos\"\r\n                className={`${isCapacitorNative ? 'w-10 h-10' : 'w-8 h-8'} object-contain`}\r\n              />\r\n            )}\r\n          </div>\r\n          <svg className={`${isCapacitorNative ? 'w-8 h-8' : 'w-6 h-6'} text-gray-400`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14 5l7 7m0 0l-7 7m7-7H3\" />\r\n          </svg>\r\n          <div className={`${isCapacitorNative ? 'w-14 h-14' : 'w-12 h-12'} rounded-2xl bg-white shadow flex items-center justify-center`}>\r\n            {isWrappedApp ? (\r\n              <img \r\n                src=\"https://onairos.sirv.com/Images/OnairosBlack.png\" \r\n                alt=\"Onairos\"\r\n                className={`${isCapacitorNative ? 'w-10 h-10' : 'w-8 h-8'} object-contain`}\r\n              />\r\n            ) : (\r\n              <span className={`${isCapacitorNative ? 'text-2xl' : 'text-xl'} font-serif font-bold`}>J</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* TITLE */}\r\n        <div className=\"text-center mb-6 md:mb-8\">\r\n          <h1 className={`${isCapacitorNative ? 'text-[26px] md:text-[28px]' : 'text-[24px] md:text-[26px]'} font-semibold text-gray-900 leading-tight tracking-tight`}>\r\n            {appName} wants to personalize your experience\r\n          </h1>\r\n          <p className={`${isCapacitorNative ? 'text-[14px]' : 'text-[13px]'} text-gray-500 mt-1`}>choose what to share</p>\r\n        </div>\r\n\r\n        {/* TOGGLES */}\r\n        <div className={`${isCapacitorNative ? 'flex flex-col gap-3' : 'flex flex-col sm:grid sm:grid-cols-2 gap-3 sm:gap-4'} mb-6 md:mb-10`}>\r\n          {availableOptions.map((opt) => (\r\n            <DataTypeToggle\r\n              key={opt.id}\r\n              dataType={opt}\r\n              enabled={selected[opt.id]}\r\n              onToggle={toggle}\r\n              isNative={isCapacitorNative}\r\n            />\r\n          ))}\r\n        </div>\r\n\r\n        {/* FREQUENCY PANEL - Only shown if showTime is true */}\r\n        {showTime && (\r\n          <div className=\"p-5 rounded-3xl bg-white/50 backdrop-blur-md border border-black/5 shadow-sm\">\r\n            <div className=\"flex justify-between items-center mb-3\">\r\n              <span className=\"text-sm font-medium text-gray-900\">\r\n                How often can {appName} receive updates?\r\n              </span>\r\n              <span className=\"text-[11px] text-gray-500\">\r\n                {freq === \"once\"\r\n                  ? \"one-time only\"\r\n                  : freq === \"weekly\"\r\n                  ? \"once per week\"\r\n                  : \"once per day\"}\r\n              </span>\r\n            </div>\r\n\r\n            {/* SLIDER: subtle rail, monochrome progress, click-to-set */}\r\n            <div\r\n              className=\"relative h-2.5 rounded-full bg-gray-200/90 overflow-hidden mb-4 border border-black/5 shadow-inner cursor-pointer\"\r\n              onClick={handleRailClick}\r\n            >\r\n              <div\r\n                className=\"absolute h-full transition-all rounded-full\"\r\n                style={{\r\n                  width: `${freqToPercent(freq)}%`,\r\n                  background: \"linear-gradient(90deg, rgba(31,41,55,0.95) 0%, rgba(107,114,128,0.9) 60%, rgba(209,213,219,0.85) 100%)\",\r\n                }}\r\n              />\r\n              {/* Tick marks for 3 stops */}\r\n              <span className=\"absolute left-0 top-1/2 -translate-y-1/2 w-[2px] h-3 bg-black/10\" />\r\n              <span className=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[2px] h-3 bg-black/10\" />\r\n              <span className=\"absolute right-0 top-1/2 -translate-y-1/2 w-[2px] h-3 bg-black/10\" />\r\n              {/* Thumb indicator (sleek) */}\r\n              <span\r\n                className=\"absolute top-1/2 -translate-y-1/2 -translate-x-1/2 w-4.5 h-4.5 rounded-full bg-white border border-black/20 shadow-md\"\r\n                style={{\r\n                  left: `${freqToPercent(freq)}%`,\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-3 text-center text-[12px] font-medium\">\r\n              <button onClick={() => setFreq(\"once\")} className=\"text-gray-700\">1 only</button>\r\n              <button onClick={() => setFreq(\"weekly\")} className=\"text-gray-900 font-semibold\">1 weekly</button>\r\n              <button onClick={() => setFreq(\"daily\")} className=\"text-gray-700\">1 daily</button>\r\n            </div>\r\n\r\n            <p className=\"text-[11px] text-gray-500 mt-3 leading-snug\">\r\n              This only controls update frequency; It does not grant more access.\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n      </div>\r\n\r\n      {/* FOOTER */}\r\n      <div className=\"px-6 py-4 md:py-5 bg-white/80 backdrop-blur border-t border-black/5\">\r\n        {/* Connected platforms pinned above CTAs so it never gets cropped on mobile */}\r\n        {platforms && platforms.length > 0 && (\r\n          <div className=\"mb-3 rounded-2xl bg-white/60 backdrop-blur border border-black/5 px-3 py-2\">\r\n            <div className=\"text-center text-[11px] text-gray-500 mb-1\">Connected Platforms</div>\r\n            <div className=\"flex items-center justify-center gap-2 overflow-x-auto whitespace-nowrap pb-1\" style={{ WebkitOverflowScrolling: 'touch' }}>\r\n              {platforms.map((platform, index) => {\r\n                const logoMap = {\r\n                  Instagram: 'https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png',\r\n                  YouTube: 'https://upload.wikimedia.org/wikipedia/commons/0/09/YouTube_full-color_icon_%282017%29.svg',\r\n                  LinkedIn: 'https://upload.wikimedia.org/wikipedia/commons/c/ca/LinkedIn_logo_initials.png',\r\n                  Reddit: 'https://upload.wikimedia.org/wikipedia/en/b/bd/Reddit_Logo_Icon.svg',\r\n                  Pinterest: 'https://upload.wikimedia.org/wikipedia/commons/0/08/Pinterest-logo.png',\r\n                  GitHub: 'https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png',\r\n                  Facebook: 'https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg',\r\n                  Gmail: 'https://upload.wikimedia.org/wikipedia/commons/7/7e/Gmail_icon_%282020%29.svg',\r\n                  Twitter: 'https://upload.wikimedia.org/wikipedia/commons/6/6f/Logo_of_Twitter.svg',\r\n                  ChatGPT: 'https://anushkasirv.sirv.com/openai.png',\r\n                  Claude: 'https://anushkasirv.sirv.com/claude-color.png',\r\n                  Gemini: 'https://anushkasirv.sirv.com/gemini-color.png',\r\n                  Grok: 'https://anushkasirv.sirv.com/grok.png'\r\n                };\r\n                const src = logoMap[platform] || '';\r\n                return (\r\n                  <img\r\n                    key={`${platform}-${index}`}\r\n                    src={src}\r\n                    alt={platform}\r\n                    title={platform}\r\n                    className=\"w-6 h-6 rounded-md shadow-sm flex-shrink-0\"\r\n                    onError={(e) => { e.currentTarget.style.display = 'none'; }}\r\n                  />\r\n                );\r\n              })}\r\n            </div>\r\n            {typeof onConnectMoreApps === 'function' && (\r\n              <div className=\"mt-1 flex justify-center\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={onConnectMoreApps}\r\n                  className=\"text-[11px] font-medium underline underline-offset-2 text-gray-700 hover:text-gray-900\"\r\n                  style={{ WebkitTextFillColor: '#111827' }}\r\n                >\r\n                  Connect more apps?\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n        <button\r\n          className=\"w-full rounded-full py-3 bg-gray-900 text-sm font-medium shadow-sm flex items-center justify-center mb-3\"\r\n          style={{ color: '#ffffff' }}\r\n          disabled={selectedCount === 0}\r\n          onClick={() => {\r\n            if (selectedCount === 0) return;\r\n            onComplete?.({\r\n              approved: Object.keys(selected).filter(id => selected[id]),\r\n              freq,\r\n            });\r\n          }}\r\n        >\r\n          Accept & Continue\r\n        </button>\r\n\r\n        <style>{`\r\n          .decline-button {\r\n            color: #000000 !important;\r\n          }\r\n          .decline-button * {\r\n            color: #000000 !important;\r\n          }\r\n          .decline-button span {\r\n            color: #000000 !important;\r\n          }\r\n          button.decline-button {\r\n            color: #000000 !important;\r\n          }\r\n          .decline-button-text {\r\n            color: #000000 !important;\r\n            -webkit-text-fill-color: #000000 !important;\r\n          }\r\n        `}</style>\r\n        <button\r\n          className=\"w-full rounded-full py-3 bg-gray-100 text-sm font-medium shadow-sm decline-button\"\r\n          style={{ color: '#000000' }}\r\n          onClick={() => {\r\n            onComplete?.({\r\n              approved: [],\r\n              freq,\r\n              declined: true,\r\n            });\r\n          }}\r\n        >\r\n          <span className=\"decline-button-text\" style={{ color: '#000000' }}>Decline</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DataRequest;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { COLORS } from '../theme/colors.js';\r\n\r\nexport default function TrainingComponent({ onComplete, userEmail, appName = 'App', testMode = false }) {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [progress, setProgress] = useState(0);\r\n  const [isComplete, setIsComplete] = useState(false);\r\n\r\n  const steps = [\r\n    {\r\n      title: 'Setting up your personal AI',\r\n      description: 'Initializing your secure data model',\r\n      icon: '',\r\n      duration: testMode ? 800 : 2000 // Much faster in test mode\r\n    },\r\n    {\r\n      title: 'Processing your connections',\r\n      description: 'Analyzing your social media patterns',\r\n      icon: '',\r\n      duration: testMode ? 600 : 2500\r\n    },\r\n    {\r\n      title: 'Training your model',\r\n      description: 'Building your personalized insights',\r\n      icon: '',\r\n      duration: testMode ? 700 : 3000\r\n    },\r\n    {\r\n      title: 'Finalizing setup',\r\n      description: 'Preparing your Onairos experience',\r\n      icon: '',\r\n      duration: testMode ? 500 : 2000\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    let interval;\r\n    let stepTimeout;\r\n\r\n    if (currentStep < steps.length) {\r\n      const stepDuration = steps[currentStep].duration;\r\n      const stepProgress = 100 / steps.length;\r\n\r\n      // Update progress gradually\r\n      interval = setInterval(() => {\r\n        setProgress(prev => {\r\n          const newProgress = prev + (stepProgress / (stepDuration / 100));\r\n          return Math.min(newProgress, (currentStep + 1) * stepProgress);\r\n        });\r\n      }, 100);\r\n\r\n      // Move to next step after duration\r\n      stepTimeout = setTimeout(() => {\r\n        if (currentStep < steps.length - 1) {\r\n          setCurrentStep(prev => prev + 1);\r\n        } else {\r\n          setIsComplete(true);\r\n          const completionDelay = testMode ? 400 : 1000; // Faster completion in test mode\r\n          \r\n          if (testMode) {\r\n            console.log(' Test mode: Training simulation completed');\r\n          }\r\n          \r\n          setTimeout(() => {\r\n            onComplete({\r\n              trainingComplete: true,\r\n              timestamp: new Date().toISOString(),\r\n              userEmail: userEmail,\r\n              appName: appName,\r\n              testMode: testMode,\r\n              simulatedTraining: testMode\r\n            });\r\n          }, completionDelay);\r\n        }\r\n      }, stepDuration);\r\n    }\r\n\r\n    return () => {\r\n      if (interval) clearInterval(interval);\r\n      if (stepTimeout) clearTimeout(stepTimeout);\r\n    };\r\n  }, [currentStep, onComplete, userEmail, appName]);\r\n\r\n  return (\r\n    <div className=\"w-full flex flex-col items-center space-y-8\">\r\n      <div className=\"text-center\">\r\n        <div \r\n          className=\"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4\"\r\n          style={{\r\n            background: `linear-gradient(135deg, ${COLORS.info}, #8B5CF6)`\r\n          }}\r\n        >\r\n          <div className=\"text-3xl\">\r\n            {isComplete ? '' : steps[currentStep]?.icon}\r\n          </div>\r\n        </div>\r\n        <h2 \r\n          className=\"text-2xl font-bold mb-2\"\r\n          style={{ color: COLORS.textPrimary }}\r\n        >\r\n          {isComplete ? 'All set!' : steps[currentStep]?.title}\r\n        </h2>\r\n        <p style={{ color: COLORS.textSecondary }}>\r\n          {isComplete \r\n            ? 'Your personal AI is ready to use' \r\n            : steps[currentStep]?.description\r\n          }\r\n        </p>\r\n      </div>\r\n\r\n      {/* Progress Bar */}\r\n      <div className=\"w-full\">\r\n        <div \r\n          className=\"flex justify-between text-sm mb-2\"\r\n          style={{ color: COLORS.textSecondary }}\r\n        >\r\n          <span>Progress</span>\r\n          <span>{Math.round(progress)}%</span>\r\n        </div>\r\n        <div \r\n          className=\"w-full rounded-full h-2\"\r\n          style={{ backgroundColor: COLORS.borderLight }}\r\n        >\r\n          <div \r\n            className=\"h-2 rounded-full transition-all duration-300 ease-out\"\r\n            style={{ \r\n              width: `${progress}%`,\r\n              background: `linear-gradient(90deg, ${COLORS.info}, #8B5CF6)`\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Steps Indicator */}\r\n      <div className=\"flex justify-center space-x-2\">\r\n        {steps.map((_, index) => (\r\n          <div\r\n            key={index}\r\n            className=\"w-3 h-3 rounded-full transition-all duration-300\"\r\n            style={{\r\n              backgroundColor: index <= currentStep ? COLORS.info : COLORS.border\r\n            }}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      {/* Current Step Details */}\r\n      <div \r\n        className=\"p-4 rounded-lg w-full\"\r\n        style={{ backgroundColor: COLORS.backgroundSecondary }}\r\n      >\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div \r\n            className=\"w-8 h-8 rounded-full flex items-center justify-center\"\r\n            style={{ backgroundColor: '#DBEAFE' }}\r\n          >\r\n            <div className=\"text-sm\">\r\n              {isComplete ? '' : steps[currentStep]?.icon}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <h3 \r\n              className=\"font-medium\"\r\n              style={{ color: COLORS.textPrimary }}\r\n            >\r\n              {isComplete ? 'Training Complete' : `Step ${currentStep + 1} of ${steps.length}`}\r\n            </h3>\r\n            <p \r\n              className=\"text-sm\"\r\n              style={{ color: COLORS.textSecondary }}\r\n            >\r\n              {isComplete \r\n                ? 'Your Onairos experience is ready' \r\n                : steps[currentStep]?.description\r\n              }\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* App Info */}\r\n      <div className=\"text-center\">\r\n        <p \r\n          className=\"text-sm\"\r\n          style={{ color: COLORS.textSecondary }}\r\n        >\r\n          Setting up for <span className=\"font-medium\">{appName}</span>\r\n        </p>\r\n        {userEmail && (\r\n          <p \r\n            className=\"text-xs mt-1\"\r\n            style={{ color: COLORS.textMuted }}\r\n          >\r\n            {userEmail}\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n} ","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach((key) => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data.arrayBuffer().then(toArray).then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, (encoded) => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE, } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType),\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType),\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1),\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type],\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET, } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, (encodedPacket) => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, (encodedPacket) => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        },\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* State.READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* State.READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* State.READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* State.READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        },\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload, };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\nexport const defaultBinaryType = \"arraybuffer\";\nexport function createCookieJar() { }\n","import { globalThisShim as globalThis } from \"./globals.node.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n/**\n * Generates a random 8-characters string.\n */\nexport function randomString() {\n    return (Date.now().toString(36).substring(3) +\n        Math.random().toString(36).substring(2, 5));\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","import { Transport } from \"../transport.js\";\nimport { randomString } from \"../util.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nexport class Polling extends Transport {\n    constructor() {\n        super(...arguments);\n        this._polling = false;\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this._poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this._polling || !this.writable) {\n            let total = 0;\n            if (this._polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    _poll() {\n        this._polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this._polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this._poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","import { Polling } from \"./polling.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globals.node.js\";\nimport { hasCORS } from \"../contrib/has-cors.js\";\nfunction empty() { }\nexport class BaseXHR extends Polling {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(createRequest, uri, opts) {\n        super();\n        this.createRequest = createRequest;\n        installTimerFunctions(this, opts);\n        this._opts = opts;\n        this._method = opts.method || \"GET\";\n        this._uri = uri;\n        this._data = undefined !== opts.data ? opts.data : null;\n        this._create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    _create() {\n        var _a;\n        const opts = pick(this._opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this._opts.xd;\n        const xhr = (this._xhr = this.createRequest(opts));\n        try {\n            xhr.open(this._method, this._uri, true);\n            try {\n                if (this._opts.extraHeaders) {\n                    // @ts-ignore\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this._opts.extraHeaders) {\n                        if (this._opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this._opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this._method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this._opts.withCredentials;\n            }\n            if (this._opts.requestTimeout) {\n                xhr.timeout = this._opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(\n                    // @ts-ignore\n                    xhr.getResponseHeader(\"set-cookie\"));\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this._onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this._onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this._data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this._onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this._index = Request.requestsCount++;\n            Request.requests[this._index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    _onError(err) {\n        this.emitReserved(\"error\", err, this._xhr);\n        this._cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    _cleanup(fromError) {\n        if (\"undefined\" === typeof this._xhr || null === this._xhr) {\n            return;\n        }\n        this._xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this._xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this._index];\n        }\n        this._xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    _onLoad() {\n        const data = this._xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this._cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this._cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\nconst hasXHR2 = (function () {\n    const xhr = newRequest({\n        xdomain: false,\n    });\n    return xhr && xhr.responseType !== null;\n})();\n/**\n * HTTP long-polling based on the built-in `XMLHttpRequest` object.\n *\n * Usage: browser\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n */\nexport class XHR extends BaseXHR {\n    constructor(opts) {\n        super(opts);\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd }, this.opts);\n        return new Request(newRequest, this.uri(), opts);\n    }\n}\nfunction newRequest(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { pick, randomString } from \"../util.js\";\nimport { encodePacket } from \"engine.io-parser\";\nimport { globalThisShim as globalThis, nextTick } from \"../globals.node.js\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class BaseWS extends Transport {\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws = this.createSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    this.doWrite(packet, data);\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.onerror = () => { };\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\nconst WebSocketCtor = globalThis.WebSocket || globalThis.MozWebSocket;\n/**\n * WebSocket transport based on the built-in `WebSocket` object.\n *\n * Usage: browser, Node.js (since v21), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n * @see https://caniuse.com/mdn-api_websocket\n * @see https://nodejs.org/api/globals.html#websocket\n */\nexport class WS extends BaseWS {\n    createSocket(uri, protocols, opts) {\n        return !isReactNative\n            ? protocols\n                ? new WebSocketCtor(uri, protocols)\n                : new WebSocketCtor(uri)\n            : new WebSocketCtor(uri, protocols, opts);\n    }\n    doWrite(_packet, data) {\n        this.ws.send(data);\n    }\n}\n","import { XHR } from \"./polling-xhr.node.js\";\nimport { WS } from \"./websocket.node.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: XHR,\n};\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"../globals.node.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\n/**\n * WebTransport transport based on the built-in `WebTransport` object.\n *\n * Usage: browser, Node.js (with the `@fails-components/webtransport` package)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebTransport\n * @see https://caniuse.com/webtransport\n */\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        try {\n            // @ts-ignore\n            this._transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this._transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this._transport.ready.then(() => {\n            this._transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this._writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this._writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this._writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this._transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 8000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports as DEFAULT_TRANSPORTS } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { createCookieJar, defaultBinaryType, nextTick, } from \"./globals.node.js\";\nconst withEventListeners = typeof addEventListener === \"function\" &&\n    typeof removeEventListener === \"function\";\nconst OFFLINE_EVENT_LISTENERS = [];\nif (withEventListeners) {\n    // within a ServiceWorker, any event handler for the 'offline' event must be added on the initial evaluation of the\n    // script, so we create one single event listener here which will forward the event to the socket instances\n    addEventListener(\"offline\", () => {\n        OFFLINE_EVENT_LISTENERS.forEach((listener) => listener());\n    }, false);\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes without upgrade mechanism, which means that it will keep the first low-level transport that\n * successfully establishes the connection.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithoutUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithoutUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithUpgrade\n * @see Socket\n */\nexport class SocketWithoutUpgrade extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        this._prevBufferLen = 0;\n        this._pingInterval = -1;\n        this._pingTimeout = -1;\n        this._maxPayload = -1;\n        /**\n         * The expiration timestamp of the {@link _pingTimeoutTimer} object is tracked, in case the timer is throttled and the\n         * callback is not fired on time. This can happen for example when a laptop is suspended or when a phone is locked.\n         */\n        this._pingTimeoutTime = Infinity;\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            const parsedUri = parse(uri);\n            opts.hostname = parsedUri.host;\n            opts.secure =\n                parsedUri.protocol === \"https\" || parsedUri.protocol === \"wss\";\n            opts.port = parsedUri.port;\n            if (parsedUri.query)\n                opts.query = parsedUri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = [];\n        this._transportsByName = {};\n        opts.transports.forEach((t) => {\n            const transportName = t.prototype.name;\n            this.transports.push(transportName);\n            this._transportsByName[transportName] = t;\n        });\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        if (withEventListeners) {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this._beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this._offlineEventListener = () => {\n                    this._onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener);\n            }\n        }\n        if (this.opts.withCredentials) {\n            this._cookieJar = createCookieJar();\n        }\n        this._open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new this._transportsByName[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    _open() {\n        if (this.transports.length === 0) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        const transportName = this.opts.rememberUpgrade &&\n            SocketWithoutUpgrade.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1\n            ? \"websocket\"\n            : this.transports[0];\n        this.readyState = \"opening\";\n        const transport = this.createTransport(transportName);\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this._onDrain.bind(this))\n            .on(\"packet\", this._onPacket.bind(this))\n            .on(\"error\", this._onError.bind(this))\n            .on(\"close\", (reason) => this._onClose(\"transport close\", reason));\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        SocketWithoutUpgrade.priorWebsocketSuccess =\n            \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    _onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this._sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    this._resetPingTimeout();\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this._onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this._pingInterval = data.pingInterval;\n        this._pingTimeout = data.pingTimeout;\n        this._maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this._resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    _resetPingTimeout() {\n        this.clearTimeoutFn(this._pingTimeoutTimer);\n        const delay = this._pingInterval + this._pingTimeout;\n        this._pingTimeoutTime = Date.now() + delay;\n        this._pingTimeoutTimer = this.setTimeoutFn(() => {\n            this._onClose(\"ping timeout\");\n        }, delay);\n        if (this.opts.autoUnref) {\n            this._pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    _onDrain() {\n        this.writeBuffer.splice(0, this._prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this._prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this._getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this._prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    _getWritablePackets() {\n        const shouldCheckPayloadSize = this._maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this._maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Checks whether the heartbeat timer has expired but the socket has not yet been notified.\n     *\n     * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the\n     * `write()` method then the message would not be buffered by the Socket.IO client.\n     *\n     * @return {boolean}\n     * @private\n     */\n    /* private */ _hasPingExpired() {\n        if (!this._pingTimeoutTime)\n            return true;\n        const hasExpired = Date.now() > this._pingTimeoutTime;\n        if (hasExpired) {\n            this._pingTimeoutTime = 0;\n            nextTick(() => {\n                this._onClose(\"ping timeout\");\n            }, this.setTimeoutFn);\n        }\n        return hasExpired;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a message. Alias of {@link Socket#write}.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    send(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    _sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this._onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    _onError(err) {\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        if (this.opts.tryAllTransports &&\n            this.transports.length > 1 &&\n            this.readyState === \"opening\") {\n            this.transports.shift();\n            return this._open();\n        }\n        this.emitReserved(\"error\", err);\n        this._onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    _onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this._pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (withEventListeners) {\n                if (this._beforeunloadEventListener) {\n                    removeEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n                }\n                if (this._offlineEventListener) {\n                    const i = OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);\n                    if (i !== -1) {\n                        OFFLINE_EVENT_LISTENERS.splice(i, 1);\n                    }\n                }\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this._prevBufferLen = 0;\n        }\n    }\n}\nSocketWithoutUpgrade.protocol = protocol;\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see Socket\n */\nexport class SocketWithUpgrade extends SocketWithoutUpgrade {\n    constructor() {\n        super(...arguments);\n        this._upgrades = [];\n    }\n    onOpen() {\n        super.onOpen();\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            for (let i = 0; i < this._upgrades.length; i++) {\n                this._probe(this._upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    _probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    SocketWithoutUpgrade.priorWebsocketSuccess =\n                        \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this._upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    onHandshake(data) {\n        this._upgrades = this._filterUpgrades(data.upgrades);\n        super.onHandshake(data);\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    _filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        for (let i = 0; i < upgrades.length; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * @example\n * import { Socket } from \"engine.io-client\";\n *\n * const socket = new Socket();\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see SocketWithUpgrade\n */\nexport class Socket extends SocketWithUpgrade {\n    constructor(uri, opts = {}) {\n        const o = typeof uri === \"object\" ? uri : opts;\n        if (!o.transports ||\n            (o.transports && typeof o.transports[0] === \"string\")) {\n            o.transports = (o.transports || [\"polling\", \"websocket\", \"webtransport\"])\n                .map((transportName) => DEFAULT_TRANSPORTS[transportName])\n                .filter((t) => !!t);\n        }\n        super(uri, o);\n    }\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        /**\n         * A map containing acknowledgement handlers.\n         *\n         * The `withError` attribute is used to differentiate handlers that accept an error as first argument:\n         *\n         * - `socket.emit(\"test\", (err, value) => { ... })` with `ackTimeout` option\n         * - `socket.timeout(5000).emit(\"test\", (err, value) => { ... })`\n         * - `const value = await socket.emitWithAck(\"test\")`\n         *\n         * From those that don't:\n         *\n         * - `socket.emit(\"test\", (value) => { ... });`\n         *\n         * In the first case, the handlers will be called with an error when:\n         *\n         * - the timeout is reached\n         * - the socket gets disconnected\n         *\n         * In the second case, the handlers will be simply discarded upon disconnection, since the client will never receive\n         * an acknowledgement from the server.\n         *\n         * @private\n         */\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        var _a, _b, _c;\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = (_b = (_a = this.io.engine) === null || _a === void 0 ? void 0 : _a.transport) === null || _b === void 0 ? void 0 : _b.writable;\n        const isConnected = this.connected && !((_c = this.io.engine) === null || _c === void 0 ? void 0 : _c._hasPingExpired());\n        const discardPacket = this.flags.volatile && !isTransportWritable;\n        if (discardPacket) {\n        }\n        else if (isConnected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        const fn = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, args);\n        };\n        fn.withError = true;\n        this.acks[id] = fn;\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        return new Promise((resolve, reject) => {\n            const fn = (arg1, arg2) => {\n                return arg1 ? reject(arg1) : resolve(arg2);\n            };\n            fn.withError = true;\n            args.push(fn);\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n        this._clearAcks();\n    }\n    /**\n     * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n     * the server.\n     *\n     * @private\n     */\n    _clearAcks() {\n        Object.keys(this.acks).forEach((id) => {\n            const isBuffered = this.sendBuffer.some((packet) => String(packet.id) === id);\n            if (!isBuffered) {\n                // note: handlers that do not accept an error as first argument are ignored here\n                const ack = this.acks[id];\n                delete this.acks[id];\n                if (ack.withError) {\n                    ack.call(this, new Error(\"socket has been disconnected\"));\n                }\n            }\n        });\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowledgement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (typeof ack !== \"function\") {\n            return;\n        }\n        delete this.acks[packet.id];\n        // @ts-ignore FIXME ack is incorrectly inferred as 'never'\n        if (ack.withError) {\n            packet.data.unshift(null);\n        }\n        // @ts-ignore\n        ack.apply(this, packet.data);\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        if (!v) {\n            this.skipReconnect = true;\n        }\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), \n        // @ts-ignore\n        on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called when:\n     *\n     * - the low-level engine is closed\n     * - the parser encountered a badly formatted packet\n     * - all sockets are disconnected\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        var _a;\n        this.cleanup();\n        (_a = this.engine) === null || _a === void 0 ? void 0 : _a.close();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\nexport { Fetch, NodeXHR, XHR, NodeWebSocket, WebSocket, WebTransport, } from \"engine.io-client\";\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport Lottie from 'lottie-react';\r\nimport rainAnim from '../../public/rain-anim.json';\r\nimport io from 'socket.io-client';\r\n\r\nconst trainingPhrases = [\r\n  \"Analyzing your data patterns...\",\r\n  \"Building your personality model...\",\r\n  \"Training neural networks...\",\r\n  \"Running inference algorithms...\",\r\n  \"Generating personalized insights...\",\r\n  \"Finalizing your profile...\",\r\n  \"Almost done...\"\r\n];\r\n\r\nexport default function TrainingScreen({ onComplete, onTrainingStart, userEmail, connectedAccounts = [], userToken }) {\r\n  const [progress, setProgress] = useState(0);\r\n  const [currentPhrase, setCurrentPhrase] = useState(trainingPhrases[0]);\r\n  const [currentStage, setCurrentStage] = useState('training'); // 'training' | 'inference' | 'complete'\r\n  const lottieRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    let socket = null;\r\n    let progressTimer = null;\r\n    let didSignalStart = false;\r\n\r\n    const signalTrainingStarted = () => {\r\n      if (didSignalStart) return;\r\n      didSignalStart = true;\r\n      try {\r\n        onTrainingStart?.();\r\n      } catch (e) {\r\n        // never block training due to callback issues\r\n      }\r\n    };\r\n    \r\n    // ACTUALLY run training + inference using Socket.IO\r\n    const runTrainingAndInference = async () => {\r\n      console.log(' Starting REAL training for:', userEmail);\r\n      console.log(' Connected accounts:', connectedAccounts);\r\n      console.log(' userToken prop received:', userToken ? `${userToken.substring(0, 20)}...` : 'UNDEFINED');\r\n\r\n      try {\r\n        // Use token passed from parent component, fallback to localStorage\r\n        let token = userToken;\r\n        \r\n        if (!token) {\r\n          console.warn(' Token not passed as prop, checking localStorage...');\r\n          try {\r\n            const storedToken = localStorage.getItem('onairos_user_token');\r\n            if (storedToken) {\r\n              token = storedToken;\r\n              console.log(' Found token in localStorage');\r\n            } else {\r\n              const userData = JSON.parse(localStorage.getItem('onairosUser') || '{}');\r\n              token = userData.token;\r\n              if (token) {\r\n                console.log(' Found token in onairosUser localStorage');\r\n              }\r\n            }\r\n          } catch (e) {\r\n            console.error(' Error reading from localStorage:', e);\r\n          }\r\n        }\r\n\r\n        if (!token) {\r\n          console.error(' No token found anywhere - cannot run training');\r\n          console.error(' Token should be passed from parent component OR stored in localStorage');\r\n          throw new Error('No authentication token');\r\n        }\r\n        \r\n        console.log(' Token found, starting Socket.IO training...', token.substring(0, 20) + '...');\r\n\r\n        // Phase 1: Connect to Socket.IO\r\n        setCurrentStage('training');\r\n        setCurrentPhrase('Connecting to server...');\r\n        console.log(' Connecting to Socket.IO server...');\r\n\r\n        socket = io('https://api2.onairos.uk', {\r\n          auth: { token },\r\n          transports: ['websocket', 'polling'],\r\n          reconnection: false, // Don't reconnect automatically for this one-time operation\r\n          timeout: 60000 // 60 second timeout\r\n        });\r\n\r\n        // Handle connection\r\n        socket.on('connect', () => {\r\n          console.log(' Socket connected:', socket.id);\r\n          // At this point, training can actually start (server reachable).\r\n          signalTrainingStarted();\r\n          setCurrentPhrase('Starting training...');\r\n          \r\n          // Start progress animation\r\n          progressTimer = setInterval(() => {\r\n            setProgress(prev => {\r\n              if (prev < 95) return prev + 0.5; // Slow smooth progress\r\n              return prev;\r\n            });\r\n          }, 200);\r\n\r\n          // Trigger training\r\n          console.log(' Emitting start-training event with:', {\r\n            socketId: socket.id,\r\n            email: userEmail,\r\n            platforms: connectedAccounts\r\n          });\r\n\r\n          socket.emit('start-training', {\r\n            socketId: socket.id,\r\n            email: userEmail,\r\n            username: userEmail,\r\n            platforms: connectedAccounts,\r\n            connectedAccounts: connectedAccounts\r\n          });\r\n        });\r\n\r\n        // Handle training progress updates\r\n        socket.on('training-progress', (data) => {\r\n          console.log(' Training progress:', data);\r\n          // Progress events mean training has definitely started.\r\n          signalTrainingStarted();\r\n          if (data.percentage) {\r\n            setProgress(Math.min(data.percentage, 95)); // Cap at 95% until complete\r\n          }\r\n          if (data.message) {\r\n            setCurrentPhrase(data.message);\r\n          }\r\n          if (data.stage) {\r\n            setCurrentStage(data.stage);\r\n          }\r\n        });\r\n\r\n        // Handle training completion\r\n        socket.on('training-complete', (result) => {\r\n          console.log(' Training complete via Socket.IO:', result);\r\n          \r\n          if (progressTimer) clearInterval(progressTimer);\r\n          setProgress(100);\r\n          setCurrentStage('complete');\r\n          setCurrentPhrase('Training complete!');\r\n\r\n          // Log complete results to console\r\n          console.log('\\n ===== TRAINING + INFERENCE COMPLETE =====\\n');\r\n          console.log(' Training Results:', {\r\n            status: 'completed',\r\n            userEmail,\r\n            connectedPlatforms: connectedAccounts,\r\n            traits: result.traits || result.trainingResults?.traits || {},\r\n            timestamp: new Date().toISOString()\r\n          });\r\n          \r\n          console.log('\\n Traits Retrieved:', {\r\n            traits: result.traits || result.trainingResults?.traits || {},\r\n            userTraits: result.userTraits || result.trainingResults?.userTraits || {},\r\n            hasLlmData: !!result.llmData,\r\n            inferenceResults: result.inferenceResults || null\r\n          });\r\n          \r\n          console.log('\\n Model ready for predictions!\\n');\r\n\r\n          // Disconnect socket\r\n          socket.disconnect();\r\n\r\n          // Complete after short delay\r\n          setTimeout(() => {\r\n            onComplete?.(result);\r\n          }, 500);\r\n        });\r\n\r\n        // Handle errors\r\n        socket.on('training-error', (error) => {\r\n          console.error(' Training error from Socket.IO:', error);\r\n          \r\n          if (progressTimer) clearInterval(progressTimer);\r\n          \r\n          setProgress(100);\r\n          setCurrentPhrase('Error occurred, continuing...');\r\n          \r\n          socket.disconnect();\r\n          \r\n          setTimeout(() => {\r\n            onComplete?.({ \r\n              error: error.message || 'Training failed',\r\n              fallback: true \r\n            });\r\n          }, 500);\r\n        });\r\n\r\n        // Handle connection errors\r\n        socket.on('connect_error', (error) => {\r\n          console.error(' Socket.IO connection error:', error);\r\n          \r\n          if (progressTimer) clearInterval(progressTimer);\r\n          \r\n          setProgress(100);\r\n          setCurrentPhrase('Connection error, continuing...');\r\n          \r\n          socket.disconnect();\r\n          \r\n          setTimeout(() => {\r\n            onComplete?.({ \r\n              error: 'Failed to connect to training server',\r\n              fallback: true \r\n            });\r\n          }, 500);\r\n        });\r\n\r\n        // Handle disconnect\r\n        socket.on('disconnect', (reason) => {\r\n          console.log(' Socket disconnected:', reason);\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error(' Training/Inference Error:', error);\r\n        \r\n        if (progressTimer) clearInterval(progressTimer);\r\n        if (socket) socket.disconnect();\r\n        \r\n        // Fallback: still complete but show error\r\n        console.warn(' Falling back to cached data or skipping training');\r\n        setProgress(100);\r\n        setTimeout(() => {\r\n          onComplete?.({ \r\n            error: error.message,\r\n            fallback: true \r\n          });\r\n        }, 500);\r\n      }\r\n    };\r\n\r\n    runTrainingAndInference();\r\n\r\n    // Cleanup on unmount\r\n    return () => {\r\n      if (progressTimer) clearInterval(progressTimer);\r\n      if (socket) {\r\n        console.log(' Cleaning up socket connection');\r\n        socket.disconnect();\r\n      }\r\n    };\r\n  }, [userEmail, connectedAccounts, userToken, onComplete]);\r\n\r\n  return (\r\n    <div className=\"w-full h-full flex flex-col items-center justify-center p-8 bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900\">\r\n      <style>{`\r\n        @keyframes float {\r\n          0%, 100% { transform: translateY(0px); }\r\n          50% { transform: translateY(-20px); }\r\n        }\r\n        .float-animation {\r\n          animation: float 6s ease-in-out infinite;\r\n        }\r\n        .glow-bar {\r\n          box-shadow: 0 0 20px rgba(59, 130, 246, 0.5),\r\n                      0 0 40px rgba(139, 92, 246, 0.3),\r\n                      inset 0 0 20px rgba(255, 255, 255, 0.1);\r\n        }\r\n      `}</style>\r\n\r\n      {/* Rain Animation - Sleek and centered */}\r\n      <div className=\"w-full max-w-sm mb-6 float-animation\">\r\n        <Lottie \r\n          lottieRef={lottieRef}\r\n          animationData={rainAnim}\r\n          loop={true}\r\n          autoplay={true}\r\n          style={{ width: '100%', height: '240px', filter: 'brightness(1.1)' }}\r\n        />\r\n      </div>\r\n\r\n      {/* Training Status - Sleeker design */}\r\n      <div className=\"w-full max-w-lg\">\r\n        {/* Title with stage indicator */}\r\n        <div className=\"text-center mb-6\">\r\n          <div className=\"inline-flex items-center gap-2 mb-3 px-4 py-1.5 rounded-full bg-white/10 backdrop-blur-sm border border-white/20\">\r\n            <div className=\"w-2 h-2 rounded-full bg-blue-400 animate-pulse\"></div>\r\n            <span className=\"text-xs font-medium text-blue-100 uppercase tracking-wider\">\r\n              {currentStage === 'training' ? 'Training Model' : \r\n               currentStage === 'inference' ? 'Running Inference' : 'Complete'}\r\n            </span>\r\n          </div>\r\n          \r\n          <h2 className=\"text-3xl font-bold text-white mb-2 tracking-tight\">\r\n            {currentStage === 'complete' ? 'Ready!' : 'Building Your Profile'}\r\n          </h2>\r\n          \r\n          <p className=\"text-blue-200 text-sm font-medium\">\r\n            {currentPhrase}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Progress Bar - Sleek glassmorphism design */}\r\n        <div className=\"relative mb-4\">\r\n          <div className=\"w-full bg-white/5 backdrop-blur-sm rounded-full h-3 overflow-hidden border border-white/10\">\r\n            <div \r\n              className=\"h-full rounded-full transition-all duration-300 ease-out glow-bar\"\r\n              style={{ \r\n                width: `${progress}%`,\r\n                background: 'linear-gradient(90deg, #3b82f6 0%, #8b5cf6 50%, #ec4899 100%)'\r\n              }}\r\n            />\r\n          </div>\r\n          \r\n          {/* Progress percentage overlay */}\r\n          <div className=\"absolute inset-0 flex items-center justify-center\">\r\n            <span className=\"text-xs font-bold text-white drop-shadow-lg\">\r\n              {progress}%\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stage indicators */}\r\n        <div className=\"flex justify-between items-center px-2 mb-6\">\r\n          <div className={`text-xs font-medium transition-colors ${progress >= 0 ? 'text-blue-400' : 'text-gray-500'}`}>\r\n            Training\r\n          </div>\r\n          <div className={`text-xs font-medium transition-colors ${progress >= 50 ? 'text-purple-400' : 'text-gray-500'}`}>\r\n            Inference\r\n          </div>\r\n          <div className={`text-xs font-medium transition-colors ${progress >= 100 ? 'text-pink-400' : 'text-gray-500'}`}>\r\n            Complete\r\n          </div>\r\n        </div>\r\n\r\n        {/* Info box - Sleek and minimal */}\r\n        <div className=\"mt-6 p-4 rounded-2xl bg-white/5 backdrop-blur-md border border-white/10\">\r\n          <div className=\"flex items-center justify-center gap-2 text-blue-100\">\r\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n              <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\r\n            </svg>\r\n            <p className=\"text-xs\">\r\n              Processing your data securely  {connectedAccounts.length} {connectedAccounts.length === 1 ? 'platform' : 'platforms'} connected\r\n            </p>\r\n          </div>\r\n        </div>        \r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Lottie from 'lottie-react';\r\nimport rainAnim from '../../public/rain-anim.json';\r\n\r\nexport default function LoadingScreen({ onComplete }) {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [dotCount, setDotCount] = useState(0);\r\n\r\n  const loadingStates = [\r\n    { message: \"Validating PIN and continuing training\", progress: 20 },\r\n    { message: \"Uploading model to secure storage\", progress: 40 },\r\n    { message: \"Running test inference\", progress: 60 },\r\n    { message: \"Storing results in databases\", progress: 80 },\r\n    { message: \"Complete!\", progress: 100 },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const stateInterval = setInterval(() => {\r\n      setCurrentStep((prev) => {\r\n        const nextStep = prev + 1;\r\n        if (nextStep >= loadingStates.length) {\r\n          // Loading complete, call onComplete after a short delay\r\n          setTimeout(() => {\r\n            onComplete();\r\n          }, 1000);\r\n          return prev; // Keep at last step\r\n        }\r\n        return nextStep;\r\n      });\r\n    }, 3000); // Change state every 3 seconds\r\n\r\n    return () => clearInterval(stateInterval);\r\n  }, [loadingStates.length, onComplete]);\r\n\r\n  useEffect(() => {\r\n    const dotInterval = setInterval(() => {\r\n      setDotCount((prev) => (prev + 1) % 4); // 0, 1, 2, 3 dots\r\n    }, 500); // Change dots every 500ms\r\n\r\n    return () => clearInterval(dotInterval);\r\n  }, []);\r\n\r\n  const currentState = loadingStates[currentStep];\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-gray-500 bg-opacity-50 flex items-center justify-center p-6\" style={{ zIndex: 2147483647, pointerEvents: 'auto' }}>\r\n      {/* Modal - Full height from bottom */}\r\n      <div className=\"bg-white rounded-3xl w-full max-w-lg mx-auto shadow-2xl overflow-hidden flex flex-col\" style={{ maxWidth: '500px', height: '100%', maxHeight: '90vh' }}>\r\n        {/* Header */}\r\n        <div className=\"px-6 pt-6 pb-4 flex-shrink-0\">\r\n        </div>\r\n\r\n        {/* Content - Rain animation and loading state */}\r\n        <div className=\"flex-1 flex flex-col px-6\">\r\n          {/* Rain Animation */}\r\n          <div className=\"flex-1 flex items-center justify-center\">\r\n            <div style={{ width: '100%', maxWidth: '400px', aspectRatio: '1' }}>\r\n              <Lottie\r\n                animationData={rainAnim}\r\n                loop={true}\r\n                autoplay={true}\r\n                style={{ width: '100%', height: '100%' }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Loading State - Positioned at bottom */}\r\n          <div className=\"flex-shrink-0 pb-12\">\r\n            <div className=\"text-center\">\r\n              <h1 className=\"font-bold text-gray-900 leading-tight mb-6\" style={{ fontSize: 'clamp(16px, 4vw, 20px)' }}>\r\n                {currentState.message}\r\n                {currentState.message !== \"Complete!\" && (\r\n                  <span className=\"inline-block w-8 text-left\">{\".\".repeat(dotCount)}</span>\r\n                )}\r\n              </h1>\r\n\r\n              <div className=\"mx-auto\" style={{ width: 'clamp(200px, 50vw, 300px)' }}>\r\n                <div className=\"w-full h-2 bg-gray-200 rounded-full\">\r\n                  <div\r\n                    className=\"h-2 bg-gray-900 rounded-full transition-all duration-1000 ease-out\"\r\n                    style={{ width: `${currentState.progress}%` }}\r\n                  ></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Bottom spacing */}\r\n        <div className=\"h-20 flex-shrink-0\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport Lottie from 'lottie-react';\r\n\r\nexport default function WrappedLoadingPage({ appName }) {\r\n  const [animationData, setAnimationData] = useState(null);\r\n  const [progress, setProgress] = useState(0);\r\n  const [messageIndex, setMessageIndex] = useState(0);\r\n  \r\n  // Only show \"Updating your digital brain for 2025...\" if app name contains \"wrapped\"\r\n  const isWrappedApp = appName && appName.toLowerCase().includes('wrapped');\r\n\r\n  // Whimsical rotating messages\r\n  const messages = [\r\n    \"Reading your mind...\",\r\n    \"Connecting the dots...\",\r\n    \"Brewing insights...\",\r\n    \"Decoding your vibe...\",\r\n    \"Piecing together your story...\",\r\n    \"Finding patterns in the chaos...\",\r\n    \"Translating data to wisdom...\",\r\n    \"Your digital fingerprint is unique...\",\r\n    \"Almost done thinking...\",\r\n    \"Polishing the final details...\"\r\n  ];\r\n\r\n  useEffect(() => {\r\n    // Fetch the animation JSON from public folder\r\n    fetch('/rain-anim.json')\r\n      .then(res => res.json())\r\n      .then(data => setAnimationData(data))\r\n      .catch(err => {\r\n        console.error('Failed to load rain animation:', err);\r\n        // Fallback: try from the npm package public folder\r\n        fetch('https://onairos.sirv.com/rain-anim.json')\r\n          .then(res => res.json())\r\n          .then(data => setAnimationData(data))\r\n          .catch(err2 => console.error('Failed to load rain animation from fallback:', err2));\r\n      });\r\n  }, []);\r\n\r\n  // Animate progress bar over ~2 minutes (API can take 1-3 minutes)\r\n  useEffect(() => {\r\n    const duration = 120000; // 2 minutes in ms\r\n    const interval = 100; // Update every 100ms\r\n    const increment = (interval / duration) * 100;\r\n    \r\n    const timer = setInterval(() => {\r\n      setProgress(prev => {\r\n        const next = prev + increment;\r\n        // Cap at 95% to avoid reaching 100% before API completes\r\n        return next >= 95 ? 95 : next;\r\n      });\r\n    }, interval);\r\n\r\n    return () => clearInterval(timer);\r\n  }, []);\r\n\r\n  // Rotate messages every 4 seconds\r\n  useEffect(() => {\r\n    const messageTimer = setInterval(() => {\r\n      setMessageIndex(prev => (prev + 1) % messages.length);\r\n    }, 4000);\r\n\r\n    return () => clearInterval(messageTimer);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center h-full px-6 py-4\">\r\n      {/* Content is centered vertically inside the modal card */}\r\n      <div className=\"flex flex-col items-center justify-center w-full max-w-2xl space-y-6\">\r\n        {/* Title */}\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-xl md:text-2xl font-semibold text-gray-900 mb-1\">\r\n            {isWrappedApp ? 'Updating your digital brain for 2025...' : 'Processing your data...'}\r\n          </h2>\r\n          <p className=\"text-xs md:text-sm text-gray-600\">\r\n            {isWrappedApp ? 'Crafting your personalized insights from your digital footprint' : 'This will just take a moment'}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Lottie Animation */}\r\n        {animationData ? (\r\n          <div className=\"w-full max-w-sm mx-auto\">\r\n            {/* Fixed aspect ratio so the figure sits nicely in the center and never clips */}\r\n            <div className=\"relative w-full\" style={{ paddingBottom: '100%' }}>\r\n              <Lottie \r\n                animationData={animationData}\r\n                loop={true}\r\n                autoplay={true}\r\n                className=\"absolute inset-0 w-full h-full\"\r\n              />\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"w-full max-w-sm h-64 flex items-center justify-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900\"></div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Black and White Loading Bar - Below Lottie */}\r\n        <div className=\"w-full max-w-md\">\r\n          <div className=\"relative w-full h-1.5 bg-gray-200 rounded-full overflow-hidden\">\r\n            <div \r\n              className=\"absolute top-0 left-0 h-full bg-gray-900 rounded-full transition-all duration-300 ease-out\"\r\n              style={{ \r\n                width: `${progress}%`\r\n              }}\r\n            />\r\n          </div>\r\n          \r\n          {/* Rotating message with fade transition */}\r\n          <p \r\n            key={messageIndex}\r\n            className=\"text-center text-xs text-gray-600 mt-3 animate-fadeIn\"\r\n            style={{ \r\n              animation: 'fadeIn 0.5s ease-in-out'\r\n            }}\r\n          >\r\n            {messages[messageIndex]}\r\n          </p>\r\n        </div>\r\n\r\n        <style>{`\r\n          @keyframes fadeIn {\r\n            0% { opacity: 0; transform: translateY(-4px); }\r\n            100% { opacity: 1; transform: translateY(0); }\r\n          }\r\n        `}</style>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","/**\r\n * Response formatter utility for Onairos SDK\r\n * Converts array-based responses to dictionary format for better developer experience\r\n */\r\n\r\n// Standard 16 personality types in order that the API returns them\r\nexport const PERSONALITY_TYPES = [\r\n  'Analyst',\r\n  'Diplomat', \r\n  'Sentinel',\r\n  'Explorer',\r\n  'Architect',\r\n  'Logician',\r\n  'Commander',\r\n  'Debater',\r\n  'Advocate',\r\n  'Mediator',\r\n  'Protagonist',\r\n  'Campaigner',\r\n  'Logistician',\r\n  'Defender',\r\n  'Executive',\r\n  'Consul'\r\n];\r\n\r\n// Standard trait categories that might be returned\r\nexport const TRAIT_CATEGORIES = [\r\n  'Openness',\r\n  'Conscientiousness',\r\n  'Extraversion',\r\n  'Agreeableness',\r\n  'Neuroticism'\r\n];\r\n\r\n/**\r\n * Formats API response to include both array and dictionary formats\r\n * @param {Object} apiResponse - Raw API response from Onairos\r\n * @param {Object} options - Formatting options\r\n * @param {boolean} options.includeDictionary - Whether to include dictionary format (default: true)\r\n * @param {boolean} options.includeArray - Whether to include original array format (default: true)\r\n * @returns {Object} Formatted response with both formats\r\n */\r\nexport function formatOnairosResponse(apiResponse, options = {}) {\r\n  const { includeDictionary = true, includeArray = true } = options;\r\n  \r\n  if (!apiResponse) {\r\n    return apiResponse;\r\n  }\r\n\r\n  const formatted = { ...apiResponse };\r\n\r\n  // Handle personality scores if present\r\n  if (apiResponse.InferenceResult?.traits || apiResponse.traits || apiResponse.scores) {\r\n    const scores = apiResponse.InferenceResult?.traits || apiResponse.traits || apiResponse.scores;\r\n    \r\n    if (Array.isArray(scores) && scores.length >= 16) {\r\n      if (includeDictionary) {\r\n        // Create personality dictionary\r\n        const personalityDict = {};\r\n        PERSONALITY_TYPES.forEach((type, index) => {\r\n          personalityDict[type] = scores[index];\r\n        });\r\n        \r\n        // Add to formatted response\r\n        if (formatted.InferenceResult) {\r\n          formatted.InferenceResult.personalityDict = personalityDict;\r\n        } else {\r\n          formatted.personalityDict = personalityDict;\r\n        }\r\n      }\r\n      \r\n      if (!includeArray) {\r\n        // Remove array format if not requested\r\n        if (formatted.InferenceResult?.traits) {\r\n          delete formatted.InferenceResult.traits;\r\n        }\r\n        if (formatted.traits) {\r\n          delete formatted.traits;\r\n        }\r\n        if (formatted.scores) {\r\n          delete formatted.scores;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Handle trait data if present (for preferences/traits)\r\n  if (apiResponse.traitResult || apiResponse.traits) {\r\n    const traits = apiResponse.traitResult || apiResponse.traits;\r\n    \r\n    if (Array.isArray(traits) && includeDictionary) {\r\n      const traitDict = {};\r\n      TRAIT_CATEGORIES.forEach((category, index) => {\r\n        if (traits[index] !== undefined) {\r\n          traitDict[category] = traits[index];\r\n        }\r\n      });\r\n      \r\n      formatted.traitDict = traitDict;\r\n    }\r\n  }\r\n\r\n  return formatted;\r\n}\r\n\r\n/**\r\n * Legacy formatter for backward compatibility\r\n * Converts scores array to personality dictionary only\r\n * @param {Array} scores - Array of personality scores\r\n * @returns {Object} Dictionary with personality type names as keys\r\n */\r\nexport function formatPersonalityScores(scores) {\r\n  if (!Array.isArray(scores) || scores.length < 16) {\r\n    console.warn('Invalid scores array provided to formatPersonalityScores');\r\n    return {};\r\n  }\r\n\r\n  const personalityDict = {};\r\n  PERSONALITY_TYPES.forEach((type, index) => {\r\n    personalityDict[type] = scores[index];\r\n  });\r\n  \r\n  return personalityDict;\r\n}\r\n\r\n/**\r\n * Get personality type names in order\r\n * @returns {Array} Array of personality type names\r\n */\r\nexport function getPersonalityTypes() {\r\n  return [...PERSONALITY_TYPES];\r\n}\r\n\r\n/**\r\n * Get trait category names in order  \r\n * @returns {Array} Array of trait category names\r\n */\r\nexport function getTraitCategories() {\r\n  return [...TRAIT_CATEGORIES];\r\n} ","/**\r\n * Enhanced User Data Formatter for onComplete Callback\r\n * Provides structured, readable formatting of Onairos user data\r\n */\r\n\r\n/**\r\n * Formats user data for better readability in onComplete callback\r\n * @param {Object} result - The complete result object from data request\r\n * @returns {Object} Enhanced result with formatted user data display\r\n */\r\nexport function formatUserDataForDisplay(result) {\r\n  if (!result) return result;\r\n\r\n  const formatted = { ...result };\r\n  \r\n  // Create a structured summary of the user data\r\n  const userDataSummary = {\r\n    // Basic request information\r\n    requestInfo: {\r\n      timestamp: result.timestamp || new Date().toISOString(),\r\n      appName: result.appName || 'Unknown App',\r\n      userHash: result.userHash || 'Unknown User',\r\n      testMode: result.testMode || false,\r\n      dataTypesRequested: Array.isArray(result.approvedData) ? result.approvedData : (result.approved || [])\r\n    },\r\n    \r\n    // User authentication and profile data\r\n    userProfile: {\r\n      email: result.userData?.email || 'Not provided',\r\n      userType: result.userData?.userType || 'Unknown',\r\n      onboardingComplete: result.userData?.onboardingComplete || false,\r\n      pinCreated: result.userData?.pinCreated || false,\r\n      trainingComplete: result.userData?.trainingComplete || false,\r\n      modelReady: result.userData?.modelReady || false\r\n    },\r\n    \r\n    // Connected platforms/accounts\r\n    connectedAccounts: formatConnectedAccounts(result.userData?.connectedAccounts || []),\r\n    \r\n    // API response data (personality, preferences, etc.)\r\n    aiData: formatAIResponseData(result.apiResponse),\r\n    \r\n    // Success status and any errors\r\n    status: {\r\n      success: result.success || false,\r\n      hasApiResponse: !!result.apiResponse,\r\n      hasErrors: !!result.error || !!result.apiError\r\n    }\r\n  };\r\n\r\n  // Add the formatted summary to the result\r\n  formatted.userDataSummary = userDataSummary;\r\n  \r\n  // Create a pretty-printed version for console logging\r\n  formatted.prettyPrint = createPrettyPrintVersion(userDataSummary);\r\n  \r\n  return formatted;\r\n}\r\n\r\n/**\r\n * Formats connected accounts data\r\n * @param {Array} accounts - Array of connected account objects\r\n * @returns {Object} Formatted accounts summary\r\n */\r\nfunction formatConnectedAccounts(accounts) {\r\n  if (!Array.isArray(accounts) || accounts.length === 0) {\r\n    return {\r\n      count: 0,\r\n      platforms: [],\r\n      summary: 'No connected accounts'\r\n    };\r\n  }\r\n\r\n  return {\r\n    count: accounts.length,\r\n    platforms: accounts.map(account => ({\r\n      name: account.platform || account.name || 'Unknown Platform',\r\n      status: account.status || 'Unknown',\r\n      connectedAt: account.connectedAt || 'Unknown date',\r\n      hasData: account.hasData || false\r\n    })),\r\n    summary: `${accounts.length} platform(s) connected: ${accounts.map(a => a.platform || a.name).join(', ')}`\r\n  };\r\n}\r\n\r\n/**\r\n * Formats AI response data (personality scores, traits, etc.)\r\n * @param {Object} apiResponse - The API response containing AI data\r\n * @returns {Object} Formatted AI data summary\r\n */\r\nfunction formatAIResponseData(apiResponse) {\r\n  if (!apiResponse) {\r\n    return {\r\n      available: false,\r\n      summary: 'No AI data available'\r\n    };\r\n  }\r\n\r\n  const aiData = {\r\n    available: true,\r\n    dataTypes: []\r\n  };\r\n\r\n  // Check for Onairos Wrapped Dashboard\r\n  if (apiResponse.data?.dashboard || apiResponse.dashboard || apiResponse.slides) {\r\n    aiData.dataTypes.push({\r\n      type: 'wrapped_dashboard',\r\n      available: true,\r\n      data: apiResponse.data?.dashboard || apiResponse.dashboard || apiResponse,\r\n      summary: 'Onairos Wrapped / Neural Recall Dashboard'\r\n    });\r\n    \r\n    // Add apps if available\r\n    if (apiResponse.data?.apps || apiResponse.apps) {\r\n      aiData.dataTypes.push({\r\n        type: 'connected_apps',\r\n        available: true,\r\n        data: apiResponse.data?.apps || apiResponse.apps,\r\n        summary: `Connected apps list (${(apiResponse.data?.apps || apiResponse.apps).length})`\r\n      });\r\n    }\r\n  }\r\n\r\n  // Check for personality data\r\n  if (apiResponse.InferenceResult?.traits || apiResponse.personalityDict || apiResponse.traits) {\r\n    const personalityData = {\r\n      type: 'personality',\r\n      available: true\r\n    };\r\n\r\n    // If we have dictionary format, use it for better readability\r\n    if (apiResponse.personalityDict) {\r\n      personalityData.data = apiResponse.personalityDict;\r\n      personalityData.summary = `Personality analysis with ${Object.keys(apiResponse.personalityDict).length} traits`;\r\n    } else if (apiResponse.InferenceResult?.traits) {\r\n      personalityData.data = apiResponse.InferenceResult.traits;\r\n      personalityData.summary = `Personality scores array with ${apiResponse.InferenceResult.traits.length} values`;\r\n    } else if (apiResponse.traits) {\r\n      personalityData.data = apiResponse.traits;\r\n      personalityData.summary = `Personality traits with ${Array.isArray(apiResponse.traits) ? apiResponse.traits.length : Object.keys(apiResponse.traits).length} items`;\r\n    }\r\n\r\n    aiData.dataTypes.push(personalityData);\r\n  }\r\n\r\n  // Check for preferences/traits data\r\n  if (apiResponse.traitResult || apiResponse.traitDict) {\r\n    const preferencesData = {\r\n      type: 'preferences',\r\n      available: true\r\n    };\r\n\r\n    if (apiResponse.traitDict) {\r\n      preferencesData.data = apiResponse.traitDict;\r\n      preferencesData.summary = `Preferences analysis with ${Object.keys(apiResponse.traitDict).length} categories`;\r\n    } else if (apiResponse.traitResult) {\r\n      preferencesData.data = apiResponse.traitResult;\r\n      preferencesData.summary = `Trait results with ${Array.isArray(apiResponse.traitResult) ? apiResponse.traitResult.length : Object.keys(apiResponse.traitResult).length} items`;\r\n    }\r\n\r\n    aiData.dataTypes.push(preferencesData);\r\n  }\r\n\r\n  // Check for basic info/output\r\n  if (apiResponse.InferenceResult?.output || apiResponse.output) {\r\n    aiData.dataTypes.push({\r\n      type: 'basic_info',\r\n      available: true,\r\n      data: apiResponse.InferenceResult?.output || apiResponse.output,\r\n      summary: 'Basic user information and insights'\r\n    });\r\n  }\r\n\r\n  // Create overall summary\r\n  aiData.summary = aiData.dataTypes.length > 0 \r\n    ? `AI analysis complete with ${aiData.dataTypes.length} data type(s): ${aiData.dataTypes.map(d => d.type).join(', ')}`\r\n    : 'AI data structure present but no recognized data types found';\r\n\r\n  return aiData;\r\n}\r\n\r\n/**\r\n * Creates a pretty-printed version for console logging\r\n * @param {Object} userDataSummary - The formatted user data summary\r\n * @returns {string} Pretty-printed string for console output\r\n */\r\nfunction createPrettyPrintVersion(userDataSummary) {\r\n  const lines = [];\r\n  \r\n  lines.push(' ONAIROS USER DATA SUMMARY');\r\n  lines.push('=' .repeat(50));\r\n  \r\n  // Request Info\r\n  lines.push('\\n REQUEST INFORMATION:');\r\n  lines.push(`   App: ${userDataSummary.requestInfo.appName}`);\r\n  lines.push(`   User: ${userDataSummary.requestInfo.userHash}`);\r\n  lines.push(`   Mode: ${userDataSummary.requestInfo.testMode ? 'Test' : 'Production'}`);\r\n  lines.push(`   Data Types: ${Array.isArray(userDataSummary.requestInfo.dataTypesRequested) && userDataSummary.requestInfo.dataTypesRequested.length > 0 ? userDataSummary.requestInfo.dataTypesRequested.join(', ') : 'None'}`);\r\n  lines.push(`   Timestamp: ${new Date(userDataSummary.requestInfo.timestamp).toLocaleString()}`);\r\n  \r\n  // User Profile\r\n  lines.push('\\n USER PROFILE:');\r\n  lines.push(`   Email: ${userDataSummary.userProfile.email}`);\r\n  lines.push(`   Type: ${userDataSummary.userProfile.userType}`);\r\n  lines.push(`   Onboarding: ${userDataSummary.userProfile.onboardingComplete ? '' : ''}`);\r\n  lines.push(`   PIN Setup: ${userDataSummary.userProfile.pinCreated ? '' : ''}`);\r\n  lines.push(`   Training: ${userDataSummary.userProfile.trainingComplete ? '' : ''}`);\r\n  lines.push(`   Model Ready: ${userDataSummary.userProfile.modelReady ? '' : ''}`);\r\n  \r\n  // Connected Accounts\r\n  lines.push('\\n CONNECTED ACCOUNTS:');\r\n  lines.push(`   ${userDataSummary.connectedAccounts.summary}`);\r\n  if (userDataSummary.connectedAccounts.platforms.length > 0) {\r\n    userDataSummary.connectedAccounts.platforms.forEach(platform => {\r\n      lines.push(`    ${platform.name}: ${platform.status} ${platform.hasData ? '(has data)' : '(no data)'}`);\r\n    });\r\n  }\r\n  \r\n  // AI Data\r\n  lines.push('\\n AI ANALYSIS DATA:');\r\n  lines.push(`   ${userDataSummary.aiData.summary}`);\r\n  if (userDataSummary.aiData.dataTypes.length > 0) {\r\n    userDataSummary.aiData.dataTypes.forEach(dataType => {\r\n      lines.push(`    ${dataType.type.toUpperCase()}: ${dataType.summary}`);\r\n    });\r\n  }\r\n  \r\n  // Status\r\n  lines.push('\\n STATUS:');\r\n  lines.push(`   Success: ${userDataSummary.status.success ? '' : ''}`);\r\n  lines.push(`   API Response: ${userDataSummary.status.hasApiResponse ? '' : ''}`);\r\n  lines.push(`   Errors: ${userDataSummary.status.hasErrors ? ' Yes' : ' None'}`);\r\n  \r\n  lines.push('\\n' + '=' .repeat(50));\r\n  \r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Console logging helper that prints formatted user data\r\n * @param {Object} result - The result object from onComplete\r\n */\r\nexport function logFormattedUserData(result) {\r\n  const formatted = formatUserDataForDisplay(result);\r\n  \r\n  console.log('\\n' + formatted.prettyPrint + '\\n');\r\n  \r\n  // Also log the structured data for programmatic access\r\n  console.log(' Structured User Data Summary:', formatted.userDataSummary);\r\n  \r\n  return formatted;\r\n}\r\n\r\nexport default {\r\n  formatUserDataForDisplay,\r\n  logFormattedUserData\r\n};\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport { COLORS } from '../../theme/colors.js';\r\n\r\n// Standardized page layout component with white background\r\nconst PageLayout = ({\r\n  children,\r\n  title,\r\n  subtitle,\r\n  icon,\r\n  showHeader = true,\r\n  showCloseButton = false,\r\n  onClose,\r\n  onBack,\r\n  showBackButton = false,\r\n  className = '',\r\n  contentClassName = '',\r\n  centerContent = true,\r\n  style = {},\r\n  ...props\r\n}) => {\r\n  const isSmallScreen = typeof window !== 'undefined' && window.innerWidth <= 768;\r\n\r\n  const layoutStyle = {\r\n    backgroundColor: COLORS.background,\r\n    minHeight: '100%',\r\n    width: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    ...style\r\n  };\r\n\r\n  const headerStyle = {\r\n    position: 'sticky',\r\n    top: 0,\r\n    backgroundColor: COLORS.background,\r\n    zIndex: 10,\r\n    padding: isSmallScreen\r\n      ? '10px 16px 8px'\r\n      : 'clamp(8px, 2vw, 16px) clamp(16px, 4vw, 32px) clamp(6px, 1.5vw, 12px)'\r\n  };\r\n\r\n  const contentStyle = {\r\n    flex: 1,\r\n    padding: isSmallScreen ? '16px 16px 18px' : 'clamp(16px, 4vw, 32px)',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    overflow: 'auto',\r\n    minHeight: 0, // Allow flex item to shrink below content size\r\n    ...(centerContent && {\r\n      alignItems: 'center',\r\n      justifyContent: 'flex-start'\r\n    })\r\n  };\r\n\r\n  const titleStyle = {\r\n    fontFamily: 'Inter, system-ui, sans-serif',\r\n    fontSize: 'clamp(20px, 5vw, 28px)',\r\n    fontWeight: '700',\r\n    color: COLORS.textPrimary,\r\n    margin: '0 0 clamp(6px, 1.5vw, 12px) 0',\r\n    textAlign: centerContent ? 'center' : 'left',\r\n    lineHeight: '1.2'\r\n  };\r\n\r\n  const subtitleStyle = {\r\n    fontFamily: 'Inter, system-ui, sans-serif',\r\n    fontSize: 'clamp(14px, 3.5vw, 18px)',\r\n    fontWeight: '400',\r\n    color: COLORS.textSecondary,\r\n    margin: isSmallScreen ? '0 0 18px 0' : '0 0 clamp(20px, 5vw, 40px) 0',\r\n    textAlign: centerContent ? 'center' : 'left',\r\n    lineHeight: '1.5'\r\n  };\r\n\r\n  const iconStyle = {\r\n    width: 'clamp(40px, 8vw, 56px)',\r\n    height: 'clamp(40px, 8vw, 56px)',\r\n    margin: '0 auto clamp(16px, 4vw, 32px)',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    fontSize: 'clamp(20px, 5vw, 28px)'\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className={`onairos-page-layout ${className}`}\r\n      style={layoutStyle}\r\n      {...props}\r\n    >\r\n      {/* Header with navigation */}\r\n      {showHeader && (\r\n        <div style={headerStyle}>\r\n          <div className=\"flex items-center justify-between\">\r\n            {/* Back button */}\r\n            {showBackButton && onBack && (\r\n              <button\r\n                onClick={onBack}\r\n                className=\"flex items-center justify-center w-8 h-8 rounded-full hover:bg-gray-100 transition-colors\"\r\n                aria-label=\"Go back\"\r\n              >\r\n                <span style={{ fontSize: '16px', color: COLORS.textPrimary }}></span>\r\n              </button>\r\n            )}\r\n\r\n\r\n            {/* Close button */}\r\n            {showCloseButton && onClose && (\r\n              <button\r\n                onClick={onClose}\r\n                className=\"flex items-center justify-center w-8 h-8 rounded-full hover:bg-gray-100 transition-colors\"\r\n                aria-label=\"Close\"\r\n              >\r\n                <span style={{ fontSize: '16px', color: COLORS.textPrimary }}></span>\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Main content area */}\r\n      <div \r\n        className={`onairos-page-content ${contentClassName}`}\r\n        style={contentStyle}\r\n      >\r\n        {/* Icon */}\r\n        {icon && (\r\n          <div style={iconStyle}>\r\n            {typeof icon === 'string' ? <span>{icon}</span> : icon}\r\n          </div>\r\n        )}\r\n\r\n        {/* Title */}\r\n        {title && (\r\n          <h1 style={titleStyle}>\r\n            {title}\r\n          </h1>\r\n        )}\r\n\r\n        {/* Subtitle */}\r\n        {subtitle && (\r\n          <p style={subtitleStyle}>\r\n            {subtitle}\r\n          </p>\r\n        )}\r\n\r\n        {/* Page content */}\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Modal wrapper component for overlay-style pages\r\nconst ModalPageLayout = ({\r\n  children,\r\n  visible = true,\r\n  onClose,\r\n  onBackdropClick,\r\n  backdropStyle = {},\r\n  modalStyle = {},\r\n  modalClassName = '',\r\n  ...pageLayoutProps\r\n}) => {\r\n  if (!visible) return null;\r\n\r\n  // Detect Capacitor native platform\r\n  // Must be defined BEFORE usage to avoid Temporal Dead Zone (TDZ) error\r\n  const isCapacitorNative = typeof window !== 'undefined' && \r\n    window.Capacitor && \r\n    typeof window.Capacitor.isNativePlatform === 'function' && \r\n    window.Capacitor.isNativePlatform();\r\n    \r\n  // Detect mobile browser (not Capacitor native)\r\n  const isMobileBrowser = typeof window !== 'undefined' && \r\n    window.innerWidth <= 768 && \r\n    !isCapacitorNative;\r\n\r\n  // Use visualViewport to avoid iOS \"vh\" causing phantom scroll and clipped content.\r\n  const [mobileModalHeightPx, setMobileModalHeightPx] = useState(() => {\r\n    if (typeof window === 'undefined') return null;\r\n    if (!isMobileBrowser) return null;\r\n    const h = window.visualViewport?.height || window.innerHeight;\r\n    return Math.round(h * 0.8);\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    if (!isMobileBrowser) return;\r\n    const compute = () => {\r\n      const h = window.visualViewport?.height || window.innerHeight;\r\n      setMobileModalHeightPx(Math.round(h * 0.8));\r\n    };\r\n    compute();\r\n    window.addEventListener('resize', compute);\r\n    window.visualViewport?.addEventListener?.('resize', compute);\r\n    window.visualViewport?.addEventListener?.('scroll', compute);\r\n    return () => {\r\n      window.removeEventListener('resize', compute);\r\n      window.visualViewport?.removeEventListener?.('resize', compute);\r\n      window.visualViewport?.removeEventListener?.('scroll', compute);\r\n    };\r\n  }, [isMobileBrowser]);\r\n    \r\n  // ENHANCED DEBUG LOGGING for mobile browser height issues\r\n  if (typeof window !== 'undefined') {\r\n    console.log('[Onairos SDK][ModalPageLayout] Mobile Detection', {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n      isCapacitorNative,\r\n      isMobileBrowser,\r\n      modalHeight: isMobileBrowser ? '80vh' : (isCapacitorNative ? '100vh' : 'auto'),\r\n      modalMaxHeight: isMobileBrowser ? '80vh' : (isCapacitorNative ? '100vh' : '90vh'),\r\n      modalMaxWidth: isMobileBrowser ? '100%' : '500px',\r\n      backdropAlign: (isCapacitorNative || isMobileBrowser) ? 'flex-end' : 'center',\r\n      backdropPadding: isMobileBrowser ? '0' : '16px'\r\n    });\r\n  }\r\n\r\n  const backdropStyles = {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n    zIndex: 2147483647,\r\n    display: 'flex',\r\n    alignItems: (isCapacitorNative || isMobileBrowser) ? 'flex-end' : 'center',\r\n    justifyContent: 'center',\r\n    padding: isMobileBrowser ? '0' : '16px',\r\n    transition: 'opacity 200ms ease',\r\n    willChange: 'opacity',\r\n    ...backdropStyle\r\n  };\r\n  \r\n  console.log('[Onairos SDK][ModalPageLayout]  Backdrop Styles COMPUTED:', {\r\n    alignItems: backdropStyles.alignItems,\r\n    padding: backdropStyles.padding,\r\n    display: backdropStyles.display,\r\n    hasBackdropStyleOverride: Object.keys(backdropStyle).length > 0,\r\n    backdropStyleOverride: backdropStyle\r\n  });\r\n  \r\n  const modalStyles = {\r\n    backgroundColor: COLORS.background,\r\n    borderTopLeftRadius: '24px',\r\n    borderTopRightRadius: '24px',\r\n    borderBottomLeftRadius: (isCapacitorNative || isMobileBrowser) ? '0px' : '24px',\r\n    borderBottomRightRadius: (isCapacitorNative || isMobileBrowser) ? '0px' : '24px',\r\n    // Force height on mobile browser with !important via inline style\r\n    height: isMobileBrowser ? (mobileModalHeightPx ? `${mobileModalHeightPx}px` : '80vh') : (isCapacitorNative ? '100vh' : 'auto'),\r\n    maxHeight: isMobileBrowser ? (mobileModalHeightPx ? `${mobileModalHeightPx}px` : '80vh') : (isCapacitorNative ? '100vh' : '90vh'),\r\n    minHeight: (isCapacitorNative || isMobileBrowser) ? 'auto' : '600px',\r\n    width: '100%',\r\n    maxWidth: isMobileBrowser ? '100%' : '500px',\r\n    boxShadow: '0 -10px 40px rgba(0, 0, 0, 0.3)',\r\n    overflow: 'hidden',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    // iOS safe-area: extend the white modal background into the home-indicator inset\r\n    ...(isMobileBrowser ? { paddingBottom: 'env(safe-area-inset-bottom)' } : {}),\r\n    transform: 'translateY(0)',\r\n    transition: 'transform 220ms ease, opacity 220ms ease',\r\n    willChange: 'transform, opacity',\r\n    marginLeft: (isCapacitorNative || isMobileBrowser) ? '0' : 'auto',\r\n    marginRight: (isCapacitorNative || isMobileBrowser) ? '0' : 'auto',\r\n    marginBottom: isMobileBrowser ? '0' : 'auto',\r\n    marginTop: isMobileBrowser ? 'auto' : 'auto',\r\n    // Ensure full height on Capacitor native\r\n    ...(isCapacitorNative && {\r\n      position: 'absolute',\r\n      bottom: 0,\r\n      left: 0,\r\n      right: 0,\r\n      top: 0,\r\n      borderRadius: 0\r\n    }),\r\n    // Position mobile browser modal at bottom\r\n    ...(isMobileBrowser && {\r\n      flexShrink: 0\r\n    }),\r\n    // CRITICAL: Do NOT spread modalStyle on mobile browser - it breaks height\r\n    ...(isMobileBrowser ? {} : modalStyle)\r\n  };\r\n  \r\n  console.log('[Onairos SDK][ModalPageLayout]  Modal Styles COMPUTED:', {\r\n    height: modalStyles.height,\r\n    maxHeight: modalStyles.maxHeight,\r\n    minHeight: modalStyles.minHeight,\r\n    width: modalStyles.width,\r\n    maxWidth: modalStyles.maxWidth,\r\n    borderRadius: `${modalStyles.borderTopLeftRadius} / ${modalStyles.borderBottomLeftRadius}`,\r\n    hasModalStyleOverride: Object.keys(modalStyle).length > 0,\r\n    modalStyleWasApplied: isMobileBrowser ? 'NO (blocked for mobile)' : 'YES',\r\n    modalStyleOverride: modalStyle\r\n  });\r\n  \r\n  // Warn if modalStyle is trying to override on mobile browser\r\n  if (isMobileBrowser && modalStyle && Object.keys(modalStyle).length > 0) {\r\n    console.warn('[Onairos SDK][ModalPageLayout]  BLOCKED modalStyle override on mobile browser. Ignoring:', modalStyle);\r\n  }\r\n\r\n  //  Layout debug logging (desktop vs native)\r\n  try {\r\n    if (typeof window !== 'undefined') {\r\n      const width = window.innerWidth;\r\n      const isDesktop = width >= 1024 && !isCapacitorNative;\r\n      // Only spam logs in desktop where sizing issues occur\r\n      if (isDesktop) {\r\n        // Keep this fairly compact but detailed\r\n        console.log('[Onairos SDK][Layout][ModalPageLayout]', {\r\n          width,\r\n          isCapacitorNative,\r\n          modalClassName,\r\n          modalStyleKeys: Object.keys(modalStyle || {}),\r\n          backdropStyleKeys: Object.keys(backdropStyle || {}),\r\n          modalMaxWidth: modalStyles.maxWidth,\r\n          modalMinHeight: modalStyles.minHeight,\r\n          modalHeight: modalStyles.height,\r\n        });\r\n      }\r\n    }\r\n  } catch (e) {\r\n    // Never let logging break rendering\r\n  }\r\n\r\n  const handleBackdropClick = (e) => {\r\n    if (e.target === e.currentTarget) {\r\n      console.log(' Backdrop clicked outside modal');\r\n      if (onBackdropClick) {\r\n        console.log(' Calling onBackdropClick handler');\r\n        onBackdropClick();\r\n      } else if (onClose) {\r\n        console.log(' Calling onClose handler');\r\n        onClose();\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div \r\n      style={backdropStyles} \r\n      onClick={handleBackdropClick}\r\n      data-onairos-backdrop=\"true\"\r\n      data-mobile-browser={isMobileBrowser ? 'true' : 'false'}\r\n      data-capacitor-native={isCapacitorNative ? 'true' : 'false'}\r\n    >\r\n      <div \r\n        style={modalStyles} \r\n        className={modalClassName}\r\n        onClick={(e) => e.stopPropagation()}\r\n        data-onairos-modal=\"true\"\r\n        data-mobile-browser={isMobileBrowser ? 'true' : 'false'}\r\n        data-modal-height={modalStyles.height}\r\n      >\r\n        <PageLayout\r\n          showHeader={true}\r\n          showCloseButton={true}\r\n          onClose={onClose}\r\n          {...pageLayoutProps}\r\n        >\r\n          {children}\r\n        </PageLayout>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { ModalPageLayout };\r\nexport default PageLayout; ","import React, { useEffect, useState } from 'react';\r\nimport { App } from '@capacitor/app';\r\nimport { Browser } from '@capacitor/browser';\r\nimport WelcomeScreen from './components/WelcomeScreen.jsx';\r\nimport EmailAuth from './components/EmailAuth.js';\r\nimport UniversalOnboarding from './components/UniversalOnboarding.jsx';\r\nimport PinSetup from './components/PinSetup.js';\r\nimport DataRequest from './components/DataRequest.js';\r\nimport TrainingComponent from './components/TrainingComponent.jsx';\r\nimport TrainingScreen from './components/TrainingScreen.jsx';\r\nimport LoadingScreen from './components/LoadingScreen.jsx';\r\nimport WrappedLoadingPage from './components/WrappedLoadingPage.jsx';\r\nimport { formatOnairosResponse } from './utils/responseFormatter.js';\r\nimport { logFormattedUserData } from './utils/userDataFormatter.js';\r\nimport { ModalPageLayout } from './components/ui/PageLayout.jsx';\r\nimport { isMobileApp, isMobileBrowser } from './utils/capacitorDetection.js';\r\n\r\nexport function OnairosButton({\r\n  requestData, \r\n  webpageName, \r\n  inferenceData = null, \r\n  onComplete = null, \r\n  autoFetch = true, // Auto-enabled for seamless testing experience\r\n  testMode = false, // Production mode by default - set to true for testing\r\n  proofMode = false, \r\n  textLayout = 'below', \r\n  textColor = 'white',\r\n  login = false,\r\n  buttonType = 'pill',\r\n  loginReturn = null,\r\n  loginType = 'signIn',\r\n  visualType = 'full',\r\n  appIcon = null,\r\n  enableTraining = true,\r\n  formatResponse = true,\r\n  responseFormat = { includeDictionary: true, includeArray: true },\r\n  priorityPlatform = null, // Platform to prioritize (e.g., 'gmail', 'pinterest', 'linkedin')\r\n  rawMemoriesOnly = false, // Show only LLM connections when true\r\n  rawMemoriesConfig = null, // Configuration for RAW memories collection\r\n  time = false // Show time frequency slider (default: false)\r\n}) {\r\n\r\n  const [showOverlay, setShowOverlay] = useState(false);\r\n  const [currentFlow, setCurrentFlow] = useState('welcome'); // 'welcome' | 'email' | 'onboarding' | 'pin' | 'trainingScreen' | 'dataRequest' | 'wrappedLoading'\r\n  const [trainingHasStarted, setTrainingHasStarted] = useState(false);\r\n  const [userData, setUserData] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [oauthReturnDetected, setOauthReturnDetected] = useState(false);\r\n  const [returnToDataRequestAfterOnboarding, setReturnToDataRequestAfterOnboarding] = useState(false);\r\n  \r\n  // Detect mobile for conditional styling (MOBILE ONLY changes)\r\n  // Use a safer check that doesn't rely on window/navigator being immediately available\r\n  const [isMobileDevice, setIsMobileDevice] = useState(false);\r\n  \r\n  useEffect(() => {\r\n    // Determine mobile vs desktop based on viewport width + native runtime,\r\n    // and keep it updated on resize.\r\n    const computeMobile = () => {\r\n      try {\r\n        const hasWindow = typeof window !== 'undefined';\r\n        if (!hasWindow) {\r\n          setIsMobileDevice(false);\r\n          return;\r\n        }\r\n\r\n        // Base width from current window\r\n        let width = window.innerWidth || document.documentElement?.clientWidth || document.body?.clientWidth || 0;\r\n\r\n        // If running inside an iframe, try to use the parent window width as well\r\n        // so desktop pages embedding the SDK don't get misclassified as mobile.\r\n        try {\r\n          if (window.parent && window.parent !== window && window.parent.innerWidth) {\r\n            width = Math.max(width, window.parent.innerWidth);\r\n          }\r\n        } catch (_) {\r\n          // Cross-origin access can fail; ignore and fall back to local width.\r\n        }\r\n\r\n        const isCapNative = !!window.Capacitor?.isNativePlatform?.();\r\n\r\n        //  Final, explicit rule:\r\n        // - Capacitor native: ALWAYS mobile\r\n        // - Otherwise: viewport < 1024px (taking parent if available)  mobile; >= 1024px  desktop\r\n        const detectedMobile = isCapNative || width < 1024;\r\n\r\n        console.log('[Onairos SDK][Layout][MobileDetection simple]', {\r\n          width,\r\n          isCapNative,\r\n          detectedMobile,\r\n        });\r\n\r\n        setIsMobileDevice(detectedMobile);\r\n      } catch (e) {\r\n        setIsMobileDevice(false);\r\n      }\r\n    };\r\n\r\n    computeMobile();\r\n\r\n    // Desktop resize listener to keep classification accurate when user resizes window.\r\n    // This runs in all environments, but the rule above ensures iPhone/Capacitor\r\n    // keep their correct classification.\r\n    if (typeof window !== 'undefined') {\r\n      window.addEventListener('resize', computeMobile);\r\n      return () => window.removeEventListener('resize', computeMobile);\r\n    }\r\n  }, []);\r\n\r\n  // Lock background scroll on DESKTOP while modal is open (do not touch mobile/Capacitor)\r\n  useEffect(() => {\r\n    if (typeof document === 'undefined') return;\r\n\r\n    const body = document.body;\r\n    if (!body) return;\r\n\r\n    if (showOverlay && !isMobileDevice) {\r\n      // Remember previous overflow so we can restore it precisely\r\n      if (!body.dataset.onairosPrevOverflow) {\r\n        body.dataset.onairosPrevOverflow = body.style.overflow || '';\r\n      }\r\n      body.style.overflow = 'hidden';\r\n    } else {\r\n      // Restore previous overflow when modal closes or when switching back to mobile\r\n      if (body.dataset.onairosPrevOverflow !== undefined) {\r\n        body.style.overflow = body.dataset.onairosPrevOverflow;\r\n        delete body.dataset.onairosPrevOverflow;\r\n      }\r\n    }\r\n  }, [showOverlay, isMobileDevice]);\r\n\r\n  //  High-level layout debug for desktop vs mobile\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    const width = window.innerWidth;\r\n    const isDesktop = width >= 1024 && !isMobileDevice;\r\n    console.log('[Onairos SDK][Layout][OnairosButton state]', {\r\n      width,\r\n      isDesktop,\r\n      isMobileDevice,\r\n      currentFlow,\r\n      showOverlay,\r\n    });\r\n  }, [isMobileDevice, currentFlow, showOverlay]);\r\n\r\n  //  DOM-level layout debug (only on desktop web)\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    const width = window.innerWidth;\r\n    const isDesktopWeb = width >= 1024 && !isMobileDevice && !window.Capacitor?.isNativePlatform?.();\r\n    if (!isDesktopWeb || !showOverlay) return;\r\n\r\n    // Defer to allow React layout to flush\r\n    const id = window.setTimeout(() => {\r\n      try {\r\n        const modal = document.querySelector('.onairos-modal');\r\n        const pageContent = document.querySelector('.onairos-page-content');\r\n        const shell = document.querySelector('.onairos-modal-shell');\r\n\r\n        const getMetrics = (el) => {\r\n          if (!el) return null;\r\n          const rect = el.getBoundingClientRect();\r\n          const styles = window.getComputedStyle(el);\r\n          return {\r\n            width: rect.width,\r\n            height: rect.height,\r\n            maxWidth: styles.maxWidth,\r\n            paddingInline: styles.paddingLeft + ' / ' + styles.paddingRight,\r\n            classList: Array.from(el.classList || []),\r\n          };\r\n        };\r\n\r\n        console.log('[Onairos SDK][Layout][DOM snapshot]', {\r\n          currentFlow,\r\n          viewportWidth: width,\r\n          modal: getMetrics(modal),\r\n          pageContent: getMetrics(pageContent),\r\n          shell: getMetrics(shell),\r\n        });\r\n      } catch (e) {\r\n        console.log('[Onairos SDK][Layout][DOM snapshot] failed', e?.message);\r\n      }\r\n    }, 0);\r\n\r\n    return () => window.clearTimeout(id);\r\n  }, [currentFlow, showOverlay, isMobileDevice]);\r\n  \r\n  // Logic to process return URLs (Login & Connectors)\r\n  const handleDeepLink = (url) => {\r\n      try {\r\n        console.log(' Checking URL for OAuth return:', url);\r\n        \r\n        // Normalize URL to check for params\r\n        // For native apps, url might be 'mobiletest://oauth-callback?success=true...'\r\n        // Also check specifically for Reddit's return format or other providers\r\n        const hasSuccess = url.includes('success=true') || \r\n                          url.includes('onairos_oauth_success=true') ||\r\n                          (url.includes('state=') && url.includes('code='));\r\n        \r\n        const hasError = url.includes('error=') || url.includes('onairos_oauth_error=');\r\n        const isPopup = url.includes('is_popup=true'); // Check for our custom flag\r\n        \r\n        // Safety Check: If we are running inside a popup or iframe (desktop), we should close ourselves\r\n        // and notify the parent. This happens if the callback redirected instead of closing.\r\n        // We check for window.opener, parent!=window, OR our explicit is_popup flag\r\n        if ((hasSuccess || hasError) && typeof window !== 'undefined' && \r\n            (window.opener || window.parent !== window || isPopup)) {\r\n             console.log(' App loaded inside OAuth popup/iframe (detected via opener/parent/flag) - closing');\r\n             \r\n             // Extract params for storage/message\r\n             let params;\r\n             try {\r\n                const qIdx = url.indexOf('?');\r\n                if (qIdx !== -1) params = new URLSearchParams(url.substring(qIdx + 1));\r\n                else params = new URL(url).searchParams;\r\n             } catch(e) { params = new URLSearchParams(''); }\r\n             \r\n             const platform = params.get('platform') || params.get('onairos_oauth_platform');\r\n             const email = params.get('email') || params.get('onairos_oauth_email');\r\n             \r\n             // 1. Write to LocalStorage (Same Origin as Parent) - Primary mechanism for cross-origin flow fallback\r\n             if (hasSuccess && platform) {\r\n                 localStorage.setItem(`onairos_${platform}_success`, 'true');\r\n                 localStorage.setItem(`onairos_${platform}_timestamp`, Date.now().toString());\r\n                 if (email) localStorage.setItem(`onairos_${platform}_email`, email);\r\n             }\r\n             \r\n             // 2. Try postMessage (only works if opener exists)\r\n             try {\r\n                const target = window.opener || window.parent;\r\n                if (target) {\r\n                    target.postMessage({\r\n                        type: hasSuccess ? 'oauth-success' : 'oauth-error',\r\n                        platform: platform,\r\n                        email: email,\r\n                        error: params.get('error'),\r\n                        success: !!hasSuccess\r\n                    }, '*');\r\n                }\r\n             } catch (e) {}\r\n\r\n             // 3. Close window\r\n             window.close();\r\n             // If window.close() is blocked (scripts can't close windows they didn't open),\r\n             // show a message asking user to close.\r\n             setTimeout(() => {\r\n                 document.body.innerHTML = '<div style=\"display:flex;justify-content:center;align-items:center;height:100vh;flex-direction:column;font-family:sans-serif;\"><h1>Success!</h1><p>You can close this window now.</p><button onclick=\"window.close()\" style=\"padding:10px 20px;margin-top:20px;cursor:pointer;\">Close Window</button></div>';\r\n             }, 500);\r\n             \r\n             return; // Stop execution here\r\n        }\r\n        \r\n        if (hasSuccess) {\r\n           console.log(' Deep link/OAuth return detected:', url);\r\n           \r\n           // Close browser if open (Capacitor) - Important for Native\r\n           Browser.close().catch(() => {});\r\n\r\n           // Extract params from URL\r\n           let params;\r\n           try {\r\n             // Handle custom schemes that URL() constructor might reject if not fully standard\r\n             const questionMarkIndex = url.indexOf('?');\r\n             if (questionMarkIndex !== -1) {\r\n                params = new URLSearchParams(url.substring(questionMarkIndex + 1));\r\n             } else {\r\n                params = new URL(url).searchParams;\r\n             }\r\n           } catch (e) {\r\n             console.warn('URL parsing failed, trying fallback split:', e);\r\n             params = new URLSearchParams(url.split('?')[1] || '');\r\n           }\r\n\r\n           let platform = params.get('platform') || params.get('onairos_oauth_platform') || 'google';\r\n           let email = params.get('email') || params.get('onairos_oauth_email');\r\n           \r\n           // Fallback for Reddit/others that might rely on state\r\n           if (!platform || platform === 'null') {\r\n              const state = params.get('state');\r\n              if (state) {\r\n                 try {\r\n                    // Try to decode state if it's base64\r\n                    const decoded = JSON.parse(atob(state));\r\n                    if (decoded.connectionType) platform = decoded.connectionType;\r\n                    if (decoded.username) email = decoded.username; // Sometimes username is email\r\n                 } catch (e) {\r\n                    console.log('State decoding failed (not base64 JSON or invalid)');\r\n                 }\r\n              }\r\n           }\r\n\r\n           if (email) email = decodeURIComponent(email);\r\n           \r\n           console.log(` Detected return from ${platform} for ${email || 'unknown user'}`);\r\n           \r\n           // Set state to restore flow\r\n           setOauthReturnDetected(true);\r\n           \r\n           // 1. SUPPORT UNIVERSAL ONBOARDING (YouTube, LinkedIn, Reddit, etc.)\r\n           sessionStorage.setItem('onairos_oauth_return_success', 'true');\r\n           sessionStorage.setItem('onairos_oauth_return_platform', platform);\r\n\r\n           // Dispatch event to update UI immediately if component is mounted\r\n           if (typeof window !== 'undefined') {\r\n             window.dispatchEvent(new CustomEvent('onairos-oauth-success', { \r\n               detail: { platform: platform, email: email } \r\n             }));\r\n           }\r\n           \r\n           if (platform) {\r\n             localStorage.setItem(`onairos_${platform}_success`, 'true');\r\n             localStorage.setItem(`onairos_${platform}_timestamp`, Date.now().toString());\r\n           }\r\n\r\n           // 2. SUPPORT EMAIL AUTH (Gmail)\r\n           if (platform === 'google' || platform === 'gmail') {\r\n             localStorage.setItem('onairos_gmail_success', 'true');\r\n             localStorage.setItem('onairos_gmail_timestamp', Date.now().toString());\r\n             if (email) localStorage.setItem('onairos_gmail_email', email);\r\n           }\r\n           \r\n           // Restore session if possible (only for Login flow really, but safe to update)\r\n           if (email) {\r\n             // MERGE with existing userData to preserve connectedAccounts\r\n             const existingUserData = JSON.parse(localStorage.getItem('onairosUser') || '{}');\r\n             const userData = {\r\n                ...existingUserData, // Preserve existing data (like connectedAccounts)\r\n                email: email,\r\n                verified: true,\r\n                onboardingComplete: false,\r\n                provider: platform\r\n             };\r\n             console.log(' Merging OAuth return with existing userData:', { existing: existingUserData.connectedAccounts, merged: userData.connectedAccounts });\r\n             localStorage.setItem('onairosUser', JSON.stringify(userData));\r\n             setUserData(userData);\r\n           }\r\n           \r\n           // Open modal and go to onboarding immediately\r\n           setShowOverlay(true);\r\n           setCurrentFlow('onboarding');\r\n           \r\n           // Clean up URL if possible (on web)\r\n           if (window.history && window.history.replaceState && url.startsWith('http')) {\r\n             const cleanUrl = window.location.pathname;\r\n             window.history.replaceState({}, '', cleanUrl);\r\n           }\r\n        }\r\n      } catch (e) {\r\n        console.error('Error handling deep link:', e);\r\n      }\r\n  };\r\n\r\n  // Native Deep Link Listener (Runs once, stays active)\r\n  useEffect(() => {\r\n    let appListener = null;\r\n    const setupListener = async () => {\r\n      // Only run on native platforms (iOS/Android)\r\n      const isNative = typeof window !== 'undefined' && window.Capacitor?.isNativePlatform?.();\r\n      if (!isNative) return;\r\n\r\n      let AppPlugin = App;\r\n      if (!AppPlugin || !AppPlugin.addListener) {\r\n        if (typeof window !== 'undefined' && window.Capacitor?.Plugins?.App) {\r\n          AppPlugin = window.Capacitor.Plugins.App;\r\n        }\r\n      }\r\n\r\n      if (!AppPlugin || !AppPlugin.addListener) {\r\n         console.warn(' App plugin not found for deep linking listener');\r\n         return;\r\n      }\r\n\r\n      try {\r\n        appListener = await AppPlugin.addListener('appUrlOpen', (data) => {\r\n          console.log(' Native deep link received:', data.url);\r\n          handleDeepLink(data.url);\r\n        });\r\n        console.log(' App deep link listener registered successfully');\r\n      } catch (e) {\r\n        console.warn(' Failed to setup App listener:', e);\r\n      }\r\n    };\r\n    setupListener();\r\n    \r\n    return () => {\r\n      if (appListener) appListener.remove();\r\n    };\r\n  }, []);\r\n\r\n  // Web/Initial Check (Respects oauthReturnDetected)\r\n  useEffect(() => {\r\n    if (oauthReturnDetected) return;\r\n    \r\n    handleDeepLink(window.location.href);\r\n    \r\n    const checkWindowUrl = () => handleDeepLink(window.location.href);\r\n    window.addEventListener('popstate', checkWindowUrl);\r\n    \r\n    return () => window.removeEventListener('popstate', checkWindowUrl);\r\n  }, [oauthReturnDetected]);\r\n\r\n  // Check for existing user session\r\n  useEffect(() => {\r\n    const checkExistingSession = () => {\r\n      // In test mode, always start fresh to see the full flow\r\n      if (testMode) {\r\n        console.log(' Test mode: Starting fresh flow, clearing any cached user data');\r\n        localStorage.removeItem('onairosUser');\r\n        setCurrentFlow('welcome');\r\n        return;\r\n      }\r\n      \r\n      const savedUser = localStorage.getItem('onairosUser');\r\n      if (savedUser) {\r\n        try {\r\n          const user = JSON.parse(savedUser);\r\n          setUserData(user);\r\n          // If user has completed onboarding and PIN setup, go directly to data request\r\n          if (user.onboardingComplete && user.pinCreated) {\r\n            setCurrentFlow('dataRequest');\r\n          } else if (user.verified && !user.onboardingComplete) {\r\n            setCurrentFlow('onboarding');\r\n          } else if (user.onboardingComplete && !user.pinCreated) {\r\n            setCurrentFlow('pin');\r\n          }\r\n        } catch (error) {\r\n          console.error('Error parsing saved user data:', error);\r\n          localStorage.removeItem('onairosUser');\r\n        }\r\n      }\r\n    };\r\n\r\n    checkExistingSession();\r\n  }, [testMode]);\r\n\r\n  // Check for OAuth return (Google login redirect back)\r\n  useEffect(() => {\r\n    if (oauthReturnDetected) return; // Prevent double-processing\r\n    \r\n    const checkOAuthReturn = () => {\r\n      // Check URL params for OAuth completion\r\n      const urlParams = new URLSearchParams(window.location.search);\r\n      const oauthSuccess = urlParams.get('onairos_oauth_success');\r\n      const oauthPlatform = urlParams.get('onairos_oauth_platform');\r\n      const oauthEmail = urlParams.get('onairos_oauth_email');\r\n\r\n      // Check for generic OAuth return (any platform)\r\n      if (oauthSuccess === 'true' && oauthPlatform) {\r\n        setOauthReturnDetected(true);\r\n        \r\n        // Clean up URL\r\n        const newUrl = window.location.pathname;\r\n        window.history.replaceState({}, '', newUrl);\r\n        \r\n        if (oauthPlatform === 'gmail' && oauthEmail) {\r\n          console.log(' Gmail OAuth return detected in URL params');\r\n          \r\n          // Create user data from OAuth\r\n          const authData = {\r\n            email: oauthEmail,\r\n            verified: true,\r\n            isNewUser: true, // Assume new user for now, backend will correct this\r\n            provider: 'google'\r\n          };\r\n          \r\n          // Save to localStorage - MERGE with existing to preserve connectedAccounts\r\n          const existingUserData = JSON.parse(localStorage.getItem('onairosUser') || '{}');\r\n          const userData = {\r\n            ...existingUserData, // Preserve existing data (like connectedAccounts)\r\n            email: oauthEmail,\r\n            verified: true,\r\n            onboardingComplete: false,\r\n            provider: 'google'\r\n          };\r\n          console.log(' Merging Google OAuth with existing userData:', { existing: existingUserData.connectedAccounts, merged: userData.connectedAccounts });\r\n          localStorage.setItem('onairosUser', JSON.stringify(userData));\r\n          setUserData(userData);\r\n          \r\n          // Open modal and go to onboarding\r\n          setShowOverlay(true);\r\n          setCurrentFlow('onboarding');\r\n          \r\n          // Clean up OAuth localStorage\r\n          localStorage.removeItem('onairos_gmail_success');\r\n          localStorage.removeItem('onairos_gmail_timestamp');\r\n          localStorage.removeItem('onairos_oauth_email');\r\n          localStorage.removeItem('onairos_return_url');\r\n          localStorage.removeItem('onairos_oauth_context');\r\n          \r\n        } else {\r\n          // Other platforms (Universal Onboarding connectors)\r\n          console.log(` ${oauthPlatform} OAuth return detected - restoring onboarding flow`);\r\n          \r\n          // Ensure we have user session to show the modal correctly\r\n          // (User should already be logged in if they were connecting apps)\r\n          const savedUser = localStorage.getItem('onairosUser');\r\n          if (savedUser) {\r\n            setUserData(JSON.parse(savedUser));\r\n          }\r\n          \r\n          // Open modal and restore flow\r\n          setShowOverlay(true);\r\n          setCurrentFlow('onboarding');\r\n          \r\n          // Pass the success signal to UniversalOnboarding via a temporary storage flag\r\n          // that works even if cross-domain cleared the original context\r\n          sessionStorage.setItem('onairos_oauth_return_success', 'true');\r\n          sessionStorage.setItem('onairos_oauth_return_platform', oauthPlatform);\r\n        }\r\n        \r\n        return;\r\n      }\r\n\r\n      // Also check localStorage for OAuth completion (fallback)\r\n      const gmailSuccess = localStorage.getItem('onairos_gmail_success');\r\n      const gmailTimestamp = localStorage.getItem('onairos_gmail_timestamp');\r\n      const gmailEmail = localStorage.getItem('onairos_gmail_email') || localStorage.getItem('onairos_oauth_email');\r\n\r\n      if (gmailSuccess === 'true' && gmailTimestamp && gmailEmail) {\r\n        const now = Date.now();\r\n        const timestamp = parseInt(gmailTimestamp, 10);\r\n        \r\n        // Only process if timestamp is recent (within last 60 seconds)\r\n        if (now - timestamp < 60000) {\r\n          console.log(' Gmail OAuth return detected in localStorage');\r\n          setOauthReturnDetected(true);\r\n          \r\n          // Create user data from OAuth - MERGE with existing to preserve connectedAccounts\r\n          const existingUserData = JSON.parse(localStorage.getItem('onairosUser') || '{}');\r\n          const userData = {\r\n            ...existingUserData, // Preserve existing data (like connectedAccounts)\r\n            email: gmailEmail,\r\n            verified: true,\r\n            onboardingComplete: false,\r\n            provider: 'google'\r\n          };\r\n          console.log(' Merging Gmail OAuth with existing userData:', { existing: existingUserData.connectedAccounts, merged: userData.connectedAccounts });\r\n          localStorage.setItem('onairosUser', JSON.stringify(userData));\r\n          setUserData(userData);\r\n          \r\n          // Open modal and go to onboarding\r\n          setShowOverlay(true);\r\n          setCurrentFlow('onboarding');\r\n          \r\n          // Clean up OAuth localStorage\r\n          localStorage.removeItem('onairos_gmail_success');\r\n          localStorage.removeItem('onairos_gmail_timestamp');\r\n          localStorage.removeItem('onairos_gmail_email');\r\n          localStorage.removeItem('onairos_oauth_email');\r\n          localStorage.removeItem('onairos_return_url');\r\n          localStorage.removeItem('onairos_oauth_context');\r\n        }\r\n      }\r\n    };\r\n\r\n    checkOAuthReturn();\r\n  }, [oauthReturnDetected]);\r\n\r\n  const openTerminal = async () => {\r\n    try {\r\n      console.log(' openTerminal called - resetting flow');\r\n      console.log(' testMode prop:', testMode);\r\n      console.log(' window.onairosApiKey:', window.onairosApiKey);\r\n      // ALWAYS reset flow on open to start fresh every time\r\n      setCurrentFlow('welcome');\r\n      setUserData(null);\r\n      try { localStorage.removeItem('onairosUser'); } catch {}\r\n        setShowOverlay(true);\r\n    } catch (error) {\r\n      console.error('Error in openTerminal:', error);\r\n    }\r\n  };\r\n\r\n  const handleCloseOverlay = () => {\r\n    setShowOverlay(false);\r\n    setError(null);\r\n    // Reset flow and session so next open starts fresh\r\n    setCurrentFlow('welcome');\r\n    try { localStorage.removeItem('onairosUser'); } catch {}\r\n    setUserData(null);\r\n  };\r\n\r\n  // Handle clicks on the backdrop to close modal\r\n  const handleBackdropClick = (e) => {\r\n    if (e.target === e.currentTarget) {\r\n      handleCloseOverlay();\r\n    }\r\n  };\r\n\r\n  const handleWelcomeContinue = () => {\r\n    console.log(' Welcome screen continue clicked');\r\n    setCurrentFlow('email');\r\n  };\r\n\r\n  const handleEmailAuthSuccess = (authData) => {\r\n    console.log(' Email auth successful:', authData);\r\n    console.log(' User State:', {\r\n      isNewUser: authData.isNewUser,\r\n      userState: authData.userState,\r\n      flowType: authData.flowType,\r\n      existingUser: authData.existingUser,\r\n      hasAccountInfo: !!authData.accountInfo,\r\n      accountStatus: authData.accountStatus // NEW: Log accountStatus\r\n    });\r\n\r\n    // Save identity-bearing JWT immediately (email/id/userId/sub)\r\n    try {\r\n      const candidate = authData.jwtToken || authData.token || authData.accessToken;\r\n      if (candidate) {\r\n        const base64 = candidate.split('.')[1];\r\n        if (base64) {\r\n          const payload = JSON.parse(decodeURIComponent(atob(base64).split('').map(c => '%'+('00'+c.charCodeAt(0).toString(16)).slice(-2)).join('')));\r\n          if (payload && (payload.email || payload.id || payload.userId || payload.sub)) {\r\n            try { localStorage.setItem('onairos_user_token', candidate); } catch {}\r\n            console.log(' [OnairosButton] Identity JWT saved from email auth');\r\n          } else {\r\n            console.warn(' [OnairosButton] Email auth returned minimal token (no id/email)');\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(' [OnairosButton] Failed to parse/save email auth token');\r\n    }\r\n    \r\n    // NEW: Use accountStatus if available (more reliable than legacy fields)\r\n    const accountStatus = authData.accountStatus;\r\n    let isNewUser;\r\n    \r\n    if (accountStatus) {\r\n      // Use the new accountStatus.exists field as the source of truth\r\n      isNewUser = !accountStatus.exists;\r\n      console.log(' Using accountStatus.exists for flow determination:', {\r\n        accountExists: accountStatus.exists,\r\n        hasTrainedModel: accountStatus.hasTrainedModel,\r\n        hasPersonalityTraits: accountStatus.hasPersonalityTraits,\r\n        connectedPlatforms: accountStatus.connectedPlatforms,\r\n        needsDataConnection: accountStatus.needsDataConnection,\r\n        needsTraining: accountStatus.needsTraining,\r\n        canUseInference: accountStatus.canUseInference\r\n      });\r\n    } else {\r\n      // Fallback to legacy field checking if accountStatus not available\r\n      isNewUser = authData.isNewUser === true || \r\n                  authData.existingUser === false || \r\n                  authData.flowType === 'onboarding' || \r\n                  authData.userState === 'new' ||\r\n                  !authData.accountInfo;\r\n      console.log(' Using legacy fields for flow determination (accountStatus not available)');\r\n    }\r\n    \r\n    console.log(' Flow determination:', {\r\n      finalDecision: isNewUser ? 'NEW USER  onboarding (data connectors)' : 'EXISTING USER  dataRequest (data permissions)',\r\n      reasoning: {\r\n        usingAccountStatus: !!accountStatus,\r\n        accountExists: accountStatus?.exists,\r\n        isNewUser: authData.isNewUser,\r\n        existingUserFalse: authData.existingUser === false,\r\n        flowTypeOnboarding: authData.flowType === 'onboarding',\r\n        noAccountInfo: !authData.accountInfo\r\n      }\r\n    });\r\n    \r\n    const newUserData = {\r\n      ...authData,\r\n      verified: true,\r\n      onboardingComplete: !isNewUser, // New users need onboarding, returning users have completed it\r\n      pinCreated: !isNewUser // Assume returning users have PIN, new users need to create it\r\n    };\r\n\r\n    // If backend provides connected platforms for existing users, carry them into connectedAccounts\r\n    // so DataRequest/Onboarding can reflect what is already connected.\r\n    const normalizePlatformName = (p) => {\r\n      const key = String(p || '').trim().toLowerCase();\r\n      const map = {\r\n        instagram: 'Instagram',\r\n        youtube: 'YouTube',\r\n        linkedin: 'LinkedIn',\r\n        reddit: 'Reddit',\r\n        pinterest: 'Pinterest',\r\n        github: 'GitHub',\r\n        gmail: 'Gmail',\r\n        twitter: 'Twitter',\r\n        x: 'Twitter',\r\n        chatgpt: 'ChatGPT',\r\n        claude: 'Claude',\r\n        gemini: 'Gemini',\r\n        grok: 'Grok',\r\n      };\r\n      return map[key] || (key ? key.charAt(0).toUpperCase() + key.slice(1) : '');\r\n    };\r\n    if (!isNewUser) {\r\n      const fromAccountStatus = Array.isArray(accountStatus?.connectedPlatforms)\r\n        ? accountStatus.connectedPlatforms\r\n        : [];\r\n      const normalized = fromAccountStatus.map(normalizePlatformName).filter(Boolean);\r\n      if (normalized.length > 0) {\r\n        newUserData.connectedAccounts = normalized;\r\n      }\r\n    }\r\n    \r\n    // Ensure token is stored in userData and localStorage\r\n    const emailToken = authData.token || authData.jwtToken || authData.accessToken;\r\n    if (emailToken) {\r\n      newUserData.token = emailToken;\r\n      try {\r\n        localStorage.setItem('onairos_user_token', emailToken);\r\n        console.log(' Token from email verification saved to localStorage');\r\n      } catch (e) {\r\n        console.warn(' Could not save token to localStorage:', e);\r\n      }\r\n    }\r\n    \r\n    setUserData(newUserData);\r\n    localStorage.setItem('onairosUser', JSON.stringify(newUserData));\r\n    \r\n    // Flow decision logic:\r\n    // - New users: go to UniversalOnboarding (connectors)\r\n    // - Existing users: go straight to DataRequest (data permissions)\r\n    if (isNewUser) {\r\n      console.log(' Auth successful (new user)  Starting onboarding flow (data connectors page)');\r\n      setCurrentFlow('onboarding');\r\n    } else {\r\n      console.log(' Auth successful (existing user)  Going straight to DataRequest (data permissions)');\r\n      setCurrentFlow('dataRequest');\r\n    }\r\n  };\r\n\r\n  const handleOnboardingComplete = (onboardingData) => {\r\n    console.log(' Onboarding completed:', onboardingData);\r\n    console.log(' Connected accounts from onboarding:', onboardingData.connectedAccounts);\r\n    const updatedUserData = {\r\n      ...userData,\r\n      onboardingComplete: true,\r\n      connectedAccounts: onboardingData.connectedAccounts || []\r\n    };\r\n    console.log(' Saving userData with connectedAccounts:', updatedUserData.connectedAccounts);\r\n    setUserData(updatedUserData);\r\n    localStorage.setItem('onairosUser', JSON.stringify(updatedUserData));\r\n    if (returnToDataRequestAfterOnboarding) {\r\n      setReturnToDataRequestAfterOnboarding(false);\r\n      setCurrentFlow('dataRequest');\r\n    } else {\r\n      setCurrentFlow('pin');\r\n    }\r\n  };\r\n\r\n  const handlePinSetupComplete = async (pinData) => {\r\n    console.log('PIN setup completed:', pinData);\r\n    const updatedUserData = {\r\n      ...userData,\r\n      ...pinData,\r\n      pinCreated: true\r\n    };\r\n    setUserData(updatedUserData);\r\n    localStorage.setItem('onairosUser', JSON.stringify(updatedUserData));\r\n    \r\n    // Check if this is a wrapped app\r\n    const isWrappedApp = webpageName && webpageName.toLowerCase().includes('wrapped');\r\n    \r\n    if (isWrappedApp) {\r\n      // Wrapped apps skip training screen - go directly to data request\r\n      console.log(' Wrapped app - skipping training screen, going to data request');\r\n      setCurrentFlow('dataRequest');\r\n    } else {\r\n      // Non-wrapped apps show training screen BEFORE data request\r\n      console.log(' Non-wrapped app - showing training screen');\r\n      // Reset training start watchdog state\r\n      setTrainingHasStarted(false);\r\n      setCurrentFlow('trainingScreen');\r\n    }\r\n  };\r\n\r\n  // Non-wrapped ONLY: if training does not START within 30s, move forward to DataRequest anyway.\r\n  // Wrapped apps must NOT do this.\r\n  useEffect(() => {\r\n    const isWrappedApp = webpageName && webpageName.toLowerCase().includes('wrapped');\r\n    if (isWrappedApp) return;\r\n\r\n    if (currentFlow !== 'trainingScreen') return;\r\n    if (trainingHasStarted) return;\r\n\r\n    const timeoutId = setTimeout(() => {\r\n      // Re-check conditions at fire time (effect cleanup should handle most cases).\r\n      const stillWrapped = webpageName && webpageName.toLowerCase().includes('wrapped');\r\n      if (stillWrapped) return;\r\n      if (currentFlow === 'trainingScreen' && !trainingHasStarted) {\r\n        console.warn(' Training did not start within 30s (non-wrapped). Continuing to DataRequest.');\r\n        setCurrentFlow('dataRequest');\r\n      }\r\n    }, 30000);\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [currentFlow, trainingHasStarted, webpageName]);\r\n\r\n  const handleLoadingComplete = () => {\r\n    setCurrentFlow('dataRequest');\r\n  };\r\n\r\n  const handleTrainingComplete = (trainingResult) => {\r\n    console.log(' Training completed:', trainingResult);\r\n    const updatedUserData = {\r\n      ...userData,\r\n      trainingCompleted: true,\r\n      ...trainingResult\r\n    };\r\n    setUserData(updatedUserData);\r\n    localStorage.setItem('onairosUser', JSON.stringify(updatedUserData));\r\n    \r\n    // Move to data request after training\r\n    setCurrentFlow('dataRequest');\r\n  };\r\n\r\n  const handleTrainingScreenComplete = (trainingResult) => {\r\n    console.log(' Training screen completed:', trainingResult);\r\n    const updatedUserData = {\r\n      ...userData,\r\n      trainingCompleted: true,\r\n      ...trainingResult\r\n    };\r\n    setUserData(updatedUserData);\r\n    localStorage.setItem('onairosUser', JSON.stringify(updatedUserData));\r\n    \r\n    // Move to data request after training screen\r\n    setCurrentFlow('dataRequest');\r\n  };\r\n\r\n  const handleDataRequestComplete = async (requestResult) => {\r\n    console.log(' OnairosButton: Data request completed:', requestResult);\r\n    \r\n    // Check if this is a wrapped app\r\n    const isWrappedApp = webpageName && webpageName.toLowerCase().includes('wrapped');\r\n    \r\n    // For non-wrapped apps, training and inference already happened in TrainingScreen\r\n    // No need to run it again here\r\n    if (!isWrappedApp && requestResult.approved?.length > 0) {\r\n      console.log(' Non-wrapped app: Training and inference already completed in TrainingScreen');\r\n      console.log(' Data approval recorded:', requestResult.approved);\r\n    }\r\n    \r\n    // Update user data with request result\r\n    const updatedUserData = {\r\n      ...userData,\r\n      lastDataRequest: requestResult\r\n    };\r\n    setUserData(updatedUserData);\r\n    localStorage.setItem('onairosUser', JSON.stringify(updatedUserData));\r\n\r\n    // Handle data fetching if autoFetch is enabled\r\n    // For non-wrapped apps, training already happened in TrainingScreen, so skip this\r\n    let finalResult = requestResult;\r\n    \r\n    if (autoFetch && requestResult.approved?.length > 0 && isWrappedApp) {\r\n      console.log(' Auto-fetching data from Onairos API for wrapped app...');\r\n      \r\n      try {\r\n        // 1. Get the API URL from the backend\r\n        const urlResponse = await fetch('https://api2.onairos.uk/getAPIurlMobile', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            Info: {\r\n              appId: webpageName,\r\n              account: userData?.email || userData?.username,\r\n              confirmations: requestResult.approved.map(id => ({ data: id === 'personality' ? 'Large' : id === 'basic' ? 'Basic' : id })),\r\n              EncryptedUserPin: userData?.EncryptedUserPin || 'pending_pin_integration',\r\n              storage: 's3',\r\n              proofMode: proofMode\r\n            }\r\n          })\r\n        });\r\n\r\n        const urlData = await urlResponse.json();\r\n        console.log(' API URL received:', urlData.apiUrl);\r\n        console.log(' webpageName sent as appId:', webpageName);\r\n\r\n        if (urlData.apiUrl && urlData.token) {\r\n          // Only show wrapped loading page if app name contains \"wrapped\"\r\n          const isWrappedApp = webpageName && webpageName.toLowerCase().includes('wrapped');\r\n          console.log(' Is wrapped app?', isWrappedApp, '(checking:', webpageName, ')');\r\n          if (isWrappedApp) {\r\n            setCurrentFlow('wrappedLoading');\r\n            console.log(' Showing wrapped loading screen for wrapped app');\r\n          } else {\r\n            console.log(' Skipping loading screen - not a wrapped app');\r\n          }\r\n          \r\n          // Emit custom event for host app\r\n          if (typeof window !== 'undefined') {\r\n            const eventDetail = { apiUrl: urlData.apiUrl, approved: requestResult.approved };\r\n            window.dispatchEvent(new CustomEvent('onairos-api-call-start', { detail: eventDetail }));\r\n            console.log(' Emitted onairos-api-call-start event');\r\n          }\r\n          \r\n          // 2. Fetch the actual data\r\n          // IMPORTANT: This endpoint can take 1-3 minutes as it runs Python LLM scripts\r\n          // We MUST wait for the actual response before proceeding\r\n          // Always use POST for consistency and to support body data\r\n          // traits-only endpoint requires POST\r\n          const method = 'POST';\r\n          \r\n          let fetchUrl = urlData.apiUrl;\r\n          let fetchBody = {\r\n             email: userData?.email,\r\n             includeLlmData: requestResult.approved.includes('rawMemories')\r\n          };\r\n\r\n          // Override for non-wrapped apps (Regular SDK training) to use Training API\r\n          if (!isWrappedApp) {\r\n             fetchUrl = 'https://api2.onairos.uk/mobile-training/clean';\r\n             \r\n             // Construct training body\r\n             const connected = [];\r\n             if (userData?.connectedAccounts) {\r\n               if (Array.isArray(userData.connectedAccounts)) {\r\n                 connected.push(...userData.connectedAccounts);\r\n               } else if (typeof userData.connectedAccounts === 'object') {\r\n                 connected.push(...Object.keys(userData.connectedAccounts).filter(k => userData.connectedAccounts[k]));\r\n               }\r\n             }\r\n             \r\n             fetchBody = {\r\n               Info: {\r\n                 username: userData?.email || userData?.username,\r\n                 connectedPlatforms: connected\r\n               }\r\n             };\r\n             \r\n             console.log(' Switching to Training API for non-wrapped app:', fetchUrl);\r\n          } else {\r\n             console.log(' WRAPPED APP DETECTED - Using traits-only endpoint from backend:', fetchUrl);\r\n             console.log(' This should call the wrapped dashboard generation');\r\n\r\n             // Wrapped freshness: ALWAYS request a fresh-per-request variant (even if the same YouTube account is reused).\r\n             // This avoids \"cached-looking\" dashboards while keeping the core metrics stable.\r\n             fetchBody = {\r\n               ...fetchBody,\r\n               forceFresh: true,\r\n               cacheBust: Date.now(),\r\n             };\r\n             try {\r\n               const currentEmail = userData?.email;\r\n               if (currentEmail) localStorage.setItem('onairos_last_wrapped_email', currentEmail);\r\n             } catch {}\r\n             console.log(' Wrapped forceFresh enabled (always for wrapped):', { email: userData?.email });\r\n          }\r\n          \r\n          console.log(` Fetching/Training data from ${fetchUrl} (${method})...`);\r\n          console.log(` Using token: ${urlData.token ? urlData.token.substring(0, 20) + '...' : 'NO TOKEN'}`);\r\n          try {\r\n            console.log(' Wrapped fetch request body:', fetchBody);\r\n          } catch {}\r\n          console.log(` Waiting for backend response - this may take 1-3 minutes for LLM processing...`);\r\n          \r\n          let dataResponse;\r\n          let apiResponse;\r\n          let fetchCompleted = false;\r\n          let fetchError = null;\r\n          \r\n          try {\r\n            // CRITICAL: Wait for the actual fetch response - don't proceed until we get data or a real error\r\n            // The backend Python script needs time to generate the wrapped dashboard\r\n            console.log(` Starting fetch request - will wait for complete response...`);\r\n            \r\n            // Create abort controller with 10-minute timeout for LLM-heavy endpoints\r\n            // This prevents the BROWSER from timing out, even if the server might\r\n            // Note: Gateway/load balancer may timeout earlier (typically 60s), which is expected\r\n            const controller = new AbortController();\r\n            const timeoutId = setTimeout(() => controller.abort(), 600000); // 10 minutes\r\n\r\n            try {\r\n              dataResponse = await fetch(fetchUrl, {\r\n                method: method,\r\n                headers: {\r\n                  'Authorization': `Bearer ${urlData.token}`,\r\n                  'Content-Type': 'application/json'\r\n                },\r\n                // Prevent browser/proxy caching for wrapped dashboards\r\n                cache: 'no-store',\r\n                // Only send body for POST\r\n                body: method === 'POST' ? JSON.stringify(fetchBody) : undefined,\r\n                signal: controller.signal\r\n              });\r\n            } finally {\r\n              clearTimeout(timeoutId);\r\n            }\r\n\r\n            console.log(` Response status: ${dataResponse.status} ${dataResponse.statusText}`);\r\n            console.log(` Response headers:`, Object.fromEntries(dataResponse.headers.entries()));\r\n\r\n            // Check for 504 Gateway Timeout - implies backend is still working\r\n            if (dataResponse.status === 504) {\r\n               console.warn(' 504 Gateway Timeout received - Backend is likely still processing');\r\n               throw new Error('Gateway Timeout (504) - Backend processing continued');\r\n            }\r\n\r\n            // CRITICAL: Check if response is ok before parsing JSON\r\n            if (!dataResponse.ok) {\r\n              throw new Error(`HTTP ${dataResponse.status}: ${dataResponse.statusText}`);\r\n            }\r\n\r\n            // CRITICAL: Wait for JSON parsing to complete\r\n            apiResponse = await dataResponse.json();\r\n            \r\n            console.log(' Parsed API response:', {\r\n              isWrappedApp,\r\n              hasStatus: !!apiResponse.status,\r\n              status: apiResponse.status,\r\n              hasSlides: !!apiResponse.slides,\r\n              responseKeys: Object.keys(apiResponse)\r\n            });\r\n            \r\n            // Check if dashboard is still being generated (wrapped app only)\r\n            if (isWrappedApp && apiResponse.status === 'processing') {\r\n              console.log(' Dashboard is being generated - starting polling...');\r\n              const pollInterval = (apiResponse.poll_interval_seconds || 3) * 1000;\r\n              const maxPolls = 60; // Max 3 minutes of polling\r\n              let pollCount = 0;\r\n              \r\n              while (pollCount < maxPolls) {\r\n                pollCount++;\r\n                console.log(` Polling attempt ${pollCount}/${maxPolls}...`);\r\n                \r\n                // Wait before next poll\r\n                await new Promise(resolve => setTimeout(resolve, pollInterval));\r\n                \r\n                try {\r\n                  const pollResponse = await fetch(fetchUrl, {\r\n                    method: method,\r\n                    headers: {\r\n                      'Authorization': `Bearer ${urlData.token}`,\r\n                      'Content-Type': 'application/json'\r\n                    },\r\n                    cache: 'no-store',\r\n                    body: method === 'POST' ? JSON.stringify(fetchBody) : undefined\r\n                  });\r\n                  \r\n                  if (pollResponse.ok) {\r\n                    const pollData = await pollResponse.json();\r\n                    \r\n                    // Check if we have the actual dashboard now\r\n                    if (pollData.slides) {\r\n                      console.log(' Dashboard ready! Received slides.');\r\n                      apiResponse = pollData;\r\n                      break;\r\n                    } else if (pollData.status !== 'processing') {\r\n                      console.warn(' Unexpected response during polling:', pollData);\r\n                      apiResponse = pollData;\r\n                      break;\r\n                    }\r\n                    \r\n                    console.log(' Still processing...');\r\n                  } else {\r\n                    console.warn(` Poll failed with status ${pollResponse.status}`);\r\n                  }\r\n                } catch (pollErr) {\r\n                  console.warn(' Poll request failed:', pollErr.message);\r\n                }\r\n              }\r\n              \r\n              if (!apiResponse.slides && pollCount >= maxPolls) {\r\n                console.error(' Polling timed out after max attempts');\r\n                throw new Error('Dashboard generation timed out');\r\n              }\r\n            }\r\n            \r\n            // Mark fetch as completed successfully\r\n            fetchCompleted = true;\r\n            \r\n            console.log(' API Response received and parsed successfully');\r\n            console.log(' Has slides?', !!apiResponse.slides);\r\n            if (apiResponse.slides) {\r\n              console.log(' Slides keys:', Object.keys(apiResponse.slides));\r\n            }\r\n            \r\n          } catch (fetchErr) {\r\n            // Mark that we encountered an error during fetch\r\n            fetchError = fetchErr;\r\n            fetchCompleted = false;\r\n            \r\n            console.error(' FETCH ERROR:', fetchErr);\r\n            console.error(' Error name:', fetchErr.name);\r\n            console.error(' Error message:', fetchErr.message);\r\n            \r\n            // Check if it's a timeout error (504 Gateway Timeout)\r\n            if (fetchErr.message?.includes('504') || fetchErr.message?.includes('Gateway Timeout')) {\r\n              console.error(' GATEWAY TIMEOUT (504) - Backend is still processing');\r\n              console.error(' This means the backend Python LLM script is still running');\r\n              console.error(' DO NOT fall back to mocks yet - backend is generating data');\r\n              // Don't set apiResponse to null yet - we want to retry or wait\r\n              apiResponse = null;\r\n              \r\n              // Flag this as a timeout specifically so the app knows to wait/retry\r\n              requestResult.isTimeout = true;\r\n            }\r\n            // If it's a CORS error, the backend is returning data but browser blocks it\r\n            else if (fetchErr.message?.includes('CORS') || fetchErr.message?.includes('Failed to fetch')) {\r\n              console.error(' CORS BLOCKING RESPONSE - Backend generated data but browser cannot read it');\r\n              console.error(' This usually means a 504/502 timeout from load balancer stripping headers');\r\n              console.error(' Backend successfully generated dashboard (see server logs)');\r\n              \r\n              // Even though fetch failed, we still have the token and URL\r\n              // Set apiResponse to null but keep token and apiUrl for retry\r\n              apiResponse = null;\r\n              \r\n              // Treat CORS errors on this endpoint as timeouts/processing\r\n              // The backend likely finished but the LB cut the connection\r\n              requestResult.isTimeout = true;\r\n            } else {\r\n              // For other errors, still set to null but log the error\r\n              console.error(' Fetch failed with error:', fetchErr);\r\n              apiResponse = null;\r\n            }\r\n          }\r\n          \r\n          // CRITICAL: Log fetch completion status\r\n          if (fetchCompleted) {\r\n            console.log(' Fetch completed - data ready');\r\n          } else if (requestResult.isTimeout) {\r\n             console.log(' Request timed out - passing timeout flag to app');\r\n          } else if (fetchError) {\r\n            console.error(' Fetch failed:', fetchError.message);\r\n          }\r\n\r\n          // Merge into result - include token and apiUrl even if fetch failed\r\n          finalResult = {\r\n            ...requestResult,\r\n            apiResponse: apiResponse, // Raw response (null if CORS blocked)\r\n            token: urlData.token,     // Token used - ALWAYS include this\r\n            apiUrl: urlData.apiUrl    // URL used - ALWAYS include this\r\n          };\r\n          \r\n          console.log(' Final result ready:', {\r\n            hasApiResponse: !!finalResult.apiResponse,\r\n            hasSlides: !!finalResult.apiResponse?.slides,\r\n            hasToken: !!finalResult.token\r\n          });\r\n          \r\n          // Add to updated user data - include token even if apiResponse is null\r\n          updatedUserData.apiResponse = apiResponse;\r\n          if (urlData.token) {\r\n            updatedUserData.token = urlData.token;\r\n            // Also store in localStorage for persistence\r\n            try {\r\n              localStorage.setItem('onairos_user_token', urlData.token);\r\n            } catch (e) {\r\n              console.warn(' Could not store token in localStorage:', e);\r\n            }\r\n          }\r\n          setUserData(updatedUserData);\r\n        } else {\r\n          console.warn(' Failed to get API URL:', urlData);\r\n        }\r\n      } catch (fetchError) {\r\n        console.error(' Error auto-fetching data:', fetchError);\r\n        \r\n        // Check if it's a timeout/abort error\r\n        if (fetchError.name === 'AbortError' || fetchError.message?.includes('timeout')) {\r\n          console.error(' Request timed out - backend took longer than 2 minutes');\r\n        }\r\n        // Check if it's a CORS error\r\n        else if (fetchError.message?.includes('CORS') || \r\n                 fetchError.message?.includes('Failed to fetch') ||\r\n                 fetchError.name === 'TypeError') {\r\n          console.error(' CORS ERROR DETECTED');\r\n          console.error(' Backend needs to allow CORS for:', window.location.origin);\r\n        }\r\n        \r\n        // Continue with what we have - don't block the flow\r\n        // The app can still proceed without apiResponse\r\n      }\r\n    }\r\n\r\n    // Format response if requested and API response is present\r\n    let formattedResult = finalResult;\r\n    if (formatResponse && finalResult?.apiResponse) {\r\n      try {\r\n        formattedResult = {\r\n          ...requestResult,\r\n          apiResponse: formatOnairosResponse(requestResult.apiResponse, responseFormat)\r\n        };\r\n        console.log(' Response formatted with dictionary:', formattedResult.apiResponse?.personalityDict || 'No personality data');\r\n      } catch (error) {\r\n        console.warn(' Error formatting response:', error);\r\n        // Continue with original result if formatting fails\r\n      }\r\n    }\r\n\r\n    // Ensure token is included from userData if not already in finalResult\r\n    if (!finalResult.token && updatedUserData.token) {\r\n      finalResult.token = updatedUserData.token;\r\n      console.log(' Added token from userData to finalResult');\r\n    }\r\n    \r\n    // Also check localStorage as fallback\r\n    if (!finalResult.token) {\r\n      try {\r\n        const storedToken = localStorage.getItem('onairos_user_token');\r\n        if (storedToken) {\r\n          finalResult.token = storedToken;\r\n          console.log(' Added token from localStorage to finalResult');\r\n        }\r\n      } catch (e) {\r\n        console.warn(' Could not read token from localStorage:', e);\r\n      }\r\n    }\r\n    \r\n    // Add user data to the result for comprehensive formatting\r\n    const completeResult = {\r\n      ...formattedResult,\r\n      token: finalResult.token || formattedResult.token || updatedUserData.token, // Ensure token is at root level\r\n      userData: updatedUserData\r\n    };\r\n\r\n    // Enhanced user data formatting for better display\r\n    let enhancedResult = completeResult;\r\n    try {\r\n    // Log formatted user data for better readability\r\n        enhancedResult = logFormattedUserData(completeResult);\r\n    } catch (formatError) {\r\n        console.warn(' Error formatting user data for display:', formatError);\r\n        // Continue with unformatted result to ensure app doesn't break\r\n    }\r\n    \r\n    // Ensure token is still present after formatting\r\n    if (!enhancedResult.token && completeResult.token) {\r\n      enhancedResult.token = completeResult.token;\r\n    }\r\n    if (!enhancedResult.token && updatedUserData.token) {\r\n      enhancedResult.token = updatedUserData.token;\r\n    }\r\n\r\n    // Call onComplete callback if provided\r\n    // For non-wrapped apps, onComplete was already called from TrainingScreen\r\n    // So we only call it here for wrapped apps OR if training screen was skipped\r\n    // webpageName is already in scope from the component props\r\n    const isWrappedAppForCallback = webpageName && webpageName.toLowerCase().includes('wrapped');\r\n    \r\n    if (onComplete && isWrappedAppForCallback) {\r\n      try {\r\n        console.log(' Calling onComplete for wrapped app with data');\r\n        onComplete(enhancedResult);\r\n      } catch (error) {\r\n        console.error(' Error in onComplete callback:', error);\r\n      }\r\n    } else if (onComplete && !isWrappedAppForCallback) {\r\n      console.log(' Skipping onComplete for non-wrapped app (already called from TrainingScreen)');\r\n    } else {\r\n      console.log(' No onComplete callback provided');\r\n    }\r\n\r\n    // WRAPPED APPS: Set up listener for app to signal when dashboard is ready\r\n    // This is event-driven - overlay stays until dashboard signals it's ready\r\n    // isWrappedApp already declared above\r\n    \r\n    if (isWrappedApp) {\r\n      console.log(' Wrapped app - waiting for dashboard ready signal');\r\n      console.log(' Setting up onairos-dashboard-ready event listener');\r\n      \r\n      // Listen for custom event from the wrapped app indicating dashboard is ready\r\n      const handleDashboardReady = (event) => {\r\n        console.log(' Dashboard ready signal received - closing SDK overlay');\r\n        console.log(' Event details:', event);\r\n        handleCloseOverlay();\r\n        window.removeEventListener('onairos-dashboard-ready', handleDashboardReady);\r\n      };\r\n      \r\n      window.addEventListener('onairos-dashboard-ready', handleDashboardReady);\r\n      console.log(' Event listener attached, waiting for signal...');\r\n      \r\n      // Keep overlay open indefinitely until we get the ready signal\r\n      // No fallback timeout - if the app doesn't signal, the overlay stays\r\n      // This ensures we never show a flash of the portal page\r\n    } else {\r\n      // For non-wrapped apps, just close the modal - training already happened in TrainingScreen\r\n      console.log(' Non-wrapped app: Training complete, closing overlay');\r\n      handleCloseOverlay();\r\n    }\r\n  };\r\n\r\n  const getFlowTitle = () => {\r\n    switch (currentFlow) {\r\n      case 'welcome':\r\n        return ''; // WelcomeScreen handles its own titles\r\n      case 'email':\r\n        return ''; // EmailAuth handles its own titles\r\n      case 'onboarding':\r\n        return 'Connect Your Data';\r\n      case 'pin':\r\n        return 'Secure Your Account';\r\n      case 'training':\r\n        return 'Training Your Model';\r\n      case 'trainingScreen':\r\n        return 'Training Your Model';\r\n      case 'dataRequest':\r\n        return 'Data Request';\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  const getFlowSubtitle = () => {\r\n    switch (currentFlow) {\r\n      case 'welcome':\r\n        return ''; // WelcomeScreen handles its own subtitles\r\n      case 'email':\r\n        return ''; // EmailAuth handles its own subtitles\r\n      case 'onboarding':\r\n        return 'Choose which accounts to connect for a personalized experience';\r\n      case 'pin':\r\n        return 'Create a secure PIN to protect your data';\r\n      case 'training':\r\n        return 'Building your personalized insights';\r\n      case 'trainingScreen':\r\n        return 'Building your personalized insights';\r\n      case 'dataRequest':\r\n        return `Select the data you want to share with ${webpageName}`;\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  const getFlowIcon = () => {\r\n    switch (currentFlow) {\r\n      case 'welcome':\r\n        return ''; // WelcomeScreen handles its own layout\r\n      case 'email':\r\n        return ''; // EmailAuth handles its own layout\r\n      case 'onboarding':\r\n        return '';\r\n      case 'pin':\r\n        return '';\r\n      case 'training':\r\n        return '';\r\n      case 'trainingScreen':\r\n        return '';\r\n      case 'dataRequest':\r\n        return '';\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  const renderContent = () => {\r\n    const commonProps = {\r\n      isMobile: isMobileDevice,\r\n      testMode: testMode\r\n    };\r\n\r\n    switch (currentFlow) {\r\n      case 'welcome':\r\n        return (\r\n          <WelcomeScreen \r\n            {...commonProps}\r\n            onContinue={handleWelcomeContinue}\r\n            onClose={handleCloseOverlay}\r\n            webpageName={webpageName}\r\n            appIcon={appIcon}\r\n          />\r\n        );\r\n      case 'email':\r\n        return (\r\n          <div className={isMobileDevice ? \"flex-1 min-h-0 flex flex-col\" : \"flex-1 min-h-0 flex flex-col\"}>\r\n            <EmailAuth \r\n              {...commonProps}\r\n              onSuccess={handleEmailAuthSuccess}\r\n            />\r\n          </div>\r\n        );\r\n      case 'onboarding':\r\n        return (\r\n          <UniversalOnboarding \r\n            {...commonProps}\r\n            onComplete={handleOnboardingComplete}\r\n            onBack={() => {\r\n              if (returnToDataRequestAfterOnboarding) {\r\n                setReturnToDataRequestAfterOnboarding(false);\r\n                setCurrentFlow('dataRequest');\r\n              } else {\r\n                setCurrentFlow('email');\r\n              }\r\n            }}\r\n            appIcon={appIcon || \"https://onairos.sirv.com/Images/OnairosBlack.png\"}\r\n            appName={webpageName}\r\n            username={userData?.email || userData?.username}\r\n            priorityPlatform={priorityPlatform}\r\n            rawMemoriesOnly={rawMemoriesOnly}\r\n            rawMemoriesConfig={rawMemoriesConfig}\r\n          />\r\n        );\r\n      case 'pin':\r\n        return (\r\n          <div className={isMobileDevice ? \"flex-1 min-h-0\" : \"\"}>\r\n            <PinSetup \r\n              onComplete={handlePinSetupComplete}\r\n              onBack={() => setCurrentFlow('onboarding')}\r\n              userEmail={userData?.email}\r\n            />\r\n          </div>\r\n        );\r\n      case 'training':\r\n        return (\r\n          <TrainingComponent \r\n            onComplete={handleTrainingComplete}\r\n            userEmail={userData?.email}\r\n            appName={webpageName}\r\n            connectedAccounts={userData?.connectedAccounts || []}\r\n            testMode={testMode}\r\n          />\r\n        );\r\n      case 'trainingScreen':\r\n        console.log(' Rendering TrainingScreen with userData:', {\r\n          hasUserData: !!userData,\r\n          hasToken: !!userData?.token,\r\n          tokenPreview: userData?.token ? userData.token.substring(0, 20) + '...' : 'NO TOKEN',\r\n          email: userData?.email,\r\n          connectedAccounts: userData?.connectedAccounts\r\n        });\r\n        return (\r\n          <TrainingScreen \r\n            onComplete={handleTrainingScreenComplete}\r\n            onTrainingStart={() => setTrainingHasStarted(true)}\r\n            userEmail={userData?.email}\r\n            connectedAccounts={userData?.connectedAccounts || []}\r\n            userToken={userData?.token}\r\n          />\r\n        );\r\n      case 'dataRequest':\r\n        console.log(' Rendering DataRequest:', {\r\n          connectedAccounts: userData?.connectedAccounts,\r\n          isArray: Array.isArray(userData?.connectedAccounts),\r\n          userData: userData\r\n        });\r\n        return (\r\n          <DataRequest \r\n            onComplete={handleDataRequestComplete}\r\n            onConnectMoreApps={() => {\r\n              // Go back to UniversalOnboarding but return here afterwards.\r\n              // Connected apps are persisted in localStorage by UniversalOnboarding.\r\n              setReturnToDataRequestAfterOnboarding(true);\r\n              setCurrentFlow('onboarding');\r\n            }}\r\n            userEmail={userData?.email || userData?.userName}\r\n            requestData={requestData}\r\n            appName={webpageName}\r\n            autoFetch={autoFetch}\r\n            testMode={testMode}\r\n            appIcon={appIcon}\r\n            connectedPlatforms={userData?.connectedAccounts || []}\r\n            rawMemoriesOnly={rawMemoriesOnly}\r\n            rawMemoriesConfig={rawMemoriesConfig}\r\n            showTime={time}\r\n          />\r\n        );\r\n      case 'wrappedLoading':\r\n        return (\r\n          <div className=\"flex-1 min-h-0\">\r\n            <WrappedLoadingPage appName={webpageName} />\r\n          </div>\r\n        );\r\n      case 'loading':\r\n        return <LoadingScreen onComplete={handleLoadingComplete} />;\r\n      default:\r\n        return (\r\n          <div className=\"flex flex-col items-center space-y-4 p-6\">\r\n            <div className=\"animate-spin h-8 w-8 border-2 border-blue-600 rounded-full border-t-transparent\"></div>\r\n            <p className=\"text-gray-600\">Loading...</p>\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n  // Styling and button class based on visual type\r\n  const buttonClass = \r\n    `flex items-center justify-center font-bold rounded cursor-pointer ${\r\n    buttonType === 'pill' ? 'px-4 py-2' : 'w-12 h-12'\r\n    } bg-transparent OnairosConnect`;\r\n\r\n  const buttonStyle = {\r\n    flexDirection: textLayout === 'below' ? 'column' : 'row',\r\n    backgroundColor: 'transparent',\r\n    color: textColor,\r\n    border: '1px solid transparent',\r\n  };\r\n\r\n  // Icon and text style based on the visualType\r\n  const logoStyle = {\r\n    width: '20px',\r\n    height: '20px',\r\n    marginRight: visualType === 'full' ? '12px' : '0',\r\n  };\r\n\r\n  const getText = () => {\r\n    switch (loginType) {\r\n      case 'signUp':\r\n        return 'Sign Up with Onairos';\r\n      case 'signOut':\r\n        return 'Sign Out of Onairos';\r\n      default:\r\n        return 'Sign In with Onairos';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        className={buttonClass}\r\n        onClick={openTerminal}\r\n        style={buttonStyle}\r\n      >\r\n        {(visualType === 'full' || visualType === 'icon') && (\r\n          <img\r\n            src={login ? \"https://onairos.sirv.com/Images/OnairosWhite.png\" : \"https://onairos.sirv.com/Images/OnairosBlack.png\"}\r\n            alt=\"Onairos Logo\"\r\n            style={logoStyle}\r\n          />\r\n        )}\r\n        {visualType !== 'icon' && (\r\n          <span className={`${textColor === 'black' ? 'text-black' : 'text-white'} ${visualType === 'icon' ? 'sr-only' : ''} ${textLayout === 'right' ? 'ml-2' : textLayout === 'left' ? 'mr-2' : ''}`}>\r\n            {getText()}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {/* Modal with New Design */}\r\n      {showOverlay && (\r\n        <>\r\n          {isMobileDevice ? (\r\n            // Mobile Browser: Use ModalPageLayout with mobile-optimized props\r\n            <ModalPageLayout\r\n              visible={showOverlay}\r\n              onClose={handleCloseOverlay}\r\n              showBackButton={currentFlow !== 'welcome' && currentFlow !== 'email' && currentFlow !== 'loading' && currentFlow !== 'wrappedLoading'}\r\n              onBack={() => {\r\n                        if (currentFlow === 'onboarding') setCurrentFlow('email');\r\n                        else if (currentFlow === 'pin') setCurrentFlow('onboarding');\r\n                        else if (currentFlow === 'dataRequest') setCurrentFlow('onboarding');\r\n                        else if (currentFlow === 'training') setCurrentFlow('pin');\r\n                      }}\r\n              showCloseButton={currentFlow === 'welcome' || currentFlow === 'email'}\r\n              title=\"\"\r\n              subtitle=\"\"\r\n              icon={null}\r\n              centerContent={true}\r\n              contentClassName=\"!p-0\"\r\n              modalClassName=\"onairos-modal onairos-modal-mobile\"\r\n            >\r\n              <div className=\"onairos-modal-shell flex-1 min-h-0 flex flex-col\">\r\n                  {renderContent()}\r\n                </div>\r\n            </ModalPageLayout>\r\n          ) : (\r\n            // Desktop Layout\r\n            <ModalPageLayout\r\n              visible={showOverlay}\r\n              onClose={handleCloseOverlay}\r\n              showBackButton={currentFlow === 'training' || currentFlow === 'onboarding' || currentFlow === 'pin' || currentFlow === 'dataRequest'}\r\n              onBack={() => {\r\n                if (currentFlow === 'email') setCurrentFlow('welcome');\r\n                if (currentFlow === 'onboarding') setCurrentFlow('email');\r\n                if (currentFlow === 'pin') setCurrentFlow('onboarding'); \r\n                if (currentFlow === 'training') setCurrentFlow('pin');\r\n                if (currentFlow === 'dataRequest') setCurrentFlow('onboarding');\r\n              }}\r\n              title=\"\"\r\n              subtitle=\"\"\r\n              icon={null}\r\n              centerContent={true}\r\n              contentClassName={currentFlow !== 'welcome' ? \"!p-0\" : \"\"}\r\n              modalClassName=\"onairos-modal\"\r\n            >\r\n              <div className=\"onairos-modal-shell\">\r\n                {renderContent()}\r\n              </div>\r\n            </ModalPageLayout>\r\n          )}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default OnairosButton;","/**\r\n * Standalone Onairos Overlay Handler\r\n * Allows developers to trigger the Onairos flow programmatically without the button component\r\n */\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { OnairosButton } from '../onairosButton.jsx';\r\nimport { formatOnairosResponse } from './responseFormatter.js';\r\n\r\n/**\r\n * Opens the Onairos overlay flow programmatically\r\n * @param {Object} config - Configuration options\r\n * @param {Array} config.requestData - Data types to request ['basic', 'personality', 'preferences']\r\n * @param {string} config.webpageName - Name of your application\r\n * @param {Function} config.onComplete - Callback function when flow completes\r\n * @param {boolean} config.autoFetch - Whether to auto-fetch data (default: false)\r\n * @param {boolean} config.testMode - Whether to use test mode (default: false)\r\n * @param {string} config.appIcon - URL to your app icon (optional)\r\n * @param {boolean} config.formatResponse - Whether to format response with dictionary (default: true)\r\n * @param {Object} config.responseFormat - Response formatting options\r\n * @returns {Promise<Function>} Promise that resolves to a cleanup function\r\n */\r\nexport async function openOnairosOverlay(config = {}) {\r\n  const {\r\n    requestData = ['basic', 'personality'],\r\n    webpageName = 'My App',\r\n    onComplete = null,\r\n    autoFetch = false,\r\n    testMode = false,\r\n    appIcon = null,\r\n    formatResponse = true,\r\n    responseFormat = { includeDictionary: true, includeArray: true },\r\n    ...otherProps\r\n  } = config;\r\n\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      // Create a container for the overlay\r\n      const containerId = `onairos-overlay-${Math.random().toString(36).substr(2, 9)}`;\r\n      const container = document.createElement('div');\r\n      container.id = containerId;\r\n      container.style.position = 'fixed';\r\n      container.style.top = '0';\r\n      container.style.left = '0';\r\n      container.style.width = '100%';\r\n      container.style.height = '100%';\r\n      container.style.zIndex = '9999';\r\n      container.style.pointerEvents = 'none'; // Allow clicks to pass through to the button\r\n      \r\n      document.body.appendChild(container);\r\n\r\n      // Cleanup function\r\n      const cleanup = () => {\r\n        if (container && container.parentNode) {\r\n          try {\r\n            ReactDOM.unmountComponentAtNode(container);\r\n          } catch (error) {\r\n            console.warn('Error unmounting React component:', error);\r\n          }\r\n          container.parentNode.removeChild(container);\r\n        }\r\n      };\r\n\r\n      // Enhanced onComplete handler\r\n      const handleComplete = (result) => {\r\n        let formattedResult = result;\r\n        \r\n        // Format response if requested\r\n        if (formatResponse && result?.apiResponse) {\r\n          try {\r\n            formattedResult = {\r\n              ...result,\r\n              apiResponse: formatOnairosResponse(result.apiResponse, responseFormat)\r\n            };\r\n          } catch (error) {\r\n            console.warn('Error formatting response:', error);\r\n            // Continue with original result if formatting fails\r\n          }\r\n        }\r\n\r\n        // Call the original onComplete callback\r\n        if (onComplete && typeof onComplete === 'function') {\r\n          try {\r\n            onComplete(formattedResult);\r\n          } catch (error) {\r\n            console.error('Error in onComplete callback:', error);\r\n          }\r\n        }\r\n\r\n        // Cleanup after a short delay to allow animations\r\n        setTimeout(cleanup, 100);\r\n      };\r\n\r\n      // Create the Onairos button component with auto-open\r\n      const OnairosElement = React.createElement(OnairosButton, {\r\n        requestData,\r\n        webpageName,\r\n        onComplete: handleComplete,\r\n        autoFetch,\r\n        testMode,\r\n        appIcon,\r\n        visualType: 'icon', // Use icon-only to minimize visual footprint\r\n        buttonType: 'pill',\r\n        textColor: 'white',\r\n        style: { opacity: 0, position: 'absolute', top: '-9999px' }, // Hide the button\r\n        ...otherProps\r\n      });\r\n\r\n      // Render the component\r\n      ReactDOM.render(OnairosElement, container);\r\n\r\n      // Auto-click the button to open overlay after render\r\n      setTimeout(() => {\r\n        const button = container.querySelector('button');\r\n        if (button) {\r\n          button.click();\r\n          resolve(cleanup); // Resolve with cleanup function\r\n        } else {\r\n          cleanup();\r\n          reject(new Error('Failed to render Onairos button'));\r\n        }\r\n      }, 100);\r\n\r\n    } catch (error) {\r\n      console.error('Error opening Onairos overlay:', error);\r\n      reject(error);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Alternative method using React hooks for React applications\r\n * @param {Object} config - Same configuration as openOnairosOverlay\r\n * @returns {Object} Hook object with open function and state\r\n */\r\nexport function useOnairosOverlay(config = {}) {\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const [isLoading, setIsLoading] = React.useState(false);\r\n  const cleanupRef = React.useRef(null);\r\n\r\n  const open = React.useCallback(async (overrideConfig = {}) => {\r\n    if (isOpen || isLoading) return;\r\n    \r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      const finalConfig = {\r\n        ...config,\r\n        ...overrideConfig,\r\n        onComplete: (result) => {\r\n          setIsOpen(false);\r\n          setIsLoading(false);\r\n          \r\n          // Call original onComplete if provided\r\n          if (config.onComplete) {\r\n            config.onComplete(result);\r\n          }\r\n          if (overrideConfig.onComplete) {\r\n            overrideConfig.onComplete(result);\r\n          }\r\n        }\r\n      };\r\n\r\n      const cleanup = await openOnairosOverlay(finalConfig);\r\n      cleanupRef.current = cleanup;\r\n      setIsOpen(true);\r\n      setIsLoading(false);\r\n    } catch (error) {\r\n      setIsLoading(false);\r\n      console.error('Error opening overlay:', error);\r\n    }\r\n  }, [config, isOpen, isLoading]);\r\n\r\n  const close = React.useCallback(() => {\r\n    if (cleanupRef.current) {\r\n      cleanupRef.current();\r\n      cleanupRef.current = null;\r\n    }\r\n    setIsOpen(false);\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  // Cleanup on unmount\r\n  React.useEffect(() => {\r\n    return () => {\r\n      if (cleanupRef.current) {\r\n        cleanupRef.current();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    open,\r\n    close,\r\n    isOpen,\r\n    isLoading\r\n  };\r\n}\r\n\r\n/**\r\n * Simple function to get user data without UI (for existing authenticated users)\r\n * @param {Object} config - Configuration options\r\n * @param {Array} config.requestData - Data types to request\r\n * @param {string} config.userEmail - User email (if known)\r\n * @param {string} config.appName - App name\r\n * @param {boolean} config.testMode - Whether to use test mode\r\n * @param {boolean} config.formatResponse - Whether to format response\r\n * @returns {Promise<Object>} Promise that resolves to user data\r\n */\r\nexport async function getOnairosData(config = {}) {\r\n  const {\r\n    requestData = ['basic', 'personality'],\r\n    userEmail = '',\r\n    appName = 'My App',\r\n    testMode = false,\r\n    formatResponse = true,\r\n    responseFormat = { includeDictionary: true, includeArray: true }\r\n  } = config;\r\n\r\n  // This would need to be implemented based on your existing API logic\r\n  // For now, it's a placeholder that developers can use as a reference\r\n  throw new Error('getOnairosData requires authenticated user session. Use openOnairosOverlay for the full authentication flow.');\r\n} ","/**\r\n * Onairos API Key Validation Utilities\r\n * Implements standardized API key validation following SDK_API_KEY_VALIDATION.md\r\n */\r\n\r\n// API Key Types\r\nexport const ApiKeyType = {\r\n  ADMIN: 'admin',\r\n  DEVELOPER: 'developer',\r\n  INVALID: 'invalid'\r\n};\r\n\r\n// Error Codes\r\nexport const ErrorCodes = {\r\n  MISSING_API_KEY: 'MISSING_API_KEY',\r\n  INVALID_API_KEY_FORMAT: 'INVALID_API_KEY_FORMAT',\r\n  INVALID_API_KEY: 'INVALID_API_KEY',\r\n  API_KEY_EXPIRED: 'API_KEY_EXPIRED',\r\n  DEVELOPER_NOT_FOUND: 'DEVELOPER_NOT_FOUND',\r\n  RATE_LIMIT_EXCEEDED: 'RATE_LIMIT_EXCEEDED',\r\n  INTERNAL_ERROR: 'INTERNAL_ERROR'\r\n};\r\n\r\n// API Endpoints\r\nexport const API_ENDPOINTS = {\r\n  production: 'https://api.onairos.uk',\r\n  development: 'https://dev-api.onairos.uk'\r\n};\r\n\r\n/**\r\n * Detect environment based on context\r\n * @returns {'production' | 'development'}\r\n */\r\nexport const detectEnvironment = () => {\r\n  if (typeof window !== 'undefined') {\r\n    // Browser environment\r\n    return window.location.hostname.includes('localhost') ? 'development' : 'production';\r\n  } else {\r\n    // Node.js/React Native environment\r\n    return process.env.NODE_ENV === 'development' ? 'development' : 'production';\r\n  }\r\n};\r\n\r\n/**\r\n * Get API key type based on format\r\n * @param {string} apiKey - API key to validate\r\n * @returns {string} - API key type\r\n */\r\nexport const getApiKeyType = (apiKey) => {\r\n  if (!apiKey || typeof apiKey !== 'string') {\r\n    return ApiKeyType.INVALID;\r\n  }\r\n\r\n  // Check admin key\r\n  if (apiKey === 'OnairosIsAUnicorn2025') {\r\n    return ApiKeyType.ADMIN;\r\n  }\r\n\r\n  // Check developer key format\r\n  if (apiKey.length >= 32 && (\r\n    apiKey.startsWith('ona_') || \r\n    apiKey.startsWith('dev_') || \r\n    apiKey.startsWith('pk_')\r\n  )) {\r\n    return ApiKeyType.DEVELOPER;\r\n  }\r\n\r\n  return ApiKeyType.INVALID;\r\n};\r\n\r\n/**\r\n * Check if API key is admin key\r\n * @param {string} apiKey - API key to check\r\n * @returns {boolean}\r\n */\r\nexport const isAdminKey = (apiKey) => {\r\n  return apiKey === 'OnairosIsAUnicorn2025';\r\n};\r\n\r\n/**\r\n * Validate API key format\r\n * @param {string} apiKey - API key to validate\r\n * @returns {object} - Validation result\r\n */\r\nexport const validateApiKeyFormat = (apiKey) => {\r\n  if (!apiKey) {\r\n    return {\r\n      isValid: false,\r\n      error: 'API key is required',\r\n      code: ErrorCodes.MISSING_API_KEY,\r\n      keyType: ApiKeyType.INVALID\r\n    };\r\n  }\r\n\r\n  const keyType = getApiKeyType(apiKey);\r\n  \r\n  if (keyType === ApiKeyType.INVALID) {\r\n    return {\r\n      isValid: false,\r\n      error: 'Invalid API key format',\r\n      message: 'Developer keys must be at least 32 characters and start with \\'dev_\\', \\'pk_\\', or \\'ona_\\'',\r\n      code: ErrorCodes.INVALID_API_KEY_FORMAT,\r\n      keyType: ApiKeyType.INVALID\r\n    };\r\n  }\r\n\r\n  return {\r\n    isValid: true,\r\n    keyType: keyType\r\n  };\r\n};\r\n\r\n/**\r\n * Validate API key with backend\r\n * @param {string} apiKey - API key to validate\r\n * @param {object} config - Configuration options\r\n * @returns {Promise<object>} - Validation result\r\n */\r\nexport const validateApiKey = async (apiKey, config = {}) => {\r\n  const {\r\n    environment = detectEnvironment(),\r\n    timeout = 30000,\r\n    retryAttempts = 3,\r\n    platform = 'web',\r\n    sdkVersion = '3.4.0'\r\n  } = config;\r\n\r\n  // First validate format\r\n  const formatValidation = validateApiKeyFormat(apiKey);\r\n  if (!formatValidation.isValid) {\r\n    return formatValidation;\r\n  }\r\n\r\n  // Handle admin keys locally\r\n  if (isAdminKey(apiKey)) {\r\n    return {\r\n      isValid: true,\r\n      success: true,\r\n      permissions: ['*'],\r\n      rateLimits: { \r\n        remaining: 999999, \r\n        resetTime: Date.now() + 24 * 60 * 60 * 1000 \r\n      },\r\n      keyType: ApiKeyType.ADMIN,\r\n      developer: {\r\n        id: 'admin',\r\n        name: 'Admin User',\r\n        plan: 'admin'\r\n      },\r\n      apiKey: {\r\n        id: 'admin_key',\r\n        name: 'Admin Key',\r\n        context: environment,\r\n        totalRequests: 0\r\n      }\r\n    };\r\n  }\r\n\r\n  // Validate with backend\r\n  const baseUrl = API_ENDPOINTS[environment] || API_ENDPOINTS.production;\r\n  \r\n  for (let attempt = 1; attempt <= retryAttempts; attempt++) {\r\n    try {\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), timeout);\r\n\r\n      const response = await fetch(`${baseUrl}/auth/validate-key`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${apiKey}`,\r\n          'Content-Type': 'application/json',\r\n          'X-SDK-Platform': platform,\r\n          'User-Agent': `OnairosSDK/${sdkVersion}`\r\n        },\r\n        body: JSON.stringify({\r\n          environment,\r\n          sdk_version: sdkVersion,\r\n          platform,\r\n          keyType: formatValidation.keyType,\r\n          timestamp: new Date().toISOString(),\r\n          attempt\r\n        }),\r\n        signal: controller.signal\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok && data.success) {\r\n        return {\r\n          isValid: true,\r\n          success: true,\r\n          permissions: data.permissions || [],\r\n          rateLimits: data.rateLimits || { remaining: 100, resetTime: Date.now() + 15 * 60 * 1000 },\r\n          keyType: data.keyType || ApiKeyType.DEVELOPER,\r\n          developer: data.developer,\r\n          apiKey: data.apiKey\r\n        };\r\n      }\r\n\r\n      // Don't retry client errors (4xx)\r\n      if (response.status >= 400 && response.status < 500) {\r\n        return {\r\n          isValid: false,\r\n          success: false,\r\n          error: data.error || 'Client error',\r\n          message: data.message,\r\n          code: data.code || ErrorCodes.INVALID_API_KEY,\r\n          keyType: data.keyType || ApiKeyType.INVALID\r\n        };\r\n      }\r\n\r\n      // Retry server errors (5xx)\r\n      if (attempt === retryAttempts) {\r\n        return {\r\n          isValid: false,\r\n          success: false,\r\n          error: 'Server error after maximum retries',\r\n          message: `Failed after ${retryAttempts} attempts`,\r\n          code: ErrorCodes.INTERNAL_ERROR,\r\n          keyType: ApiKeyType.INVALID\r\n        };\r\n      }\r\n\r\n    } catch (error) {\r\n      if (error.name === 'AbortError') {\r\n        if (attempt === retryAttempts) {\r\n          return {\r\n            isValid: false,\r\n            success: false,\r\n            error: 'Request timeout',\r\n            message: `Request timed out after ${timeout}ms`,\r\n            code: ErrorCodes.INTERNAL_ERROR,\r\n            keyType: ApiKeyType.INVALID\r\n          };\r\n        }\r\n      } else if (attempt === retryAttempts) {\r\n        return {\r\n          isValid: false,\r\n          success: false,\r\n          error: 'Network error',\r\n          message: error.message,\r\n          code: ErrorCodes.INTERNAL_ERROR,\r\n          keyType: ApiKeyType.INVALID\r\n        };\r\n      }\r\n\r\n      // Exponential backoff\r\n      const delay = Math.min(1000 * Math.pow(2, attempt - 1), 5000);\r\n      await new Promise(resolve => setTimeout(resolve, delay));\r\n    }\r\n  }\r\n\r\n  return {\r\n    isValid: false,\r\n    success: false,\r\n    error: 'Validation failed',\r\n    code: ErrorCodes.INTERNAL_ERROR,\r\n    keyType: ApiKeyType.INVALID\r\n  };\r\n};\r\n\r\n/**\r\n * Get error message for error code\r\n * @param {string} code - Error code\r\n * @param {object} details - Additional error details\r\n * @returns {object} - Error information\r\n */\r\nexport const getErrorInfo = (code, details = {}) => {\r\n  const errorMap = {\r\n    [ErrorCodes.MISSING_API_KEY]: {\r\n      title: 'API Key Required',\r\n      message: 'No API key provided',\r\n      suggestions: [\r\n        'Provide API key in the configuration',\r\n        'Get API key from Onairos Dashboard',\r\n        'Format: ona_your_api_key_here'\r\n      ]\r\n    },\r\n    [ErrorCodes.INVALID_API_KEY_FORMAT]: {\r\n      title: 'Invalid API Key Format',\r\n      message: 'API key format is incorrect',\r\n      suggestions: [\r\n        'Check key format (32+ characters)',\r\n        'Ensure it starts with ona_, dev_, or pk_',\r\n        'Generate new API key if needed'\r\n      ]\r\n    },\r\n    [ErrorCodes.INVALID_API_KEY]: {\r\n      title: 'Invalid API Key',\r\n      message: 'API key not found or inactive',\r\n      suggestions: [\r\n        'Verify API key is correct',\r\n        'Check if key has been revoked',\r\n        'Generate new API key'\r\n      ]\r\n    },\r\n    [ErrorCodes.API_KEY_EXPIRED]: {\r\n      title: 'API Key Expired',\r\n      message: 'API key has expired',\r\n      suggestions: [\r\n        'Renew API key',\r\n        'Generate new API key',\r\n        'Check expiry settings'\r\n      ]\r\n    },\r\n    [ErrorCodes.DEVELOPER_NOT_FOUND]: {\r\n      title: 'Developer Account Inactive',\r\n      message: 'Developer account not found or inactive',\r\n      suggestions: [\r\n        'Contact support',\r\n        'Verify account status',\r\n        'Check developer dashboard'\r\n      ]\r\n    },\r\n    [ErrorCodes.RATE_LIMIT_EXCEEDED]: {\r\n      title: 'Rate Limit Exceeded',\r\n      message: 'Too many requests',\r\n      suggestions: [\r\n        'Wait before retrying',\r\n        'Check rate limits',\r\n        'Upgrade plan if needed'\r\n      ]\r\n    },\r\n    [ErrorCodes.INTERNAL_ERROR]: {\r\n      title: 'Internal Error',\r\n      message: 'Server error occurred',\r\n      suggestions: [\r\n        'Retry with exponential backoff',\r\n        'Check service status',\r\n        'Contact support if persists'\r\n      ]\r\n    }\r\n  };\r\n\r\n  return errorMap[code] || {\r\n    title: 'Unknown Error',\r\n    message: 'An unknown error occurred',\r\n    suggestions: ['Contact support']\r\n  };\r\n};\r\n\r\nexport default {\r\n  ApiKeyType,\r\n  ErrorCodes,\r\n  API_ENDPOINTS,\r\n  detectEnvironment,\r\n  getApiKeyType,\r\n  isAdminKey,\r\n  validateApiKeyFormat,\r\n  validateApiKey,\r\n  getErrorInfo\r\n};\r\n","/**\r\n * Onairos SDK Initialization\r\n * Implements standardized SDK initialization following SDK_API_KEY_VALIDATION.md\r\n */\r\n\r\nimport { validateApiKey, detectEnvironment, getErrorInfo } from './apiKeyValidation.js';\r\n\r\n// Global SDK state\r\nlet globalSDKState = {\r\n  isInitialized: false,\r\n  apiKey: null,\r\n  config: null,\r\n  validationResult: null\r\n};\r\n\r\n/**\r\n * Initialize SDK with API key validation\r\n * @param {object} config - Initialization configuration\r\n * @returns {Promise<object>} - Initialization result\r\n */\r\nexport const initializeApiKey = async (config) => {\r\n  const {\r\n    apiKey,\r\n    environment = detectEnvironment(),\r\n    enableLogging = false,\r\n    timeout = 30000,\r\n    retryAttempts = 3,\r\n    platform = 'web',\r\n    sdkVersion = '3.4.0'\r\n  } = config;\r\n\r\n  // Validate required parameters\r\n  if (!apiKey) {\r\n    const error = new Error('API key is required for SDK initialization');\r\n    error.code = 'MISSING_API_KEY';\r\n    throw error;\r\n  }\r\n\r\n  if (enableLogging) {\r\n    console.log(' [Onairos SDK] Initializing with config:', {\r\n      environment,\r\n      platform,\r\n      sdkVersion,\r\n      timeout,\r\n      retryAttempts,\r\n      apiKeyPrefix: apiKey.substring(0, 8) + '...'\r\n    });\r\n  }\r\n\r\n  try {\r\n    // Validate API key with backend\r\n    const validationResult = await validateApiKey(apiKey, {\r\n      environment,\r\n      timeout,\r\n      retryAttempts,\r\n      platform,\r\n      sdkVersion\r\n    });\r\n\r\n    if (!validationResult.isValid) {\r\n      const errorInfo = getErrorInfo(validationResult.code, validationResult);\r\n      const error = new Error(validationResult.error || errorInfo.message);\r\n      error.code = validationResult.code;\r\n      error.details = validationResult.message;\r\n      error.suggestions = errorInfo.suggestions;\r\n      error.keyType = validationResult.keyType;\r\n      \r\n      if (enableLogging) {\r\n        console.error(' [Onairos SDK] Initialization failed:', {\r\n          error: error.message,\r\n          code: error.code,\r\n          suggestions: error.suggestions\r\n        });\r\n      }\r\n      \r\n      throw error;\r\n    }\r\n\r\n    // Store global state\r\n    globalSDKState = {\r\n      isInitialized: true,\r\n      apiKey,\r\n      config: {\r\n        environment,\r\n        enableLogging,\r\n        timeout,\r\n        retryAttempts,\r\n        platform,\r\n        sdkVersion\r\n      },\r\n      validationResult\r\n    };\r\n\r\n    if (enableLogging) {\r\n      console.log(' [Onairos SDK] Initialized successfully:', {\r\n        keyType: validationResult.keyType,\r\n        permissions: validationResult.permissions?.length || 0,\r\n        rateLimits: validationResult.rateLimits,\r\n        developer: validationResult.developer?.name\r\n      });\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      message: 'SDK initialized successfully',\r\n      keyType: validationResult.keyType,\r\n      permissions: validationResult.permissions,\r\n      rateLimits: validationResult.rateLimits,\r\n      developer: validationResult.developer,\r\n      apiKey: validationResult.apiKey\r\n    };\r\n\r\n  } catch (error) {\r\n    // Reset global state on failure\r\n    globalSDKState = {\r\n      isInitialized: false,\r\n      apiKey: null,\r\n      config: null,\r\n      validationResult: null\r\n    };\r\n\r\n    if (enableLogging) {\r\n      console.error(' [Onairos SDK] Initialization error:', error);\r\n    }\r\n\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Check if SDK is initialized\r\n * @returns {boolean}\r\n */\r\nexport const isSDKInitialized = () => {\r\n  return globalSDKState.isInitialized;\r\n};\r\n\r\n/**\r\n * Get current SDK state\r\n * @returns {object}\r\n */\r\nexport const getSDKState = () => {\r\n  return { ...globalSDKState };\r\n};\r\n\r\n/**\r\n * Get API key from initialized SDK\r\n * @returns {string|null}\r\n */\r\nexport const getApiKey = () => {\r\n  return globalSDKState.apiKey;\r\n};\r\n\r\n/**\r\n * Get SDK configuration\r\n * @returns {object|null}\r\n */\r\nexport const getSDKConfig = () => {\r\n  return globalSDKState.config;\r\n};\r\n\r\n/**\r\n * Get validation result\r\n * @returns {object|null}\r\n */\r\nexport const getValidationResult = () => {\r\n  return globalSDKState.validationResult;\r\n};\r\n\r\n/**\r\n * Reset SDK state (for testing or re-initialization)\r\n */\r\nexport const resetSDK = () => {\r\n  globalSDKState = {\r\n    isInitialized: false,\r\n    apiKey: null,\r\n    config: null,\r\n    validationResult: null\r\n  };\r\n};\r\n\r\n/**\r\n * Ensure SDK is initialized before operations\r\n * @param {string} operation - Operation name for error messages\r\n * @throws {Error} - If SDK is not initialized\r\n */\r\nexport const ensureSDKInitialized = (operation = 'operation') => {\r\n  if (!globalSDKState.isInitialized) {\r\n    const error = new Error(`SDK not initialized. Call initializeApiKey() before ${operation}.`);\r\n    error.code = 'SDK_NOT_INITIALIZED';\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Make authenticated API request using initialized SDK\r\n * @param {string} endpoint - API endpoint\r\n * @param {object} options - Request options\r\n * @returns {Promise<object>} - Response data\r\n */\r\nexport const makeAuthenticatedRequest = async (endpoint, options = {}) => {\r\n  ensureSDKInitialized('making API requests');\r\n\r\n  const {\r\n    method = 'GET',\r\n    body = null,\r\n    headers = {},\r\n    timeout = globalSDKState.config.timeout\r\n  } = options;\r\n\r\n  const baseUrl = globalSDKState.config.environment === 'development' \r\n    ? 'https://dev-api.onairos.uk' \r\n    : 'https://api.onairos.uk';\r\n\r\n  const url = `${baseUrl}${endpoint}`;\r\n\r\n  const requestHeaders = {\r\n    'Authorization': `Bearer ${globalSDKState.apiKey}`,\r\n    'Content-Type': 'application/json',\r\n    'X-SDK-Platform': globalSDKState.config.platform,\r\n    'User-Agent': `OnairosSDK/${globalSDKState.config.sdkVersion}`,\r\n    ...headers\r\n  };\r\n\r\n  const requestOptions = {\r\n    method,\r\n    headers: requestHeaders\r\n  };\r\n\r\n  if (body && method !== 'GET') {\r\n    requestOptions.body = typeof body === 'string' ? body : JSON.stringify(body);\r\n  }\r\n\r\n  // Add timeout\r\n  const controller = new AbortController();\r\n  const timeoutId = setTimeout(() => controller.abort(), timeout);\r\n  requestOptions.signal = controller.signal;\r\n\r\n  try {\r\n    const response = await fetch(url, requestOptions);\r\n    clearTimeout(timeoutId);\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n      const error = new Error(data.error || `HTTP ${response.status}`);\r\n      error.status = response.status;\r\n      error.code = data.code;\r\n      error.details = data.details;\r\n      throw error;\r\n    }\r\n\r\n    if (globalSDKState.config.enableLogging) {\r\n      console.log(` [Onairos SDK] ${method} ${endpoint}:`, {\r\n        status: response.status,\r\n        success: data.success !== false\r\n      });\r\n    }\r\n\r\n    return data;\r\n\r\n  } catch (error) {\r\n    clearTimeout(timeoutId);\r\n    \r\n    if (error.name === 'AbortError') {\r\n      const timeoutError = new Error(`Request timeout after ${timeout}ms`);\r\n      timeoutError.code = 'REQUEST_TIMEOUT';\r\n      throw timeoutError;\r\n    }\r\n\r\n    if (globalSDKState.config.enableLogging) {\r\n      console.error(` [Onairos SDK] ${method} ${endpoint} failed:`, error.message);\r\n    }\r\n\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Configuration interface for TypeScript/JSDoc\r\n * @typedef {Object} InitConfig\r\n * @property {string} apiKey - Required: Developer API key\r\n * @property {'production'|'development'} [environment='production'] - Environment\r\n * @property {boolean} [enableLogging=false] - Enable debug logging\r\n * @property {number} [timeout=30000] - Request timeout in milliseconds\r\n * @property {number} [retryAttempts=3] - Number of retry attempts\r\n * @property {string} [platform='web'] - Platform identifier\r\n * @property {string} [sdkVersion='3.4.0'] - SDK version\r\n */\r\n\r\n/**\r\n * Validation result interface\r\n * @typedef {Object} ValidationResult\r\n * @property {boolean} isValid - Whether the API key is valid\r\n * @property {boolean} success - Whether the validation was successful\r\n * @property {string[]} [permissions] - Array of permissions\r\n * @property {Object} [rateLimits] - Rate limit information\r\n * @property {number} rateLimits.remaining - Remaining requests\r\n * @property {number} rateLimits.resetTime - Reset timestamp\r\n * @property {'admin'|'developer'|'invalid'} keyType - Type of API key\r\n * @property {string} [error] - Error message if validation failed\r\n * @property {string} [code] - Error code if validation failed\r\n */\r\n\r\nexport default {\r\n  initializeApiKey,\r\n  isSDKInitialized,\r\n  getSDKState,\r\n  getApiKey,\r\n  getSDKConfig,\r\n  getValidationResult,\r\n  resetSDK,\r\n  ensureSDKInitialized,\r\n  makeAuthenticatedRequest\r\n};\r\n","import React from 'react';\r\nimport { GoogleOAuthProvider } from '@react-oauth/google';\r\nimport OnairosButton from './onairosButton.jsx';\r\n\r\n// Get Google Client ID from environment or props\r\nconst getGoogleClientId = (props) => {\r\n  return props.googleClientId || \r\n         (typeof window !== 'undefined' && window.onairosGoogleClientId) ||\r\n         (typeof window !== 'undefined' && window.REACT_APP_GOOGLE_CLIENT_ID) ||\r\n         process.env.REACT_APP_GOOGLE_CLIENT_ID ||\r\n         '1030678346906-4npem7vckp0e56p17c81sv2pee2hhule.apps.googleusercontent.com'; // Default fallback\r\n};\r\n\r\n// Main Onairos component\r\nexport function Onairos(props) {\r\n  const googleClientId = getGoogleClientId(props);\r\n\r\n  // Helpful warning: origin_mismatch is almost always due to missing origins for the chosen clientId.\r\n  // We warn when the SDK is using the baked-in fallback clientId so integrators know to override it.\r\n  if (typeof window !== 'undefined') {\r\n    const isDefault = googleClientId === '1030678346906-4npem7vckp0e56p17c81sv2pee2hhule.apps.googleusercontent.com';\r\n    if (isDefault) {\r\n      const origin = window.location?.origin;\r\n      // eslint-disable-next-line no-console\r\n      console.warn(\r\n        `[onairos] Using default Google OAuth clientId. If you see Google error \"origin_mismatch\", ` +\r\n        `you must either (a) pass googleClientId to <Onairos />, or (b) set window.onairosGoogleClientId, ` +\r\n        `and add this origin in Google Cloud Console: ${origin}`\r\n      );\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <GoogleOAuthProvider clientId={googleClientId}>\r\n      <OnairosButton {...props} />\r\n    </GoogleOAuthProvider>\r\n  );\r\n}\r\n\r\n// Export both the main component and individual components\r\nexport { OnairosButton };\r\nexport default Onairos;\r\n\r\n// Export overlay handler functions for programmatic access\r\nexport { \r\n  openOnairosOverlay, \r\n  useOnairosOverlay, \r\n  getOnairosData \r\n} from './utils/overlayHandler.js';\r\n\r\n// Export response formatting utilities\r\nexport { \r\n  formatOnairosResponse, \r\n  formatPersonalityScores,\r\n  getPersonalityTypes,\r\n  getTraitCategories,\r\n  PERSONALITY_TYPES,\r\n  TRAIT_CATEGORIES\r\n} from './utils/responseFormatter.js';\r\n\r\n// Initialize SDK functionality with standardized API key validation\r\nexport { \r\n  initializeApiKey,\r\n  isSDKInitialized,\r\n  getSDKState,\r\n  getApiKey,\r\n  getSDKConfig,\r\n  resetSDK\r\n} from './utils/sdkInitialization.js';\r\n\r\n// Export API key validation utilities\r\nexport {\r\n  validateApiKey,\r\n  ApiKeyType,\r\n  ErrorCodes\r\n} from './utils/apiKeyValidation.js';\r\n"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__639__","__WEBPACK_EXTERNAL_MODULE__283__","__WEBPACK_EXTERNAL_MODULE__478__","__WEBPACK_EXTERNAL_MODULE__346__","lottie","React","_interopDefaultLegacy","e","lottie__default","React__default","_arrayLikeToArray","r","a","length","n","Array","_arrayWithHoles","isArray","_defineProperty","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","_iterableToArrayLimit","l","Symbol","iterator","i","u","f","o","call","next","done","push","return","_nonIterableRest","TypeError","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","apply","_objectSpread2","arguments","forEach","getOwnPropertyDescriptors","defineProperties","_objectWithoutProperties","_objectWithoutPropertiesLoose","s","includes","propertyIsEnumerable","hasOwnProperty","_slicedToArray","_unsupportedIterableToArray","_toPrimitive","toPrimitive","String","Number","toString","slice","constructor","name","from","test","_excluded$1","useLottie","props","style","animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","assetsPath","rendererSettings","rest","_useState2","useState","animationLoaded","setAnimationLoaded","animationInstanceRef","useRef","animationContainer","play","_a","current","stop","pause","setSpeed","speed","goToAndPlay","isFrame","goToAndStop","setDirection","direction","playSegments","segments","forceFlag","setSubframe","useSubFrames","getDuration","inFrames","destroy","undefined","loadAnimation","forcedConfigs","config","container","useEffect","onUnmount","currentRawFrame","setSegment","resetSegments","listeners","handler","listener","deregisterList","map","addEventListener","removeEventListener","deregister","View","createElement","ref","animationContainerRef","animationItem","getContainerVisibility","_container$getBoundin","getBoundingClientRect","top","height","window","innerHeight","getContainerCursorPosition","cursorX","cursorY","_container$getBoundin2","x","left","width","y","useInitInteractivity","_ref","wrapperRef","mode","actions","wrapper","scrollModeHandler","assignedSegment","scrollHandler","currentPercent","action","find","_ref2","visibility","type","frames","frameToGo","Math","ceil","firstFrame","isPaused","document","cursorModeHandler","handleCursor","_x","_y","pos","_ref3","position","isNaN","xPercent","yPercent","mouseMoveHandler","ev","clientX","clientY","mouseOutHandler","useLottieInteractivity","_ref4","lottieObj","_excluded","Lottie","_b","_c","interactivity","lottieProps","_useLottie","get","navigator","svgNS","locationHref","_useWebWorker","initialDefaultFrame","setWebWorker","flag","getWebWorker","setLocationHref","getLocationHref","createTag","extendPrototype","sources","destination","sourcePrototype","len","attr","prototype","getDescriptor","object","prop","createProxyFunction","ProxyFunction","audioControllerFactory","AudioController","audioFactory","audios","_volume","_isMuted","addAudio","audio","resume","setRate","rateValue","createAudio","assetPath","Howl","src","isPlaying","seek","playing","rate","setVolume","setAudioFactory","_updateVolume","mute","unmute","getVolume","volume","createTypedArray","createRegularArray","arr","Uint8ClampedArray","Float32Array","Int16Array","createSizedArray","_typeof$6","subframeEnabled","expressionsPlugin","expressionsInterfaces","idPrefix$1","isSafari","userAgent","_shouldRoundValues","bmPow","pow","bmSqrt","sqrt","bmFloor","floor","bmMax","max","bmMin","min","BMMath","ProjectInterface$1","propertyNames","random","abs","val","absArr","defaultCurveSegments","degToRads","PI","roundCorner","roundValues","bmRnd","round","styleDiv","element","display","transformOrigin","webkitTransformOrigin","backfaceVisibility","webkitBackfaceVisibility","transformStyle","webkitTransformStyle","mozTransformStyle","BMEnterFrameEvent","currentTime","totalTime","frameMultiplier","BMCompleteEvent","BMCompleteLoopEvent","totalLoops","currentLoop","BMSegmentStartEvent","totalFrames","BMDestroyEvent","target","BMRenderFrameErrorEvent","nativeError","BMConfigErrorEvent","BMAnimationConfigErrorEvent","createElementID","_count","HSVtoRGB","h","v","g","b","p","q","RGBtoHSV","d","addSaturationToRGB","color","offset","hsv","addBrightnessToRGB","addHueToRGB","rgbToHex","hex","colorMap","setSubframeEnabled","getSubframeEnabled","setExpressionsPlugin","getExpressionsPlugin","setExpressionInterfaces","getExpressionInterfaces","setDefaultCurveSegments","getDefaultCurveSegments","setIdPrefix","getIdPrefix","createNS","createElementNS","_typeof$5","dataManager","workerFn","workerInstance","_counterId","processes","workerProxy","onmessage","postMessage","path","data","_workerSelf","setupWorker","fn","Worker","Blob","blob","url","URL","createObjectURL","createWorker","completeLayers","layers","comps","layerData","j","jLen","k","kLen","completed","hasMask","maskProps","masksProperties","pt","convertPathsToAbsoluteValues","ty","findCompLayers","refId","completeShapes","shapes","completeText","id","comp","findComp","__used","JSON","parse","stringify","ks","it","checkVersion","minimum","animVersionString","animVersion","split","minimumVersion","checkText","iterateLayers","textLayer","documentData","assets","checkChars","chars","charData","ip","op","st","sr","sk","sa","checkPathProperties","pathData","checkColors","iterateShapes","c","checkShapes","completeClosingShapes","closed","cl","moduleOb","__complete","completeChars","dataFunctionManager","assetLoader","formatResponse","xhr","contentTypeHeader","getResponseHeader","responseType","indexOf","response","responseText","load","fullPath","callback","errorCallback","XMLHttpRequest","err","onreadystatechange","readyState","status","open","join","error","send","completeData","payload","animation","event","process","onError","createProcess","processId","location","origin","pathname","loadData","completeAnimation","anim","ImagePreloader","proxyImage","canvas","ctx","getContext","fillStyle","fillRect","imageLoaded","loadedAssets","totalImages","loadedFootagesCount","totalFootages","imagesLoadedCb","footageLoaded","getAssetsPath","assetData","originalPath","imagePath","testImageLoaded","img","intervalId","setInterval","getBBox","_imageLoaded","clearInterval","bind","createFootageData","ob","footageData","_footageLoaded","ImagePreloaderFactory","images","loadAssets","cb","_createImageData","setAssetsPath","setPath","loadedImages","loadedFootages","getAsset","createImgData","crossOrigin","createImageData","setAttributeNS","_elementHelper","append","appendChild","setCacheType","elementHelper","BaseEvent","triggerEvent","eventName","args","_cbs","callbacks","splice","markerParser","parsePayloadLines","line","lines","keysCount","trim","Error","_markers","markers","_marker","markerData","time","tm","duration","dr","cm","_","__","ProjectInterface","registerComposition","compositions","_thisProjectFunction","nm","prepareFrame","xt","currentFrame","compInterface","renderers","registerRenderer","key","getRenderer","getRegisteredRenderer","_typeof$4","AnimationItem","isLoaded","frameRate","frameMult","playSpeed","playDirection","playCount","animationID","timeCompleted","segmentPos","isSubframeEnabled","_idle","_completedLoop","projectInterface","imagePreloader","audioController","configAnimation","onSetupError","onSegmentComplete","drawnFrameEvent","setParams","params","animType","RendererClass","globalData","defs","setProjectInterface","parseInt","autoloadSegments","setupAnimation","lastIndexOf","substr","fileName","trigger","setData","wrapperAttributes","attributes","getNamedItem","prerender","includeLayers","newLayers","fonts","fontManager","addChars","addFonts","initExpressions","loadNextSegment","segment","shift","segmentPath","loadSegments","imagesLoaded","checkLoaded","preloadImages","animData","fr","searchExtraCompositions","updaFrameModifier","waitForFontsLoaded","triggerConfigError","setTimeout","rendererType","initItems","gotoFrame","resize","_width","_height","updateContainerSize","renderFrame","resetFrame","triggerRenderFrameError","togglePause","setCurrentRawFrameValue","getMarkerData","markerName","marker","numValue","frameModifier","advanceTime","nextValue","_isComplete","checkSegments","adjustSegment","init","end","pendingFrame","setLoop","isLooping","getPath","getAssetData","hide","show","updateDocumentData","index","getElementByPath","animationManager","registeredAnimations","initTime","playingAnimationsNum","_stopped","_isFrozen","removeElement","animItem","subtractPlayingCount","registerAnimation","elem","addPlayingCount","activate","nowTime","elapsedTime","requestAnimationFrame","first","searchAnimations","standalone","animElements","concat","getElementsByClassName","lenAnims","setAttribute","body","getElementsByTagName","innerText","div","freeze","unfreeze","getRegisteredAnimations","animations","BezierFactory","str","replace","beziers","bezEasing","BezierEasing","kSplineTableSize","kSampleStepSize","float32ArraySupported","A","aA1","aA2","B","C","calcBezier","aT","getSlope","points","_p","_mSampleValues","_precomputed","mX1","mY1","mX2","mY2","_precompute","_getTForX","_calcSampleValues","aX","mSampleValues","intervalStart","currentSample","lastSample","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","binarySubdivide","pooling","poolFactory","initialLength","_create","_release","_length","_maxLength","pool","newElement","release","bezierLengthPool","addedLength","percents","lengths","segmentsLengthPool","totalLength","bezFunction","math","pointOnLine2D","x1","y1","x2","y2","x3","y3","det1","getBezierLength","pt1","pt2","pt3","pt4","ptCoord","perc","ptDistance","curveSegments","point","lastPoint","lengthData","BezierData","segmentLength","PointData","partial","partialLength","storedData","buildBezierData","bezierName","bezierData","getDistancePerc","initPos","lengthPos","lPerc","dir","bezierSegmentPoints","getSegmentsLength","shapeData","segmentsLength","pathV","pathO","pathI","getNewSegment","startPerc","endPerc","t0","t1","u0","u1","u0u0u0","t0u0u0_3","t0t0u0_3","t0t0t0","u0u0u1","t0u0u1_3","t0t0u1_3","t0t0t1","u0u1u1","t0u1u1_3","t0t1u1_3","t0t1t1","u1u1u1","t1u1u1_3","t1t1u1_3","t1t1t1","getPointInSegment","percent","pointOnLine3D","z1","z2","z3","diffDist","dist1","dist2","dist3","bez","initFrame","mathAbs","interpolateValue","frameNum","caching","newValue","offsetTime","propType","pv","keyData","nextKeyData","keyframeMetadata","fnc","iterationIndex","lastIndex","keyframes","keyframesMetadata","endValue","nextKeyTime","keyTime","to","ti","ind","__fnct","getBezierEasing","segmentPerc","distanceInLine","lastFrame","_lastKeyframeIndex","_lastAddedLength","_lastPoint","outX","outY","inX","inY","keyValue","sh","quaternionToEuler","slerp","createQuaternion","omega","cosom","sinom","scale0","scale1","out","ax","ay","az","aw","bx","by","bz","bw","acos","sin","quat","qx","qy","qz","qw","heading","atan2","attitude","asin","bank","values","c1","cos","c2","c3","s1","s2","s3","getValueAtCurrentTime","renderedFrame","endTime","_caching","renderResult","setVValue","multipliedValue","mult","_mdf","processEffectsSequence","frameId","effectsSequence","lock","_isFirstFrame","finalValue","kf","addEffect","effectFunction","addDynamicProperty","ValueProperty","vel","getValue","MultiDimensionalProperty","KeyframedValueProperty","KeyframedMultidimensionalProperty","arrLen","PropertyFactory","getProp","sid","slotManager","DynamicPropertyContainer","dynamicProperties","_isAnimated","iterateDynamicProperties","initDynamicPropertyContainer","pointPool","ShapePath","setPathData","setLength","doubleArrayLength","setXYAt","setTripleAt","vX","vY","oX","oY","iX","iY","reverse","newPath","vertices","outPoints","inPoints","cnt","shapePool","shapePath","clone","shape","cloned","ShapeCollection","addShape","releaseShapes","shapeCollectionPool","newShapeCollection","shapeCollection","ShapePropertyFactory","interpolateShape","previousValue","keyPropS","keyPropE","isHold","vertexValue","interpolateShapeCurrentTime","resetShape","paths","localShapeCollection","shape1","shape2","shapesEqual","ShapeProperty","reset","KeyframedShapeProperty","EllShapeProperty","cPoint","EllShapePropertyFactory","convertEllToPath","p0","p1","s0","_cw","_v","StarShapeProperty","StarShapePropertyFactory","sy","ir","is","convertToPath","convertStarToPath","convertPolygonToPath","or","os","rad","roundness","perimSegment","numPts","angle","longFlag","longRad","shortRad","longRound","shortRound","longPerimSegment","shortPerimSegment","currentAng","ox","oy","RectShapeProperty","RectShapePropertyFactory","convertRectToPath","v0","v1","Matrix","_cos","_sin","_tan","tan","_rnd","rotate","mCos","mSin","_t","rotateX","rotateY","rotateZ","shear","sx","skew","skewFromAxis","scale","sz","setTransform","m","translate","tx","tz","transform","a2","b2","d2","e2","f2","g2","h2","i2","j2","k2","l2","m2","n2","o2","p2","_identityCalculated","a1","b1","d1","e1","f1","g1","h1","i1","j1","k1","l1","m1","n1","o1","multiply","matrix","matrixProps","isIdentity","_identity","equals","matr","cloneFromProps","applyToPoint","z","applyToX","applyToY","applyToZ","getInverseMatrix","determinant","inverseMatrix","inversePoint","applyToPointArray","inversePoints","pts","retPts","applyToTriplePoints","p4","p5","p12","p13","applyToPointStringified","toCSS","cssValue","roundMatrixProperty","to2dCSS","_typeof$3","setLocation","href","setSubframeRendering","setPrefix","prefix","setQuality","inBrowser","installPlugin","plugin","getFactory","checkReady","readyStateCheckInterval","getQueryVariable","variable","vars","queryString","pair","decodeURIComponent","useWebWorker","setIDPrefix","__getFactory","version","scripts","myScript","ShapeModifiers","modifiers","registerModifier","getModifier","ShapeModifier","TrimModifier","PuckerAndBloatModifier","initModifierProperties","addShapeToModifier","setAsAnimated","processKeys","sValue","eValue","pathsData","calculateShapeEdges","shapeLength","totalModifierLength","segmentOb","shapeSegments","shapeS","shapeE","releasePathsData","processShapes","shapePaths","_s","totalShapeLength","edges","newShapesData","addShapes","lastShape","pop","addPaths","newPaths","addSegment","newShape","addSegmentFromArray","shapeSegment","currentLengthData","segmentCount","amount","processPath","centerPoint","pathLength","clonedPath","TransformPropertyFactory","defaultVector","TransformProperty","pre","appliedTransformations","px","py","pz","rx","ry","rz","_isDirty","applyToMatrix","mat","forceRender","precalculateMatrix","autoOriented","v2","getValueAtTime","autoOrient","_addDynamicProperty","getTransformProperty","RepeaterModifier","RoundCornersModifier","floatEqual","floatZero","lerp","lerpPoint","quadRoots","singleRoot","delta","polynomialCoefficients","p3","singlePoint","PolynomialBezier","linearize","pointEqual","coeffx","coeffy","extrema","intersectData","t2","box","boundingBox","cx","cy","splitData","boxIntersect","intersectsImpl","depth","tolerance","intersections","maxRecursion","d1s","d2s","crossProduct","lineIntersection","start1","end1","start2","end2","v3","v4","polarOffset","pointDistance","hypot","ZigZagModifier","setPoint","outputBezier","amplitude","outAmplitude","inAmplitude","angO","angI","getPerpendicularVector","vector","rot","getProjectingAngle","cur","prevIndex","nextIndex","pVector","zigZagCorner","frequency","pointType","prevPoint","nextPoint","prevDist","nextDist","zigZagSegment","dist","normalAngle","linearOffset","offsetSegment","p1a","p1b","p2b","p2a","joinLines","seg1","seg2","lineJoin","miterLimit","angleOut","tangentAngle","angleIn","center","radius","intersection","getIntersection","intersect","pruneSegmentIntersection","outa","outb","pruneIntersections","offsetSegmentSplit","right","mid","flex","inflectionPoints","OffsetPathModifier","getFontProperties","fontData","styles","fStyle","fWeight","toLowerCase","weight","tr","so","eo","pMatrix","rMatrix","sMatrix","tMatrix","applyTransforms","inv","scaleX","scaleY","elemsData","_currentCopies","_elements","_groups","unshift","resetElements","elements","_processed","cloneElements","newElements","changeGroupRender","renderFlag","_render","items","itemsTransform","cont","hasReloaded","copies","group","ix","reloadShapes","elems","transformData","offsetModulo","roundOffset","pProps","rProps","sProps","iteration","mProps","rd","currentV","currentI","currentO","closerV","distance","newPosPerc","derivative","denom","tcusp","square","p10","p11","p20","p21","bounds","bottom","other","shapeSegmentInverted","pointsType","count","ml","lj","inputBezier","multiSegments","lastSeg","multiSegment","FontManager","emptyChar","w","size","combinedCharacters","BLACK_FLAG_CODE_POINT","REGIONAL_CHARACTER_A_CODE_POINT","REGIONAL_CHARACTER_Z_CODE_POINT","surrogateModifiers","setUpNode","font","family","parentNode","fontFamily","node","fontSize","fontVariant","fontStyle","fontWeight","letterSpacing","offsetWidth","familyArray","enabledFamilies","trimFontOptions","parent","createHelper","def","helper","engine","fontProps","tHelper","fFamily","textContent","fClass","tCanvasHelper","OffscreenCanvas","measureText","text","getComputedTextLength","getCodePoint","string","codePoint","charCodeAt","second","isRegionalCode","Font","typekitLoaded","_warned","Date","now","setIsLoadedBinded","setIsLoaded","checkLoadedFontsBinded","checkLoadedFonts","isModifier","firstCharCode","secondCharCode","sum","isZeroWidthJoiner","charCode","isFlagEmoji","isCombinedCharacter","_char3","isRegionalFlag","isVariationSelector","fontPrototype","found","ch","list","cache","fontArr","_pendingFonts","loadedSelector","shouldLoadFont","loaded","monoCase","sansCase","fPath","fOrigin","querySelectorAll","rel","sc","getCharData","_char","console","warn","getFontByName","fName","_char2","fontName","doubleSize","singleSize","loadedCount","removeChild","SlotManager","slotFactory","RenderableElement","slots","assign","initRenderable","isInRange","hidden","isTransparent","renderableComponents","addRenderableComponent","component","removeRenderableComponent","prepareRenderableFrame","num","checkLayerLimits","checkTransparency","finalTransform","mProp","renderConfig","hideOnTransparent","renderRenderable","sourceRectAtTime","getLayerSize","textData","getBlendMode","blendModeEnums","SliderEffect","AngleEffect","ColorEffect","PointEffect","LayerIndexEffect","MaskIndexEffect","CheckboxEffect","NoValueEffect","EffectsManager","effects","ef","effectElements","effectItem","GroupEffect","BaseElement","FrameElement","FootageElement","imageLoader","initBaseData","AudioElement","_isPlaying","_canPlay","_currentTime","_volumeMultiplier","_previousVolume","_placeholder","lv","au","BaseRenderer","eff","checkMasks","LayerExpressionInterface","EffectsExpressionInterface","ShapeExpressionInterface","TextExpressionInterface","CompExpressionInterface","layerInterface","maskManager","registerMaskInterface","effectsInterface","createEffectsInterface","registerEffectsInterface","shapeInterface","shapesData","itemsData","content","textInterface","setBlendMode","blendModeValue","bm","baseElement","layerElement","layerId","effectsManager","getType","prepareProperties","isVisible","_isParent","getBaseElement","FootageInterface","getFootageData","timeRemapped","totalVolume","volumeValue","checkLayers","buildItem","checkPendingElements","createItem","layer","createImage","createComp","createSolid","createNull","createShape","createText","createCamera","createFootage","buildAllItems","pInterface","progressiveLoad","buildElementParenting","parentName","hierarchy","setAsParent","setHierarchy","addPendingElement","pendingElements","getElementById","pathValue","setupGlobalData","fontsContainer","compSize","effectTypes","TRANSFORM_EFFECT","TransformElement","MaskElement","maskElement","viewData","solidPath","rect","expansor","feMorph","properties","currentMasks","maskType","maskRef","getShapeProp","lastPath","filterID","expan","lastOperator","filterId","lastRadius","mask","createLayerSolidPath","invRect","drawPath","maskedElement","initTransform","_matMdf","_localMatMdf","_opMdf","localMat","localOpacity","ao","renderTransform","finalMat","localTransforms","renderLocalTransform","lmat","localOp","opacity","searchEffectTransforms","renderableEffectsManager","transformEffects","getEffects","globalToLocal","transforms","ptNew","mHelper","getMaskProperty","isFirstFrame","getMaskelement","pathNodes","pathString","pathShapeValue","filtersFactory","filId","skipCoordinates","fil","feColorMatrix","featureSupport","svgLumaHidden","offscreenCanvas","registeredEffects$1","idPrefix","SVGEffects","filterManager","source","createFilter","filters","Effect","effect","countsAsEffect","registerEffect$1","SVGBaseElement","HierarchyElement","RenderableDOMElement","IImageElement","initElement","sourceRect","ProcessedElement","IShapeElement","initRendererElement","createContainerElements","matteElement","transformedElement","_sizeChanged","layerElementParent","td","matteMasks","gg","tt","ln","hd","cp","clipId","cpGroup","renderElement","destroyBaseElement","createRenderableComponents","getMatte","matteType","useElement","masker","createAlphaToLuminanceFilter","maskGroup","maskGrouper","feCTr","feFunc","alphaRect","setMatte","initHierarchy","checkParenting","createContent","renderInnerContent","innerElem","pr","imagePreserveAspectRatio","addShapeToModifiers","shapeModifiers","isShapeInAnimatedModifiers","isAnimatedWithShape","renderModifiers","searchProcessedElement","processedElements","addProcessedElement","lineCapEnum","lineJoinEnum","SVGShapeData","transformers","level","caches","lStr","lvl","SVGStyleData","pElem","msElem","DashProperty","dataProps","dashStr","dashArray","dashoffset","SVGStrokeStyleData","styleOb","SVGFillStyleData","SVGNoStyleData","GradientProperty","cLength","_cmdf","_omdf","_collapsable","checkCollapsable","_hasOpacity","SVGGradientFillStyleData","initGradientData","SVGGradientStrokeStyleData","ShapeGroupData","prevViewData","gr","SVGTransformData","comparePoints","stops","setGradientData","setGradientOpacity","pathElement","gradientId","gfill","gf","cst","opacityId","maskId","opFill","lc","of","ms","ost","buildShapeString","_o","_i","shapeString","SVGElementsRenderer","_identityMatrix","_matrixHelper","renderContentTransform","styleData","itemData","renderNoop","renderPath","pathStringTransformed","redraw","iterations","lLen","renderFill","styleElem","renderGradientStroke","renderGradient","renderStroke","hasOpacity","attr1","attr2","cValues","oValues","ang","createRenderFunction","SVGShapeElement","stylesList","animatedContents","LetterProps","sw","fc","TextProperty","_frameId","keysIndex","canResize","minimumFontSize","currentData","ascent","boxWidth","defaultBoxWidth","justifyOffset","lh","lineWidths","ls","ps","fillColorAnim","strokeColorAnim","strokeWidthAnim","yOffset","finalSize","finalText","finalLineHeight","copyData","searchProperty","completeTextData","initSecondaryElement","identityMatrix","buildExpressionInterface","searchShapes","filterUniqueShapes","tempShapes","areAnimated","setShapesAsAnimated","createStyleElement","elementData","addToAnimatedContents","createGroupElement","createTransformElement","transformProperty","createShapeElement","ownTransformers","setElementStyles","render","currentTransform","modifier","processedPos","ownStyles","ownModifiers","renderShape","animatedContent","update","updated","obj","setCurrentData","searchKeyframes","getKeyframeValue","_finalValue","currentValue","currentIndex","textKeys","buildFinalText","charactersArray","shouldCombine","shouldCombineNext","currentChars","charAt","newLineFlag","letters","anchorGrouping","currentSize","currentPos","currentLine","lineWidth","maxLineWidth","trackingOffset","currentHeight","boxHeight","lastSpaceIndex","currentChar","uncollapsedSpaces","an","add","anIndexes","animatorJustifyOffset","extra","animatorData","letterData","based","animators","indexes","fh","fs","fb","rn","totalChars","newInd","currentInd","newData","dData","recalculate","canResizeFont","_canResize","setMinimumFontSize","_fontValue","TextSelectorProp","TextSelectorPropFactory","_currentTextLength","finalS","finalE","xe","ne","sm","getMult","textProperty","easer","tot","smoothness","threshold","newCharsFlag","divisor","getTextSelectorProp","TextAnimatorDataProperty","animatorProps","defaultData","textAnimatorAnimatables","TextAnimatorProperty","renderType","_hasMaskedPath","_textData","_renderType","_elem","_animatorsData","_pathData","_moreOptions","alignment","renderedLetters","lettersChangedFlag","ITextElement","searchProperties","getMeasures","xPos","yPos","pathInfo","currentLength","currentPoint","pointInd","segmentInd","tanAngle","matrixHelper","renderedLettersCount","tLength","pi","letterValue","yOff","firstLine","offf","xPathPos","yPathPos","elemOpacity","letterSw","letterSc","letterFc","letterO","initPathPos","initSegmentInd","initPointInd","letterM","letterP","defaultPropsArray","animatorFirstCharOffset","justifyOffsetMult","isNewLine","animatorOffset","atan","textAnimator","createPathShape","shapeStr","_fontSize","applyTextPropertiesToMatrix","lineNumber","buildColor","colorData","emptyProp","validateText","buildNewText","emptyShapeData","SVGTextLottieElement","textSpans","ISolidElement","NullElement","SVGRendererBase","ICompElement","SVGCompElement","supports3d","SVGRenderer","svgElement","ariaLabel","title","titleElement","titleId","description","descElement","descId","preserveAspectRatio","contentVisibility","viewBoxOnly","viewBoxSize","className","focusable","filterSize","runExpressions","destroyed","ShapeTransformManager","sequences","sequenceList","transform_key_count","singleShape","textContainer","buildTextContents","textArray","textContents","currentTextContent","fromCharCode","buildShapeData","shapeItem","tSpan","usesGlyphs","cachedSpansLength","span","childSpan","glyph","glyphElement","_debug","tElement","justify","textBox","bbox","renderedLetter","textSpan","findIndexByInd","appendElementInPos","elementIndex","tp","matteMask","nextElement","insertBefore","setElements","getElements","destroyElements","addTransformSequence","sequence","processSequence","processSequences","getNewKey","lumaLoader","lumaBuffer","lumaBufferCtx","svg","loadLuma","_svg","createCanvas","loadLumaCanvas","getLumaCanvas","registeredEffects","CVEffects","registerEffect","CVMaskElement","hasMasks","CVBaseElement","canvasContext","beginPath","moveTo","lineTo","bezierCurveTo","save","clip","operationsMap","CVShapeData","transformsManager","styledShapes","styledShape","trNodes","CVShapeElement","CVTextElement","stroke","fill","currentRender","sWidth","fValue","CVImageElement","CVSolidElement","CanvasRendererBase","CanvasContext","strokeStyle","lineCap","CVContextData","stack","cArrPos","cTr","nativeContext","transformMat","currentOpacity","currentFillStyle","appliedFillStyle","currentStrokeStyle","appliedStrokeStyle","currentLineWidth","appliedLineWidth","currentLineCap","appliedLineCap","currentLineJoin","appliedLineJoin","appliedMiterLimit","currentMiterLimit","CVCompElement","CanvasRenderer","clearCanvas","context","dpr","devicePixelRatio","currentGlobalAlpha","contextData","ctxTransform","ctxOpacity","ctxFillStyle","ctxStrokeStyle","ctxLineWidth","ctxLineCap","ctxLineJoin","ctxMiterLimit","ctxFill","ctxFillRect","ctxStroke","HBaseElement","HSolidElement","HShapeElement","shapesContainer","currentBBox","HTextElement","textPaths","isMasked","HCameraElement","pe","_prevMat","HImageElement","HybridRendererBase","threeDElements","camera","HCompElement","HybridRenderer","createElements","buffers","bufferCanvas","bufferCanvas2","_isProxy","transformCanvas","blendMode","globalCompositeOperation","hideElement","showElement","clearRect","prepareLayer","bufferCtx","drawImage","getTransform","exitLayer","buffer","forceRealStack","restore","transformHelper","dashResetter","preTransforms","co","wi","da","addTransformToStyleList","removeTransformFromStyleList","closeStyles","shouldRender","ownTransforms","_shouldRender","renderShapeTransform","parentTransform","groupTransform","drawLayer","nodes","currentStyle","coOp","grd","setLineDash","lineDashOffset","closePath","isMain","renderGradientFill","renderStyledShape","shapeNodes","groupTransformMat","createLinearGradient","createRadialGradient","addColorStop","hasFill","hasStroke","commands","pathArr","commandsCounter","lastFill","lastStroke","lastStrokeW","widthCrop","heightCrop","imgW","imgH","imgRel","canvasRel","par","globalAlpha","rule","actionFlag","containerStyle","mozTransformOrigin","setContext","isDashed","elementWidth","elementHeight","elementRel","animationRel","offsetHeight","fillType","duplicate","newLength","forceRestore","currentContext","prevStack","saveOnNativeFlag","currentStack","newStack","setOpacity","trProps","checkBlendMode","tg","transformedElementStyle","matrixValue","webkitTransform","addEffects","backgroundColor","_renderShapeFrame","shapeCont","getTransformedPoint","calculateShapeBoundingBox","item","vPoint","oPoint","nextIPoint","nextVPoint","checkBounds","getBoundsOfCurve","shapeBoundingBox","xMax","yMax","tempBoundingBox","b2ac","calculateF","calculateBoundingBox","expandStrokeBoundingBox","widthProperty","kfw","currentBoxContains","changed","shapeStyle","shapeTransform","compW","compH","innerElemStyle","textColor","strokeWidth","lineHeight","tParent","tCont","children","tContStyle","tContTranslation","tStyle","tSpanTranslation","svgStyle","translation","textPath","margin","svgTransform","setup","perspectiveStyle","perspectiveElem","perspective","webkitPerspective","mTransf","diffVector","mag","lookDir","lookLengthOnXZ","mRotationX","mRotationY","hasMatrixChanged","matValue","Image","imageElem","newDOMElement","ddd","addTo3dContainer","nextDOMElement","nextLayer","getThreeDContainerByPos","startPos","endPos","createThreeDContainer","threeDContainerData","build3dContainers","lastThreeDContainerData","currentContainer","resizerElem","overflow","cWidth","cHeight","floatingContainer","_createBaseContainerElements","_thisLayerFunction","pixelAspect","frameDuration","displayStartTime","numLayers","_typeof$2","seedRandom","nodecrypto","global","rngname","startdenom","significance","ARC4","keylen","me","S","copy","flatten","result","typ","mixkey","seed","smear","stringseed","tostring","options","shortseed","entropy","randomBytes","Uint8Array","crypto","msCrypto","getRandomValues","browser","plugins","screen","autoseed","arc4","prng","int32","quick","pass","is_math_call","state","initialize$2","propTypes","SHAPE","_typeof$1","ExpressionManager","fetch","_lottieGlobal","$bm_isInstanceOfArray","isNumerable","tOfV","$bm_neg","tOfA","lenA","retArr","easeInBez","easeOutBez","easeInOutBez","tOfB","lenB","sub","mul","mod","$bm_sum","$bm_sub","$bm_mul","$bm_div","$bm_mod","clamp","mm","radiansToDegrees","radians_to_degrees","degreesToRadians","degrees_to_radians","helperLengthArray","arr1","arr2","normalize","vec","rgbToHsl","hue2rgb","hslToRgb","linear","tMin","tMax","value1","value2","_tMin","rnd","createPath","inTangents","outTangents","inVertexPoint","outVertexPoint","arrPlaceholder","initiateExpression","property","noOp","_value","needsVelocity","_needsRandom","elemType","$bm_transform","thisProperty","_name","valueAtTime","inPoint","outPoint","loopIn","loop_in","loopOut","loop_out","smooth","toWorld","fromWorld","fromComp","toComp","fromCompToSurface","rotation","anchorPoint","thisLayer","thisComp","velocityAtTime","scoped_bm_rt","expression_function","eval","numKeys","active","wiggle","freq","amp","iWiggle","lenWiggle","addedAmps","periods","loopInDuration","loopOutDuration","getVelocityAtTime","velocity","textIndex","textTotal","selectorValue","lookAt","elem1","elem2","fVec","pitch","easeOut","val1","val2","applyEase","easeIn","ease","iKey","lenKey","nearestKey","obKey","framesToTime","fps","timeToFrames","seedrandom","randSeed","substring","posterizeTime","framesPerSecond","hasParent","executeExpression","frameExpressionId","__preventDeadCodeRemoval","Expressions","stackCount","registers","pushExpression","popExpression","releaseInstances","registerExpressionProperty","expression","MaskManagerInterface","MaskInterface","_mask","_data","_masksInterfaces","ExpressionPropertyInterface","defaultUnidimensionalValue","defaultMultidimensionalValue","completeProperty","expressionValue","valueProp","speedAtTime","getSpeedAtTime","propertyGroup","defaultGetter","UnidimensionalPropertyInterface","arrValue","MultidimensionalPropertyInterface","TransformExpressionInterface","_thisFunction","xRotation","yRotation","xPosition","yPosition","zPosition","_px","_py","_pz","_transformFactory","getMatrix","toWorldMat","toWorldVec","applyPoint","fromWorldVec","invertPoint","sampleImage","transformInterface","anchorPointDescriptor","anchor_point","startTime","propertyGroupFactory","interfaceFunction","parentPropertyGroup","PropertyInterface","propertyName","createGroupInterface","groupInterface","mn","_propertyGroup","createValueInterface","numProperties","np","enabled","en","expressionProperty","setGroupProperty","effectsData","ShapePathInterface","view","propertyIndex","iterateElements","groupInterfaceFactory","fillInterfaceFactory","strokeInterfaceFactory","trimInterfaceFactory","ellipseInterfaceFactory","starInterfaceFactory","rectInterfaceFactory","roundedInterfaceFactory","repeaterInterfaceFactory","gradientFillInterfaceFactory","interfaces","transformInterfaceFactory","cix","contentsInterfaceFactory","startPoint","endPoint","_dashPropertyGroup","dashOb","addPropertyToDashOb","dash","start","skewAxis","outerRadius","outerRoundness","innerRoundness","innerRadius","_interfaceFunction","_sourceText","sourceText","stringValue","fillColor","_typeof","dataInterfaceFactory","outlineInterface","currentPropertyName","currentProperty","propertyNameIndex","outlineInterfaceFactory","dataInterface","footage","getInterface","expressionHelpers","searchExpressions","_cachingAtTime","getStaticValueAtTime","addPropertyDecorator","durationFlag","cycleDuration","firstKeyFrame","ret","lastKeyFrame","initV","endV","repeats","lastValue","nextLastValue","firstValue","nextFirstValue","samples","sampleValue","sampleFrequency","getTransformValueAtTime","_transformCachingAtTime","anchor","rotationZ","rotationY","rotationX","orientation","positionX","positionY","positionZ","getTransformStaticValueAtTime","propertyGetProp","ShapePropertyConstructorFunction","getConstructorFunction","KeyframedShapePropertyConstructorFunction","getKeyframedConstructorFunction","ShapeExpressions","isClosed","pointOnPath","_segmentsLength","accumulatedLength","initIndex","endIndex","vectorOnPath","vectorType","xLength","yLength","magnitude","tangentOnPath","normalOnPath","shapeValue","lastTime","propertyGetShapeProp","trims","initialize$1","addDecorator","getExpressionValue","calculateExpression","isKeyframed","hasExpressions","initialize","SVGComposableEffect","createMergeNode","resultId","ins","feMergeNode","feMerge","linearFilterValue","SVGTintFilter","linearFilter","matrixFilter","SVGFillFilter","SVGStrokeEffect","initialized","SVGTritoneFilter","feComponentTransfer","feFuncR","feFuncG","feFuncB","SVGProLevelsFilter","createFeFunc","feFuncA","feFuncRComposed","feFuncGComposed","feFuncBComposed","SVGDropShadowEffect","globalFilterSize","feGaussianBlur","feOffset","feFlood","feComposite","colorBlack","colorWhite","groupPath","elemChildren","childNodes","removeAttribute","pathMasker","dasharrayValue","getTotalLength","lineLength","units","color1","color2","color3","tableR","tableG","tableB","getTableValue","inputBlack","inputWhite","gamma","outputBlack","outputWhite","colorValue","table","outputDelta","inputDelta","col","_svgMatteSymbols","SVGMatte3Effect","filterElem","SVGGaussianBlurEffect","TransformEffect","SVGTransformEffect","CVTransformEffect","findSymbol","replaceInParent","symbolId","nextChild","useElem","setElementAsMask","symbol","sigma","dimensions","sigmaX","sigmaY","edgeMode","forceFrame","isUniformScale","scaleHeight","scaleWidth","__webpack_module_cache__","inProgress","dataWebpackPrefix","__webpack_require__","moduleId","cachedModule","__webpack_modules__","amdO","getter","__esModule","definition","chunkId","Promise","all","reduce","promises","globalThis","Function","script","needAttach","getAttribute","charset","timeout","nc","onScriptComplete","prev","onerror","onload","clearTimeout","doneFns","head","toStringTag","scriptUrl","importScripts","currentScript","installedChunks","installedChunkData","promise","resolve","reject","errorType","realSrc","message","request","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","some","chunkLoadingGlobal","GoogleOAuthContext","createContext","GoogleOAuthProvider","clientId","nonce","onScriptLoadSuccess","onScriptLoadError","scriptLoadedSuccessfully","setScriptLoadedSuccessfully","onScriptLoadSuccessRef","onScriptLoadErrorRef","scriptTag","async","defer","useLoadGsiScript","contextValue","useMemo","Provider","useGoogleOAuth","useContext","extractClientId","credentialResponse","client_id","containerHeightMap","large","medium","small","GoogleLogin","onSuccess","useOneTap","promptMomentNotification","theme","logo_alignment","locale","click_listener","containerProps","btnContainerRef","onSuccessRef","onErrorRef","promptMomentNotificationRef","_d","_e","_f","_g","_h","_j","google","accounts","credential","select_by","renderButton","prompt","cancel","App","registerPlugin","web","then","AppWeb","WelcomeScreen","onContinue","onClose","existingScript","querySelector","alt","onClick","viewBox","strokeLinecap","strokeLinejoin","toPascalCase","camelCase","match","toUpperCase","toCamelCase","mergeClasses","classes","array","Boolean","hasA11yProp","startsWith","defaultAttributes","xmlns","Icon","forwardRef","absoluteStrokeWidth","iconNode","tag","attrs","Check","iconName","Component","displayName","createLucideIcon","COLORS","btnGradStart","btnGradEnd","btnLabel","btnBorder","iconCircleGradientStart","iconCircleGradientEnd","background","backgroundSecondary","textPrimary","textSecondary","textMuted","border","borderLight","success","warning","info","hover","pressed","focus","IconCircle","borderRadius","label","iconRight","loading","disabled","testId","textStyle","centered","setPressed","buttonStyle","_objectSpread","minWidth","maxWidth","cursor","boxShadow","transition","pressedOverlayStyle","labelStyle","textAlign","_extends","onMouseDown","handleMouseDown","onMouseUp","handleMouseUp","onMouseLeave","handleMouseLeave","justifyContent","alignItems","EmailAuth","testMode","email","setEmail","codeDigits","setCodeDigits","step","setStep","isLoading","setIsLoading","setError","emailSent","setEmailSent","emailServiceMessage","setEmailServiceMessage","code","isCodeComplete","every","resetCodeDigits","sleep","postJson","apiKey","method","headers","handleOAuthSuccess","log","gmailEmail","normalizedEmail","baseUrl","onairosBaseUrl","onairosApiKey","accountInfo","accountStatus","existingUser","accountCheckResponse","Info","identifier","ok","accountData","json","_accountStatus","_accountStatus2","_accountStatus3","_accountStatus4","_accountStatus5","_accountStatus6","_accountStatus7","AccountInfo","exists","hasTrainedModel","hasPersonalityTraits","connectedPlatforms","needsDataConnection","needsTraining","canUseInference","accountCheckError","verified","token","userName","isNewUser","flowType","adminMode","userCreated","accountDetails","createdAt","toISOString","ssoProvider","checkGmailOAuthSuccess","gmailSuccess","localStorage","getItem","gmailTimestamp","oauthContext","timestampNum","removeItem","checkOAuthCompletion","urlParams","URLSearchParams","search","oauthSuccess","oauthPlatform","oauthEmail","newUrl","history","replaceState","timestamp","firstInput","handleEmailSubmit","preventDefault","validateEmail","rawEmail","res","_unused","legacyRes","msg","_unused2","requestEmailVerification","handleGoogleSuccess","base64","jsonPayload","atob","userInfo","picture","email_verified","sdkConfig","backendError","handleGoogleError","handleCodeSubmit","simulatedResponse","testAccount","codeToSubmit","rawCode","normalizedCode","attempt","errMsg","attemptsRemaining","_unused3","verifyEmailCode","_accountStatus8","_accountStatus9","_accountStatus0","_accountStatus1","_accountStatus10","_accountStatus11","_accountStatus12","jwtToken","provider","onChange","placeholder","WebkitTextFillColor","required","borderColor","inputMode","pattern","maxLength","autoComplete","onPaste","_e$clipboardData","_e$currentTarget$pare","pasted","clipboardData","getData","nextDigits","focusIndex","nextInput","currentTarget","parentElement","digitsOnly","_e$target$parentEleme","_e$target$parentEleme2","onKeyDown","_e$currentTarget$pare2","prevInput","caretColor","PrimaryButton","minHeight","isCapacitor","_window$Capacitor","_window$webkit","Capacitor","Plugins","webkit","messageHandlers","bridge","isReactNative","product","nativeModuleProxy","isMobileApp","isMobileBrowser","innerWidth","BOOKMARKLET_HREF","ConnectChatGPTModal","onConnected","userToken","getUserToken","directToken","userData","bookmarkletHref","createPortal","inset","zIndex","pointerEvents","fillRule","clipRule","draggable","onDragStart","dataTransfer","effectAllowed","alert","suppressHydrationWarning","handleGotIt","chatgptIcon","claudeIcon","geminiIcon","grokIcon","env","REACT_APP_ONAIROS_API_KEY","REACT_APP_ONAIROS_BASE_URL","sdkType","enableHealthMonitoring","enableAutoRefresh","enableConnectionValidation","fadeSlideInKeyframes","UniversalOnboarding","_window$Capacitor$isN","onBack","appIcon","appName","username","priorityPlatform","rawMemoriesOnly","rawMemoriesConfig","isMobile","isMobileProp","lastFrameRef","rafRef","connectedAccounts","setConnectedAccounts","isConnecting","setIsConnecting","connectingPlatform","setConnectingPlatform","selected","setSelected","currentPage","setCurrentPage","showChatGPTModal","setShowChatGPTModal","touchStartX","touchDeltaX","isActualMobileDevice","isNativePlatform","vh","setVh","onResize","isSmallMobile","personaSide","PERSONA_TOP","SLOT","CIRCLE","GAP_PAGE1","GAP_PAGE2","ACTIVE_SCALE","ICONS_H","igGradId","useId","Brand","ChatGPT","objectFit","Claude","Gemini","Grok","Instagram","stopColor","YouTube","Reddit","LinkedIn","Twitter","aiLinks","descriptions","allPlatforms","connector","icon","directLink","platforms","page","handleAuthSuccess","platform","detail","plat","existingArray","existingObj","acc","connectedArray","entries","setItem","checkOAuthSuccess","sessionSuccess","sessionStorage","sessionPlatform","_ref5","platformConnector","localStorageKey","timestampKey","_ref6","_ref7","_ref8","_ref9","accountsObj","handleSwitch","_JSON$parse","isCapacitorNative","effectiveMobile","returnUrl","sessionPayload","bodyPayload","session","candidates","youtube","linkedin","reddit","pinterest","instagram","github","facebook","gmail","oauthUrl","candidateLower","Browser","addListener","listenerError","windowName","presentationStyle","popup","messageHandler","pollInterval","close","pollCount","maxPolls","connectToPlatform","connectedCount","personaAnim","progress","startTs","performance","eased","frame","cancelAnimationFrame","scrollbarWidth","msOverflowStyle","paddingTop","paddingBottom","onTouchStart","touches","onTouchMove","onTouchEnd","dx","gridAutoFlow","gridTemplateColumns","columnGap","justifyItems","paddingInline","idx","on","isSel","_window$Capacitor2","_window$Capacitor2$is","hasCapacitor","marginTop","marginBottom","maxHeight","role","stopPropagation","WebkitTapHighlightColor","userSelect","touchAction","connected","_ref0","_ref1","totalConnections","PinSetup","userEmail","pin","setPin","pinRequirements","setPinRequirements","uppercase","number","allRequirementsMet","handleSubmit","pinCreated","base","DataTypeToggle","dataType","onToggle","isNative","handle","onConnectMoreApps","showTime","basic","rawMemories","preferences","personality","setFreq","isWrappedApp","toggle","selectedCount","getConnected","mapped","availableOptions","opt","hasLLMConnections","llmPlatforms","freqToPercent","ratio","WebkitOverflowScrolling","Pinterest","GitHub","Facebook","Gmail","approved","declined","TrainingComponent","_steps$currentStep","_steps$currentStep2","_steps$currentStep3","_steps$currentStep4","_steps$currentStep5","currentStep","setCurrentStep","setProgress","isComplete","setIsComplete","steps","interval","stepTimeout","stepDuration","stepProgress","newProgress","completionDelay","trainingComplete","simulatedTraining","PACKET_TYPES","create","PACKET_TYPES_REVERSE","ERROR_PACKET","withNativeBlob","withNativeArrayBuffer","ArrayBuffer","isView","encodePacket","supportsBinary","encodeBlobAsBase64","fileReader","FileReader","readAsDataURL","toArray","byteOffset","byteLength","TEXT_ENCODER","lookup","decodePacket","encodedPacket","binaryType","mapBinary","decodeBase64Packet","decoded","encoded1","encoded2","encoded3","encoded4","bufferLength","arraybuffer","bytes","decode","SEPARATOR","createPacketEncoderStream","TransformStream","packet","controller","arrayBuffer","encoded","TextEncoder","encode","encodePacketToBinary","payloadLength","header","DataView","setUint8","setUint16","setBigUint64","BigInt","enqueue","TEXT_DECODER","chunks","chunk","concatChunks","Emitter","mixin","_callbacks","once","off","removeListener","removeAllListeners","emit","emitReserved","hasListeners","nextTick","setTimeoutFn","globalThisShim","self","pick","NATIVE_SET_TIMEOUT","NATIVE_CLEAR_TIMEOUT","installTimerFunctions","opts","useNativeTimers","clearTimeoutFn","randomString","TransportError","reason","super","Transport","query","socket","forceBase64","doOpen","doClose","packets","write","onOpen","onData","onPacket","details","onPause","createUri","schema","_hostname","_port","_query","hostname","port","secure","encodedQuery","encodeURIComponent","_polling","_poll","total","doPoll","encodedPayload","encodedPackets","decodedPacket","decodePayload","encodePayload","doWrite","uri","timestampRequests","timestampParam","b64","hasCORS","empty","BaseXHR","isSSL","protocol","xd","req","xhrStatus","pollXhr","Request","createRequest","_opts","_method","_uri","xdomain","_xhr","extraHeaders","setDisableHeaderCheck","setRequestHeader","cookieJar","addCookies","withCredentials","requestTimeout","parseCookies","_onLoad","_onError","_index","requestsCount","requests","_cleanup","fromError","abort","attachEvent","unloadHandler","hasXHR2","newRequest","BaseWS","protocols","ws","createSocket","addEventListeners","onopen","autoUnref","_socket","unref","onclose","closeEvent","lastPacket","WebSocketCtor","WebSocket","MozWebSocket","transports","websocket","_packet","webtransport","_transport","WebTransport","transportOptions","catch","ready","createBidirectionalStream","stream","decoderStream","maxPayload","TextDecoder","expectedLength","isBinary","headerArray","getUint16","getUint32","createPacketDecoderStream","MAX_SAFE_INTEGER","reader","readable","pipeThrough","getReader","encoderStream","pipeTo","_writer","getWriter","read","polling","re","parts","exec","host","authority","ipv6uri","pathNames","regx","names","queryKey","$0","$1","$2","withEventListeners","OFFLINE_EVENT_LISTENERS","SocketWithoutUpgrade","writeBuffer","_prevBufferLen","_pingInterval","_pingTimeout","_maxPayload","_pingTimeoutTime","Infinity","parsedUri","_transportsByName","transportName","agent","upgrade","rememberUpgrade","addTrailingSlash","rejectUnauthorized","perMessageDeflate","closeOnBeforeunload","qs","qry","pairs","_beforeunloadEventListener","transport","_offlineEventListener","_onClose","_cookieJar","createCookieJar","_open","createTransport","EIO","priorWebsocketSuccess","setTransport","_onDrain","_onPacket","flush","onHandshake","_sendPacket","_resetPingTimeout","pingInterval","pingTimeout","_pingTimeoutTimer","delay","upgrading","_getWritablePackets","payloadSize","utf8Length","_hasPingExpired","hasExpired","compress","cleanupAndClose","waitForUpgrade","tryAllTransports","SocketWithUpgrade","_upgrades","_probe","failed","onTransportOpen","cleanup","freezeTransport","onTransportClose","onupgrade","_filterUpgrades","upgrades","filteredUpgrades","Socket","withNativeFile","File","hasBinary","toJSON","deconstructPacket","packetData","pack","_deconstructPacket","attachments","reconstructPacket","_reconstructPacket","RESERVED_EVENTS","PacketType","Encoder","replacer","EVENT","ACK","encodeAsString","encodeAsBinary","BINARY_EVENT","BINARY_ACK","nsp","deconstruction","isObject","Decoder","reviver","reconstructor","decodeString","isBinaryEvent","BinaryReconstructor","takeBinaryData","buf","tryParse","isPayloadValid","CONNECT","DISCONNECT","CONNECT_ERROR","finishedReconstruction","reconPack","binData","connect","connect_error","disconnect","disconnecting","newListener","io","recovered","receiveBuffer","sendBuffer","_queue","_queueSeq","ids","acks","flags","auth","_autoConnect","disconnected","subEvents","subs","onpacket","_readyState","retries","fromQueue","volatile","_addToQueue","ack","_registerAckCallback","isTransportWritable","isConnected","notifyOutgoingListeners","ackTimeout","timer","withError","emitWithAck","arg1","arg2","tryCount","pending","responseArgs","_drainQueue","force","_sendConnectPacket","_pid","pid","_lastOffset","_clearAcks","onconnect","onevent","onack","ondisconnect","emitEvent","_anyListeners","sent","emitBuffered","subDestroy","onAny","prependAny","offAny","listenersAny","onAnyOutgoing","_anyOutgoingListeners","prependAnyOutgoing","offAnyOutgoing","listenersAnyOutgoing","Backoff","factor","jitter","attempts","rand","deviation","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","parser","encoder","decoder","autoConnect","_reconnection","skipReconnect","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","reconnect","openSubDestroy","errorSub","onping","ondata","ondecoded","_destroy","_close","onreconnect","parsed","loc","sameNamespace","forceNew","multiplex","trainingPhrases","TrainingScreen","onTrainingStart","currentPhrase","setCurrentPhrase","currentStage","setCurrentStage","progressTimer","didSignalStart","signalTrainingStarted","storedToken","socketId","percentage","stage","_result$trainingResul","_result$trainingResul2","_result$trainingResul3","traits","trainingResults","userTraits","hasLlmData","llmData","inferenceResults","fallback","runTrainingAndInference","rainAnim","LoadingScreen","dotCount","setDotCount","loadingStates","stateInterval","nextStep","dotInterval","currentState","aspectRatio","repeat","WrappedLoadingPage","setAnimationData","messageIndex","setMessageIndex","messages","err2","messageTimer","PERSONALITY_TYPES","TRAIT_CATEGORIES","formatOnairosResponse","apiResponse","_apiResponse$Inferenc","includeDictionary","includeArray","formatted","InferenceResult","scores","_apiResponse$Inferenc2","personalityDict","_formatted$InferenceR","traitResult","traitDict","category","formatPersonalityScores","getPersonalityTypes","getTraitCategories","formatUserDataForDisplay","_result$userData","_result$userData2","_result$userData3","_result$userData4","_result$userData5","_result$userData6","_result$userData7","userDataSummary","requestInfo","userHash","dataTypesRequested","approvedData","userProfile","userType","onboardingComplete","modelReady","formatConnectedAccounts","aiData","formatAIResponseData","hasApiResponse","hasErrors","apiError","prettyPrint","toLocaleString","summary","hasData","dataTypes","createPrettyPrintVersion","account","connectedAt","_apiResponse$data","_apiResponse$Inferenc3","available","_apiResponse$data2","_apiResponse$data3","_apiResponse$data4","_apiResponse$data5","_apiResponse$Inferenc4","dashboard","slides","apps","personalityData","preferencesData","output","logFormattedUserData","PageLayout","subtitle","showHeader","showCloseButton","showBackButton","contentClassName","centerContent","isSmallScreen","layoutStyle","flexDirection","headerStyle","padding","contentStyle","titleStyle","subtitleStyle","ModalPageLayout","visible","onBackdropClick","backdropStyle","modalStyle","modalClassName","pageLayoutProps","_excluded2","mobileModalHeightPx","setMobileModalHeightPx","_window$visualViewpor","visualViewport","_window$visualViewpor3","_window$visualViewpor4","_window$visualViewpor5","_window$visualViewpor6","compute","_window$visualViewpor2","_window$visualViewpor7","_window$visualViewpor8","_window$visualViewpor9","_window$visualViewpor0","modalHeight","modalMaxHeight","modalMaxWidth","backdropAlign","backdropPadding","backdropStyles","willChange","hasBackdropStyleOverride","backdropStyleOverride","modalStyles","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","marginLeft","marginRight","flexShrink","hasModalStyleOverride","modalStyleWasApplied","modalStyleOverride","modalStyleKeys","backdropStyleKeys","modalMinHeight","OnairosButton","requestData","webpageName","inferenceData","autoFetch","proofMode","textLayout","login","buttonType","loginReturn","loginType","visualType","enableTraining","responseFormat","showOverlay","setShowOverlay","currentFlow","setCurrentFlow","trainingHasStarted","setTrainingHasStarted","setUserData","oauthReturnDetected","setOauthReturnDetected","returnToDataRequestAfterOnboarding","setReturnToDataRequestAfterOnboarding","isMobileDevice","setIsMobileDevice","computeMobile","_document$documentEle","_document$body","documentElement","clientWidth","isCapNative","detectedMobile","dataset","onairosPrevOverflow","isDesktop","modal","pageContent","shell","getMetrics","el","getComputedStyle","paddingLeft","paddingRight","classList","viewportWidth","handleDeepLink","hasSuccess","hasError","isPopup","opener","qIdx","searchParams","innerHTML","questionMarkIndex","connectionType","dispatchEvent","CustomEvent","existingUserData","existing","merged","cleanUrl","appListener","_window$Capacitor3","_window$Capacitor3$is","AppPlugin","_window$Capacitor4","setupListener","remove","checkWindowUrl","checkExistingSession","savedUser","user","checkOAuthReturn","handleCloseOverlay","handleWelcomeContinue","handleEmailAuthSuccess","authData","userState","hasAccountInfo","candidate","accessToken","userId","accountExists","finalDecision","reasoning","usingAccountStatus","existingUserFalse","flowTypeOnboarding","noAccountInfo","newUserData","normalizePlatformName","twitter","chatgpt","claude","gemini","grok","normalized","emailToken","handleOnboardingComplete","onboardingData","updatedUserData","handlePinSetupComplete","pinData","timeoutId","handleLoadingComplete","handleTrainingComplete","trainingResult","trainingCompleted","handleTrainingScreenComplete","handleDataRequestComplete","_requestResult$approv","_requestResult$approv2","_finalResult","requestResult","lastDataRequest","finalResult","urlResponse","appId","confirmations","EncryptedUserPin","storage","urlData","apiUrl","_finalResult$apiRespo","eventDetail","dataResponse","fetchUrl","fetchBody","includeLlmData","forceFresh","cacheBust","currentEmail","_unused4","_unused5","fetchCompleted","fetchError","AbortController","signal","statusText","fromEntries","hasStatus","hasSlides","responseKeys","poll_interval_seconds","pollResponse","pollData","pollErr","fetchErr","_fetchErr$message","_fetchErr$message2","_fetchErr$message3","_fetchErr$message4","isTimeout","hasToken","_fetchError$message","_fetchError$message2","_fetchError$message3","formattedResult","_formattedResult$apiR","completeResult","enhancedResult","formatError","isWrappedAppForCallback","handleDashboardReady","renderContent","commonProps","hasUserData","tokenPreview","DataRequest","buttonClass","logoStyle","getText","openOnairosOverlay","otherProps","containerId","ReactDOM","handleComplete","OnairosElement","button","click","useOnairosOverlay","isOpen","setIsOpen","cleanupRef","overrideConfig","finalConfig","getOnairosData","ApiKeyType","ADMIN","DEVELOPER","INVALID","ErrorCodes","MISSING_API_KEY","INVALID_API_KEY_FORMAT","INVALID_API_KEY","API_KEY_EXPIRED","DEVELOPER_NOT_FOUND","RATE_LIMIT_EXCEEDED","INTERNAL_ERROR","API_ENDPOINTS","production","development","detectEnvironment","getApiKeyType","isAdminKey","validateApiKeyFormat","isValid","keyType","validateApiKey","environment","retryAttempts","sdkVersion","formatValidation","permissions","rateLimits","remaining","resetTime","developer","plan","totalRequests","sdk_version","getErrorInfo","suggestions","globalSDKState","isInitialized","validationResult","initializeApiKey","enableLogging","apiKeyPrefix","errorInfo","_validationResult$per","_validationResult$dev","isSDKInitialized","getSDKState","getApiKey","getSDKConfig","resetSDK","getGoogleClientId","googleClientId","onairosGoogleClientId","REACT_APP_GOOGLE_CLIENT_ID","Onairos","_window$location"],"sourceRoot":""}