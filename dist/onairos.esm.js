import*as e from"react";var t={d:(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},n={};t.d(n,{_:()=>B,Z:()=>J});const a=(e=>{var n={};return t.d(n,e),n})({Component:()=>e.Component,createElement:()=>e.createElement,default:()=>e.default,forwardRef:()=>e.forwardRef,useEffect:()=>e.useEffect,useState:()=>e.useState}),s=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,t,n)=>n?n.toUpperCase():t.toLowerCase())))(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=(...e)=>e.filter(((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t)).join(" ").trim(),l=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const i=(0,a.forwardRef)((({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:c,iconNode:d,...u},m)=>(0,a.createElement)("svg",{ref:m,...r,width:t,height:t,stroke:e,strokeWidth:s?24*Number(n)/Number(t):n,className:o("lucide",i),...!c&&!l(u)&&{"aria-hidden":"true"},...u},[...d.map((([e,t])=>(0,a.createElement)(e,t))),...Array.isArray(c)?c:[c]]))),c=(e,t)=>{const n=(0,a.forwardRef)((({className:n,...l},r)=>{return(0,a.createElement)(i,{ref:r,iconNode:t,className:o(`lucide-${c=s(e),c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...l});var c}));return n.displayName=s(e),n},d=c("mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),u=c("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),m=c("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function p(e){let{onSuccess:t,testMode:n=!0}=e;const[s,o]=(0,a.useState)(""),[l,r]=(0,a.useState)(""),[i,c]=(0,a.useState)("email"),[p,h]=(0,a.useState)(!1),[f,g]=(0,a.useState)(""),b=async e=>{if(e.preventDefault(),g(""),(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))(s)){h(!0);try{if(n)setTimeout((()=>{c("code"),h(!1)}),1e3);else{if(!(await fetch("https://api2.onairos.uk/auth/send-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})})).ok)throw new Error("Failed to send verification code");c("code"),h(!1)}}catch(e){g(e.message),h(!1)}}else g("Please enter a valid email address")},y=async e=>{if(e.preventDefault(),g(""),n&&"123456"===l)return c("success"),void setTimeout((()=>{t({email:s,verified:!0})}),1e3);if(n)g("Invalid code. Use 123456 for testing.");else{h(!0);try{const e=await fetch("https://api2.onairos.uk/auth/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,code:l})});if(!e.ok)throw new Error("Invalid verification code");const n=await e.json();c("success"),setTimeout((()=>{t({email:s,verified:!0,token:n.token})}),1e3)}catch(e){g(e.message),h(!1)}}};return a.default.createElement("div",{className:"flex flex-col items-center space-y-6 p-6 w-full"},"email"===i&&a.default.createElement("div",{className:"flex flex-col items-center space-y-6 w-full"},a.default.createElement("div",{className:"flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full"},a.default.createElement(d,{className:"w-8 h-8 text-blue-600"})),a.default.createElement("div",{className:"text-center"},a.default.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Sign in to Onairos"),a.default.createElement("p",{className:"text-gray-600"},"Enter your email address to continue"),n&&a.default.createElement("p",{className:"text-sm text-blue-600 mt-2"},"Test mode: Any valid email will work")),a.default.createElement("form",{onSubmit:b,className:"w-full max-w-md space-y-4"},a.default.createElement("div",null,a.default.createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1"},"Email address"),a.default.createElement("input",{type:"email",id:"email",value:s,onChange:e=>o(e.target.value),placeholder:"Enter your email",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})),f&&a.default.createElement("p",{className:"text-sm text-red-600"},f),a.default.createElement("button",{type:"submit",disabled:p,className:"w-full py-3 px-4 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},p?a.default.createElement("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):a.default.createElement(a.default.Fragment,null,"Continue",a.default.createElement(u,{className:"ml-2 w-4 h-4"}))))),"code"===i&&a.default.createElement("div",{className:"flex flex-col items-center space-y-6 w-full"},a.default.createElement("div",{className:"flex items-center justify-center w-16 h-16 bg-green-100 rounded-full"},a.default.createElement(d,{className:"w-8 h-8 text-green-600"})),a.default.createElement("div",{className:"text-center"},a.default.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Check your email"),a.default.createElement("p",{className:"text-gray-600"},"We sent a verification code to"),a.default.createElement("p",{className:"text-gray-900 font-medium"},s),n&&a.default.createElement("p",{className:"text-sm text-blue-600 mt-2"},"Test mode: Use code 123456")),a.default.createElement("form",{onSubmit:y,className:"w-full max-w-md space-y-4"},a.default.createElement("div",null,a.default.createElement("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-1"},"Verification code"),a.default.createElement("input",{type:"text",id:"code",value:l,onChange:e=>r(e.target.value),placeholder:"Enter 6-digit code",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-center text-lg tracking-widest",maxLength:"6",required:!0})),f&&a.default.createElement("p",{className:"text-sm text-red-600"},f),a.default.createElement("button",{type:"submit",disabled:p,className:"w-full py-3 px-4 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},p?a.default.createElement("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):"Verify Code"),a.default.createElement("button",{type:"button",onClick:()=>c("email"),className:"w-full py-2 px-4 text-gray-600 hover:text-gray-800"},"Use a different email"))),"success"===i&&a.default.createElement("div",{className:"flex flex-col items-center space-y-6 w-full"},a.default.createElement("div",{className:"flex items-center justify-center w-16 h-16 bg-green-100 rounded-full"},a.default.createElement(m,{className:"w-8 h-8 text-green-600"})),a.default.createElement("div",{className:"text-center"},a.default.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Email verified!"),a.default.createElement("p",{className:"text-gray-600"},"Setting up your account...")),a.default.createElement("div",{className:"w-8 h-8"},a.default.createElement("div",{className:"animate-spin h-8 w-8 border-2 border-blue-600 rounded-full border-t-transparent"}))))}class h extends a.Component{constructor(e){super(e),this.state={connected:!1,open:!1,isConnecting:!1},this.handleClose=this.handleClose.bind(this),this.handleOpen=this.handleOpen.bind(this),this.youtubeConnect=this.youtubeConnect.bind(this),this.setConnected=this.setConnected.bind(this),this.setDisconnected=this.setDisconnected.bind(this)}setConnected(){this.setState({connected:!0}),this.props.onConnectionChange&&this.props.onConnectionChange("YouTube",!0),this.handleClose()}setDisconnected(){this.updateConnections("Remove","Youtube").then((()=>{this.setState({connected:!1}),this.props.onConnectionChange&&this.props.onConnectionChange("YouTube",!1),this.handleClose()})).catch((e=>{console.error("Error removing YouTube connection:",e)}))}async updateConnections(e,t){const n={session:{username:localStorage.getItem("username")||this.props.username},updateType:e,newConnection:t};try{const e=await fetch("https://api2.onairos.uk/connections/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return await e.json()}catch(e){throw console.error("UpdateConnections error:",e),e}}handleOpen(){this.setState({open:!0})}handleClose(){this.setState({open:!1}),this.props.onClose&&this.props.onClose()}async youtubeConnect(){this.setState({isConnecting:!0});const e={session:{username:localStorage.getItem("username")||this.props.username}};try{const t=await fetch("https://api2.onairos.uk/youtube/authorize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();n.youtubeURL?window.location.href=n.youtubeURL:(console.error("No YouTube URL received"),this.setState({isConnecting:!1}))}catch(e){console.error("YouTube connection error:",e),this.setState({isConnecting:!1})}}render(){const{open:e=this.props.open||this.state.open}=this.props;return e?a.default.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},a.default.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-hidden"},a.default.createElement("div",{className:"p-6"},a.default.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},"Grant Onairos Access to your YouTube Account?"),a.default.createElement("div",{className:"space-y-4 text-gray-700"},a.default.createElement("p",null,"Grant Permission to your YouTube Account, so we can build your Data Models."),a.default.createElement("div",null,a.default.createElement("p",{className:"font-medium mb-2"},"We will access your YouTube:"),a.default.createElement("ul",{className:"list-disc ml-6 space-y-1"},a.default.createElement("li",null,"Basic Account Info"),a.default.createElement("li",null,"Liked and Watched Videos"),a.default.createElement("li",null,"Subscribed Channels and Playlist Videos"))),a.default.createElement("p",null,"We will delete all the data used once your Model is Created"),a.default.createElement("p",{className:"text-sm"},a.default.createElement("a",{href:"https://onairos.uk/compliance-google-policy",className:"text-blue-600 hover:underline"},"Onairos")," ","complies with"," ",a.default.createElement("a",{href:"https://policies.google.com/privacy",className:"text-blue-600 hover:underline"},"Google API Services User Data Policy"))),a.default.createElement("div",{className:"flex space-x-3 mt-6"},a.default.createElement("button",{onClick:this.handleClose,disabled:this.state.isConnecting,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50"},"Disagree"),a.default.createElement("button",{onClick:this.youtubeConnect,disabled:this.state.isConnecting,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"},this.state.isConnecting?"Connecting...":"Agree"))))):null}}const f=h;class g extends a.Component{constructor(e){super(e),this.state={connected:!1,open:!1,isConnecting:!1},this.handleClose=this.handleClose.bind(this),this.handleOpen=this.handleOpen.bind(this),this.linkedinConnect=this.linkedinConnect.bind(this),this.setConnected=this.setConnected.bind(this),this.setDisconnected=this.setDisconnected.bind(this)}setConnected(){this.setState({connected:!0}),this.props.onConnectionChange&&this.props.onConnectionChange("LinkedIn",!0),this.handleClose()}setDisconnected(){this.updateConnections("Remove","LinkedIn").then((()=>{this.setState({connected:!1}),this.props.onConnectionChange&&this.props.onConnectionChange("LinkedIn",!1),this.handleClose()})).catch((e=>{console.error("Error removing LinkedIn connection:",e)}))}async updateConnections(e,t){const n={session:{username:localStorage.getItem("username")||this.props.username},updateType:e,newConnection:t};try{const e=await fetch("https://api2.onairos.uk/connections/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return await e.json()}catch(e){throw console.error("UpdateConnections error:",e),e}}handleOpen(){this.setState({open:!0})}handleClose(){this.setState({open:!1}),this.props.onClose&&this.props.onClose()}async linkedinConnect(){this.setState({isConnecting:!0});const e={session:{username:localStorage.getItem("username")||this.props.username}};try{const t=await fetch("https://api2.onairos.uk/linkedin/authorize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();n.linkedinURL?window.location.href=n.linkedinURL:(console.error("No LinkedIn URL received"),this.setState({isConnecting:!1}))}catch(e){console.error("LinkedIn connection error:",e),this.setState({isConnecting:!1})}}render(){const{open:e=this.props.open||this.state.open}=this.props;return e?a.default.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},a.default.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-hidden"},a.default.createElement("div",{className:"p-6"},a.default.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},"Grant Onairos Access to your LinkedIn Account?"),a.default.createElement("div",{className:"space-y-4 text-gray-700"},a.default.createElement("p",null,"Grant Permission to your LinkedIn Account, so we can build your Data Models."),a.default.createElement("div",null,a.default.createElement("p",{className:"font-medium mb-2"},"We will access your LinkedIn:"),a.default.createElement("ul",{className:"list-disc ml-6 space-y-1"},a.default.createElement("li",null,"Basic Profile Information"),a.default.createElement("li",null,"Professional Experience"),a.default.createElement("li",null,"Network Connections"),a.default.createElement("li",null,"Posts and Activity"))),a.default.createElement("p",null,"We will delete all the data used once your Model is Created"),a.default.createElement("p",{className:"text-sm"},a.default.createElement("a",{href:"https://onairos.uk/privacy-policy",className:"text-blue-600 hover:underline"},"Onairos Privacy Policy")," ","- Your professional data is handled with the highest security standards.")),a.default.createElement("div",{className:"flex space-x-3 mt-6"},a.default.createElement("button",{onClick:this.handleClose,disabled:this.state.isConnecting,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50"},"Disagree"),a.default.createElement("button",{onClick:this.linkedinConnect,disabled:this.state.isConnecting,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"},this.state.isConnecting?"Connecting...":"Agree"))))):null}}const b=g;class y extends a.Component{constructor(e){super(e),this.state={connected:!1,open:!1,isConnecting:!1},this.handleClose=this.handleClose.bind(this),this.handleOpen=this.handleOpen.bind(this),this.instagramConnect=this.instagramConnect.bind(this),this.setConnected=this.setConnected.bind(this),this.setDisconnected=this.setDisconnected.bind(this)}setConnected(){this.setState({connected:!0}),this.props.onConnectionChange&&this.props.onConnectionChange("Instagram",!0),this.handleClose()}setDisconnected(){this.updateConnections("Remove","Instagram").then((()=>{this.setState({connected:!1}),this.props.onConnectionChange&&this.props.onConnectionChange("Instagram",!1),this.handleClose()})).catch((e=>{console.error("Error removing Instagram connection:",e)}))}async updateConnections(e,t){const n={session:{username:localStorage.getItem("username")||this.props.username},updateType:e,newConnection:t};try{const e=await fetch("https://api2.onairos.uk/connections/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return await e.json()}catch(e){throw console.error("UpdateConnections error:",e),e}}handleOpen(){this.setState({open:!0})}handleClose(){this.setState({open:!1}),this.props.onClose&&this.props.onClose()}async instagramConnect(){this.setState({isConnecting:!0});const e={session:{username:localStorage.getItem("username")||this.props.username}};try{const t=await fetch("https://api2.onairos.uk/instagram/authorize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();n.instagramURL?window.location.href=n.instagramURL:(console.error("No Instagram URL received"),this.setState({isConnecting:!1}))}catch(e){console.error("Instagram connection error:",e),this.setState({isConnecting:!1})}}render(){const{open:e=this.props.open||this.state.open}=this.props;return e?a.default.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},a.default.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-hidden"},a.default.createElement("div",{className:"p-6"},a.default.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},"Grant Onairos Access to your Instagram Account?"),a.default.createElement("div",{className:"space-y-4 text-gray-700"},a.default.createElement("p",null,"Grant Permission to your Instagram Account, so we can build your Data Models."),a.default.createElement("div",null,a.default.createElement("p",{className:"font-medium mb-2"},"We will access your Instagram:"),a.default.createElement("ul",{className:"list-disc ml-6 space-y-1"},a.default.createElement("li",null,"Basic Profile Information"),a.default.createElement("li",null,"Posts and Stories"),a.default.createElement("li",null,"Liked Content"),a.default.createElement("li",null,"Following and Followers"))),a.default.createElement("p",null,"We will delete all the data used once your Model is Created"),a.default.createElement("p",{className:"text-sm"},a.default.createElement("a",{href:"https://onairos.uk/compliance-meta-policy",className:"text-blue-600 hover:underline"},"Onairos")," ","complies with"," ",a.default.createElement("a",{href:"https://developers.facebook.com/policy",className:"text-blue-600 hover:underline"},"Meta Platform Policy"))),a.default.createElement("div",{className:"flex space-x-3 mt-6"},a.default.createElement("button",{onClick:this.handleClose,disabled:this.state.isConnecting,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50"},"Disagree"),a.default.createElement("button",{onClick:this.instagramConnect,disabled:this.state.isConnecting,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"},this.state.isConnecting?"Connecting...":"Agree"))))):null}}const x=y;class C extends a.Component{constructor(e){super(e),this.state={connected:!1,open:!1,isConnecting:!1},this.handleClose=this.handleClose.bind(this),this.handleOpen=this.handleOpen.bind(this),this.pinterestConnect=this.pinterestConnect.bind(this),this.setConnected=this.setConnected.bind(this),this.setDisconnected=this.setDisconnected.bind(this)}setConnected(){this.setState({connected:!0}),this.props.onConnectionChange&&this.props.onConnectionChange("Pinterest",!0),this.handleClose()}setDisconnected(){this.updateConnections("Remove","Pinterest").then((()=>{this.setState({connected:!1}),this.props.onConnectionChange&&this.props.onConnectionChange("Pinterest",!1),this.handleClose()})).catch((e=>{console.error("Error removing Pinterest connection:",e)}))}async updateConnections(e,t){const n={session:{username:localStorage.getItem("username")||this.props.username},updateType:e,newConnection:t};try{const e=await fetch("https://api2.onairos.uk/connections/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return await e.json()}catch(e){throw console.error("UpdateConnections error:",e),e}}handleOpen(){this.setState({open:!0})}handleClose(){this.setState({open:!1}),this.props.onClose&&this.props.onClose()}async pinterestConnect(){this.setState({isConnecting:!0});const e={session:{username:localStorage.getItem("username")||this.props.username}};try{const t=await fetch("https://api2.onairos.uk/pinterest/authorize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();n.pinterestURL?window.location.href=n.pinterestURL:(console.error("No Pinterest URL received"),this.setState({isConnecting:!1}))}catch(e){console.error("Pinterest connection error:",e),this.setState({isConnecting:!1})}}render(){const{open:e=this.props.open||this.state.open}=this.props;return e?a.default.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},a.default.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-hidden"},a.default.createElement("div",{className:"p-6"},a.default.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},"Grant Onairos Access to your Pinterest Account?"),a.default.createElement("div",{className:"space-y-4 text-gray-700"},a.default.createElement("p",null,"Grant Permission to your Pinterest Account, so we can build your Data Models."),a.default.createElement("div",null,a.default.createElement("p",{className:"font-medium mb-2"},"We will access your Pinterest:"),a.default.createElement("ul",{className:"list-disc ml-6 space-y-1"},a.default.createElement("li",null,"Basic Profile Information"),a.default.createElement("li",null,"Boards and Pins"),a.default.createElement("li",null,"Saved and Liked Pins"),a.default.createElement("li",null,"Following and Followers"))),a.default.createElement("p",null,"We will delete all the data used once your Model is Created"),a.default.createElement("p",{className:"text-sm"},a.default.createElement("a",{href:"https://onairos.uk/privacy-policy",className:"text-blue-600 hover:underline"},"Onairos Privacy Policy")," ","- Your creative interests and preferences are securely processed.")),a.default.createElement("div",{className:"flex space-x-3 mt-6"},a.default.createElement("button",{onClick:this.handleClose,disabled:this.state.isConnecting,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50"},"Disagree"),a.default.createElement("button",{onClick:this.pinterestConnect,disabled:this.state.isConnecting,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"},this.state.isConnecting?"Connecting...":"Agree"))))):null}}const E=C;class w extends a.Component{constructor(e){super(e),this.state={connected:!1,open:!1,isConnecting:!1},this.handleClose=this.handleClose.bind(this),this.handleOpen=this.handleOpen.bind(this),this.redditConnect=this.redditConnect.bind(this),this.setConnected=this.setConnected.bind(this),this.setDisconnected=this.setDisconnected.bind(this)}setConnected(){this.setState({connected:!0}),this.props.onConnectionChange&&this.props.onConnectionChange("Reddit",!0),this.handleClose()}setDisconnected(){this.updateConnections("Remove","Reddit").then((()=>{this.setState({connected:!1}),this.props.onConnectionChange&&this.props.onConnectionChange("Reddit",!1),this.handleClose()})).catch((e=>{console.error("Error removing Reddit connection:",e)}))}async updateConnections(e,t){const n={session:{username:localStorage.getItem("username")||this.props.username},updateType:e,newConnection:t};try{const e=await fetch("https://api2.onairos.uk/connections/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return await e.json()}catch(e){throw console.error("UpdateConnections error:",e),e}}handleOpen(){this.setState({open:!0})}handleClose(){this.setState({open:!1}),this.props.onClose&&this.props.onClose()}async redditConnect(){this.setState({isConnecting:!0});const e={session:{username:localStorage.getItem("username")||this.props.username}};try{const t=await fetch("https://api2.onairos.uk/reddit/authorize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();n.redditURL?window.location.href=n.redditURL:(console.error("No Reddit URL received"),this.setState({isConnecting:!1}))}catch(e){console.error("Reddit connection error:",e),this.setState({isConnecting:!1})}}render(){const{open:e=this.props.open||this.state.open}=this.props;return e?a.default.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},a.default.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-hidden"},a.default.createElement("div",{className:"p-6"},a.default.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},"Grant Onairos Access to your Reddit Account?"),a.default.createElement("div",{className:"space-y-4 text-gray-700"},a.default.createElement("p",null,"Grant Permission to your Reddit Account, so we can build your Data Models."),a.default.createElement("div",null,a.default.createElement("p",{className:"font-medium mb-2"},"We will access your Reddit:"),a.default.createElement("ul",{className:"list-disc ml-6 space-y-1"},a.default.createElement("li",null,"Basic Profile Information"),a.default.createElement("li",null,"Posts and Comments"),a.default.createElement("li",null,"Upvoted and Saved Content"),a.default.createElement("li",null,"Subscribed Subreddits"))),a.default.createElement("p",null,"We will delete all the data used once your Model is Created"),a.default.createElement("p",{className:"text-sm"},a.default.createElement("a",{href:"https://onairos.uk/privacy-policy",className:"text-blue-600 hover:underline"},"Onairos Privacy Policy")," ","- Your Reddit activity helps us understand your interests and preferences.")),a.default.createElement("div",{className:"flex space-x-3 mt-6"},a.default.createElement("button",{onClick:this.handleClose,disabled:this.state.isConnecting,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50"},"Disagree"),a.default.createElement("button",{onClick:this.redditConnect,disabled:this.state.isConnecting,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"},this.state.isConnecting?"Connecting...":"Agree"))))):null}}const v=w;class N extends a.Component{constructor(e){super(e),this.state={connected:!1,open:!1,isConnecting:!1},this.handleClose=this.handleClose.bind(this),this.handleOpen=this.handleOpen.bind(this),this.gmailConnect=this.gmailConnect.bind(this),this.setConnected=this.setConnected.bind(this),this.setDisconnected=this.setDisconnected.bind(this)}setConnected(){this.setState({connected:!0}),this.props.onConnectionChange&&this.props.onConnectionChange("Gmail",!0),this.handleClose()}setDisconnected(){this.updateConnections("Remove","Gmail").then((()=>{this.setState({connected:!1}),this.props.onConnectionChange&&this.props.onConnectionChange("Gmail",!1),this.handleClose()})).catch((e=>{console.error("Error removing Gmail connection:",e)}))}async updateConnections(e,t){const n={session:{username:localStorage.getItem("username")||this.props.username},updateType:e,newConnection:t};try{const e=await fetch("https://api2.onairos.uk/connections/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return await e.json()}catch(e){throw console.error("UpdateConnections error:",e),e}}handleOpen(){this.setState({open:!0})}handleClose(){this.setState({open:!1}),this.props.onClose&&this.props.onClose()}async gmailConnect(){this.setState({isConnecting:!0});const e={session:{username:localStorage.getItem("username")||this.props.username}};try{const t=await fetch("https://api2.onairos.uk/gmail/authorize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();n.gmailURL?window.location.href=n.gmailURL:(console.error("No Gmail URL received"),this.setState({isConnecting:!1}))}catch(e){console.error("Gmail connection error:",e),this.setState({isConnecting:!1})}}render(){const{open:e=this.props.open||this.state.open}=this.props;return e?a.default.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},a.default.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-hidden"},a.default.createElement("div",{className:"p-6"},a.default.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},"Grant Onairos Access to your Gmail Account?"),a.default.createElement("div",{className:"space-y-4 text-gray-700"},a.default.createElement("p",null,"Grant Permission to your Gmail Account, so we can build your Data Models."),a.default.createElement("div",null,a.default.createElement("p",{className:"font-medium mb-2"},"We will access your Gmail:"),a.default.createElement("ul",{className:"list-disc ml-6 space-y-1"},a.default.createElement("li",null,"Basic Account Information"),a.default.createElement("li",null,"Email Metadata (subjects, dates, senders)"),a.default.createElement("li",null,"Email Categories and Labels"),a.default.createElement("li",null,"Communication Patterns"))),a.default.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3"},a.default.createElement("p",{className:"text-yellow-800 text-sm font-medium"},a.default.createElement("strong",null,"Note:")," We do NOT read the content of your emails. Only metadata is processed.")),a.default.createElement("p",null,"We will delete all the data used once your Model is Created"),a.default.createElement("p",{className:"text-sm"},a.default.createElement("a",{href:"https://onairos.uk/compliance-google-policy",className:"text-blue-600 hover:underline"},"Onairos")," ","complies with"," ",a.default.createElement("a",{href:"https://policies.google.com/privacy",className:"text-blue-600 hover:underline"},"Google API Services User Data Policy"))),a.default.createElement("div",{className:"flex space-x-3 mt-6"},a.default.createElement("button",{onClick:this.handleClose,disabled:this.state.isConnecting,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50"},"Disagree"),a.default.createElement("button",{onClick:this.gmailConnect,disabled:this.state.isConnecting,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"},this.state.isConnecting?"Connecting...":"Agree"))))):null}}const S=N;function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const j=[{name:"YouTube",icon:"ðŸ“º",color:"bg-red-500",connector:"youtube"},{name:"Reddit",icon:"ðŸ”¥",color:"bg-orange-500",connector:"reddit"},{name:"Instagram",icon:"ðŸ“·",color:"bg-pink-500",connector:"instagram"},{name:"Pinterest",icon:"ðŸ“Œ",color:"bg-red-600",connector:"pinterest"},{name:"LinkedIn",icon:"ðŸ’¼",color:"bg-blue-700",connector:"linkedin"},{name:"Gmail",icon:"ðŸ“§",color:"bg-red-500",connector:"gmail"}];function I(e){let{onComplete:t,appIcon:n,appName:s="App",username:o}=e;const[l,r]=(0,a.useState)({}),[i,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),m=(e,t)=>{r((n=>k(k({},n),{},{[e]:t}))),u(null)},p=Object.values(l).filter(Boolean).length;return a.default.createElement("div",{className:"w-full max-w-md mx-auto bg-white rounded-lg shadow-xl overflow-hidden",style:{maxHeight:"90vh",height:"auto"}},a.default.createElement("div",{className:"p-4 sm:p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 4rem)"}},a.default.createElement("div",{className:"flex items-center justify-center mb-4 sm:mb-6"},a.default.createElement("div",{className:"flex items-center space-x-3"},a.default.createElement("img",{src:n||"https://onairos.sirv.com/Images/OnairosBlack.png",alt:s,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg"}),a.default.createElement("div",{className:"flex items-center text-gray-400"},a.default.createElement("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"}))),a.default.createElement("img",{src:"https://onairos.sirv.com/Images/OnairosBlack.png",alt:"Onairos",className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg"}))),a.default.createElement("div",{className:"text-center mb-4 sm:mb-6"},a.default.createElement("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-2"},"Connect Your Accounts"),a.default.createElement("p",{className:"text-gray-600 text-xs sm:text-sm"},"Choose which accounts to connect for a personalized experience")),a.default.createElement("div",{className:"mb-4 sm:mb-6 p-2 sm:p-3 bg-blue-50 border border-blue-200 rounded-lg"},a.default.createElement("p",{className:"text-blue-800 text-xs sm:text-sm"},"ðŸ”’ Your data is never shared with anyone. It's only used to train your personal model and is stored securely.")),a.default.createElement("div",{className:"space-y-2 sm:space-y-3 mb-4 sm:mb-6"},j.map((e=>{const t=l[e.name]||!1;return a.default.createElement("div",{key:e.name,className:"flex items-center justify-between p-3 sm:p-4 border rounded-lg hover:bg-gray-50 transition-colors"},a.default.createElement("div",{className:"flex items-center space-x-3"},a.default.createElement("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg ".concat(e.color," flex items-center justify-center text-white text-base sm:text-lg")},e.icon),a.default.createElement("div",null,a.default.createElement("h3",{className:"font-medium text-gray-900 text-sm sm:text-base"},e.name),a.default.createElement("p",{className:"text-xs sm:text-sm text-gray-500"},t?"Connected":"Not connected"))),a.default.createElement("button",{onClick:()=>(async(e,t)=>{if(i)return;l[e]?r((t=>k(k({},t),{},{[e]:!1}))):u(t)})(e.name,e.connector),disabled:i,className:"relative inline-flex h-5 sm:h-6 w-9 sm:w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(t?"bg-blue-600":"bg-gray-200"," ").concat(i?"opacity-50 cursor-not-allowed":"cursor-pointer")},a.default.createElement("span",{className:"inline-block h-3 sm:h-4 w-3 sm:w-4 transform rounded-full bg-white transition-transform ".concat(t?"translate-x-5 sm:translate-x-6":"translate-x-1")})))}))),p>0&&a.default.createElement("div",{className:"mb-3 sm:mb-4 p-2 sm:p-3 bg-green-50 border border-green-200 rounded-lg"},a.default.createElement("p",{className:"text-green-800 text-xs sm:text-sm"},"âœ… ",p," account",p>1?"s":""," connected")),a.default.createElement("button",{onClick:()=>{const e=Object.entries(l).filter((e=>{let[t,n]=e;return n})).map((e=>{let[t]=e;return t}));t({connectedAccounts:e,totalConnections:e.length})},disabled:0===p,className:"w-full py-2 sm:py-3 px-4 rounded-lg font-semibold transition-colors text-sm sm:text-base ".concat(p>0?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed")},"Continue ",p>0?"with ".concat(p," account").concat(p>1?"s":""):""),a.default.createElement("button",{onClick:()=>t({connectedAccounts:[],totalConnections:0}),className:"w-full mt-2 py-2 text-gray-500 hover:text-gray-700 text-xs sm:text-sm"},"Skip for now")),a.default.createElement(f,{open:"youtube"===d,onClose:()=>u(null),onConnectionChange:m,username:o}),a.default.createElement(b,{open:"linkedin"===d,onClose:()=>u(null),onConnectionChange:m,username:o}),a.default.createElement(x,{open:"instagram"===d,onClose:()=>u(null),onConnectionChange:m,username:o}),a.default.createElement(E,{open:"pinterest"===d,onClose:()=>u(null),onConnectionChange:m,username:o}),a.default.createElement(v,{open:"reddit"===d,onClose:()=>u(null),onConnectionChange:m,username:o}),a.default.createElement(S,{open:"gmail"===d,onClose:()=>u(null),onConnectionChange:m,username:o}))}function T(e){let{onComplete:t,userEmail:n}=e;const[s,o]=(0,a.useState)(""),[l,r]=(0,a.useState)(""),[i,c]=(0,a.useState)({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1});(0,a.useEffect)((()=>{c({length:s.length>=6,uppercase:/[A-Z]/.test(s),lowercase:/[a-z]/.test(s),number:/[0-9]/.test(s),special:/[!@#$%^&*(),.?":{}|<>]/.test(s)})}),[s]);const d=Object.values(i).every((e=>e)),u=s===l&&s.length>0,m=d&&u;return a.default.createElement("div",{className:"max-w-md mx-auto bg-white p-6"},a.default.createElement("div",{className:"text-center mb-6"},a.default.createElement("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4"},a.default.createElement("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-1a2 2 0 00-2-2H6a2 2 0 00-2 2v1a2 2 0 002 2zM12 7V3m0 4l3-3m-3 3L9 4"}))),a.default.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-2"},"Create Your Secure PIN"),a.default.createElement("p",{className:"text-gray-600"},"Your PIN will be used to securely access your data")),a.default.createElement("form",{onSubmit:e=>{e.preventDefault(),m&&t({pin:s,pinCreated:!0,timestamp:(new Date).toISOString()})},className:"space-y-4"},a.default.createElement("div",null,a.default.createElement("label",{htmlFor:"pin",className:"block text-sm font-medium text-gray-700 mb-2"},"Enter PIN"),a.default.createElement("input",{type:"password",id:"pin",value:s,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your secure PIN"})),a.default.createElement("div",null,a.default.createElement("label",{htmlFor:"confirmPin",className:"block text-sm font-medium text-gray-700 mb-2"},"Confirm PIN"),a.default.createElement("input",{type:"password",id:"confirmPin",value:l,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm your PIN"}),l&&!u&&a.default.createElement("p",{className:"text-red-500 text-sm mt-1"},"PINs do not match"),l&&u&&a.default.createElement("p",{className:"text-green-500 text-sm mt-1"},"âœ… PINs match")),a.default.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},a.default.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-3"},"PIN Requirements:"),a.default.createElement("div",{className:"space-y-2"},Object.entries({length:"At least 6 characters",uppercase:"One uppercase letter (A-Z)",lowercase:"One lowercase letter (a-z)",number:"One number (0-9)",special:"One special character (!@#$%^&*)"}).map((e=>{let[t,n]=e;return a.default.createElement("div",{key:t,className:"flex items-center"},a.default.createElement("div",{className:"w-4 h-4 rounded-full mr-2 flex items-center justify-center ".concat(i[t]?"bg-green-500":"bg-gray-300")},i[t]&&a.default.createElement("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))),a.default.createElement("span",{className:"text-sm ".concat(i[t]?"text-green-600":"text-gray-600")},n))})))),a.default.createElement("button",{type:"submit",disabled:!m,className:"w-full py-3 px-4 rounded-lg font-semibold transition-colors ".concat(m?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed")},"Create PIN")),n&&a.default.createElement("p",{className:"text-center text-sm text-gray-500 mt-4"},"Securing account for: ",a.default.createElement("span",{className:"font-medium"},n)))}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const R=[{id:"basic",name:"Basic Information",description:"Name, email, and essential account details",icon:"ðŸ‘¤",required:!0},{id:"memories",name:"Memories",description:"Preferences and interests",icon:"ðŸ§ ",required:!1}];function U(e){let{onComplete:t,userEmail:n,appName:s="App",autoFetch:o=!0}=e;const[l,r]=(0,a.useState)({basic:!0,memories:!1}),[i,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1),[m,p]=(0,a.useState)(null),[h,f]=(0,a.useState)(null),g=e=>{let t=0;const n=e+Date.now().toString();for(let e=0;e<n.length;e++){t=(t<<5)-t+n.charCodeAt(e),t&=t}return"user_".concat(Math.abs(t).toString(36))},b=Object.values(l).filter(Boolean).length;return a.default.createElement("div",{className:"w-full max-w-md mx-auto bg-white rounded-lg shadow-xl overflow-hidden",style:{maxHeight:"90vh",height:"auto"}},a.default.createElement("div",{className:"p-4 sm:p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 4rem)"}},a.default.createElement("div",{className:"text-center mb-4 sm:mb-6"},a.default.createElement("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4"},a.default.createElement("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"}))),a.default.createElement("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2"},"Data Access Request"),a.default.createElement("p",{className:"text-gray-600 text-xs sm:text-sm"},a.default.createElement("span",{className:"font-medium"},s)," would like to access some of your data.")),a.default.createElement("div",{className:"space-y-2 sm:space-y-3 mb-4 sm:mb-6"},R.map((e=>{const t=l[e.id]||!1,n=e.required;return a.default.createElement("div",{key:e.id,className:"flex items-center justify-between p-3 sm:p-4 border rounded-lg transition-colors ".concat(n?"bg-blue-50 border-blue-200":"hover:bg-gray-50")},a.default.createElement("div",{className:"flex items-center space-x-3"},a.default.createElement("div",{className:"text-xl sm:text-2xl"},e.icon),a.default.createElement("div",null,a.default.createElement("h3",{className:"font-medium text-gray-900 text-sm sm:text-base"},e.name,n&&a.default.createElement("span",{className:"text-blue-600 ml-1"},"*")),a.default.createElement("p",{className:"text-xs sm:text-sm text-gray-500"},e.description))),n?a.default.createElement("div",{className:"px-2 py-1 bg-blue-600 text-white text-xs rounded-full"},"Required"):a.default.createElement("button",{onClick:()=>{var t;"basic"!==(t=e.id)&&r((e=>L(L({},e),{},{[t]:!e[t]})))},className:"relative inline-flex h-5 sm:h-6 w-9 sm:w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(t?"bg-blue-600":"bg-gray-200")},a.default.createElement("span",{className:"inline-block h-3 sm:h-4 w-3 sm:w-4 transform rounded-full bg-white transition-transform ".concat(t?"translate-x-5 sm:translate-x-6":"translate-x-1")})))}))),a.default.createElement("div",{className:"mb-3 sm:mb-4 p-2 sm:p-3 bg-green-50 border border-green-200 rounded-lg"},a.default.createElement("p",{className:"text-green-800 text-xs sm:text-sm"},"âœ… ",b," data type",b>1?"s":""," selected for sharing")),d&&a.default.createElement("div",{className:"mb-3 sm:mb-4 p-2 sm:p-3 bg-blue-50 border border-blue-200 rounded-lg"},a.default.createElement("p",{className:"text-blue-800 text-xs sm:text-sm"},"ðŸ”„ Processing your data request...")),h&&a.default.createElement("div",{className:"mb-3 sm:mb-4 p-2 sm:p-3 bg-red-50 border border-red-200 rounded-lg"},a.default.createElement("p",{className:"text-red-800 text-xs sm:text-sm"},"âŒ ",h)),a.default.createElement("div",{className:"flex space-x-3"},a.default.createElement("button",{onClick:()=>{t({approved:!1,dataTypes:[],timestamp:(new Date).toISOString(),userEmail:n,userHash:g(n),appName:s})},disabled:i,className:"flex-1 py-2 sm:py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 text-sm sm:text-base"},"Deny"),a.default.createElement("button",{onClick:async()=>{if(!i){c(!0);try{const e=Object.entries(l).filter((e=>{let[t,n]=e;return n})).map((e=>{let[t]=e;return t})),a=g(n),r={approved:!0,dataTypes:e,timestamp:(new Date).toISOString(),userEmail:n,userHash:a,appName:s};let i=r;if(o)try{const t=await(async e=>{try{u(!0),f(null);const t=g(n),a=await fetch("https://api2.onairos.uk/inferenceTest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approvedData:e,userEmail:n,userHash:t,appName:s,timestamp:(new Date).toISOString()})});if(!a.ok)throw new Error("API call failed with status: ".concat(a.status));const o=L(L({},await a.json()),{},{userHash:t});return p(o),o}catch(e){throw console.error("API call error:",e),f(e.message),e}finally{u(!1)}})(e);i=L(L({},r),{},{apiResponse:t,apiUrl:"https://api2.onairos.uk/inferenceTest"})}catch(e){i=L(L({},r),{},{apiError:e.message,apiUrl:"https://api2.onairos.uk/inferenceTest"})}await new Promise((e=>setTimeout(e,500))),t(i)}catch(e){console.error("Error in handleApprove:",e),f("Failed to process request")}finally{c(!1)}}},disabled:i,className:"flex-1 py-2 sm:py-3 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm sm:text-base"},i?"Processing...":"Approve"))))}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){let{requestData:t,webpageName:n,inferenceData:s=null,onComplete:o=null,autoFetch:l=!0,proofMode:r=!1,textLayout:i="below",textColor:c="white",login:d=!1,buttonType:u="pill",loginReturn:m=null,loginType:h="signIn",visualType:f="full",appIcon:g=null}=e;const[b,y]=(0,a.useState)(!1),[x,C]=(0,a.useState)("email"),[E,w]=(0,a.useState)(null),[v,N]=(0,a.useState)(null);(0,a.useEffect)((()=>{(()=>{const e=localStorage.getItem("onairosUser");if(e)try{const t=JSON.parse(e);w(t),t.onboardingComplete&&t.pinCreated?C("dataRequest"):t.verified&&!t.onboardingComplete?C("onboarding"):t.onboardingComplete&&!t.pinCreated&&C("pin")}catch(e){console.error("Error parsing saved user data:",e),localStorage.removeItem("onairosUser")}})()}),[]);const S=()=>{y(!1),N(null)},O=e=>{console.log("Email auth successful:",e);const t=W(W({},e),{},{verified:!0,onboardingComplete:!1,pinCreated:!1});w(t),localStorage.setItem("onairosUser",JSON.stringify(t)),C("onboarding")},k=e=>{console.log("Onboarding completed:",e);const t=W(W({},E),{},{onboardingComplete:!0,connectedAccounts:e.connectedAccounts||[]});w(t),localStorage.setItem("onairosUser",JSON.stringify(t)),C("pin")},P=e=>{console.log("PIN setup completed:",e);const t=W(W(W({},E),e),{},{pinCreated:!0});w(t),localStorage.setItem("onairosUser",JSON.stringify(t)),C("dataRequest")},j=e=>{console.log("ðŸ”¥ OnairosButton: Data request completed:",e);const t=W(W({},E),{},{lastDataRequest:e});if(w(t),localStorage.setItem("onairosUser",JSON.stringify(t)),y(!1),console.log("ðŸ”¥ Calling onComplete callback with:",e),o)try{o(e),console.log("ðŸ”¥ onComplete callback executed successfully")}catch(e){console.error("ðŸ”¥ Error in onComplete callback:",e)}else console.log("ðŸ”¥ No onComplete callback provided")},D="flex items-center justify-center font-bold rounded cursor-pointer ".concat("pill"===u?"px-4 py-2":"w-12 h-12"," bg-transparent OnairosConnect"),L={flexDirection:"below"===i?"column":"row",backgroundColor:"transparent",color:c,border:"1px solid transparent"},A={width:"20px",height:"20px",marginRight:"full"===f?"12px":"0"};return a.default.createElement(a.default.Fragment,null,a.default.createElement("button",{className:D,onClick:async()=>{try{console.log("ðŸ”¥ openTerminal called"),y(!0)}catch(e){console.error("Error in openTerminal:",e)}},style:L},("full"===f||"icon"===f)&&a.default.createElement("img",{src:d?"https://onairos.sirv.com/Images/OnairosWhite.png":"https://onairos.sirv.com/Images/OnairosBlack.png",alt:"Onairos Logo",style:A}),"icon"!==f&&a.default.createElement("span",{className:"".concat("black"===c?"text-black":"text-white"," ").concat("icon"===f?"sr-only":""," ").concat("right"===i?"ml-2":"left"===i?"mr-2":"")},(()=>{switch(h){case"signUp":return"Sign Up with Onairos";case"signOut":return"Sign Out of Onairos";default:return"Sign In with Onairos"}})())),b&&a.default.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e=>{e.target===e.currentTarget&&S()}},a.default.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-hidden relative",onClick:e=>e.stopPropagation()},a.default.createElement("button",{onClick:S,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 z-10"},a.default.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))),a.default.createElement("div",{className:"overflow-y-auto max-h-[90vh]"},(()=>{switch(x){case"email":return a.default.createElement(p,{onSuccess:O,testMode:!0});case"onboarding":return a.default.createElement(I,{onComplete:k,appIcon:g||"https://onairos.sirv.com/Images/OnairosBlack.png",appName:n,username:(null==E?void 0:E.email)||(null==E?void 0:E.username)});case"pin":return a.default.createElement(T,{onComplete:P,userEmail:null==E?void 0:E.email});case"dataRequest":return a.default.createElement(U,{onComplete:j,userEmail:null==E?void 0:E.email,requestData:t,appName:n,autoFetch:l,appIcon:g});default:return a.default.createElement("div",{className:"flex flex-col items-center space-y-4 p-6"},a.default.createElement("div",{className:"animate-spin h-8 w-8 border-2 border-blue-600 rounded-full border-t-transparent"}),a.default.createElement("p",{className:"text-gray-600"},"Loading..."))}})()))))}function B(e){return a.default.createElement(a.default.Fragment,null,a.default.createElement(z,e))}const J=B;var q=n._,Y=n.Z;export{q as Onairos,Y as default};
//# sourceMappingURL=onairos.esm.js.map