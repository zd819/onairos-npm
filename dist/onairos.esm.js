import*as e from"react";var t={d:(e,a)=>{for(var l in a)t.o(a,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},a={};t.d(a,{_:()=>z,Z:()=>F});const l=(e=>{var a={};return t.d(a,e),a})({createElement:()=>e.createElement,default:()=>e.default,forwardRef:()=>e.forwardRef,useEffect:()=>e.useEffect,useState:()=>e.useState}),r=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,t,a)=>a?a.toUpperCase():t.toLowerCase())))(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=(...e)=>e.filter(((e,t,a)=>Boolean(e)&&""!==e.trim()&&a.indexOf(e)===t)).join(" ").trim(),s=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const o=(0,l.forwardRef)((({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:m,...d},u)=>(0,l.createElement)("svg",{ref:u,...c,width:t,height:t,stroke:e,strokeWidth:r?24*Number(a)/Number(t):a,className:n("lucide",o),...!i&&!s(d)&&{"aria-hidden":"true"},...d},[...m.map((([e,t])=>(0,l.createElement)(e,t))),...Array.isArray(i)?i:[i]]))),i=(e,t)=>{const a=(0,l.forwardRef)((({className:a,...s},c)=>{return(0,l.createElement)(o,{ref:c,iconNode:t,className:n(`lucide-${i=r(e),i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...s});var i}));return a.displayName=r(e),a},m=i("mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),d=i("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),u=i("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function f(e){let{onSuccess:t,testMode:a=!0}=e;const[r,n]=(0,l.useState)(""),[s,c]=(0,l.useState)(""),[o,i]=(0,l.useState)("email"),[f,p]=(0,l.useState)(!1),[b,g]=(0,l.useState)(""),x=async e=>{if(e.preventDefault(),g(""),(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))(r)){p(!0);try{if(a)setTimeout((()=>{i("code"),p(!1)}),1e3);else{if(!(await fetch("https://api2.onairos.uk/auth/send-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})})).ok)throw new Error("Failed to send verification code");i("code"),p(!1)}}catch(e){g(e.message),p(!1)}}else g("Please enter a valid email address")},y=async e=>{if(e.preventDefault(),g(""),a&&"123456"===s)return i("success"),void setTimeout((()=>{t({email:r,verified:!0})}),1e3);if(a)g("Invalid code. Use 123456 for testing.");else{p(!0);try{const e=await fetch("https://api2.onairos.uk/auth/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,code:s})});if(!e.ok)throw new Error("Invalid verification code");const a=await e.json();i("success"),setTimeout((()=>{t({email:r,verified:!0,token:a.token})}),1e3)}catch(e){g(e.message),p(!1)}}};return l.default.createElement("div",{className:"flex flex-col items-center space-y-6 p-6 w-full"},"email"===o&&l.default.createElement("div",{className:"flex flex-col items-center space-y-6 w-full"},l.default.createElement("div",{className:"flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full"},l.default.createElement(m,{className:"w-8 h-8 text-blue-600"})),l.default.createElement("div",{className:"text-center"},l.default.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Sign in to Onairos"),l.default.createElement("p",{className:"text-gray-600"},"Enter your email address to continue"),a&&l.default.createElement("p",{className:"text-sm text-blue-600 mt-2"},"Test mode: Any valid email will work")),l.default.createElement("form",{onSubmit:x,className:"w-full max-w-md space-y-4"},l.default.createElement("div",null,l.default.createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1"},"Email address"),l.default.createElement("input",{type:"email",id:"email",value:r,onChange:e=>n(e.target.value),placeholder:"Enter your email",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})),b&&l.default.createElement("p",{className:"text-sm text-red-600"},b),l.default.createElement("button",{type:"submit",disabled:f,className:"w-full py-3 px-4 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},f?l.default.createElement("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):l.default.createElement(l.default.Fragment,null,"Continue",l.default.createElement(d,{className:"ml-2 w-4 h-4"}))))),"code"===o&&l.default.createElement("div",{className:"flex flex-col items-center space-y-6 w-full"},l.default.createElement("div",{className:"flex items-center justify-center w-16 h-16 bg-green-100 rounded-full"},l.default.createElement(m,{className:"w-8 h-8 text-green-600"})),l.default.createElement("div",{className:"text-center"},l.default.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Check your email"),l.default.createElement("p",{className:"text-gray-600"},"We sent a verification code to"),l.default.createElement("p",{className:"text-gray-900 font-medium"},r),a&&l.default.createElement("p",{className:"text-sm text-blue-600 mt-2"},"Test mode: Use code 123456")),l.default.createElement("form",{onSubmit:y,className:"w-full max-w-md space-y-4"},l.default.createElement("div",null,l.default.createElement("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-1"},"Verification code"),l.default.createElement("input",{type:"text",id:"code",value:s,onChange:e=>c(e.target.value),placeholder:"Enter 6-digit code",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-center text-lg tracking-widest",maxLength:"6",required:!0})),b&&l.default.createElement("p",{className:"text-sm text-red-600"},b),l.default.createElement("button",{type:"submit",disabled:f,className:"w-full py-3 px-4 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},f?l.default.createElement("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):"Verify Code"),l.default.createElement("button",{type:"button",onClick:()=>i("email"),className:"w-full py-2 px-4 text-gray-600 hover:text-gray-800"},"Use a different email"))),"success"===o&&l.default.createElement("div",{className:"flex flex-col items-center space-y-6 w-full"},l.default.createElement("div",{className:"flex items-center justify-center w-16 h-16 bg-green-100 rounded-full"},l.default.createElement(u,{className:"w-8 h-8 text-green-600"})),l.default.createElement("div",{className:"text-center"},l.default.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Email verified!"),l.default.createElement("p",{className:"text-gray-600"},"Setting up your account...")),l.default.createElement("div",{className:"w-8 h-8"},l.default.createElement("div",{className:"animate-spin h-8 w-8 border-2 border-blue-600 rounded-full border-t-transparent"}))))}const p=i("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),b=i("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),g=i("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),x=i("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),y=i("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){N(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=typeof l)return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w=[{name:"YouTube",icon:"https://onairos.sirv.com/Images/youtube-icon.png",connected:!1,color:"#FF0000"},{name:"Reddit",icon:"https://onairos.sirv.com/Images/reddit-icon.png",connected:!1,color:"#FF4500"},{name:"Instagram",icon:"https://onairos.sirv.com/Images/instagram-icon.png",connected:!1,color:"#E1306C"},{name:"Pinterest",icon:"https://onairos.sirv.com/Images/pinterest-icon.png",connected:!1,color:"#E60023"},{name:"TikTok",icon:"https://onairos.sirv.com/Images/tiktok-icon.png",connected:!1,color:"#000000"}],v={CONNECT:"connect",PASSPHRASE:"passphrase",CONFIRM:"confirm",UNIFYING:"unifying"};function O(e){let{onComplete:t,appIcon:a}=e;const[r,n]=(0,l.useState)(w),[s,c]=(0,l.useState)(v.CONNECT),[o,i]=(0,l.useState)(0),[m,d]=(0,l.useState)(""),[f,h]=(0,l.useState)(""),[N,O]=(0,l.useState)(!1);(0,l.useEffect)((()=>{const e=e=>{e.data&&e.data.platform&&"success"===e.data.status&&n(r.map((t=>t.name.toLowerCase()===e.data.platform.toLowerCase()?E(E({},t),{},{connected:!0}):t)))};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}),[r]),(0,l.useEffect)((()=>{if(s===v.UNIFYING){const e=setInterval((()=>{i((a=>a>=100?(clearInterval(e),t(),100):a+2))}),100);return()=>clearInterval(e)}}),[s,t]);const k=()=>{r.some((e=>e.connected))&&c(v.PASSPHRASE)},C=()=>{(!m||m.length<8?(h("Passphrase must be at least 8 characters"),0):(h(""),1))&&c(v.CONFIRM)},S=async()=>{c(v.UNIFYING);try{if(!(await fetch("https://api2.onairos.uk/unify",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("onairosToken")),"Content-Type":"application/json"},body:JSON.stringify({platforms:r.filter((e=>e.connected)).map((e=>e.name.toLowerCase())),passphrase:m})})).ok)throw new Error("Failed to unify data")}catch(e){console.error("Failed to unify data:",e)}};return l.default.createElement("div",{className:"flex flex-col items-center space-y-6 p-6 w-full"},s===v.CONNECT&&l.default.createElement("div",{className:"flex flex-col items-center space-y-6 w-full"},l.default.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Connect Your Accounts"),l.default.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 w-full max-w-md"},l.default.createElement("div",{className:"flex items-start"},l.default.createElement(p,{className:"text-blue-500 mr-2 flex-shrink-0 mt-0.5",size:20}),l.default.createElement("p",{className:"text-sm text-blue-700"},"Your data is never shared with anyone. It's only used to train your personal model and is stored securely."))),l.default.createElement("div",{className:"grid grid-cols-2 gap-4 w-full max-w-md"},r.map((e=>l.default.createElement("button",{key:e.name,onClick:()=>(async e=>{try{O(!0),setTimeout((()=>{n(r.map((t=>t.name===e?E(E({},t),{},{connected:!0}):t))),O(!1)}),1e3)}catch(t){console.error("Failed to connect to ".concat(e,":"),t),O(!1)}})(e.name),disabled:N||e.connected,className:"flex flex-col items-center justify-center p-4 rounded-lg border transition-all ".concat(e.connected?"bg-green-50 border-green-500":"border-gray-300 hover:border-blue-500 hover:shadow-sm")},l.default.createElement("div",{className:"relative"},l.default.createElement("img",{src:e.icon,alt:e.name,className:"w-10 h-10 mb-2"}),e.connected&&l.default.createElement("div",{className:"absolute -top-1 -right-1 bg-green-500 rounded-full p-0.5"},l.default.createElement(u,{size:14,className:"text-white"}))),l.default.createElement("span",{className:"text-sm ".concat(e.connected?"text-green-600":"text-gray-700")},e.connected?"Connected":"Connect"))))),l.default.createElement("button",{onClick:k,disabled:!r.some((e=>e.connected)),className:"w-full max-w-md py-3 px-4 rounded-lg font-semibold transition-all ".concat(r.some((e=>e.connected))?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed")},"Continue"),l.default.createElement("p",{className:"text-xs text-gray-500 max-w-md text-center"},"Connect at least one account to create your personalized AI model")),s===v.PASSPHRASE&&l.default.createElement("div",{className:"flex flex-col items-center space-y-6 w-full"},l.default.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Create Your Secure Passphrase"),l.default.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 w-full max-w-md"},l.default.createElement("div",{className:"flex items-start"},l.default.createElement(b,{className:"text-blue-500 mr-2 flex-shrink-0 mt-0.5",size:20}),l.default.createElement("p",{className:"text-sm text-blue-700"},"Your passphrase is used to secure your model. We don't store it, so please remember it for future access."))),l.default.createElement("div",{className:"w-full max-w-md"},l.default.createElement("label",{htmlFor:"passphrase",className:"block text-sm font-medium text-gray-700 mb-1"},"8+ Character Passphrase"),l.default.createElement("input",{type:"password",id:"passphrase",value:m,onChange:e=>d(e.target.value),placeholder:"Enter your secure passphrase",className:"w-full p-3 border ".concat(f?"border-red-500":"border-gray-300"," rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none")}),f&&l.default.createElement("p",{className:"mt-1 text-sm text-red-600 flex items-center"},l.default.createElement(g,{size:14,className:"mr-1"})," ",f)),l.default.createElement("div",{className:"flex space-x-3 w-full max-w-md"},l.default.createElement("button",{onClick:()=>c(v.CONNECT),className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg font-semibold text-gray-700 hover:bg-gray-50"},"Back"),l.default.createElement("button",{onClick:C,className:"flex-1 py-3 px-4 bg-blue-500 rounded-lg font-semibold text-white hover:bg-blue-600"},"Continue"))),s===v.CONFIRM&&l.default.createElement("div",{className:"flex flex-col items-center space-y-6 w-full"},l.default.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Confirm Data Transfer"),l.default.createElement("div",{className:"flex justify-center items-center w-full max-w-md py-8"},l.default.createElement("div",{className:"relative flex items-center"},l.default.createElement("div",{className:"p-3 bg-gray-100 rounded-full"},l.default.createElement("img",{src:a||"https://onairos.sirv.com/Images/onairos-icon.png",alt:"App",className:"w-16 h-16 rounded-full"})),l.default.createElement("div",{className:"mx-4 animate-pulse"},l.default.createElement(x,{size:24,className:"text-blue-500"})),l.default.createElement("div",{className:"p-3 bg-blue-100 rounded-full"},l.default.createElement("img",{src:"https://onairos.sirv.com/Images/onairos-icon.png",alt:"Onairos",className:"w-16 h-16 rounded-full"})))),l.default.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 w-full max-w-md"},l.default.createElement("p",{className:"text-sm text-blue-700"},"You're about to securely send your data to Onairos to train your personal AI model. Your data is end-to-end encrypted with your passphrase and never shared with anyone.")),l.default.createElement("div",{className:"w-full max-w-md"},l.default.createElement("h3",{className:"font-medium text-gray-700 mb-2"},"Connected platforms:"),l.default.createElement("div",{className:"flex flex-wrap gap-2"},r.filter((e=>e.connected)).map((e=>l.default.createElement("div",{key:e.name,className:"flex items-center bg-green-50 border border-green-200 rounded-full px-3 py-1"},l.default.createElement("img",{src:e.icon,alt:e.name,className:"w-4 h-4 mr-1"}),l.default.createElement("span",{className:"text-sm text-green-700"},e.name)))))),l.default.createElement("div",{className:"flex space-x-3 w-full max-w-md"},l.default.createElement("button",{onClick:()=>c(v.PASSPHRASE),className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg font-semibold text-gray-700 hover:bg-gray-50"},"Back"),l.default.createElement("button",{onClick:S,className:"flex-1 py-3 px-4 bg-blue-500 rounded-lg font-semibold text-white hover:bg-blue-600"},"Confirm & Create Model")),l.default.createElement("p",{className:"text-xs text-gray-500 max-w-md text-center"},"By proceeding, you agree to Onairos' ",l.default.createElement("a",{href:"https://onairos.uk/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline flex items-center inline-flex"},"Privacy Policy ",l.default.createElement(y,{size:12,className:"ml-0.5"})))),s===v.UNIFYING&&l.default.createElement("div",{className:"flex flex-col items-center justify-center space-y-6 p-6"},l.default.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Creating Your Personal AI Model"),l.default.createElement("p",{className:"text-gray-600 text-center"},"Please wait while we securely process your information"),l.default.createElement("div",{className:"w-full max-w-md"},l.default.createElement("div",{className:"relative pt-1"},l.default.createElement("div",{className:"flex mb-2 items-center justify-between"},l.default.createElement("div",null,l.default.createElement("span",{className:"text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-blue-200"},"Progress")),l.default.createElement("div",{className:"text-right"},l.default.createElement("span",{className:"text-xs font-semibold inline-block text-blue-600"},o,"%"))),l.default.createElement("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-blue-200"},l.default.createElement("div",{style:{width:"".concat(o,"%")},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500 transition-all duration-500"})))),l.default.createElement("div",{className:"w-12 h-12 animate-spin"},l.default.createElement("svg",{className:"w-full h-full text-blue-500",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"currentColor",d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"}))),l.default.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 w-full max-w-md"},l.default.createElement("p",{className:"text-sm text-blue-700"},"Your data is being encrypted with your passphrase and securely processed. This may take a few minutes."))))}function k(e){let{onComplete:t,userEmail:a}=e;const[r,n]=(0,l.useState)(""),[s,c]=(0,l.useState)(""),[o,i]=(0,l.useState)("create"),[m,d]=(0,l.useState)(""),[f,p]=(0,l.useState)({length:!1,number:!1,uppercase:!1,lowercase:!1});(0,l.useEffect)((()=>{p({length:r.length>=6,number:/[0-9]/.test(r),uppercase:/[A-Z]/.test(r),lowercase:/[a-z]/.test(r)})}),[r]);const x=Object.values(f).every((e=>e)),y=e=>{e.preventDefault(),d(""),x?i("confirm"):d("Please meet all PIN requirements")},h=e=>{e.preventDefault(),d(""),r===s?(i("success"),setTimeout((()=>{t({pin:r,email:a,pinCreated:!0})}),1500)):d("PINs do not match")};return l.default.createElement("div",{className:"flex flex-col items-center space-y-6 p-6 w-full"},"create"===o&&l.default.createElement("div",{className:"flex flex-col items-center space-y-6 w-full"},l.default.createElement("div",{className:"flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full"},l.default.createElement(b,{className:"w-8 h-8 text-blue-600"})),l.default.createElement("div",{className:"text-center"},l.default.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Create Your PIN"),l.default.createElement("p",{className:"text-gray-600"},"Your PIN secures your Onairos account")),l.default.createElement("form",{onSubmit:y,className:"w-full max-w-md space-y-4"},l.default.createElement("div",null,l.default.createElement("label",{htmlFor:"pin",className:"block text-sm font-medium text-gray-700 mb-1"},"Create PIN"),l.default.createElement("input",{type:"password",id:"pin",value:r,onChange:e=>n(e.target.value),placeholder:"Enter your PIN",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})),l.default.createElement("div",{className:"space-y-2"},l.default.createElement("p",{className:"text-sm font-medium text-gray-700"},"PIN Requirements:"),Object.entries(f).map((e=>{let[t,a]=e;return l.default.createElement("div",{key:t,className:"flex items-center"},l.default.createElement("div",{className:"w-4 h-4 rounded-full mr-2 flex items-center justify-center ".concat(a?"bg-green-500":"bg-gray-300")},a&&l.default.createElement(u,{size:12,className:"text-white"})),l.default.createElement("span",{className:"text-sm ".concat(a?"text-green-600":"text-gray-600")},"length"===t?"At least 6 characters":"number"===t?"One number":"uppercase"===t?"One uppercase letter":"One lowercase letter"))}))),m&&l.default.createElement("div",{className:"flex items-center text-red-600 text-sm"},l.default.createElement(g,{size:16,className:"mr-1"}),m),l.default.createElement("button",{type:"submit",disabled:!x,className:"w-full py-3 px-4 rounded-lg font-semibold ".concat(x?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed")},"Continue"))),"confirm"===o&&l.default.createElement("div",{className:"flex flex-col items-center space-y-6 w-full"},l.default.createElement("div",{className:"flex items-center justify-center w-16 h-16 bg-orange-100 rounded-full"},l.default.createElement(b,{className:"w-8 h-8 text-orange-600"})),l.default.createElement("div",{className:"text-center"},l.default.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Confirm Your PIN"),l.default.createElement("p",{className:"text-gray-600"},"Enter your PIN again to confirm")),l.default.createElement("form",{onSubmit:h,className:"w-full max-w-md space-y-4"},l.default.createElement("div",null,l.default.createElement("label",{htmlFor:"confirmPin",className:"block text-sm font-medium text-gray-700 mb-1"},"Confirm PIN"),l.default.createElement("input",{type:"password",id:"confirmPin",value:s,onChange:e=>c(e.target.value),placeholder:"Re-enter your PIN",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})),m&&l.default.createElement("div",{className:"flex items-center text-red-600 text-sm"},l.default.createElement(g,{size:16,className:"mr-1"}),m),l.default.createElement("div",{className:"flex space-x-3"},l.default.createElement("button",{type:"button",onClick:()=>{i("create"),c(""),d("")},className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg font-semibold text-gray-700 hover:bg-gray-50"},"Back"),l.default.createElement("button",{type:"submit",className:"flex-1 py-3 px-4 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700"},"Create PIN")))),"success"===o&&l.default.createElement("div",{className:"flex flex-col items-center space-y-6 w-full"},l.default.createElement("div",{className:"flex items-center justify-center w-16 h-16 bg-green-100 rounded-full"},l.default.createElement(u,{className:"w-8 h-8 text-green-600"})),l.default.createElement("div",{className:"text-center"},l.default.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"PIN Created!"),l.default.createElement("p",{className:"text-gray-600"},"Your account is now secure")),l.default.createElement("div",{className:"w-8 h-8"},l.default.createElement("div",{className:"animate-spin h-8 w-8 border-2 border-blue-600 rounded-full border-t-transparent"}))))}const C=i("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),S=i("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){I(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=typeof l)return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function q(e){let{onComplete:t,userEmail:a,requestData:r}=e;const[n,s]=(0,l.useState)({}),[c,o]=(0,l.useState)(!1),i=(null==r?void 0:r.dataTypes)||[{id:"basic",name:"Basic Profile",description:"Name, email, and basic preferences",required:!0},{id:"preferences",name:"User Preferences",description:"App settings and customization preferences",required:!1},{id:"usage",name:"Usage Analytics",description:"How you interact with the application",required:!1}];return c?l.default.createElement("div",{className:"flex flex-col items-center space-y-6 p-6 w-full"},l.default.createElement("div",{className:"flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full"},l.default.createElement(C,{className:"w-8 h-8 text-blue-600"})),l.default.createElement("div",{className:"text-center"},l.default.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Processing Request"),l.default.createElement("p",{className:"text-gray-600"},"Setting up your data permissions...")),l.default.createElement("div",{className:"w-8 h-8"},l.default.createElement("div",{className:"animate-spin h-8 w-8 border-2 border-blue-600 rounded-full border-t-transparent"}))):l.default.createElement("div",{className:"flex flex-col items-center space-y-6 p-6 w-full"},l.default.createElement("div",{className:"flex items-center justify-center w-16 h-16 bg-green-100 rounded-full"},l.default.createElement(p,{className:"w-8 h-8 text-green-600"})),l.default.createElement("div",{className:"text-center"},l.default.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Data Access Request"),l.default.createElement("p",{className:"text-gray-600"},"Choose what data you'd like to share"),l.default.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Signed in as: ",a)),l.default.createElement("div",{className:"w-full max-w-md space-y-3"},i.map((e=>l.default.createElement("div",{key:e.id,className:"border rounded-lg p-4 ".concat(e.required?"border-blue-200 bg-blue-50":n[e.id]?"border-green-200 bg-green-50":"border-gray-200 bg-white")},l.default.createElement("div",{className:"flex items-start justify-between"},l.default.createElement("div",{className:"flex-1"},l.default.createElement("div",{className:"flex items-center"},l.default.createElement("h3",{className:"font-medium text-gray-900"},e.name),e.required&&l.default.createElement("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded"},"Required")),l.default.createElement("p",{className:"text-sm text-gray-600 mt-1"},e.description)),l.default.createElement("button",{onClick:()=>(e=>{const t=i.find((t=>t.id===e));null!=t&&t.required||s((t=>P(P({},t),{},{[e]:!t[e]})))})(e.id),disabled:e.required,className:"ml-3 w-6 h-6 rounded-full border-2 flex items-center justify-center ".concat(e.required||n[e.id]?"border-green-500 bg-green-500":"border-gray-300 bg-white hover:border-green-500"," ").concat(e.required?"cursor-default":"cursor-pointer")},(e.required||n[e.id])&&l.default.createElement(u,{size:14,className:"text-white"}))))))),l.default.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 w-full max-w-md"},l.default.createElement("div",{className:"flex items-start"},l.default.createElement(p,{className:"text-blue-500 mr-2 flex-shrink-0 mt-0.5",size:20}),l.default.createElement("div",null,l.default.createElement("p",{className:"text-sm text-blue-700 font-medium"},"Your data is secure"),l.default.createElement("p",{className:"text-xs text-blue-600 mt-1"},"We use industry-standard encryption and never share your data with third parties.")))),l.default.createElement("div",{className:"flex space-x-3 w-full max-w-md"},l.default.createElement("button",{onClick:()=>{t({approved:!1,email:a,timestamp:(new Date).toISOString()})},className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg font-semibold text-gray-700 hover:bg-gray-50 flex items-center justify-center"},l.default.createElement(S,{size:16,className:"mr-1"}),"Deny"),l.default.createElement("button",{onClick:async()=>{o(!0);const e=i.filter((e=>e.required||n[e.id])).map((e=>e.id));setTimeout((()=>{t({approved:!0,dataTypes:e,email:a,timestamp:(new Date).toISOString()})}),2e3)},className:"flex-1 py-3 px-4 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 flex items-center justify-center"},l.default.createElement(u,{size:16,className:"mr-1"}),"Approve")),l.default.createElement("p",{className:"text-xs text-gray-500 max-w-md text-center"},"You can change these permissions anytime in your account settings."))}function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){D(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=typeof l)return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function R(e){let{requestData:t,webpageName:a,inferenceData:r=null,onComplete:n=null,autoFetch:s=!0,proofMode:c=!1,textLayout:o="below",textColor:i="white",login:m=!1,buttonType:d="pill",loginReturn:u=null,loginType:p="signIn",visualType:b="full"}=e;const[g,x]=(0,l.useState)(!1),[y,h]=(0,l.useState)("email"),[E,N]=(0,l.useState)(null),[w,v]=(0,l.useState)(!1),[C,S]=(0,l.useState)(null);(0,l.useEffect)((()=>{(()=>{const e=localStorage.getItem("onairosUser");if(e)try{const t=JSON.parse(e);N(t),t.onboardingComplete&&t.pinCreated?h("dataRequest"):t.verified&&!t.onboardingComplete?h("onboarding"):t.onboardingComplete&&!t.pinCreated&&h("pin")}catch(e){console.error("Error parsing saved user data:",e),localStorage.removeItem("onairosUser")}})()}),[]);const j=e=>{console.log("Email auth successful:",e);const t=A(A({},e),{},{verified:!0,onboardingComplete:!1,pinCreated:!1});N(t),localStorage.setItem("onairosUser",JSON.stringify(t)),h("onboarding")},P=()=>{console.log("Onboarding completed");const e=A(A({},E),{},{onboardingComplete:!0});N(e),localStorage.setItem("onairosUser",JSON.stringify(e)),h("pin")},I=e=>{console.log("PIN setup completed:",e);const t=A(A(A({},E),e),{},{pinCreated:!0});N(t),localStorage.setItem("onairosUser",JSON.stringify(t)),h("dataRequest")},T=e=>{console.log("Data request completed:",e);const t=A(A({},E),{},{lastDataRequest:e});N(t),localStorage.setItem("onairosUser",JSON.stringify(t)),x(!1),n&&n(e)},D="flex items-center justify-center font-bold rounded cursor-pointer ".concat("pill"===d?"px-4 py-2":"w-12 h-12"," bg-transparent OnairosConnect"),R={flexDirection:"below"===o?"column":"row",backgroundColor:"transparent",color:i,border:"1px solid transparent"},z={width:"20px",height:"20px",marginRight:"full"===b?"12px":"0"};return l.default.createElement("div",{className:"flex items-center justify-center"},l.default.createElement("button",{className:D,onClick:async()=>{try{console.log("ðŸ”¥ openTerminal called - showing overlay"),x(!0),console.log("ðŸ”¥ setShowOverlay(true) called")}catch(e){console.error("Error in openTerminal:",e)}},style:R},("full"===b||"icon"===b)&&l.default.createElement("img",{src:"https://onairos.sirv.com/Images/OnairosBlack.png",alt:"Onairos Logo",style:z,className:"".concat("pill"===d?"w-6 h-6":"w-8 h-8"," object-contain")}),("full"===b||"textOnly"===b)&&l.default.createElement("span",{className:"".concat("black"===i?"text-black":"text-white"," ").concat("icon"===b?"sr-only":""," ").concat("right"===o?"ml-2":"left"===o?"mr-2":"")},(()=>{switch(p){case"signUp":return"Sign Up with Onairos";case"signOut":return"Sign Out of Onairos";default:return"Sign In with Onairos"}})())),g&&l.default.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},console.log("ðŸ”¥ Rendering overlay!"),l.default.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto"},l.default.createElement("div",{className:"flex justify-between items-center p-4 border-b"},l.default.createElement("h2",{className:"text-lg font-semibold"},"email"===y&&"Connect with Onairos","onboarding"===y&&"Account Setup","pin"===y&&"Secure Your Account","dataRequest"===y&&"Data Access Request"),l.default.createElement("button",{onClick:()=>{x(!1),S(null)},className:"text-gray-500 hover:text-gray-700 text-xl font-bold"},"Ã—")),l.default.createElement("div",{className:"p-4"},C&&l.default.createElement("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg"},l.default.createElement("p",{className:"text-red-700 text-sm"},C)),(()=>{switch(y){case"email":return l.default.createElement(f,{onSuccess:j,testMode:!0});case"onboarding":return l.default.createElement(O,{onComplete:P,appIcon:"https://onairos.sirv.com/Images/OnairosBlack.png"});case"pin":return l.default.createElement(k,{onComplete:I,userEmail:null==E?void 0:E.email});case"dataRequest":return l.default.createElement(q,{onComplete:T,userEmail:null==E?void 0:E.email,requestData:t});default:return l.default.createElement("div",{className:"flex flex-col items-center space-y-4 p-6"},l.default.createElement("div",{className:"animate-spin h-8 w-8 border-2 border-blue-600 rounded-full border-t-transparent"}),l.default.createElement("p",{className:"text-gray-600"},"Loading..."))}})()))))}function z(e){return l.default.createElement(l.default.Fragment,null,l.default.createElement(R,e))}const F=z;var M=a._,Y=a.Z;export{M as Onairos,Y as default};
//# sourceMappingURL=onairos.esm.js.map